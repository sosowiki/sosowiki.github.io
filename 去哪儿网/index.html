<!DOCTYPE html>
<html  lang="zh">
<head>
    <meta charset="utf-8" />

<meta name="generator" content="Hexo 3.8.0" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>去哪儿网 - SOSOWIKI</title>


    <meta name="description" content="去哪儿网">
<meta name="keywords" content="面试,去哪儿网">
<meta property="og:type" content="article">
<meta property="og:title" content="去哪儿网">
<meta property="og:url" content="http://soso.wiki/去哪儿网/index.html">
<meta property="og:site_name" content="SOSOWIKI">
<meta property="og:description" content="去哪儿网">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://soso.wiki/images/og_image.png">
<meta property="og:updated_time" content="2024-08-07T07:39:50.610Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="去哪儿网">
<meta name="twitter:description" content="去哪儿网">
<meta name="twitter:image" content="http://soso.wiki/images/og_image.png">







<link rel="icon" href="/images/favicon.jpeg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
<script>
var _hmt = _hmt || [];
(function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?b07e5a4ee78cf8302e7e2cf5b9db7f2c";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
})();
</script>

    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-1-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo-2.png" alt="去哪儿网" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">首页</a>
                
                <a class="navbar-item"
                href="/archives">归档</a>
                
                <a class="navbar-item"
                href="/tags">标签</a>
                
                <a class="navbar-item"
                href="/about">关于</a>
                
            </div>
            
            <div class="navbar-end">
                
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-12 has-order-2 column-main"><div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2024-07-31T03:00:00.000Z">2024-07-31</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/面试题/">面试题</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    29 分钟 读完 (大约 4387 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                去哪儿网
            
        </h1>
        <div class="content">
            <p>去哪儿网<br><a id="more"></a><br>1.项目</p>
<ul>
<li><p>降低三方 App 接入成本怎么做的？</p>
</li>
<li><p>加载速度优化怎么做的？主要是从业务逻辑纬度处理的？</p>
</li>
<li><p>异常监控怎么做的？</p>
</li>
<li><p>动态库版式缩放怎么实现的？</p>
</li>
</ul>
<p>2.线上闪退捕获怎么做的？有没有捕获不到的异常，watchdog 能捕获吗？APM 性能监控</p>
<p>3.RN 是怎么实现的？跨端还了解哪些？Flutter是怎么实现的，为什么说 Flutter 的性能比 RN 好？</p>
<p>4.H5 和原生通信有哪些方法？</p>
<p>5.怎么提升 webView 的加载速度，使其接近原生？大的图片、JS 等端上下载后，怎么交给H5使用</p>
<p>6.小程序是怎么实现的？</p>
<p>7.前端 JS 的异步是怎么实现的？</p>
<p>8.项目亮点</p>
<h2 id="参考答案"><a href="#参考答案" class="headerlink" title="参考答案"></a>参考答案</h2><p>(GPT)</p>
<h2 id="1-项目"><a href="#1-项目" class="headerlink" title="1.项目"></a>1.项目</h2><ul>
<li><p>降低三方 App 接入成本怎么做的？</p>
</li>
<li><p>加载速度优化怎么做的？主要是从业务逻辑纬度处理的？</p>
</li>
<li><p>异常监控怎么做的？</p>
</li>
<li><p>动态库版式缩放怎么实现的？</p>
</li>
</ul>
<h2 id="2-线上闪退捕获怎么做的？有没有捕获不到的异常，watchdog能捕获吗？APM-性能监控"><a href="#2-线上闪退捕获怎么做的？有没有捕获不到的异常，watchdog能捕获吗？APM-性能监控" class="headerlink" title="2.线上闪退捕获怎么做的？有没有捕获不到的异常，watchdog能捕获吗？APM 性能监控"></a>2.线上闪退捕获怎么做的？有没有捕获不到的异常，watchdog能捕获吗？APM 性能监控</h2><p><a href="https://www.jianshu.com/p/8123fc17fe0e" target="_blank" rel="noopener">移动端监控体系之技术原理剖析</a></p>
<p><a href="https://www.jianshu.com/p/29051908c74b" target="_blank" rel="noopener">iOS Crash 捕获及堆栈符号化思路剖析</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/614227556" target="_blank" rel="noopener">知乎-iOS云音乐APM性能监控实践</a></p>
<h2 id="3-RN-是怎么实现的？跨端还了解哪些？Flutter-是怎么实现的，为什么说-Flutter-的性能比-RN-好？"><a href="#3-RN-是怎么实现的？跨端还了解哪些？Flutter-是怎么实现的，为什么说-Flutter-的性能比-RN-好？" class="headerlink" title="3.RN 是怎么实现的？跨端还了解哪些？Flutter 是怎么实现的，为什么说 Flutter 的性能比 RN 好？"></a>3.RN 是怎么实现的？跨端还了解哪些？Flutter 是怎么实现的，为什么说 Flutter 的性能比 RN 好？</h2><p>React Native 通过 JavaScript 和原生代码之间的桥接，实现了跨平台的移动应用开发。其核心是通过 Bridge 在 JavaScript 和原生线程之间进行通信，使用 React 构建用户界面，并通过 Yoga 引擎处理布局。这样，开发者可以使用熟悉的 JavaScript 和 React 技术栈来构建高性能的移动应用，同时享受原生性能和体验。</p>
<p>Flutter 通过使用 Dart 语言、Skia 图形引擎和自定义的渲染引擎，实现了跨平台的高性能应用开发。其核心是完全自行绘制界面，不依赖于平台的原生控件，提供了一种一致的开发体验和用户体验。Flutter 的 Widget 系统、渲染树、状态管理和平台通道等机制，使其能够高效地构建复杂的跨平台应用。</p>
<p>Flutter 和 React Native（RN）是两种流行的跨平台移动应用开发框架，各有其优点和缺点。性能是评估这两种框架的一个重要方面。以下是从多个角度对 Flutter 和 React Native 性能的比较：</p>
<h3 id="1-启动时间"><a href="#1-启动时间" class="headerlink" title="1. 启动时间"></a>1. <strong>启动时间</strong></h3><ul>
<li><strong>Flutter</strong>: Flutter 应用的启动时间通常较快，因为 Flutter 使用了 AOT（Ahead-of-Time）编译，将 Dart 代码编译成了原生 ARM 代码。在启动时，无需进行额外的解释或编译步骤。</li>
<li><strong>React Native</strong>: React Native 应用的启动时间可能稍慢一些，因为它依赖于 JavaScriptCore（iOS）或 Hermes 引擎（Android）来解释和执行 JavaScript 代码。尽管 Hermes 引擎在某些情况下可以减少启动时间，但它仍然需要一些初始化步骤。</li>
</ul>
<h3 id="2-UI-渲染性能"><a href="#2-UI-渲染性能" class="headerlink" title="2. UI 渲染性能"></a>2. <strong>UI 渲染性能</strong></h3><ul>
<li><strong>Flutter</strong>: Flutter 使用 Skia 图形引擎直接绘制到屏幕上，这使得 Flutter 可以提供非常流畅的 UI 渲染性能。Flutter 的渲染是逐帧进行的，通常可以达到 60fps 或 120fps。</li>
<li><strong>React Native</strong>: React Native 依赖于原生平台的控件和组件进行渲染，通过 Bridge 进行 JavaScript 和原生代码的通信。这种桥接机制可能会导致一定的性能瓶颈，特别是在处理复杂动画和大量 UI 更新时。</li>
</ul>
<h3 id="3-动画性能"><a href="#3-动画性能" class="headerlink" title="3. 动画性能"></a>3. <strong>动画性能</strong></h3><ul>
<li><strong>Flutter</strong>: Flutter 的动画性能通常非常出色，因为动画是在 Flutter 的渲染引擎中直接处理的，没有额外的通信开销。Flutter 提供了丰富的动画库和工具，使开发者可以轻松创建复杂和流畅的动画。</li>
<li><strong>React Native</strong>: React Native 的动画性能在某些情况下可能不如 Flutter，因为动画需要通过 Bridge 进行通信。虽然 React Native 提供了 Animated API 和 Reanimated 库来优化动画性能，但在处理非常复杂的动画时，可能仍然会遇到性能问题。</li>
</ul>
<h3 id="4-内存使用"><a href="#4-内存使用" class="headerlink" title="4. 内存使用"></a>4. <strong>内存使用</strong></h3><ul>
<li><strong>Flutter</strong>: Flutter 的内存使用通常较为高效，但由于它将整个 UI 树都保持在内存中，内存占用可能会随着应用复杂度的增加而增加。</li>
<li><strong>React Native</strong>: React Native 的内存使用也比较高效，不过由于 JavaScript 运行时和 Bridge 的存在，可能会引入额外的内存开销。</li>
</ul>
<h3 id="5-开发体验"><a href="#5-开发体验" class="headerlink" title="5. 开发体验"></a>5. <strong>开发体验</strong></h3><ul>
<li><strong>Flutter</strong>: Flutter 提供了热重载（Hot Reload）功能，使开发者可以快速看到代码修改的效果，极大地提高了开发效率。Flutter 的热重载通常速度非常快，体验流畅。</li>
<li><strong>React Native</strong>: React Native 也提供了热重载和快速刷新（Fast Refresh）功能，不过在某些情况下，热重载的速度可能不如 Flutter 快。</li>
</ul>
<h3 id="6-跨平台一致性"><a href="#6-跨平台一致性" class="headerlink" title="6. 跨平台一致性"></a>6. <strong>跨平台一致性</strong></h3><ul>
<li><strong>Flutter</strong>: 由于 Flutter 使用了自定义的绘图引擎，它在不同平台上的外观和行为非常一致，开发者可以更加精确地控制 UI 的细节。</li>
<li><strong>React Native</strong>: React Native 使用的是平台原生控件，虽然这意味着它在不同平台上能提供更原生的体验，但也可能导致不同平台之间的外观和行为不一致。</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul>
<li><strong>Flutter</strong> 在 UI 渲染性能、动画性能和跨平台一致性方面通常优于 React Native。其高效的渲染引擎和 AOT 编译使得 Flutter 应用的启动时间和运行性能都非常出色。</li>
<li><strong>React Native</strong> 在使用原生控件和访问原生平台功能方面有优势，可以提供更原生的用户体验。不过，由于 JavaScript 和原生代码之间的桥接机制，可能会在某些场景下遇到性能瓶颈。</li>
</ul>
<p>最终选择哪个框架，取决于具体项目的需求和开发团队的技术栈。如果需要非常高性能、流畅的动画和一致的跨平台体验，Flutter 可能是更好的选择。如果需要更原生的外观和感觉，或者开发团队已经熟悉 JavaScript 和 React 生态系统，React Native 可能更适合。</p>
<h2 id="4-H5-和原生通信有哪些方法？"><a href="#4-H5-和原生通信有哪些方法？" class="headerlink" title="4.H5 和原生通信有哪些方法？"></a>4.H5 和原生通信有哪些方法？</h2><h3 id="1-通过-URL-Schemes"><a href="#1-通过-URL-Schemes" class="headerlink" title="1. 通过 URL Schemes"></a>1. <strong>通过 URL Schemes</strong></h3><p>URL Schemes 是一种通过特定 URL 格式触发原生代码的方法。</p>
<h3 id="2-通过-WKScriptMessageHandler"><a href="#2-通过-WKScriptMessageHandler" class="headerlink" title="2. 通过 WKScriptMessageHandler"></a>2. <strong>通过 <code>WKScriptMessageHandler</code></strong></h3><p><code>WKScriptMessageHandler</code> 是 WKWebView 提供的用于接收来自 JavaScript 消息的处理器。</p>
<h4 id="H5-代码"><a href="#H5-代码" class="headerlink" title="H5 代码"></a>H5 代码</h4><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-built_in">window</span>.webkit.messageHandlers.myHandler.postMessage(&#123;<span class="hljs-attr">key</span>: <span class="hljs-string">'value'</span>&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="iOS-代码"><a href="#iOS-代码" class="headerlink" title="iOS 代码"></a>iOS 代码</h4><p>在 <code>WKWebView</code> 的配置中添加一个脚本消息处理器：</p>
<figure class="highlight swift hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> WebKit</span><br><span class="line"></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ViewController</span>: <span class="hljs-title">UIViewController</span>, <span class="hljs-title">WKScriptMessageHandler</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">var</span> webView: <span class="hljs-type">WKWebView</span>!</span><br><span class="line">    </span><br><span class="line">    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">viewDidLoad</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">        <span class="hljs-keyword">super</span>.viewDidLoad()</span><br><span class="line">        </span><br><span class="line">        <span class="hljs-keyword">let</span> config = <span class="hljs-type">WKWebViewConfiguration</span>()</span><br><span class="line">        config.userContentController.add(<span class="hljs-keyword">self</span>, name: <span class="hljs-string">"myHandler"</span>)</span><br><span class="line">        </span><br><span class="line">        webView = <span class="hljs-type">WKWebView</span>(frame: <span class="hljs-keyword">self</span>.view.frame, configuration: config)</span><br><span class="line">        <span class="hljs-keyword">self</span>.view.addSubview(webView)</span><br><span class="line">        </span><br><span class="line">        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> url = <span class="hljs-type">URL</span>(string: <span class="hljs-string">"https://yourwebsite.com"</span>) &#123;</span><br><span class="line">            webView.load(<span class="hljs-type">URLRequest</span>(url: url))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">userContentController</span><span class="hljs-params">(<span class="hljs-number">_</span> userContentController: WKUserContentController, didReceive message: WKScriptMessage)</span></span> &#123;</span><br><span class="line">        <span class="hljs-keyword">if</span> message.name == <span class="hljs-string">"myHandler"</span> &#123;</span><br><span class="line">            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> body = message.body <span class="hljs-keyword">as</span>? [<span class="hljs-type">String</span>: <span class="hljs-type">Any</span>] &#123;</span><br><span class="line">                <span class="hljs-built_in">print</span>(<span class="hljs-string">"Message from H5: \(body)"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-通过-evaluateJavaScript"><a href="#3-通过-evaluateJavaScript" class="headerlink" title="3. 通过 evaluateJavaScript"></a>3. <strong>通过 <code>evaluateJavaScript</code></strong></h3><p>iOS 可以通过 <code>evaluateJavaScript</code> 方法执行 H5 页面上的 JavaScript 代码。</p>
<h4 id="iOS-代码-1"><a href="#iOS-代码-1" class="headerlink" title="iOS 代码"></a>iOS 代码</h4><figure class="highlight swift hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">webView.evaluateJavaScript(<span class="hljs-string">"javascriptFunctionName('argument')"</span>) &#123; (result, error) <span class="hljs-keyword">in</span></span><br><span class="line">    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error = error &#123;</span><br><span class="line">        <span class="hljs-built_in">print</span>(<span class="hljs-string">"JavaScript evaluation error: \(error)"</span>)</span><br><span class="line">    &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">        <span class="hljs-built_in">print</span>(<span class="hljs-string">"JavaScript evaluation result: \(String(describing: result))"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-通过-WebView-的-loadHTMLString-或-load-方法"><a href="#4-通过-WebView-的-loadHTMLString-或-load-方法" class="headerlink" title="4. 通过 WebView 的 loadHTMLString 或 load 方法"></a>4. <strong>通过 WebView 的 <code>loadHTMLString</code> 或 <code>load</code> 方法</strong></h3><p>你可以通过 <code>loadHTMLString</code> 或 <code>load</code> 方法将 HTML 内容直接加载到 WebView 中，并在 HTML 中嵌入 JavaScript 代码与原生代码进行通信。</p>
<h2 id="5-怎么提升-webView-的加载速度，使其接近原生？大的图片、js等端上下载后，怎么交给H5使用"><a href="#5-怎么提升-webView-的加载速度，使其接近原生？大的图片、js等端上下载后，怎么交给H5使用" class="headerlink" title="5.怎么提升 webView 的加载速度，使其接近原生？大的图片、js等端上下载后，怎么交给H5使用"></a>5.怎么提升 webView 的加载速度，使其接近原生？大的图片、js等端上下载后，怎么交给H5使用</h2><h3 id="1-预加载（Preloading）"><a href="#1-预加载（Preloading）" class="headerlink" title="1. 预加载（Preloading）"></a>1. 预加载（Preloading）</h3><ul>
<li><strong>提前加载 WebView</strong>：在用户访问页面之前，提前初始化和加载 WebView。这样用户点击时，内容已经部分或全部加载完毕。</li>
<li><strong>使用缓存</strong>：利用缓存机制来存储常用资源，减少重复加载。</li>
</ul>
<h3 id="2-优化资源"><a href="#2-优化资源" class="headerlink" title="2. 优化资源"></a>2. 优化资源</h3><ul>
<li><strong>减少请求数量</strong>：合并 CSS、JavaScript 文件，减少 HTTP 请求次数。</li>
<li><strong>压缩资源</strong>：使用 gzip 或 brotli 压缩 HTML、CSS 和 JavaScript 文件。</li>
<li><strong>图片优化</strong>：压缩图片，使用适当的图片格式（如 WebP），并考虑使用延迟加载（lazy loading）。</li>
</ul>
<h3 id="3-使用-WKWebView"><a href="#3-使用-WKWebView" class="headerlink" title="3. 使用 WKWebView"></a>3. 使用 WKWebView</h3><ul>
<li><strong>选择 WKWebView</strong>：相比 UIWebView，WKWebView 提供了更好的性能和更低的内存占用。确保你的应用使用的是 WKWebView。</li>
</ul>
<h3 id="4-加载策略"><a href="#4-加载策略" class="headerlink" title="4. 加载策略"></a>4. 加载策略</h3><ul>
<li><strong>懒加载</strong>：对于不在视口内的内容，使用懒加载技术，只在需要时才加载这些资源。</li>
<li><strong>异步加载</strong>：将 JavaScript 脚本放在页面底部或者使用 <code>defer</code> 和 <code>async</code> 属性异步加载脚本，避免阻塞页面渲染。</li>
</ul>
<h3 id="5-优化代码"><a href="#5-优化代码" class="headerlink" title="5. 优化代码"></a>5. 优化代码</h3><ul>
<li><strong>减少 DOM 操作</strong>：过多或复杂的 DOM 操作会降低渲染速度，优化前端代码，减少不必要的 DOM 操作。</li>
<li><strong>避免重排（Reflow）和重绘（Repaint）</strong>：尽量减少和优化需要重排和重绘的操作。</li>
</ul>
<h3 id="6-使用本地资源"><a href="#6-使用本地资源" class="headerlink" title="6. 使用本地资源"></a>6. 使用本地资源</h3><ul>
<li><strong>本地化资源</strong>：将常用的 CSS 和 JavaScript 文件内嵌到应用中，避免从远程服务器加载。</li>
<li><strong>Service Worker</strong>：虽然 iOS 对 Service Worker 的支持不如 Android，但可以利用它在支持的场景下缓存资源，提高加载速度。</li>
</ul>
<h3 id="7-网络优化"><a href="#7-网络优化" class="headerlink" title="7. 网络优化"></a>7. 网络优化</h3><ul>
<li><strong>CDN</strong>：使用内容分发网络（CDN）来加速资源加载。</li>
<li><strong>HTTP/2</strong>：使用 HTTP/2 协议来降低延迟和提升加载速度。</li>
</ul>
<h3 id="8-确保设备性能"><a href="#8-确保设备性能" class="headerlink" title="8. 确保设备性能"></a>8. 确保设备性能</h3><ul>
<li><strong>内存优化</strong>：确保 WebView 不会消耗过多内存，避免在低内存设备上崩溃或变慢。</li>
<li><strong>性能监控</strong>：定期监控应用的性能，并根据实际数据进行优化。</li>
</ul>
<h3 id="9-使用-SPA-Single-Page-Application"><a href="#9-使用-SPA-Single-Page-Application" class="headerlink" title="9. 使用 SPA (Single Page Application)"></a>9. 使用 SPA (Single Page Application)</h3><ul>
<li><strong>单页应用</strong>：如果你的应用逻辑允许，考虑将 Web 应用改为单页应用（SPA），减少页面跳转时间，并通过前端路由管理页面状态。</li>
</ul>
<h3 id="10-其他优化"><a href="#10-其他优化" class="headerlink" title="10. 其他优化"></a>10. 其他优化</h3><ul>
<li><strong>Lazy Load</strong>：对图片和其他资源使用懒加载技术。</li>
<li><strong>减少动画和特效</strong>：过多的动画和特效会增加 CPU 和 GPU 的负担，尽量减少或优化这些效果。</li>
</ul>
<p>通过综合以上方法，逐步优化 WebView 的加载速度，可以显著提升用户体验，使其接近原生应用的性能。</p>
<h3 id="1-预加载并注入资源"><a href="#1-预加载并注入资源" class="headerlink" title="1. 预加载并注入资源"></a>1. 预加载并注入资源</h3><p>在 WKWebView 初始化时，可以预先加载本地下载的资源，并通过 JavaScript 注入到网页中。</p>
<h4 id="示例代码："><a href="#示例代码：" class="headerlink" title="示例代码："></a>示例代码：</h4><figure class="highlight swift hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> WebKit</span><br><span class="line"></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ViewController</span>: <span class="hljs-title">UIViewController</span>, <span class="hljs-title">WKNavigationDelegate</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">var</span> webView: <span class="hljs-type">WKWebView</span>!</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">viewDidLoad</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">        <span class="hljs-keyword">super</span>.viewDidLoad()</span><br><span class="line">        </span><br><span class="line">        <span class="hljs-keyword">let</span> webConfiguration = <span class="hljs-type">WKWebViewConfiguration</span>()</span><br><span class="line">        webView = <span class="hljs-type">WKWebView</span>(frame: .zero, configuration: webConfiguration)</span><br><span class="line">        webView.navigationDelegate = <span class="hljs-keyword">self</span></span><br><span class="line">        view.addSubview(webView)</span><br><span class="line">        </span><br><span class="line">        <span class="hljs-comment">// 加载本地 HTML 文件</span></span><br><span class="line">        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> localHTMLUrl = <span class="hljs-type">Bundle</span>.main.url(forResource: <span class="hljs-string">"index"</span>, withExtension: <span class="hljs-string">"html"</span>) &#123;</span><br><span class="line">            webView.loadFileURL(localHTMLUrl, allowingReadAccessTo: localHTMLUrl.deletingLastPathComponent())</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="hljs-comment">// 注入本地 JavaScript 文件</span></span><br><span class="line">        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> localJSUrl = <span class="hljs-type">Bundle</span>.main.url(forResource: <span class="hljs-string">"script"</span>, withExtension: <span class="hljs-string">"js"</span>),</span><br><span class="line">           <span class="hljs-keyword">let</span> localJSContent = <span class="hljs-keyword">try</span>? <span class="hljs-type">String</span>(contentsOf: localJSUrl) &#123;</span><br><span class="line">            <span class="hljs-keyword">let</span> userScript = <span class="hljs-type">WKUserScript</span>(source: localJSContent, injectionTime: .atDocumentStart, forMainFrameOnly: <span class="hljs-literal">true</span>)</span><br><span class="line">            webView.configuration.userContentController.addUserScript(userScript)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-使用自定义-URL-Scheme"><a href="#2-使用自定义-URL-Scheme" class="headerlink" title="2. 使用自定义 URL Scheme"></a>2. 使用自定义 URL Scheme</h3><p>通过自定义 URL Scheme，将本地资源提供给 WebView。</p>
<h4 id="示例代码：-1"><a href="#示例代码：-1" class="headerlink" title="示例代码："></a>示例代码：</h4><figure class="highlight swift hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> WebKit</span><br><span class="line"></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ViewController</span>: <span class="hljs-title">UIViewController</span>, <span class="hljs-title">WKNavigationDelegate</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">var</span> webView: <span class="hljs-type">WKWebView</span>!</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">viewDidLoad</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">        <span class="hljs-keyword">super</span>.viewDidLoad()</span><br><span class="line">        </span><br><span class="line">        <span class="hljs-keyword">let</span> webConfiguration = <span class="hljs-type">WKWebViewConfiguration</span>()</span><br><span class="line">        webView = <span class="hljs-type">WKWebView</span>(frame: .zero, configuration: webConfiguration)</span><br><span class="line">        webView.navigationDelegate = <span class="hljs-keyword">self</span></span><br><span class="line">        webView.uiDelegate = <span class="hljs-keyword">self</span></span><br><span class="line">        view.addSubview(webView)</span><br><span class="line">        </span><br><span class="line">        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> localHTMLUrl = <span class="hljs-type">Bundle</span>.main.url(forResource: <span class="hljs-string">"index"</span>, withExtension: <span class="hljs-string">"html"</span>) &#123;</span><br><span class="line">            webView.loadFileURL(localHTMLUrl, allowingReadAccessTo: localHTMLUrl.deletingLastPathComponent())</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="hljs-keyword">let</span> schemeHandler = <span class="hljs-type">LocalSchemeHandler</span>()</span><br><span class="line">        webConfiguration.setURLSchemeHandler(schemeHandler, forURLScheme: <span class="hljs-string">"myapp"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> url = <span class="hljs-type">URL</span>(string: <span class="hljs-string">"myapp://localResource/script.js"</span>) &#123;</span><br><span class="line">            webView.load(<span class="hljs-type">URLRequest</span>(url: url))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LocalSchemeHandler</span>: <span class="hljs-title">NSObject</span>, <span class="hljs-title">WKURLSchemeHandler</span> </span>&#123;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">webView</span><span class="hljs-params">(<span class="hljs-number">_</span> webView: WKWebView, start urlSchemeTask: WKURLSchemeTask)</span></span> &#123;</span><br><span class="line">        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> url = urlSchemeTask.request.url, url.scheme == <span class="hljs-string">"myapp"</span> &#123;</span><br><span class="line">            <span class="hljs-keyword">if</span> url.path == <span class="hljs-string">"/localResource/script.js"</span>,</span><br><span class="line">               <span class="hljs-keyword">let</span> filePath = <span class="hljs-type">Bundle</span>.main.path(forResource: <span class="hljs-string">"script"</span>, ofType: <span class="hljs-string">"js"</span>) &#123;</span><br><span class="line">                <span class="hljs-keyword">let</span> data = <span class="hljs-keyword">try</span>? <span class="hljs-type">Data</span>(contentsOf: <span class="hljs-type">URL</span>(fileURLWithPath: filePath))</span><br><span class="line">                <span class="hljs-keyword">let</span> response = <span class="hljs-type">URLResponse</span>(url: url, mimeType: <span class="hljs-string">"application/javascript"</span>, expectedContentLength: data?.<span class="hljs-built_in">count</span> ?? <span class="hljs-number">0</span>, textEncodingName: <span class="hljs-literal">nil</span>)</span><br><span class="line">                urlSchemeTask.didReceive(response)</span><br><span class="line">                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> data = data &#123;</span><br><span class="line">                    urlSchemeTask.didReceive(data)</span><br><span class="line">                &#125;</span><br><span class="line">                urlSchemeTask.didFinish()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">webView</span><span class="hljs-params">(<span class="hljs-number">_</span> webView: WKWebView, stop urlSchemeTask: WKURLSchemeTask)</span></span> &#123;</span><br><span class="line">        <span class="hljs-comment">// Handle task stopping if needed</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-使用-Base64-编码"><a href="#3-使用-Base64-编码" class="headerlink" title="3. 使用 Base64 编码"></a>3. 使用 Base64 编码</h3><p>将本地资源转换成 Base64 编码，然后通过 JavaScript 将其注入到网页中。</p>
<h4 id="示例代码：-2"><a href="#示例代码：-2" class="headerlink" title="示例代码："></a>示例代码：</h4><figure class="highlight swift hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> WebKit</span><br><span class="line"></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ViewController</span>: <span class="hljs-title">UIViewController</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">var</span> webView: <span class="hljs-type">WKWebView</span>!</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">viewDidLoad</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">        <span class="hljs-keyword">super</span>.viewDidLoad()</span><br><span class="line">        </span><br><span class="line">        webView = <span class="hljs-type">WKWebView</span>(frame: <span class="hljs-keyword">self</span>.view.frame)</span><br><span class="line">        <span class="hljs-keyword">self</span>.view.addSubview(webView)</span><br><span class="line">        </span><br><span class="line">        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> localHTMLUrl = <span class="hljs-type">Bundle</span>.main.url(forResource: <span class="hljs-string">"index"</span>, withExtension: <span class="hljs-string">"html"</span>) &#123;</span><br><span class="line">            webView.loadFileURL(localHTMLUrl, allowingReadAccessTo: localHTMLUrl.deletingLastPathComponent())</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> imagePath = <span class="hljs-type">Bundle</span>.main.path(forResource: <span class="hljs-string">"image"</span>, ofType: <span class="hljs-string">"png"</span>),</span><br><span class="line">           <span class="hljs-keyword">let</span> imageData = <span class="hljs-keyword">try</span>? <span class="hljs-type">Data</span>(contentsOf: <span class="hljs-type">URL</span>(fileURLWithPath: imagePath)) &#123;</span><br><span class="line">            <span class="hljs-keyword">let</span> base64String = imageData.base64EncodedString()</span><br><span class="line"></span><br><span class="line">            <span class="hljs-keyword">let</span> jsCode = <span class="hljs-string">"""</span></span><br><span class="line"><span class="hljs-string">            var img = document.createElement('img');</span></span><br><span class="line"><span class="hljs-string">            img.src = 'data:image/png;base64,\(base64String)';</span></span><br><span class="line"><span class="hljs-string">            document.body.appendChild(img);</span></span><br><span class="line"><span class="hljs-string">            """</span></span><br><span class="line">            webView.evaluateJavaScript(jsCode, completionHandler: <span class="hljs-literal">nil</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-使用本地服务器"><a href="#4-使用本地服务器" class="headerlink" title="4. 使用本地服务器"></a>4. 使用本地服务器</h3><p>在应用内启动一个本地服务器（如 GCDWebServer），然后通过 HTTP 请求获取本地资源。</p>
<h4 id="示例代码：-3"><a href="#示例代码：-3" class="headerlink" title="示例代码："></a>示例代码：</h4><figure class="highlight swift hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> WebKit</span><br><span class="line"><span class="hljs-keyword">import</span> GCDWebServer</span><br><span class="line"></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ViewController</span>: <span class="hljs-title">UIViewController</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">var</span> webView: <span class="hljs-type">WKWebView</span>!</span><br><span class="line">    <span class="hljs-keyword">var</span> webServer: <span class="hljs-type">GCDWebServer</span>!</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">viewDidLoad</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">        <span class="hljs-keyword">super</span>.viewDidLoad()</span><br><span class="line">        </span><br><span class="line">        webServer = <span class="hljs-type">GCDWebServer</span>()</span><br><span class="line">        </span><br><span class="line">        <span class="hljs-comment">// 添加处理器来提供本地资源</span></span><br><span class="line">        webServer.addGETHandler(forBasePath: <span class="hljs-string">"/"</span>, directoryPath: <span class="hljs-type">Bundle</span>.main.resourcePath!, indexFilename: <span class="hljs-literal">nil</span>, cacheAge: <span class="hljs-number">3600</span>, allowRangeRequests: <span class="hljs-literal">true</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="hljs-comment">// 启动本地服务器</span></span><br><span class="line">        webServer.start(withPort: <span class="hljs-number">8080</span>, bonjourName: <span class="hljs-string">"GCD Web Server"</span>)</span><br><span class="line">        </span><br><span class="line">        webView = <span class="hljs-type">WKWebView</span>(frame: <span class="hljs-keyword">self</span>.view.frame)</span><br><span class="line">        <span class="hljs-keyword">self</span>.view.addSubview(webView)</span><br><span class="line">        </span><br><span class="line">        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> url = <span class="hljs-type">URL</span>(string: <span class="hljs-string">"http://localhost:8080/index.html"</span>) &#123;</span><br><span class="line">            webView.load(<span class="hljs-type">URLRequest</span>(url: url))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过上述方法，可以将本地下载的资源交给 H5 使用，以提升 WebView 的加载速度和用户体验。选择具体方案时，可以根据实际需求、项目复杂度和维护成本进行权衡。</p>
<h2 id="6-小程序是怎么实现的？"><a href="#6-小程序是怎么实现的？" class="headerlink" title="6.小程序是怎么实现的？"></a>6.小程序是怎么实现的？</h2><h2 id="7-前端-JS-的异步是怎么实现的？"><a href="#7-前端-JS-的异步是怎么实现的？" class="headerlink" title="7.前端 JS 的异步是怎么实现的？"></a>7.前端 JS 的异步是怎么实现的？</h2><p>JavaScript 的异步是通过事件循环（Event Loop）、回调函数、任务队列（Task Queue）和微任务队列（Microtask Queue）等机制共同实现的。下面我们详细讨论这些概念及其工作原理。</p>
<h3 id="事件循环（Event-Loop）"><a href="#事件循环（Event-Loop）" class="headerlink" title="事件循环（Event Loop）"></a>事件循环（Event Loop）</h3><p>JavaScript 运行时环境（如浏览器或 Node.js）包含一个事件循环，它是处理异步操作的核心。事件循环负责监控调用栈和任务队列，并根据情况将任务队列中的任务推入调用栈执行。</p>
<h3 id="调用栈（Call-Stack）"><a href="#调用栈（Call-Stack）" class="headerlink" title="调用栈（Call Stack）"></a>调用栈（Call Stack）</h3><p>调用栈用于追踪正在执行的函数，JavaScript 是单线程的，这意味着它一次只能执行一个任务。调用栈记录了函数的调用顺序，并在当前函数执行完毕后，依次返回上一级调用。</p>
<h3 id="Web-API"><a href="#Web-API" class="headerlink" title="Web API"></a>Web API</h3><p>浏览器提供了一些异步 API，如 <code>setTimeout</code>、<code>setInterval</code>、<code>XMLHttpRequest</code>、<code>fetch</code> 等。当调用这些 API 时，任务会被移交给浏览器处理，而不是立即在调用栈中执行。</p>
<h3 id="任务队列（Task-Queue）"><a href="#任务队列（Task-Queue）" class="headerlink" title="任务队列（Task Queue）"></a>任务队列（Task Queue）</h3><p>任务队列存储了已完成的异步操作对应的回调函数，这些回调函数等待事件循环将它们推入调用栈执行。任务队列包括宏任务队列（Macro Task Queue）和微任务队列（Microtask Queue）。</p>
<h4 id="宏任务（Macro-Task）"><a href="#宏任务（Macro-Task）" class="headerlink" title="宏任务（Macro Task）"></a>宏任务（Macro Task）</h4><p>宏任务包括 <code>setTimeout</code>、<code>setInterval</code>、I/O 操作等。这些任务会被添加到宏任务队列中，等待事件循环处理。</p>
<h4 id="微任务（Microtask）"><a href="#微任务（Microtask）" class="headerlink" title="微任务（Microtask）"></a>微任务（Microtask）</h4><p>微任务包括 <code>Promise</code> 的 <code>.then</code> 回调、<code>MutationObserver</code> 等。微任务会被添加到微任务队列中。微任务队列的优先级高于宏任务队列，这意味着在每次宏任务执行完毕后，事件循环会首先清空微任务队列。</p>
<h3 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h3><ol>
<li><strong>主线程执行同步代码</strong>：所有同步代码会被压入调用栈中并执行。</li>
<li><strong>遇到异步操作</strong>：当遇到异步操作（如 <code>setTimeout</code>、<code>fetch</code> 等），相应的回调函数会被注册并移交给浏览器的 Web API 处理。</li>
<li><strong>Web API 完成任务</strong>：一旦异步操作完成，回调函数会被放入相应的任务队列中（宏任务或微任务）。</li>
<li><strong>事件循环检查调用栈</strong>：事件循环不断检查调用栈是否为空。</li>
<li><strong>处理微任务</strong>：如果调用栈为空，事件循环会优先处理微任务队列中的任务。</li>
<li><strong>处理宏任务</strong>：如果微任务队列为空，事件循环会处理宏任务队列中的任务。</li>
</ol>
<h3 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Start'</span>);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Timeout callback'</span>);</span><br><span class="line">&#125;, <span class="hljs-number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">Promise</span>.resolve().then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Promise callback'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">'End'</span>);</span><br></pre></td></tr></table></figure>
<h3 id="执行顺序解析"><a href="#执行顺序解析" class="headerlink" title="执行顺序解析"></a>执行顺序解析</h3><ol>
<li><code>console.log(&#39;Start&#39;)</code> 输出 “Start”。</li>
<li><code>setTimeout</code> 注册一个回调函数，并将其移交给浏览器处理（宏任务）。</li>
<li><code>Promise.resolve().then</code> 注册一个回调函数，并将其放入微任务队列。</li>
<li><code>console.log(&#39;End&#39;)</code> 输出 “End”。</li>
<li>主线程执行完同步代码后，调用栈为空，事件循环首先处理微任务队列。</li>
<li>微任务队列中的 <code>Promise</code> 回调函数被执行，输出 “Promise callback”。</li>
<li>微任务队列清空后，事件循环处理宏任务队列中的 <code>setTimeout</code> 回调，输出 “Timeout callback”。</li>
</ol>
<p>综上所述，JavaScript 的异步机制通过事件循环、调用栈、任务队列和 Web API 的协同工作，实现了异步操作，使得代码可以在等待长时间操作（如网络请求）时，不阻塞主线程的执行。</p>
<h2 id="8-项目亮点"><a href="#8-项目亮点" class="headerlink" title="8.项目亮点"></a>8.项目亮点</h2>
        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/tags/去哪儿网/">去哪儿网</a>, <a class="has-link-grey -link" href="/tags/面试/">面试</a>
                </div>
            </div>
        </div>
        
        
        
    </div>
</div>





<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/瓴岳科技/">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">瓴岳科技</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/字节跳动/">
                <span class="level-item">字节跳动</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>


</div>
                
                
            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo-2.png" alt="去哪儿网" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2024 SOSOWIKI&nbsp;
                All rights reserved.
                
                </p>
            </div>
            <div class="level-end">
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>

<script>
var IcarusThemeSettings = {
    article: {
        highlight: {
            clipboard: true,
            fold: 'unfolded'
        }
    }
};
</script>


    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>



    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="搜索公司、题目、关键字" />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '关于',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>