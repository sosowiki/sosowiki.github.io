<!DOCTYPE html>
<html  lang="zh">
<head>
    <meta charset="utf-8" />

<meta name="generator" content="Hexo 3.8.0" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>OC语法 - SOSOWIKI</title>


    <meta name="description" content="OC语法">
<meta name="keywords" content="底层原理,OC语法">
<meta property="og:type" content="article">
<meta property="og:title" content="OC语法">
<meta property="og:url" content="http://soso.wiki/OC语法/index.html">
<meta property="og:site_name" content="SOSOWIKI">
<meta property="og:description" content="OC语法">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://soso.wiki/images/sosowiki-logo.png">
<meta property="og:updated_time" content="2024-05-08T06:24:06.674Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="OC语法">
<meta name="twitter:description" content="OC语法">
<meta name="twitter:image" content="http://soso.wiki/images/sosowiki-logo.png">







<link rel="icon" href="/images/favicon.jpeg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
<script>
var _hmt = _hmt || [];
(function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?b07e5a4ee78cf8302e7e2cf5b9db7f2c";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
})();
</script>

    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-1-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo-2.png" alt="OC语法" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">首页</a>
                
                <a class="navbar-item"
                href="/archives">归档</a>
                
                <a class="navbar-item"
                href="/tags">标签</a>
                
                <a class="navbar-item"
                href="/about">关于</a>
                
            </div>
            
            <div class="navbar-end">
                
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-12 has-order-2 column-main"><div class="card">
    
    <div class="card-image">
        <span  class="image is-7by1">
            <img class="thumbnail" src="/images/sosowiki-logo.png" alt="OC语法">
        </span>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2024-05-08T06:21:00.000Z">2024-05-08</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/底层原理/">底层原理</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    18 分钟 读完 (大约 2764 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                OC语法
            
        </h1>
        <div class="content">
            <p>OC语法<br><a id="more"></a></p>
<h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><p>一个NSObject对象占用多少内存<br>系统分配了16个字节给NSObject对象（malloc_size）<br>但NSObject对象内部只使用了8个字节的空间（class_getInstanceSize）</p>
<p>对象的isa指针指向哪里<br>instance对象isa指向class对象<br>调用对象方法时，通过isa指针找到类对象，找到对象方法实现进行调用<br>class对象isa指向meta-class对象<br>调用类方法时，通过isa指针找到元类对象，找到类方法的视线进行调用<br>meta-class对象isa指向基类的meta-class对象</p>
<p>OC的类信息存放在哪里<br>对象方法、属性、成员变量、协议信息，存放在class对象<br>类方法存放在meta-class对象<br>成员变量的具体值，存放在instance对象</p>
<h2 id="KVO"><a href="#KVO" class="headerlink" title="KVO"></a>KVO</h2><p>iOS用什么方式实现一个对象的KVO（KVO的本质是什么）<br>利用runtime动态生成一个子类，并且让instance对象的isa指向该子类<br>当修改instance对象的属性时，会调用Foundation的<code>_NSSetXXXValueAndNotify</code>函数<br>willChangeValueForKey:<br>父类原来的set方法<br>didChangeValueForKey:<br>内部会触发Observer的监听方法（observeValueForKeyPath:ofObject:change:context）</p>
<p>如何手动触发KVO<br>手动调用willSetValueForKey:和didChangeValueForKey:</p>
<p>直接修改成员变量的值会触发KVO吗<br>不会</p>
<p>通过KVC修改属性会触发KVO吗<br>会</p>
<p>KVC的赋值和取值过程？<br>赋值  先调用setA  isA _age</p>
<h2 id="Category"><a href="#Category" class="headerlink" title="Category"></a>Category</h2><p>Category的实现原理<br>Category编译后的底层结构是struct category_t 里面存放分类的对象方法、类方法、属性、协议信息<br>在程序运行时，runtime会将Category的数据，合并到类信息中（类对象、元类对象中）</p>
<p>Category和Class Extension的区别是什么<br>Class Extension在编译时数据就在类信息中<br>Category是在运行时，将数据合并到类信息中</p>
<p>Categroy中有load方法吗？load方法是什么时候调用的？load方法能继承吗？<br>有load方法<br>load是在程序启动的时候，加载类、分类的时候调用<br>load方法可以继承，但一般不会主动去调用load方法，都是让系统自动调用</p>
<p>load、initialize方法的区别？在Category中的调用顺序，出现继承时他们之间的调用过程？</p>
<p>Category能否添加成员变量？如果可以，如何给Category添加成员变量？<br>不能直接给Category添加成员变量，但可以通过runtime实现Category有成员变量的效果</p>
<h2 id="Objective-C的本质"><a href="#Objective-C的本质" class="headerlink" title="Objective-C的本质"></a>Objective-C的本质</h2><p>OC的本质<br>底层都是C/C++代码，编译成了汇编语言、机器语言<br>OC的面向对象是通过C/C++的结构体实现的</p>
<p>将OC代码转换成C/C++代码<br>xcrun  -sdk  iphoneos  clang  -arch  arm64  -rewrite-objc  OC源文件  -o  输出的CPP文件</p>
<p>一个OC对象在内存中的布局<br>struct NSObject_IMPL {<br>    Class isa;<br>}</p>
<p>Class 即 objc_class<br>class、meta-class对象的本质结构都是struct objc_class</p>
<p>创建一个实例对象，至少需要多少内存<br>class_getInstanceSize([NSObject class]);</p>
<p>创建一个实例对象，实际上分配了多少内存<br>malloc_size(obj);</p>
<h2 id="常见LLDB指令"><a href="#常见LLDB指令" class="headerlink" title="常见LLDB指令"></a>常见LLDB指令</h2><p>p 打印<br>po 打印对象</p>
<p>读取内存<br>memory read/数据格式字节数  内存地址<br>x/数量格式字节数 内存地址</p>
<p>修改内存中的值<br>memory write</p>
<p>OC对象的分类<br>instance对象（实例对象）、class对象（类对象）、meta-class对象（元类对象）</p>
<p>class对象在内存中存储的信息主要包括<br>isa指针<br>superclass指针<br>属性、对象方法、协议、成员变量</p>
<p>meta-class对象在内存中存储的信息<br>isa指针<br>superclass指针<br>类方法</p>
<p>object_getClass([NSObject class]); 获取元类对象<br>class_isMetaClass([NSObject class]); 查看Class是否是元类对象</p>
<p>instance的isa指向class<br>class的isa指向meta-class<br>meta-class的isa指向基类的meta-class</p>
<p>class的superclass指向父类的class<br>如果没有父类，superclass指针为nil</p>
<p>meta-class的superclass指向父类的meta-class<br>基类的meta-class的superclass指向基类的class</p>
<p>isa指针<br>isa通过&amp; ISA_MASK （位运算），得到真实地址<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">struct objc_class &#123;</span><br><span class="line">	Class isa;</span><br><span class="line">	Class superClass;</span><br><span class="line">	cache_t cache; // 方法缓存</span><br><span class="line">	class_data_bits_t bits; // 用于获取具体的类信息</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bits &amp; FAST_DATA_MASK得到class_rw_t</span><br><span class="line">class_rw_t &#123;</span><br><span class="line">	uint32_t flags;</span><br><span class="line">	uint32_t version;</span><br><span class="line">	const class_ro_t *ro;</span><br><span class="line">	method_list_t *methods; // 方法列表</span><br><span class="line">	property_list_t *properties; // 属性列表</span><br><span class="line">	const protocol_list_t *protocols; // 协议列表</span><br><span class="line">	Class firstSubClass;</span><br><span class="line">	Class nextSiblingClass;</span><br><span class="line">	char *demangledName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class_ro_t &#123;</span><br><span class="line">	uint32_t flags;</span><br><span class="line">	uint32_t instanceStart;</span><br><span class="line">	uint32_t instanceSize;</span><br><span class="line">	const char *name; // 类名</span><br><span class="line">	method_list_t *baseMethodList;</span><br><span class="line">	protocol_list_t *baseProtocols;</span><br><span class="line">	const ivar_list_t *ivars; // 成员变量列表</span><br><span class="line">	const uint8_t *weakIvarLayout;</span><br><span class="line">	property_list_t *baseProperties;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>KVC<br>setValue:forKey:原理<br>按照<code>setKey: _setKey:</code>顺序查找方法，找到方法调用<br>没找到方法，查看accessInstanceVariablesDirectly方法的返回值<br>NO-&gt;调用setValue:forUndefinedKey: 并抛出异常NSUnknownKeyException<br>YES-&gt;按照<code>_key _isKey key isKey</code>顺序查找成员变量，找到后直接赋值，找不到报错</p>
<p>valueForKey:原理<br>按照<code>getKey、key、isKey、_key</code>顺序查找方法，找到方法调用<br>没找到方法，查看accessInstanceVariablesDirectly方法的返回值<br>NO-&gt;调用valueForUndefinedKey: 并抛出异常NSUnknownKeyException<br>YES-&gt;按照<code>_key、_isKey、key、isKey</code>顺序查找成员变量，找到后直接取值</p>
<p>Caregory的底层结构<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">struct category_t &#123;</span><br><span class="line">	const char *name;</span><br><span class="line">	classref cls;</span><br><span class="line">	struct method_list_t *instanceMethods;</span><br><span class="line">	struct method_list_t *classMethods;</span><br><span class="line">	struct protocol_list_t *protocols;</span><br><span class="line">	struct property_list_t *instanceProperties;</span><br><span class="line">	struct property_list_t *_classProperties;</span><br><span class="line">	</span><br><span class="line">	method_list_t *methodForMeta(bool isMeta) &#123;</span><br><span class="line">		if (isMeta) return classMethods;</span><br><span class="line">		else return instanceMethods;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	property_list_t *propertiesForMeta(bool isMeta, struct header_info *hi);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Category的加载处理过程<br>1.通过Runtime加载某个类的所有Category数据<br>2.把所有Category的方法、属性、协议数据，合并到一个大数组里，后面参与编译的Category数据，会在数组的前面<br>3.将合并后的分类数据（方法、属性、协议），插入到类原来数据的前面</p>
<p>+load方法<br>+load方法会在runtime加载类、分类时调用<br>每个类、分类的+load方法，在程序运行过程中只调用一次</p>
<p>调用顺序：<br>1.先调用类的+load，按照编译先后顺序调用（先编译，先调用），调用子类的+load之前会先调用父类的+load<br>2.再调用分类的+load，按照编译先后顺序调用（先编译，先调用）<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1._objc_Init</span><br><span class="line">2.load_images</span><br><span class="line">3.prepare_load_methods</span><br><span class="line">schedule_class_load</span><br><span class="line">add_class_to_loadable_list</span><br><span class="line">add_category_to_loadable_list</span><br><span class="line">4.call_load_methods</span><br><span class="line">call_class_loads</span><br><span class="line">call_category_loads</span><br><span class="line">(*load_method)(cls, SEL_load)</span><br></pre></td></tr></table></figure></p>
<p>+load方法时根据方法地址直接调用，并不是经过objc_msgSend函数调用</p>
<p>+initialize方法<br>+initialize方法会在类第一次接收到消息时调用</p>
<p>调用顺序<br>先调用父类的+initialize，再调用子类的+initialize<br>先初始化父类，在初始化子类，每个类只会初始化一次<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">objc_msgSend</span><br><span class="line">class_getInstanceMethod</span><br><span class="line">lookUpImpOrNil</span><br><span class="line">lookUpImpOrForword</span><br><span class="line">_class_initialize</span><br><span class="line">callInitialize</span><br><span class="line">objc_msgSend(cls, SEL_initialize)</span><br></pre></td></tr></table></figure></p>
<p>+initialize和+load区别<br>+initialize是通过objc_msgSend进行调用<br>如果子类没有实现+initialize，会调用父类的+initialize（所以父类的+initialize可能会被调用多次）<br>如果分类实现了+initialize，就会覆盖类本身的+initialize调用</p>
<p>如何给分类添加成员变量？<br>因为分类的底层结构限制，不能添加成员变量到分类，可以通过关联对象间接实现</p>
<p>添加关联对象<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">void objc_setAssociatedObject(id object, const void * key,</span><br><span class="line">                                id value, objc_AssociationPolicy policy)</span><br></pre></td></tr></table></figure></p>
<p>获得关联对象<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id objc_getAssociatedObject(id object, const void * key)</span><br></pre></td></tr></table></figure></p>
<p>移除所有的关联对象<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void objc_removeAssociatedObjects(id object)</span><br></pre></td></tr></table></figure></p>
<p>关联对象的原理<br>关联对象并不是存储在关联对象本身内存中<br>关联对象存储在全局统一的一个AssociationsManager中<br>设置关联对象为nil，就相当于移除关联对象</p>
<p>block的本质<br>block本质上是一个OC对象，内部有个isa指针<br>block是封装了函数调用以及函数调用环境的OC对象</p>
<p>block的变量捕获<br>局部变量 auto 捕获到block内部  访问方式：值传递<br>局部变量 static 捕获到block内部 访问方式：指针传递<br>全局变量 不捕获 访问方式：直接访问</p>
<p>auto变量的捕获</p>
<p>block的类型<br>block有3种类型，可以通过调用class方法或者isa指针查看具体类型，最终都是继承自NSBlock类型<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">__NSGlobalBlock__ (_NSConcreteGlobalBlock)  数据区域 .data区</span><br><span class="line">__NSStackBlock__ (_NSConcreteStackBlock)  栈区</span><br><span class="line">__NSMallocBlock__ (_NSConcreteMallocBlock) 堆区</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">__NSGlobalBlock__  没有访问auto变量</span><br><span class="line">__NSStackBlock__ 访问了auto变量</span><br><span class="line">__NSMallocBlock__  __NSStackBlock__调用了copy</span><br></pre></td></tr></table></figure>
<p>调用copy后的结果<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">_NSConcreteStackBlock  程序的数据区域 复制效果：什么也不做</span><br><span class="line">_NSConcreteStackBlock  栈  复制效果：从栈复制到堆</span><br><span class="line">_NSConcreteMallocBlock 堆  复制效果：引用计数增加</span><br></pre></td></tr></table></figure></p>
<p>block的copy<br>在ARC下，编辑器会在下列情况自动将栈上的block拷贝到堆上：<br>1.block作为函数返回值时<br>2.将block赋值给强指针时<br>3.block作为Cocoa API中方法名含有usingBlock的方法参数时<br>4.block作为GCD API的方法参数时</p>
<p>MRC下block的建议写法：<br>@property(copy, nonatomic) void (^block)(void);</p>
<p>ARC下block的建议写法：<br>@property(strong, nonatomic) void (^block)(void);<br>@property(copy, nonatomic) void (^block)(void);</p>
<p>对象类型的auto变量<br>当block内部访问了对象类型的auto变量时<br>如果block在栈上，将不会对auto变量产生强引用</p>
<p>如果block被拷贝到堆上<br>会调用block内部的copy函数<br>copy函数内部会调用<code>_Block_object_assign</code>函数<br><code>_Block_object_assign</code>函数会根据auto变量的修饰符做出相应操作，形成强引用或弱引用</p>
<p>如果block从堆上移除<br>会调用block内部的dispose函数<br>dispose函数内部会调用<code>_Block_object_dispose</code>函数<br><code>_Block_object_dispose</code>函数会自动释放引用的auto变量（release）</p>
<p><code>__block</code>修饰符<br>可以解决block内部无法修改auto变量值的问题<br>不能修饰全局变量、静态变量<br>编译器会把<code>__block</code>包装成一个对象</p>
<p>当block在栈上时，并不会对<code>__block</code>变量产生强引用</p>
<p>当block被copy到堆时<br>会调用block内部的copy函数<br>copy函数内部会调用<code>_Block_object_assign</code>函数<br><code>_Block_object_assign</code>函数会对<code>__block</code>变量形成强引用（retain）</p>
<p>当block从堆中移除时<br>会调用block内部的dispose函数<br>dispose函数内部会调用<code>_Block_object_dispose</code>函数<br><code>_Block_object_dispose</code>函数会自动释放引用的<code>__block</code>变量（release）</p>
<p><code>__block</code>的<code>__forwarding</code>指针</p>
<p>对象类型的auto变量、__block变量<br>当block在栈上时，对它们都不会产生强引用</p>
<p>解决循环引用问题 - ARC<br>用<code>__weak</code>、<code>__unsafe_unretained</code>解决<br>用<code>__block</code>解决（必须要调用block）</p>
<p>解决循环引用问题 - MRC<br>用<code>__unsafe_unretained</code>解决<br>用<code>__block</code>解决(ARC时会retain，MRC时不会retain)</p>

        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/tags/OC语法/">OC语法</a>, <a class="has-link-grey -link" href="/tags/底层原理/">底层原理</a>
                </div>
            </div>
        </div>
        
        
        
    </div>
</div>





<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/百融云创面试题/">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">百融云创面试题</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/自如面试题/">
                <span class="level-item">自如面试题</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>


</div>
                
                
            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo-2.png" alt="OC语法" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2024 SOSOWIKI&nbsp;
                All rights reserved.
                
                </p>
            </div>
            <div class="level-end">
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>

<script>
var IcarusThemeSettings = {
    article: {
        highlight: {
            clipboard: true,
            fold: 'unfolded'
        }
    }
};
</script>


    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>



    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="搜索公司、题目、关键字" />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '关于',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>