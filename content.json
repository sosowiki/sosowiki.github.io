{"pages":[{"title":"","text":"èŒåœºå·²è¯»ä¹±å› :root { --dark-gray-start: #2D2F33; --dark-gray-end: #1A1A1A; --white-collar-blue-start: #6C8EB4; --white-collar-blue-end: #B4C7E7; --slacker-orange-start: #F4B183; --slacker-orange-end: #F8C471; --overachiever-red-start: #FF6666; --overachiever-red-end: #FF9999; --gold: #FFD700; } body { margin: 0; padding: 0; background: linear-gradient(var(--dark-gray-start), var(--dark-gray-end)); height: 100vh; overflow: hidden; user-select: none; } h1 { font-family: Arial, sans-serif; font-size: 48px; color: white; text-align: center; margin-top: 50px; position: relative; text-shadow: 0 0 10px var(--gold), 0 0 20px var(--gold), 0 0 30px var(--gold); animation: glitch 1s infinite alternate; border: 5px solid white; padding: 10px; display: inline-block; left: 50%; transform: translateX(-50%); position: relative; box-shadow: 0 0 10px var(--gold); } @keyframes glitch { 0% { transform: translateX(-50%) skewX(0deg); text-shadow: 0 0 10px var(--gold), 0 0 20px var(--gold), 0 0 30px var(--gold); } 20% { transform: translateX(-50%) skewX(10deg); text-shadow: -5px 0 var(--white-collar-blue-start), 5px 0 var(--overachiever-red-start); } 40% { transform: translateX(-50%) skewX(-10deg); text-shadow: -5px 0 var(--slacker-orange-start), 5px 0 var(--white-collar-blue-start); } 60% { transform: translateX(-50%) skewX(5deg); text-shadow: -5px 0 var(--overachiever-red-start), 5px 0 var(--slacker-orange-start); } 80% { transform: translateX(-50%) skewX(-5deg); text-shadow: -5px 0 var(--white-collar-blue-start), 5px 0 var(--overachiever-red-start); } 100% { transform: translateX(-50%) skewX(0deg); text-shadow: 0 0 10px var(--gold), 0 0 20px var(--gold), 0 0 30px var(--gold); } } .message { position: absolute; top: -50px; padding: 10px; border-radius: 10px; font-size: 16px; display: flex; align-items: center; min-width: 100px; justify-content: center; } .message::before { content: ''; display: inline-block; width: 20px; height: 20px; margin-right: 5px; } .white-collar { background: linear-gradient(var(--white-collar-blue-start), var(--white-collar-blue-end)); } .white-collar::before { background: url('data:image/svg+xml;utf8,'); } .slacker { background: linear-gradient(var(--slacker-orange-start), var(--slacker-orange-end)); } .slacker::before { background: url('data:image/svg+xml;utf8,'); } .overachiever { background: linear-gradient(var(--overachiever-red-start), var(--overachiever-red-end)); } .overachiever::before { background: url('data:image/svg+xml;utf8,'); } .catch-area { position: absolute; bottom: 20px; width: 200px; height: 50px; background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(10px); border-radius: 10px; box-shadow: 0 0 10px rgba(255, 255, 255, 0.3); } .catch-area::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: inherit; filter: blur(10px); opacity: 0.5; z-index: -1; animation: trail 0.5s infinite; } @keyframes trail { 0% { transform: translateX(0); opacity: 0.5; } 100% { transform: translateX(10px); opacity: 0; } } .particle-effect { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; display: none; } .particle { position: absolute; width: 5px; height: 5px; background: var(--gold); border-radius: 50%; animation: particle 1s ease-out forwards; } @keyframes particle { 0% { transform: translate(0, 0); opacity: 1; } 100% { transform: translate(var(--x), var(--y)); opacity: 0; } } .prompt { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.7); color: white; padding: 20px; border-radius: 10px; font-size: 24px; display: none; } èŒåœºå·²è¯»ä¹±å› åŠŸå¾·+1 const messages = [ \"å—¯å—¯ï¼ŒçŸ¥é“äº†ã€‚\", \"å¥½çš„ï¼Œå®‰æ’ä¸€ä¸‹ã€‚\", \"è¡Œï¼Œæˆ‘çœ‹çœ‹ã€‚\", \"æ²¡é—®é¢˜ï¼Œç¨åå¤„ç†ã€‚\", \"æ”¶åˆ°ï¼Œé©¬ä¸Šè·Ÿè¿›ã€‚\", \"äº†è§£ï¼Œä¼šå¤„ç†çš„ã€‚\", \"å¥½å˜ï¼Œè¿™å°±åŠã€‚\", \"å¯ä»¥ï¼Œæˆ‘æ¥å¼„ã€‚\", \"æ™“å¾—ï¼Œç­‰æˆ‘å¼„ã€‚\", \"æ˜ç™½ï¼Œç€æ‰‹å¤„ç†ã€‚\" ]; const messageTypes = ['white-collar', 'slacker', 'overachiever']; const catchArea = document.getElementById('catchArea'); const particleEffect = document.getElementById('particleEffect'); const prompt = document.getElementById('prompt'); const messageElements = []; let score = 0; let isPerformanceMode = window.innerWidth < 768; document.addEventListener('mousemove', (e) => { const x = e.clientX - catchArea.offsetWidth / 2; catchArea.style.left = Math.min( Math.max(x, 0), window.innerWidth - catchArea.offsetWidth ) + 'px'; }); document.addEventListener('touchmove', (e) => { e.preventDefault(); const touch = e.touches[0]; const x = touch.clientX - catchArea.offsetWidth / 2; catchArea.style.left = Math.min( Math.max(x, 0), window.innerWidth - catchArea.offsetWidth ) + 'px'; }, { passive: false }); document.addEventListener('keydown', (e) => { const speed = 20; const currentLeft = parseInt(catchArea.style.left || 0); if (e.key === 'ArrowLeft') { catchArea.style.left = Math.max(0, currentLeft - speed) + 'px'; } else if (e.key === 'ArrowRight') { catchArea.style.left = Math.min( window.innerWidth - catchArea.offsetWidth, currentLeft + speed ) + 'px'; } }); function createMessage() { const message = document.createElement('div'); message.classList.add('message'); const randomMessage = messages[Math.floor(Math.random() * messages.length)]; const randomType = messageTypes[Math.floor(Math.random() * messageTypes.length)]; message.classList.add(randomType); message.textContent = randomMessage; message.style.left = Math.random() * (window.innerWidth - 100) + 'px'; document.body.appendChild(message); messageElements.push(message); } function moveMessages() { messageElements.forEach((message, index) => { const rect = message.getBoundingClientRect(); if (rect.bottom < window.innerHeight) { message.style.top = (rect.top + 3) + 'px'; if (isCollision(message, catchArea)) { catchMessage(message, index); } } else { removeMessage(message, index); } }); } function isCollision(element1, element2) { const rect1 = element1.getBoundingClientRect(); const rect2 = element2.getBoundingClientRect(); return ( rect1.left < rect2.right && rect1.right > rect2.left && rect1.bottom > rect2.top && rect1.top < rect2.bottom ); } function catchMessage(message, index) { playSound(); showParticleEffect(); showPrompt(); removeMessage(message, index); score++; } function playSound() { const audioContext = new (window.AudioContext || window.webkitAudioContext)(); const oscillator = audioContext.createOscillator(); const gainNode = audioContext.createGain(); oscillator.type = 'sine'; oscillator.frequency.setValueAtTime(300, audioContext.currentTime); gainNode.gain.setValueAtTime(0.5, audioContext.currentTime); oscillator.connect(gainNode); gainNode.connect(audioContext.destination); oscillator.start(); oscillator.stop(audioContext.currentTime + 0.2); } function showParticleEffect() { particleEffect.style.display = 'block'; for (let i = 0; i < (isPerformanceMode ? 10 : 50); i++) { const particle = document.createElement('div'); particle.classList.add('particle'); const angle = Math.random() * 2 * Math.PI; const distance = Math.random() * 200; const x = Math.cos(angle) * distance; const y = Math.sin(angle) * distance; particle.style.setProperty('--x', `${x}px`); particle.style.setProperty('--y', `${y}px`); particle.style.left = window.innerWidth / 2 + 'px'; particle.style.top = window.innerHeight / 2 + 'px'; particleEffect.appendChild(particle); setTimeout(() => { particle.remove(); }, 1000); } setTimeout(() => { particleEffect.style.display = 'none'; }, 1000); } function showPrompt() { prompt.style.display = 'block'; setTimeout(() => { prompt.style.display = 'none'; }, 1000); } function removeMessage(message, index) { message.remove(); messageElements.splice(index, 1); } function gameLoop() { if (Math.random() < 0.01) { createMessage(); } moveMessages(); requestAnimationFrame(gameLoop); } gameLoop();","link":"/game.html"},{"title":"åˆ†ç±»","text":"","link":"/categories/index.html"},{"title":"","text":"æ¬¢è¿æŠ•ç¨¿ï¼šswift@88.com","link":"/about/index.html"},{"title":"","text":"å¯çˆ± 2048 æ¸¸æˆ body { background-color: #faf8ef; font-family: Arial, sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; margin: 0; } #header { display: flex; justify-content: space-between; align-items: center; width: 90%; max-width: 500px; color: #776e65; } h1 { margin: 0; } #score-board { display: flex; gap: 10px; } #score, #high-score { background-color: #bbada0; color: white; padding: 5px 10px; border-radius: 5px; } #game-board { display: grid; grid-template-columns: repeat(4, 1fr); grid-template-rows: repeat(4, 1fr); gap: 10px; background-color: #bbada0; padding: 10px; border-radius: 5px; width: 90%; max-width: 500px; margin: 20px 0; } .cell { background-color: rgba(238, 228, 218, 0.35); border-radius: 5px; aspect-ratio: 1/1; } .tile { width: 100%; height: 100%; background-size: cover; border-radius: 5px; } #game-rules { text-align: left; color: #776e65; width: 90%; max-width: 500px; font-size: 14px; } #win-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); align-items: center; justify-content: center; } #win-modal-content { background-color: white; padding: 20px; border-radius: 5px; text-align: center; } å¯çˆ± 2048 æ¸¸æˆ å¾—åˆ†: 0 æœ€é«˜åˆ†: 0 æ¸¸æˆè§„åˆ™ï¼šä½¿ç”¨é”®ç›˜æ–¹å‘é”®ï¼ˆä¸Šã€ä¸‹ã€å·¦ã€å³ï¼‰æ§åˆ¶å¡ç‰‡ç§»åŠ¨ï¼Œç›¸åŒçš„å¡ç‰‡ä¼šåˆå¹¶æˆä¸€ä¸ªæ•°å€¼æ›´å¤§çš„å¡ç‰‡ï¼Œç›®æ ‡æ˜¯åˆå¹¶å‡ºæ•°å€¼ä¸º 2048 çš„å¡ç‰‡ã€‚ æ­å–œä½ å·²ç»åˆå¹¶äº†ä¸€åªå®‡å®™æ— æ•Œæœ€å¯çˆ±çš„çŒ«å’ª ç¡®è®¤ const gameBoard = document.getElementById('game-board'); const winModal = document.getElementById('win-modal'); const scoreElement = document.getElementById('score'); const highScoreElement = document.getElementById('high-score'); const images = { 2: 'https://p9-flow-imagex-sign.byteimg.com/ocean-cloud-tos/image_generation/df099f209335f8b25e1d4ab9ce2867ff_1741677321668230149.png~tplv-a9rns2rl98-image.png?rk3s=25bff839&x-expires=1773213321&x-signature=reNM%2F907NNX7Rc%2BE4FflYbWaRKo%3D', 4: 'https://p9-flow-imagex-sign.byteimg.com/ocean-cloud-tos/image_generation/322b9826909d14458d22e0931fd06aac_1741677330491084517.png~tplv-a9rns2rl98-image.png?rk3s=25bff839&x-expires=1773213330&x-signature=a1ptVuhTOwjrpRZSdnL%2FUKYV9MY%3D', 8: 'https://p3-flow-imagex-sign.byteimg.com/ocean-cloud-tos/image_generation/1a563d103b7496a5b9eb365ff9ea58bd_1741677409407029394.png~tplv-a9rns2rl98-image.png?rk3s=25bff839&x-expires=1773213409&x-signature=L0drmZ0N1Z2%2BjUD9g9gcP0Nn7TM%3D', 16: 'https://p3-flow-imagex-sign.byteimg.com/ocean-cloud-tos/image_generation/f51aebc9e6d5eee19fc026e3f1070185_1741677412756659826.png~tplv-a9rns2rl98-image.png?rk3s=25bff839&x-expires=1773213412&x-signature=%2F%2FMLyi7m%2Bu%2Fo%2F%2FTQeYqmUWeDtLQ%3D', 32: 'https://p3-flow-imagex-sign.byteimg.com/ocean-cloud-tos/image_generation/8693822e52091fd6896366ae4e922bc2_1741677429462075923.png~tplv-a9rns2rl98-image.png?rk3s=25bff839&x-expires=1773213429&x-signature=tLOJO0F5DKTLStoKnja6l2fr%2FOg%3D', 64: 'https://p3-flow-imagex-sign.byteimg.com/ocean-cloud-tos/image_generation/5fbb02d79c0f16f69ec86ea7a83d7e36_1741677431738410576.png~tplv-a9rns2rl98-image.png?rk3s=25bff839&x-expires=1773213431&x-signature=Ry8L%2FkXszOCFFHkMeIdKm6Ktg%2FQ%3D', 128: 'https://p3-flow-imagex-sign.byteimg.com/ocean-cloud-tos/image_generation/f2c91103fc53286b5d481390c12d665f_1741677444595987213.png~tplv-a9rns2rl98-image.png?rk3s=25bff839&x-expires=1773213444&x-signature=X5AHPsnNLXS25hlANqlvTtpSQmc%3D', 256: 'https://p9-flow-imagex-sign.byteimg.com/ocean-cloud-tos/image_generation/9f4e790544e519f8c110d2c73e7b03bf_1741677446066399364.png~tplv-a9rns2rl98-image.png?rk3s=25bff839&x-expires=1773213446&x-signature=DmV9R3QrONwWz%2F4fUnoceUjiU8E%3D', 512: 'https://p3-flow-imagex-sign.byteimg.com/ocean-cloud-tos/image_generation/8f72db8a79741930894920bc8faced83_1741677458934448994.png~tplv-a9rns2rl98-image.png?rk3s=25bff839&x-expires=1773213458&x-signature=YxMhmlrT%2FY7brkyal9u5oaifd3g%3D', 1024: 'https://p3-flow-imagex-sign.byteimg.com/ocean-cloud-tos/image_generation/f565fa57b977fa953208f7a2b4edd839_1741677459756646895.png~tplv-a9rns2rl98-image.png?rk3s=25bff839&x-expires=1773213459&x-signature=r0bBAR7T7NVF3dyu1aGI%2FlWfR4w%3D', 2048: 'https://p3-flow-imagex-sign.byteimg.com/ocean-cloud-tos/image_generation/dbb80e7d3948b8af02664915eeee38d2_1741677502512862779.png~tplv-a9rns2rl98-image.png?rk3s=25bff839&x-expires=1773213502&x-signature=Bv%2FEdGFqr%2Bq47a8g1D4KiU9XYqQ%3D' }; let board = [ [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0] ]; let score = 0; let highScore = localStorage.getItem('highScore')? parseInt(localStorage.getItem('highScore')) : 0; highScoreElement.textContent = `æœ€é«˜åˆ†: ${highScore}`; function createBoard() { gameBoard.innerHTML = ''; for (let i = 0; i < 4; i++) { for (let j = 0; j < 4; j++) { const cell = document.createElement('div'); cell.classList.add('cell'); if (board[i][j]!== 0) { const tile = document.createElement('div'); tile.classList.add('tile'); tile.style.backgroundImage = `url(${images[board[i][j]]})`; cell.appendChild(tile); } gameBoard.appendChild(cell); } } scoreElement.textContent = `å¾—åˆ†: ${score}`; } function addRandomTile() { const emptyCells = []; for (let i = 0; i < 4; i++) { for (let j = 0; j < 4; j++) { if (board[i][j] === 0) { emptyCells.push({ i, j }); } } } if (emptyCells.length > 0) { const randomIndex = Math.floor(Math.random() * emptyCells.length); const { i, j } = emptyCells[randomIndex]; board[i][j] = Math.random() < 0.9? 2 : 4; } } function mergeTiles(row) { let newRow = row.filter(tile => tile!== 0); for (let i = 0; i < newRow.length - 1; i++) { if (newRow[i] === newRow[i + 1]) { newRow[i] *= 2; score += newRow[i]; if (newRow[i] === 2048) { showWinModal(); } newRow[i + 1] = 0; } } newRow = newRow.filter(tile => tile!== 0); while (newRow.length < 4) { newRow.push(0); } return newRow; } function moveLeft() { let moved = false; for (let i = 0; i < 4; i++) { const oldRow = [...board[i]]; board[i] = mergeTiles(board[i]); if (oldRow.join(',')!== board[i].join(',')) { moved = true; } } if (moved) { addRandomTile(); } updateScore(); createBoard(); } function moveRight() { let moved = false; for (let i = 0; i < 4; i++) { const oldRow = [...board[i]]; const reversedRow = board[i].slice().reverse(); const newReversedRow = mergeTiles(reversedRow); board[i] = newReversedRow.reverse(); if (oldRow.join(',')!== board[i].join(',')) { moved = true; } } if (moved) { addRandomTile(); } updateScore(); createBoard(); } function moveUp() { let moved = false; for (let j = 0; j < 4; j++) { const column = []; for (let i = 0; i < 4; i++) { column.push(board[i][j]); } const oldColumn = [...column]; const newColumn = mergeTiles(column); for (let i = 0; i < 4; i++) { board[i][j] = newColumn[i]; } if (oldColumn.join(',')!== newColumn.join(',')) { moved = true; } } if (moved) { addRandomTile(); } updateScore(); createBoard(); } function moveDown() { let moved = false; for (let j = 0; j < 4; j++) { const column = []; for (let i = 0; i < 4; i++) { column.push(board[i][j]); } const oldColumn = [...column]; const reversedColumn = column.slice().reverse(); const newReversedColumn = mergeTiles(reversedColumn); const newColumn = newReversedColumn.reverse(); for (let i = 0; i < 4; i++) { board[i][j] = newColumn[i]; } if (oldColumn.join(',')!== newColumn.join(',')) { moved = true; } } if (moved) { addRandomTile(); } updateScore(); createBoard(); } function handleKeyPress(event) { switch (event.key) { case 'ArrowLeft': moveLeft(); break; case 'ArrowRight': moveRight(); break; case 'ArrowUp': moveUp(); break; case 'ArrowDown': moveDown(); break; } } function showWinModal() { winModal.style.display = 'flex'; } function closeWinModal() { winModal.style.display = 'none'; } function updateScore() { if (score > highScore) { highScore = score; highScoreElement.textContent = `æœ€é«˜åˆ†: ${highScore}`; localStorage.setItem('highScore', highScore); } scoreElement.textContent = `å¾—åˆ†: ${score}`; } window.addEventListener('keydown', handleKeyPress); addRandomTile(); addRandomTile(); createBoard();","link":"/custom/game.html"},{"title":"æ ‡ç­¾","text":"","link":"/tags/index.html"}],"posts":[{"title":"ç¾å›¢é¢è¯•é¢˜","text":"ç¾å›¢é¢è¯•é¢˜ 1.Runtime 2.Runloop 3.å†…å­˜ç®¡ç† 4.ç»„ä»¶åŒ– 5.Flutter 6.å‰ç«¯ 7.iOS å¼•ç”¨è®¡æ•°å’Œ GC çš„åŒºåˆ« å‚è€ƒé“¾æ¥ï¼šç®€ä¹¦-åƒåœ¾å›æ”¶å’Œè‡ªåŠ¨å¼•ç”¨è®¡æ•° 8.ç®—æ³•ï¼ˆäºŒå‰æ ‘æœ€å¤§æ·±åº¦ï¼‰ LeetCode é¢˜ç›®é“¾æ¥ï¼šäºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ 12345678910111213var max = function(a, b) { if (a &gt; b) { return a; } return b;}var maxDepth = function(root) { if (root == null) { return 0; } return max(maxDepth(root.left), maxDepth(root.right)) + 1;};","link":"/2021-07-12-ç¾å›¢é¢è¯•é¢˜/"},{"title":"äºŒå‰æ ‘ç®—æ³•é¢˜","text":"äºŒå‰æ ‘ç®—æ³•é¢˜ï¼ˆ JavaScript å®ç°ï¼‰ äºŒå‰æ ‘çš„ä¸­åºéå†é€’å½’ï¼š 12345678910111213var inorderTraversal = function(root) { let res = [] const inorder = function(root) { if (!root) { return; } inorder(root.left); res.push(root.val); inorder(root.right); } inorder(root); return res;}; è¿­ä»£ï¼š 12345678910111213141516var inorderTraversal = function(root) { const res = []; const stack = []; let cur = root; while (stack.length || cur) { if (cur) { stack.push(cur); cur = cur.left; } else { cur = stack.pop(); res.push(cur.val); cur = cur.right; } } return res;}; äºŒå‰æ ‘çš„å±‚åºéå†1234567891011121314151617181920212223var levelOrder = function(root) { const res = [], queue = []; queue.push(root); if (root === null) { return res; } while (queue.length) { let curLevel = []; let length = queue.length; for (let i = 0; i &lt; length; i++) { let node = queue.shift(); curLevel.push(node.val); if (node.left) { queue.push(node.left); } if (node.right) { queue.push(node.right); } } res.push(curLevel); } return res;}; äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦123456var maxDepth = function(root) { if (!root) { return 0; } return Math.max(maxDepth(root.left), maxDepth(root.right)) + 1;}; ç¿»è½¬äºŒå‰æ ‘12345678910var invertTree = function(root) { if (!root) { return null; } let left = invertTree(root.left); let right = invertTree(root.right); root.left = right; root.right = left; return root;}; äºŒå‰æ ‘çš„ç›´å¾„1234567891011121314var diameterOfBinaryTree = function(root) { let ans = 1; function getDepth(root) { if (!root) { return 0; } let left = getDepth(root.left); let right = getDepth(root.right); ans = Math.max(ans, left + right + 1); return Math.max(left, right) + 1; } getDepth(root); return ans - 1;};","link":"/2024-08-29-äºŒå‰æ ‘ç®—æ³•é¢˜/"},{"title":"äº¬ä¸œé‡‘è","text":"äº¬ä¸œé‡‘è 1.ç»„ä»¶åŒ–ï¼Œä¼˜ç¼ºç‚¹ 2.SDK ç‰ˆæœ¬ï¼ŒAã€Bç»„ä»¶ä¾èµ– Cï¼Œéƒ½æ”¹äº† C ç»„ä»¶çš„ç‰ˆæœ¬ï¼Œæ€ä¹ˆä¿è¯åŠŸèƒ½å¯ç”¨æ€§ 3.ä¸»å¯¼çš„é¡¹ç›®ï¼ŒSDK ä½“ç§¯ä¼˜åŒ–ï¼Œæœªä½¿ç”¨çš„æ–¹æ³•æ€ä¹ˆé¿å…è¯¯åˆ¤ 4.é¸¿è’™å¼€å‘äº†å“ªäº›é¡µé¢ï¼Œåˆ—è¡¨ List é‡Œçš„ä¸åŒç»„ä»¶åˆ¤æ–­æ˜¯ç”¨ Switch å—ï¼Ÿç”¨è¿‡ LazyForEach å—ï¼ŸJSON è½¬æ¨¡å‹æ€ä¹ˆè½¬çš„ï¼Ÿ 5.æœ‰æ²¡æœ‰æ¥è§¦ VisionProã€æœºå™¨å­¦ä¹ ã€å®å†µæ´»åŠ¨ 6.è§„åˆ’","link":"/2025-09-23-äº¬ä¸œé‡‘è/"},{"title":"å¥½æœªæ¥","text":"å¥½æœªæ¥ é¡¹ç›®ï¼š 1.ä½“ç§¯ä¼˜åŒ–çš„èƒŒæ™¯ï¼Œåšäº†å“ªäº›æ‰‹æ®µï¼Œæ”¶ç›Šï¼ŒäºŒè¿›åˆ¶æ˜¯è‡ªåŠ¨æ‰“åŒ…è¿˜æ˜¯æ‰‹åŠ¨æ‰“åŒ…ï¼ŸäºŒè¿›åˆ¶çš„ä»£ç é—®é¢˜æ€ä¹ˆè°ƒè¯•ï¼Ÿæœ‰æ²¡æœ‰é‡åˆ°æ‰“äºŒè¿›åˆ¶åå˜æˆ release åŒ…å’Œå¼€å‘ä¸ä¸€è‡´çš„æƒ…å†µ 2.MVCSã€SectionProvider çš„èƒŒæ™¯ï¼Œæ€ä¹ˆå®ç°çš„ï¼Ÿ 3.åŠ è½½é€Ÿåº¦ä¼˜åŒ– 4.é™æ€åˆ†æéƒ½æœ‰å“ªäº›ç±»å‹çš„é—®é¢˜ï¼Ÿæ˜¯å®šæœŸåšå—ï¼Ÿä¸ºä»€ä¹ˆä¸ææˆæµæ°´çº¿è‡ªåŠ¨æ£€æµ‹ï¼Ÿ 5.æ´»åŠ¨é¡µç»„ä»¶åŒ–æ€ä¹ˆåšçš„ï¼Ÿframe å¯é…ç½®å—ï¼Ÿ 6.åŒå‘é€šä¿¡ 7.æ¥å£å±‚å’Œ JS é€»è¾‘å±‚å¼‚å¸¸ç›‘æ§ 8.iOS26 å…³æ³¨äº†å— 9.ç”¨ AI åšäº†å“ªäº›äº‹æƒ…ï¼Œå“ªäº›é‡å¤æ€§çš„å¯ä»¥ç”¨ AI æ›¿ä»£ï¼Ÿç”¨çš„å…·ä½“æ˜¯å“ªä¸ª AIï¼Ÿ","link":"/2025-09-24-å¥½æœªæ¥/"},{"title":"è½¬è½¬","text":"è½¬è½¬ ä¸€é¢ï¼š 1.æ´»åŠ¨é¡µç»„ä»¶åŒ–ï¼ŒJSON ç»“æ„ï¼Œè·³è½¬åŒºåˆ† Scheme å’Œ HTTP æ˜¯è°æ¥å¤„ç†çš„ï¼Ÿ 2.åŠ è½½é€Ÿåº¦ä¼˜åŒ– 3.æ£€æµ‹æ— ç”¨ä»£ç æ˜¯æ£€æµ‹çš„ mach-o çš„æ— ç”¨ç±»è¿˜æ˜¯æ–¹æ³•ï¼Ÿ 4.å¤šä¸ªè¯·æ±‚å®Œæˆåé€šçŸ¥é™¤äº† GCD è¿˜æœ‰ä»€ä¹ˆæ–¹æ³•ï¼Ÿ 5.webView å’ŒåŸç”Ÿçš„äº¤äº’ï¼Œè®¾è®¡ä¸€ä¸ªç›‘å¬åŸç”Ÿé¡µé¢å£°æ˜å‘¨æœŸï¼Œé€šçŸ¥ H5ï¼Œï¼ˆæœ‰äº›éœ€è¦ç›‘å¬ï¼Œæœ‰äº›ä¸éœ€è¦ç›‘å¬ï¼‰ 6.webView åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼Œé¡¹ç›®é‡Œç”¨åˆ°çš„ 7.ç»„ä»¶åŒ–æ€ä¹ˆåˆ’åˆ†çš„æ¨¡å—ï¼Œåˆ†å±‚ 8.å†…å­˜ç®¡ç†ï¼Œé¡¹ç›®é‡Œå¸¸è§çš„å¾ªç¯å¼•ç”¨ï¼Œä¸ºä»€ä¹ˆç”¨ NSProxyï¼Œå’Œ NSObject åŒºåˆ« äºŒé¢ï¼š 1.ä»‹ç»é¡¹ç›®äº®ç‚¹ 2.è®¾è®¡åŸç”Ÿä¸ Flutter/H5 äº¤äº’ ä¸Šä¸­ä¸‹ä¸‰å±‚ 3.iOS å’Œ H5 äº¤äº’æ–¹æ³•ï¼Œä¼˜ç¼ºç‚¹ 4.å…·ä½“è§„åˆ’ï¼Œç›®å‰å¾…é‡ï¼Œofferï¼ŒæœŸæœ›è–ªèµ„ å‚è€ƒç­”æ¡ˆä¸€é¢ï¼š 1.æ´»åŠ¨é¡µç»„ä»¶åŒ–ï¼ŒJSON ç»“æ„ï¼Œè·³è½¬åŒºåˆ† Scheme å’Œ HTTP æ˜¯è°æ¥å¤„ç†çš„ï¼Ÿ 2.åŠ è½½é€Ÿåº¦ä¼˜åŒ– 3.æ£€æµ‹æ— ç”¨ä»£ç æ˜¯æ£€æµ‹çš„ mach-o çš„æ— ç”¨ç±»è¿˜æ˜¯æ–¹æ³•ï¼Ÿ 4.å¤šä¸ªè¯·æ±‚å®Œæˆåé€šçŸ¥é™¤äº† GCD è¿˜æœ‰ä»€ä¹ˆæ–¹æ³•ï¼Ÿ 5.webView å’ŒåŸç”Ÿçš„äº¤äº’ï¼Œè®¾è®¡ä¸€ä¸ªç›‘å¬åŸç”Ÿé¡µé¢å£°æ˜å‘¨æœŸï¼Œé€šçŸ¥ H5ï¼Œï¼ˆæœ‰äº›éœ€è¦ç›‘å¬ï¼Œæœ‰äº›ä¸éœ€è¦ç›‘å¬ï¼‰ 6.webView åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼Œé¡¹ç›®é‡Œç”¨åˆ°çš„ 7.ç»„ä»¶åŒ–æ€ä¹ˆåˆ’åˆ†çš„æ¨¡å—ï¼Œåˆ†å±‚ ï¼ˆ1ï¼‰Accessories Appé™„å±å“ Watchã€Extensionã€Widget ï¼ˆ2ï¼‰Business ä¸šåŠ¡ç»„ä»¶ æ–‡åº“ã€ç½‘ç›˜ã€æ€§èƒ½ç›‘æ§ã€ä»˜è´¹å’¨è¯¢ã€Feedã€æœç´¢ç­‰ ï¼ˆ3ï¼‰Interface æ¥å£å±‚ ï¼ˆ4ï¼‰Underlays æœåŠ¡ç»„ä»¶ æœç´¢å·¥å…·ã€Feedé€šç”¨ä¸šåŠ¡ï¼Œå¤©æ°”é€šç”¨æ•°æ®ç»„ä»¶ç­‰ ï¼ˆ5ï¼‰Services æœåŠ¡ç»„ä»¶ IMã€Talosã€Performanceã€UBCã€AFXç­‰ ï¼ˆ6ï¼‰Basics åŸºç¡€ç»„ä»¶ BDPDeviceã€Cocoaï¼ˆBBAFoundationã€BBAUIKitã€BDPWindowã€BDPAppearanceã€AFXï¼‰ã€Network ï¼ˆ7ï¼‰Vendors ä¸‰æ–¹åº“ AFNetworkingã€SDWebImageã€YYModelç­‰ 8.å†…å­˜ç®¡ç†ï¼Œé¡¹ç›®é‡Œå¸¸è§çš„å¾ªç¯å¼•ç”¨ï¼Œä¸ºä»€ä¹ˆç”¨ NSProxyï¼Œå’Œ NSObject åŒºåˆ« NSProxy ä¸»è¦ç”¨äºä»£ç†å’Œæ¶ˆæ¯è½¬å‘ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªæœºåˆ¶æ¥å®ç°ä¸ç›´æ¥å¤„ç†æ–¹æ³•è°ƒç”¨çš„å¯¹è±¡ã€‚ NSObject æ˜¯æ‰€æœ‰ Objective-C å¯¹è±¡çš„åŸºç¡€ç±»ï¼Œæä¾›äº†å¯¹è±¡ç®¡ç†å’Œé€šç”¨åŠŸèƒ½çš„å®ç°ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœä½ éœ€è¦å®ç°ä¸€ç§ä»£ç†æ¨¡å¼æˆ–è¿œç¨‹è°ƒç”¨ï¼ŒNSProxy æ˜¯åˆé€‚çš„é€‰æ‹©ã€‚å¦‚æœä½ åœ¨åˆ›å»ºä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼ŒNSObject æ˜¯ä½ é€šå¸¸ä¼šç»§æ‰¿çš„ç±»ã€‚ äºŒé¢ï¼š 1.ä»‹ç»é¡¹ç›®äº®ç‚¹ 2.è®¾è®¡åŸç”Ÿä¸ Flutter/H5 äº¤äº’ ä¸Šä¸­ä¸‹ä¸‰å±‚ 3.iOS å’Œ H5 äº¤äº’æ–¹æ³•ï¼Œä¼˜ç¼ºç‚¹ 4.å…·ä½“è§„åˆ’ï¼Œç›®å‰å¾…é‡ï¼Œofferï¼ŒæœŸæœ›è–ªèµ„ ğŸ“˜ iOS é¢è¯•é€šå…³æ‰‹å†Œï¼ˆç»„ä»¶åŒ– / H5 / æ€§èƒ½ / æ¶æ„ï¼‰ ğŸ§© ä¸€é¢æ ¸å¿ƒé¢˜ç›®è¯¦è§£1. æ´»åŠ¨é¡µç»„ä»¶åŒ–ï¼ŒJSON ç»“æ„ï¼Œè·³è½¬åŒºåˆ† Scheme å’Œ HTTP æ˜¯è°æ¥å¤„ç†çš„ï¼Ÿç­”æ¡ˆè¦ç‚¹ï¼š JSON æè¿°è·³è½¬ç›®æ ‡ï¼ˆå¦‚ URLã€pageIdã€paramsï¼‰ RouterManager/Navigator ç»Ÿä¸€è§£æ URLï¼Œå†³å®šæ‰“å¼€æ–¹å¼ï¼š 12345if ([url.scheme isEqualToString:@\"http\"] || [url.scheme isEqualToString:@\"https\"]) { // æ‰“å¼€ WebView} else if ([url.scheme isEqualToString:@\"app\"]) { // åŸç”Ÿè·³è½¬} åˆ†ç¦»è·³è½¬é€»è¾‘ä¸é¡µé¢ç»“æ„ï¼Œä¾¿äºåŠ¨æ€é…ç½®ä¸çƒ­æ›´æ–°ã€‚ 2. åŠ è½½é€Ÿåº¦ä¼˜åŒ–ä¼˜åŒ–æ–¹å¼ï¼š é¦–å±ä¼˜åŒ–ï¼šå¼‚æ­¥åŠ è½½ã€éª¨æ¶å±å ä½ã€æŒ‰éœ€åŠ è½½ å›¾ç‰‡ä¼˜åŒ–ï¼šå‹ç¼©ã€ç¼“å­˜ï¼ˆSDWebImageï¼‰ã€æ‡’åŠ è½½ æ•°æ®ä¼˜åŒ–ï¼šåˆå¹¶è¯·æ±‚ã€æ¥å£èšåˆã€GZIP å‹ç¼© ç¦»çº¿ç¼“å­˜ï¼šé¢„åŠ è½½ HTMLã€JS Bundleã€èµ„æºåŒ… ç½‘ç»œä¼˜åŒ–ï¼šHTTP2ã€å¤šè·¯å¤ç”¨ã€CDN é…ç½® 3. æ£€æµ‹æ— ç”¨ä»£ç æ˜¯æ£€æµ‹ Mach-O çš„ç±»è¿˜æ˜¯æ–¹æ³•ï¼Ÿç­”æ³•ï¼š éƒ½å¯ä»¥ï¼Œé€šè¿‡é™æ€åˆ†æï¼š LinkMap æ–‡ä»¶åˆ†ææœªè¢«å¼•ç”¨çš„ç¬¦å· Clang æ’æ¡©ã€Swift Demangle æŸ¥çœ‹æœªè°ƒç”¨çš„æ–¹æ³• Mach-O æ˜¯æœ€ç»ˆäº§ç‰©ï¼Œåæ˜ â€œæœªè¢«é“¾æ¥è¿›äºŒè¿›åˆ¶â€çš„éƒ¨åˆ† 4. å¤šè¯·æ±‚å®Œæˆé€šçŸ¥é™¤äº† GCDï¼Œè¿˜æœ‰ä»€ä¹ˆï¼Ÿæ–¹æ¡ˆï¼š NSOperationQueue + addDependency Promise/Futureï¼šPromiseKitã€Combineã€RxSwift KVO ç›‘å¬å±æ€§å˜åŒ–ï¼Œè§¦å‘ UI æ›´æ–° Dispatch Semaphoreï¼šæ‰‹åŠ¨æ§åˆ¶ä¿¡å· 5. WebView ä¸åŸç”Ÿäº¤äº’ï¼Œç›‘å¬é¡µé¢ç”Ÿå‘½å‘¨æœŸé€šçŸ¥ H5è®¾è®¡ï¼š åŸç”Ÿé¡µé¢ç”Ÿå‘½å‘¨æœŸè°ƒç”¨ JS é€šçŸ¥ï¼š 1[webView evaluateJavaScript:@\"window.onNativeLifeCycle('viewDidAppear')\"] JS æ³¨å†Œï¼š 123window.onNativeLifeCycle = function(state) { if (state === 'viewDidAppear') { /* å¤„ç† */ }} å¯é…ç½®æ§åˆ¶å“ªäº›ç”Ÿå‘½å‘¨æœŸéœ€è¦åŒæ­¥ï¼ˆå¦‚é€šè¿‡ JSBridge å‚æ•°æŒ‡å®šï¼‰ 6. WebView åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼ˆé¡¹ç›®ä¸­ç”¨åˆ°çš„ï¼‰æ–¹æ³•ï¼š ç¦»çº¿èµ„æºåŒ…ï¼ˆJS/CSS/HTMLï¼‰æ‰“åŒ…åœ¨æœ¬åœ° WKWebView å¤ç”¨æ± ï¼ˆWebViewPoolï¼‰å‡å°‘åˆå§‹åŒ–å¼€é”€ è®¾ç½® cachePolicyï¼Œåˆç†ä½¿ç”¨ç¼“å­˜ ç¦ç”¨æ’ä»¶ï¼ˆå¦‚ JS æ’ä»¶ã€è‡ªåŠ¨æ£€æµ‹ï¼‰æé«˜å¯åŠ¨é€Ÿåº¦ 7. ç»„ä»¶åŒ–æ€ä¹ˆåˆ’åˆ†æ¨¡å— / åˆ†å±‚ï¼Ÿæ¨èç»“æ„ï¼š Base å±‚ï¼šç½‘ç»œã€å·¥å…·ç±»ã€æ—¥å¿—ã€é…ç½® UI å±‚ï¼šé€šç”¨ UI ç»„ä»¶ï¼ˆæŒ‰é’®ã€å¡ç‰‡ã€å¼¹çª—ï¼‰ Biz å±‚ï¼šç‹¬ç«‹ä¸šåŠ¡æ¨¡å—ï¼ˆç™»å½•ã€æ”¯ä»˜ã€å•†åŸï¼‰ Service å±‚ï¼šç»Ÿä¸€æœåŠ¡ï¼ˆåŸ‹ç‚¹ã€æƒé™ã€æ¨é€ï¼‰ Protocol å±‚ï¼šå„æ¨¡å—ä¹‹é—´è§£è€¦åè®® å…³é”®è¯ï¼š è§£è€¦ã€é«˜å†…èšã€ä½è€¦åˆã€æ¨¡å—éš”ç¦»ã€å¯çƒ­æ›´æ–° 8. å†…å­˜ç®¡ç†ï¼šå¾ªç¯å¼•ç”¨ã€NSProxy ä¸ NSObject åŒºåˆ«å¸¸è§å¾ªç¯å¼•ç”¨ï¼š Timer æŒæœ‰æ§åˆ¶å™¨ Block æ•è· self delegate å¼ºå¼•ç”¨ NSProxy ä½¿ç”¨ï¼š ä¸­è½¬ä»£ç†ï¼ˆå¦‚ NSTimerï¼‰ï¼š1NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:1 target:[WeakProxy proxyWithTarget:self] selector:@selector(run) userInfo:nil repeats:YES]; ä¸ NSObject åŒºåˆ«ï¼š NSProxy æ˜¯æ¶ˆæ¯è½¬å‘ä¸“ç”¨ï¼Œä¸ç»§æ‰¿ NSObjectï¼Œæ— é»˜è®¤è¡Œä¸º NSObject æœ‰é»˜è®¤çš„å†…å­˜ç®¡ç† / KVO / å“åº”é“¾ ğŸš€ äºŒé¢æ ¸å¿ƒé¢˜ç›®è¯¦è§£1. é¡¹ç›®äº®ç‚¹ä»‹ç»ç­”é¢˜å»ºè®®ï¼š é€‰ä¸€ä¸ªâ€œæœ‰æŒ‘æˆ˜/æˆæœâ€çš„æ¨¡å—æ·±å…¥è®²ï¼š æ¯”å¦‚ï¼šæ´»åŠ¨é¡µç»„ä»¶åŒ–ã€åŠ è½½ä¼˜åŒ–ã€è‡ªç ” Bridge æ¡¥æ¥æ–¹æ¡ˆ ä½“ç°æŠ€æœ¯è½åœ°ã€å›¢é˜Ÿåä½œã€ææ•ˆæ•ˆæœ 2. åŸç”Ÿä¸ Flutter/H5 äº¤äº’è®¾è®¡ï¼ˆä¸Šä¸‹ä¸‰å±‚ï¼‰ä¸‰å±‚æ¶æ„ï¼š ä¸Šå±‚ï¼šä¸šåŠ¡ APIï¼ˆloginã€payã€shareï¼‰ ä¸­å±‚ï¼šBridge åè®®å®šä¹‰ã€å‚æ•°ç»Ÿä¸€å°è£…ï¼ˆJSONï¼‰ åº•å±‚ï¼šNative å®ç°ï¼ŒJS è°ƒç”¨å¤„ç†ã€å›è°ƒã€æƒé™åˆ¤æ–­ç­‰ 3. iOS ä¸ H5 äº¤äº’æ–¹æ³•åŠä¼˜ç¼ºç‚¹ æ–¹æ³• ä¼˜ç‚¹ ç¼ºç‚¹ evaluateJavaScript ç®€å•ç›´æ¥ æ— å›è°ƒã€ä¸å®‰å…¨ WKScriptMessageHandler å®‰å…¨è§„èŒƒã€ç»“æ„æ¸…æ™° é…ç½®ç¹çï¼Œä¸é€‚åˆé«˜é¢‘äº¤äº’ URL Scheme æ‹¦æˆª é€šç”¨æ€§å¼º å‚æ•°å—é™ã€å®‰å…¨å·® 4. å½“å‰å¾…é‡ &amp; æœŸæœ›è–ªèµ„å»ºè®®ç­”æ³•ï¼š å½“å‰æ€»åŒ…/è–ªèµ„èŒƒå›´ æœŸæœ›å¹³å°æˆé•¿ + æŠ€æœ¯æ·±åº¦ +å›æŠ¥åŒ¹é… å¯æ¥å—ä¸€å®šçµæ´»æ€§ï¼Œä½†çœ‹é‡å‘å±•æ½œåŠ›","link":"/2024-09-03-è½¬è½¬/"},{"title":"å¤©çœ¼æŸ¥","text":"å¤©çœ¼æŸ¥ 1.é€šç”¨åŒ–æŠ€æœ¯æå‡è¿­ä»£æ•ˆç‡ 2.é™ä½ä¸‰æ–¹ App æ¥å…¥æˆæœ¬ 3.SDK ä½“ç§¯ä¼˜åŒ–ï¼Œä¸ºä»€ä¹ˆç”¨ Masonry ä¼šå¢åŠ ä½“ç§¯ 4.åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼Œæ€ä¹ˆç»Ÿè®¡çš„ï¼Ÿå¤šä¸ªè¯·æ±‚å¹¶å‘æ€ä¹ˆå¤„ç†çš„ï¼Ÿ 5.å¼•ç”¨è®¡æ•°ï¼Œisa é‡Œéƒ½æœ‰ä»€ä¹ˆï¼Ÿweak çš„å®ç°ï¼Ÿå¯¹è±¡çš„é‡Šæ”¾æµç¨‹ 6.æ–¹æ³•äº¤æ¢äº¤æ¢çš„æ˜¯ä»€ä¹ˆï¼Ÿ 7.SDWebImageåŠ è½½urlçš„æµç¨‹ï¼Œä¸‰çº§ç¼“å­˜ï¼Œæ¸…é™¤ç¼“å­˜ 7.block çš„å˜é‡æ•è·ï¼Œä¸ºä»€ä¹ˆç”¨__blockå¯ä»¥ä¿®æ”¹å±€éƒ¨å˜é‡çš„å€¼ 8.æ‰¾å‡ºä»£ç é‡Œæœ‰é—®é¢˜çš„åœ°æ–¹ï¼Œå¯å˜æ•°ç»„ç”¨ copy ä¿®é¥°ï¼Œè°ƒç”¨æ·»åŠ å…ƒç´ æ–¹æ³•ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿèƒ½ä¸èƒ½ä¸ŠæŠ¥ã€æ‹¦æˆªé—ªé€€ï¼Ÿçº¿ç¨‹ä¸å®‰å…¨æ€ä¹ˆå¤„ç†ï¼Ÿå¸¸ç”¨çš„åŠ é”æ–¹å¼ï¼ŒåŒºåˆ«ï¼Ÿ 9.åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹ å‚è€ƒç­”æ¡ˆ1.é€šç”¨åŒ–æŠ€æœ¯æå‡è¿­ä»£æ•ˆç‡ 2.é™ä½ä¸‰æ–¹ App æ¥å…¥æˆæœ¬ 3.SDK ä½“ç§¯ä¼˜åŒ–ï¼Œä¸ºä»€ä¹ˆç”¨ Masonry ä¼šå¢åŠ ä½“ç§¯ 4.åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼Œæ€ä¹ˆç»Ÿè®¡çš„ï¼Ÿå¤šä¸ªè¯·æ±‚å¹¶å‘æ€ä¹ˆå¤„ç†çš„ï¼Ÿ 5.å¼•ç”¨è®¡æ•°ï¼Œisa é‡Œéƒ½æœ‰ä»€ä¹ˆï¼Ÿweak çš„å®ç°ï¼Ÿå¯¹è±¡çš„é‡Šæ”¾æµç¨‹ï¼Œæ€ä¹ˆåˆ¤æ–­æ˜¯å¦æœ‰å¼±å¼•ç”¨ isa nonpointer 0ï¼Œä»£è¡¨æ™®é€šçš„æŒ‡é’ˆï¼Œå­˜å‚¨ç€Classã€Meta-Classå¯¹è±¡çš„å†…å­˜åœ°å€1ï¼Œä»£è¡¨ä¼˜åŒ–è¿‡ï¼Œä½¿ç”¨ä½åŸŸå­˜å‚¨æ›´å¤šçš„ä¿¡æ¯ has_assoc æ˜¯å¦æœ‰è®¾ç½®è¿‡å…³è”å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‡Šæ”¾æ—¶ä¼šæ›´å¿« has_cxx_dtor æ˜¯å¦æœ‰C++çš„ææ„å‡½æ•°ï¼ˆ.cxx_destructï¼‰ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‡Šæ”¾æ—¶ä¼šæ›´å¿« shiftcls å­˜å‚¨ç€Classã€Meta-Classå¯¹è±¡çš„å†…å­˜åœ°å€ä¿¡æ¯ magic ç”¨äºåœ¨è°ƒè¯•æ—¶åˆ†è¾¨å¯¹è±¡æ˜¯å¦æœªå®Œæˆåˆå§‹åŒ– weakly_referenced æ˜¯å¦æœ‰è¢«å¼±å¼•ç”¨æŒ‡å‘è¿‡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‡Šæ”¾æ—¶ä¼šæ›´å¿« deallocating å¯¹è±¡æ˜¯å¦æ­£åœ¨é‡Šæ”¾ extra_rc é‡Œé¢å­˜å‚¨çš„å€¼æ˜¯å¼•ç”¨è®¡æ•°å™¨å‡1 has_sidetable_rc å¼•ç”¨è®¡æ•°å™¨æ˜¯å¦è¿‡å¤§æ— æ³•å­˜å‚¨åœ¨isaä¸­å¦‚æœä¸º1ï¼Œé‚£ä¹ˆå¼•ç”¨è®¡æ•°ä¼šå­˜å‚¨åœ¨ä¸€ä¸ªå«SideTableçš„ç±»çš„å±æ€§ä¸­ 6.æ–¹æ³•äº¤æ¢äº¤æ¢çš„æ˜¯ä»€ä¹ˆï¼Ÿ 7.block çš„å˜é‡æ•è·ï¼Œä¸ºä»€ä¹ˆç”¨__blockå¯ä»¥ä¿®æ”¹å±€éƒ¨å˜é‡çš„å€¼ 8.æ‰¾å‡ºä»£ç é‡Œæœ‰é—®é¢˜çš„åœ°æ–¹ï¼Œå¯å˜æ•°ç»„ç”¨ copy ä¿®é¥°ï¼Œè°ƒç”¨æ·»åŠ å…ƒç´ æ–¹æ³•ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿèƒ½ä¸èƒ½ä¸ŠæŠ¥ã€æ‹¦æˆªé—ªé€€ï¼Ÿçº¿ç¨‹ä¸å®‰å…¨æ€ä¹ˆå¤„ç†ï¼Ÿå¸¸ç”¨çš„åŠ é”æ–¹å¼ï¼ŒåŒºåˆ«ï¼Ÿ 9.åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹ 1234567891011121314151617181920212223242526272829/** * function ListNode(val, next) { * this.val = (val===undefined ? 0 : val) * this.next = (next===undefined ? null : next) * } */var removeNthFromEnd = function(head, n) { let length = getLength(head); let i = length - n; let dummyNode = new ListNode(); dummyNode.next = head; let p = dummyNode; while (i &gt; 0) { p = p.next; i--; } p.next = p.next.next; return dummyNode.next;};var getLength = function(head) { let length = 0; let p = head; while (p) { length++; p = p.next; } return length;}","link":"/2024-08-29-å¤©çœ¼æŸ¥/"},{"title":"APUS","text":"APUS ä¸€é¢ï¼š 1.è‡ªæˆ‘ä»‹ç»ï¼Œä¸šç»© 2.å†…å­˜æ³„æ¼æ€ä¹ˆé¿å…ï¼Ÿæ€ä¹ˆæ£€æµ‹ 3.GCD å’Œ NSOperation ä½¿ç”¨åœºæ™¯ï¼›çº¿ç¨‹åŒæ­¥å¹¶å‘ 4.SDK å’Œä¸šåŠ¡å¼€å‘æœ‰ä»€ä¹ˆéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Ÿæ¯”å¦‚ç¨³å®šæ€§ã€æ‰“åŒ…ç­‰ 5.Swift å’Œ OC æ··ç¼–æœ‰ä»€ä¹ˆéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Ÿ 6.çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ 7.ä½ æœ€è¿‘åœ¨å“ªæ–¹é¢æ„Ÿå…´è¶£ï¼Œæ¯”å¦‚è·¨ç«¯ã€ARã€å¤§æ¨¡å‹ç­‰ 8.åšè¿‡åˆ†äº«å—ï¼Ÿ è·¨ç«¯æ¡†æ¶åˆ†äº«ã€é¸¿è’™åˆ†äº«ã€DeepSeek æœ¬åœ°éƒ¨ç½²åˆ†äº«ã€å‰ç«¯é‡åˆ°çš„é—®é¢˜åˆ†äº«ï¼›ä¸šåŠ¡åˆ†äº« 9.æ€ä¹ˆå­¦ä¹ æ–°çŸ¥è¯†ï¼Ÿçœ‹è¿‡å“ªäº›æºç ï¼Ÿ äºŒé¢ï¼š 1.Swift çš„å¤šçº¿ç¨‹å¹¶å‘éƒ½æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿé™¤äº† GCDï¼Œasync/await æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿcoobjc æºç çœ‹è¿‡å—ï¼Ÿ 2.Flutter ç»„ä»¶ build çš„è¿‡ç¨‹ï¼›æ··åˆæ ˆ 3.Base64 æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œä»å›¾ç‰‡åˆ° base64 çš„åŸç†ï¼Ÿ 4.æ€ä¹ˆåšåŠ å¯†çš„ï¼Ÿäº†è§£å“ªäº›åŠ å¯†ç®—æ³•ï¼Ÿéå¯¹ç§°åŠ å¯†ç”¨çš„æ˜¯ä»€ä¹ˆç®—æ³•ï¼Ÿ ä¸‰é¢ï¼š HR","link":"/APUS/"},{"title":"ä¸€ç‚¹èµ„è®¯","text":"ä¸€ç‚¹èµ„è®¯ 1.ç”¨è¿‡ SwiftUI å—ï¼Ÿ 2.ç»„ä»¶åŒ– 3.å†…å­˜ç®¡ç†ï¼Ÿ ï¼ˆ1ï¼‰TaggedPointer æ˜¯å€¼ç±»å‹è¿˜æ˜¯æŒ‡é’ˆç±»å‹ï¼Ÿ Tag å’Œå€¼æ˜¯æ€ä¹ˆåŒºåˆ†çš„ï¼Ÿ ï¼ˆ2ï¼‰union å…±ç”¨ä½“é‡Œè¿˜æœ‰å“ªäº›ï¼Ÿ ï¼ˆ3ï¼‰autorelease å’Œ Runloop æ˜¯æ€ä¹ˆåä½œçš„ï¼Ÿ 4.[UIView a]; æ˜¯å¦èƒ½è°ƒç”¨æˆåŠŸï¼Ÿ 123456789101112@interface NSObject (Ext)- (void)a;@end@implementation NSObject (Ext)- (void)a { NSLog(@\"aaaa\");}@end 5.é—®æ˜¯å¦èƒ½æ‰“å° aaaaã€‚ 1234567891011121314151617181920212223242526272829@interface A : NSObject- (void)a;@end@implementation A- (void)a { NSLog(@\"aaaa\");}@end@interface B : A- (void)a;@end@implementation B- (void)a { [super performSelector:@selector(a)];}@endB *b = [[B alloc] init];[b a]; 6.Swiftï¼ˆ1ï¼‰defer å…³é”®å­—çš„ä½œç”¨ï¼ˆ2ï¼‰gard elseçš„ä½œç”¨ 7.æ¥è§¦è¿‡ AI å—ï¼Ÿ å‚è€ƒç­”æ¡ˆ1.ç”¨è¿‡ SwiftUI å—ï¼Ÿ 2.ç»„ä»¶åŒ– 3.å†…å­˜ç®¡ç†ï¼Ÿ ï¼ˆ1ï¼‰TaggedPointer æ˜¯å€¼ç±»å‹è¿˜æ˜¯æŒ‡é’ˆç±»å‹ï¼Ÿ Tag å’Œå€¼æ˜¯æ€ä¹ˆåŒºåˆ†çš„ï¼Ÿ Tagged Pointer çš„â€œæŒ‡é’ˆâ€å…¶å®æ˜¯ ä¸€ä¸ªç»è¿‡ç¼–ç çš„å€¼ï¼ˆValue Encodingï¼‰ï¼Œ ä½†åœ¨ ç±»å‹ç³»ç»Ÿå±‚é¢ï¼ˆObjective-C / Swift Runtimeï¼‰å®ƒä»ç„¶æ˜¯ä¸€ä¸ª æŒ‡é’ˆç±»å‹ï¼ˆidï¼‰ã€‚ TaggedPointer çš„ç»“æ„ï¼ˆä»¥ 64 ä½ä¸ºä¾‹ï¼‰ ä½æ®µ å«ä¹‰ [63] æ˜¯å¦ä¸º Tagged Pointer çš„æ ‡å¿—ä½ï¼ˆé€šå¸¸ä¸º 1ï¼‰ [62..60] tag å€¼ï¼Œç”¨äºåŒºåˆ†ç±»å‹ï¼ˆNSNumberã€NSDateã€NSStringç­‰ï¼‰ [59..0] å­˜å‚¨çš„å®é™…æ•°æ®ï¼ˆvalue bitsï¼‰ Tag ä¸ Value å¦‚ä½•åŒºåˆ† å…³é”®å°±åœ¨ æœ€é«˜ä½ï¼ˆbit 63ï¼‰ï¼š æ™®é€šå¯¹è±¡ï¼šæŒ‡é’ˆæœ€é«˜ä½ä¸º 0ï¼Œè¡¨ç¤ºå®ƒæ˜¯ä¸€ä¸ªçœŸæ­£çš„å†…å­˜åœ°å€ã€‚ Tagged Pointerï¼š æœ€é«˜ä½ä¸º 1ï¼Œè¡¨ç¤ºå®ƒä¸æ˜¯åœ°å€ï¼Œè€Œæ˜¯ç¼–ç å€¼ã€‚ ï¼ˆ2ï¼‰union å…±ç”¨ä½“é‡Œè¿˜æœ‰å“ªäº›ï¼Ÿ ï¼ˆ3ï¼‰autorelease å’Œ Runloop æ˜¯æ€ä¹ˆåä½œçš„ï¼Ÿ autorelease å»¶è¿Ÿå¯¹è±¡é‡Šæ”¾ï¼ŒRunLoop å†³å®šé‡Šæ”¾çš„æ—¶æœºã€‚ 4.[UIView a]; æ˜¯å¦èƒ½è°ƒç”¨æˆåŠŸï¼Ÿ ä¸èƒ½ 5.é—®æ˜¯å¦èƒ½æ‰“å° aaaaã€‚ [super performSelector:@selector(a)] å®é™…ä¸Šæ˜¯å…ˆç”¨ performSelector: å‘é€æ¶ˆæ¯ç»™ selfï¼Œä¹Ÿå°±æ˜¯å½“å‰å¯¹è±¡ bï¼Œç„¶å runtime ä¼šæ ¹æ® self çš„ç±» æŸ¥æ‰¾å®ç°ã€‚ è¿™é‡Œ self çš„ç±»æ˜¯ Bã€‚ æ‰€ä»¥å®ƒä¼šæ‰¾åˆ° B è‡ªå·±çš„ -a æ–¹æ³•ï¼Œå†æ¬¡æ‰§è¡Œ [super performSelector:@selector(a)]ã€‚ ä¸ä¼šæ‰“å° aaaaï¼Œè€Œæ˜¯å¯¼è‡´æ— é™é€’å½’å´©æºƒã€‚ 6.Swiftï¼ˆ1ï¼‰defer å…³é”®å­—çš„ä½œç”¨ï¼ˆ2ï¼‰gard elseçš„ä½œç”¨ 7.æ¥è§¦è¿‡ AI å—ï¼Ÿ","link":"/ä¸€ç‚¹èµ„è®¯/"},{"title":"ofoé¢è¯•é¢˜","text":"ofoé¢è¯•é¢˜ 1ã€block çš„åº•å±‚å®ç°? 2ã€block çš„ç±»å‹æœ‰å“ªå‡ ç§? 3ã€ä½ ç¢°åˆ°çš„ block çš„å¾ªç¯å¼•ç”¨? 4ã€ä¸ºä»€ä¹ˆä½ åœ¨ç”¨ Masonry , AFNetworking çš„ block å›è°ƒä¸éœ€è¦å¯¹ self è¿›è¡Œ __weak? 5ã€å‡ºç°é‡æŒ‡é’ˆçš„æƒ…å†µå¤§æ¦‚æœ‰å“ªäº›ï¼Ÿ 6ã€Swift é‡Œçš„é—­åŒ…å’Œ OC çš„ block çš„åŒºåˆ«ã€‚ 7ã€Sqlite ä½¿ç”¨çš„æ—¶å€™éœ€è¦æ³¨æ„ä»€ä¹ˆã€‚","link":"/ofoé¢è¯•é¢˜/"},{"title":"iOS é¢è¯•æŠ€æœ¯ç‚¹","text":"iOS é¢è¯•æŠ€æœ¯ç‚¹ é—®é¢˜ æœŸæœ› NSDicationary çš„æœ¬è´¨ ç†è§£å“ˆå¸Œè¡¨ï¼ŒçŸ¥é“å…¶éå†ä¸æ˜¯é¡ºåºçš„ ARCä¸‹å†…å­˜æ³„æ¼çš„åŸå› ï¼Œå¾ªç¯å¼•ç”¨æ—¶å¦‚ä½•å‘ç”Ÿä»¥åŠå¦‚ä½•é¿å… ç†è§£ARCçš„æœºåˆ¶ä»è€ŒçŸ¥é“å†…å­˜æ³„æ¼çš„äº§ç”Ÿï¼Œå¹¶çŸ¥é“å¾ªç¯å¼•ç”¨æ˜¯å¦‚ä½•äº§ç”Ÿå’Œé¿å… å¸¸è§çš„å¯¼è‡´ç¨‹åºå´©æºƒçš„åŸå›  çŸ¥é“å´©æºƒçš„åŸå› æœ¬è´¨æ˜¯åƒµå°¸å†…å­˜æˆ–æŒ‡å‘é”™è¯¯ï¼Œèƒ½å¤Ÿåœ¨å®é™…å¼€å‘ä¸­é¿å… ä½¿ç”¨å¤šçº¿ç¨‹çš„å‡ ç§æ–¹å¼ çŸ¥é“NSThreadã€NSOperationQueueå’ŒGCDä¸‰ç§å¤šçº¿ç¨‹å®ç°æ–¹å¼å¹¶èƒ½ç®€å•ä»‹ç»åº”ç”¨å®ä¾‹ï¼Œå°¤å…¶è¦ç†Ÿæ‚‰GCDçš„ä½¿ç”¨ å¦‚ä½•å®ç°ä¸€ä¸ªå•ä¾‹ èƒ½å¤Ÿå¤§ä½“è¯´å‡ºå•ä¾‹çš„å®ç°åŸç†ï¼Œå®ç°æ–¹æ³•å¤šå¤šç›Šå–„ï¼Œèƒ½è®²å‡ºå„ä¸ªå®ç°æ–¹æ³•çš„ä¼˜ç¼ºç‚¹æœ€å¥½ NSArrayå’ŒNSSetçš„åŒºåˆ«ä»¥åŠä½¿ç”¨æ—¶æœº èƒ½å¤Ÿç†è§£é¡ºåºè¡¨å’Œé›†åˆçš„æ¦‚å¿µ NSIntegerå’Œintçš„åŒºåˆ« èƒ½çŸ¥é“NSIntegerçš„ä½é•¿å¤§äºç­‰äºintï¼Œè€ƒå¯Ÿå¯¹åŸºç¡€æ•°æ®ç±»å‹çš„ç†è§£ NSDictionaryçš„å¿«é€Ÿæ„å»ºæ–¹æ³•ä»¥åŠæ³¨æ„äº‹é¡¹ èƒ½å¤ŸçŸ¥é“NSDictionaryçš„å¿«é€Ÿæ„å»ºæ–¹æ³•ï¼Œå°¤å…¶è¦çŸ¥é“ä¸å¯ä¼ nilçš„æŒ‡é’ˆ ä»‹ç»ä¸€ä¸‹Autolayoutå’ŒAutoresizing è€ƒå¯Ÿå¯¹ä¸¤ç§å¸ƒå±€æ–¹æ³•çš„ç†è§£ï¼Œèƒ½å¤Ÿç­”é¢˜è¯´å‡ºå®ƒä»¬çš„åŸç† å¯¹è±¡åŠViewControllerçš„ç”Ÿå‘½å‘¨æœŸ å¯¹ViewControllerçš„ç”Ÿå‘½å‘¨æœŸæœ‰æ‰€äº†è§£ çº¿ç¨‹é”çš„å‡ ç§ä½¿ç”¨æ–¹å¼ è‡³å°‘çŸ¥é“NSLockå’Œsynchronizedï¼Œèƒ½å¤Ÿäº†è§£semaphoreã€é€’å½’é”ã€æ¡ä»¶é”å’Œåˆ†å¸ƒé”å¯åŠ åˆ† blockçš„ä½¿ç”¨ä»¥åŠæ³¨æ„äº‹é¡¹ å®é™…ä½¿ç”¨è¿‡blockä»¥åŠçŸ¥é“å¦‚ä½•é¿å…å¾ªç¯å¼•ç”¨ strongã€weakã€retainã€unsafe_unretainã€assignã€copyçš„åŒºåˆ«ä»¥åŠä½¿ç”¨åœºæ™¯ èƒ½å¤Ÿè¯´å‡ºå„ä¸ªä¿®é¥°ç¬¦çš„ä½œç”¨ æ•°æ®æŒä¹…åŒ–çš„å‡ ç§æ–¹å¼ã€åº”ç”¨åœºæ™¯å’Œä¼˜ç¼ºç‚¹ è‡³å°‘çŸ¥é“NSUserDefaultå’ŒPlistã€æ–‡ä»¶ä¸‰ç§ä¿å­˜æ–¹å¼ï¼ŒçŸ¥é“sqliteæˆ–CoreDataå¯åŠ åˆ† å¦‚ä½•è¿›è¡Œä¸€ä¸ªhttpåè®®çš„ç½‘ç»œè¯·æ±‚ èƒ½å¤ŸçŸ¥é“NSURLConnectionæˆ–NSURLSessionçš„ä½¿ç”¨æ–¹å¼ ç®€ä»‹åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ èƒ½å¤ŸçŸ¥é“åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ¯ä¸ªå‘¨æœŸçš„å›è°ƒæ˜¯åœ¨ä»€ä¹ˆæ—¶æœº NSNotificationçš„ä½¿ç”¨åŠæ³¨æ„äº‹é¡¹ èƒ½å¤Ÿç†è§£NSNotificationçš„å¹¿æ’­æœºåˆ¶ã€ä¼ å‚ä»¥åŠé¿å…keyè¦†ç›– NSUserDefaultä½¿ç”¨æ—¶åº”è¯¥æ³¨æ„ä»€ä¹ˆ èƒ½å¤ŸçŸ¥é“NSUserDefaultæœ¬è´¨æ˜¯ä¿å­˜åˆ°plistæ–‡ä»¶ï¼Œä»¥åŠå¯¹è±¡è¦å®ç°NSCoderåè®® OC Runtimeä»‹ç» å¯¹Objective-Cçš„åº•å±‚èƒ½å¤Ÿæœ‰è‡ªå·±çš„æ­£ç¡®ç†è§£ OC Runloopä»‹ç» å¯¹Objective-Cçš„åº•å±‚èƒ½å¤Ÿæœ‰è‡ªå·±çš„æ­£ç¡®ç†è§£ Categoryçš„æœ¬è´¨ å¯¹Objective-Cçš„åº•å±‚èƒ½å¤Ÿæœ‰è‡ªå·±çš„æ­£ç¡®ç†è§£ å‡½æ•°å¼ç¼–ç¨‹å’ŒReactiveCocoa å¯¹Objective-Cçš„åº•å±‚èƒ½å¤Ÿæœ‰è‡ªå·±çš„æ­£ç¡®ç†è§£ blockçš„å®ç°åŸç† å¯¹Objective-Cçš„åº•å±‚èƒ½å¤Ÿæœ‰è‡ªå·±çš„æ­£ç¡®ç†è§£ å¯¹Cocoaä¸­UITableViewã€UILabelç­‰ç»„ä»¶çš„å®ç°åŸç†æœ‰è‡ªå·±çš„ç†è§£ èƒ½å¤Ÿé€šè¿‡ç»„ä»¶çš„è¡¨è±¡çœ‹åˆ°æœ¬è´¨ï¼Œè€ƒå¯Ÿç¼–ç¨‹ç»éªŒå’Œæ¨å¯¼èƒ½åŠ› ä»‹ç»UIViewçš„ç»„æˆ èƒ½å¤Ÿå¯¹UIViewæœ‰æ·±å…¥ç†è§£ ä»‹ç»CoreGraphicsã€CoreAnimationã€CoreTextçš„æŠ€æœ¯æ¶æ„åŠç®€å•ä½¿ç”¨ èƒ½å¤Ÿç†Ÿæ‚‰å’Œç†è§£iOSå¼€å‘ä¸­å¸¸ç”¨çš„Coreç³»åˆ—åº“ï¼Œèƒ½ç†Ÿç»ƒä½¿ç”¨å®ƒä»¬ ä»‹ç»Xcodeçš„Build Settingså’ŒBuild Phasesä¸­å¸¸ç”¨çš„è®¾ç½® èƒ½å¤ŸåŸºæœ¬çŸ¥é“iOSé¡¹ç›®çš„ç¼–è¯‘è¿‡ç¨‹ ä¸€ä¸ªiOSé¡¹ç›®çš„å¤§ä½“ç¼–è¯‘ã€é“¾æ¥ä»¥åŠè¿è¡Œè¿‡ç¨‹ èƒ½å¤ŸåŸºæœ¬çŸ¥é“iOSé¡¹ç›®çš„ç¼–è¯‘è¿‡ç¨‹ ä»‹ç»Cocoapodsï¼ˆæˆ–å…¶å®ƒåŒ…ç®¡ç†å·¥å…·ï¼‰çš„å®ç°æ€è·¯ èƒ½å¤ŸåŸºæœ¬çŸ¥é“iOSé¡¹ç›®çš„ç¼–è¯‘è¿‡ç¨‹ å¦‚ä½•ä½¿ç”¨Xcodeè¿›è¡Œè°ƒè¯•å’Œæ’é”™ çŸ¥é“å¦‚ä½•è°ƒè¯•å’Œæ’é”™ ä»‹ç»Instrumentsä¸­å¸¸ç”¨çš„åŠŸèƒ½ èƒ½å¤Ÿä½¿ç”¨å·¥å…·è¿›è¡Œæ€§èƒ½åˆ†æå’Œç›‘æ§ MVVMæ¨¡å¼ä»‹ç»åŠå…¶ä¼˜ç¼ºç‚¹","link":"/iOSé¢è¯•æŠ€æœ¯ç‚¹/"},{"title":"ä¸»è¯­ç©ºé—´","text":"ä¸»è¯­ç©ºé—´ ä¸€é¢ï¼š 1.SectionProvider æ‹†åˆ† TableView 2.SDK æ„å»ºæ—¶é•¿ä¸ºä»€ä¹ˆé‚£ä¹ˆä¹…ï¼Ÿ 3.ç»„ä»¶åŒ–ï¼Œä½ è§‰å¾—ä¸€ä¸ªå¥½çš„ç»„ä»¶åŒ–åº”è¯¥æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ 4.è®¾è®¡ IM SDKï¼Œèµè¸©ï¼Œå›å¤æŸæ¡æ¶ˆæ¯ï¼Œæ¶ˆæ¯ä¸Šé™„åŠ è¡¨æƒ… 5.è®¾è®¡ç›´æ’­é—´æ”¶åˆ°ç¤¼ç‰©ï¼ŒéŸ³è§†é¢‘é€šè¯ï¼ŒIMï¼›åŒä¸€æ—¶é—´æ”¶åˆ°å¤šæ¡ç¤¼ç‰©æ€ä¹ˆå¤„ç†ï¼Ÿ 6.é¡µé¢åŠ è½½é€Ÿåº¦ä¼˜åŒ– äºŒé¢ï¼š 1.ä»‹ç»æ¶æ„ï¼›SDK å¯¹å¤–æä¾›å“ªäº›æ¥å£ 2.äº†è§£å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿå°è£…åŸ‹ç‚¹ SDK ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ","link":"/ä¸»è¯­ç©ºé—´/"},{"title":"ä¸€ç‚¹èµ„è®¯é¢è¯•é¢˜","text":"ä¸€ç‚¹èµ„è®¯é¢è¯•é¢˜ ä¸€é¢1.Flutter ä¸åŸç”Ÿæ€ä¹ˆäº¤äº’ 2.Flutter è·³è½¬åŸç”Ÿé¡µé¢ï¼ŒåŸç”Ÿè·³è½¬ Flutter é¡µé¢æ€ä¹ˆå®ç°ï¼Ÿ 3.Widgetã€StatefulWidgetã€StatelessWidget åŒºåˆ« 4.Flutter çš„ä¸‰æ£µæ ‘ï¼ˆWidget æ ‘ç­‰ï¼‰ 5.setState å®ç°æºç çœ‹è¿‡å—ï¼Ÿå†…éƒ¨å®ç°åŸç† 6.KVO å®ç°åŸç† 7.Runtime æµç¨‹ï¼Œæ€ä¹ˆé¿å…æ–¹æ³•æ‰¾ä¸åˆ°çš„é—ªé€€ 8.æ•°ç»„æ’å…¥ç©ºå®‰å…¨æ€ä¹ˆå®ç°çš„ï¼Ÿäº¤æ¢æ–¹æ³•å†™åœ¨å“ªé‡Œï¼Ÿä¸ºä»€ä¹ˆä¸å†™åœ¨ initialize é‡Œï¼Ÿ 9.ä¸¤ä¸ªåˆ†ç±»é‡ŒåŒåæ–¹æ³•æ‰§è¡Œå“ªä¸ªï¼Ÿ 10.isa æŒ‡é’ˆçš„æŒ‡å‘ï¼Œisa çš„ç»“æ„ 11.__block çš„åŸç†ï¼Œå…¨å±€å˜é‡éœ€è¦æ•è·å—ï¼Ÿ 12.é—ªé€€ç‡ï¼ŒFlutter çš„é—ªé€€æ€ä¹ˆç›‘æ§ï¼Ÿ 13.åšè¿‡å“ªäº›ä¼˜åŒ–ï¼ŸFPS ä¼˜åŒ–ï¼Œå¯åŠ¨ä¼˜åŒ–ï¼Œå®‰è£…åŒ…å¤§å°ä¼˜åŒ– 14.åšè¿‡å“ªäº›ç»„ä»¶ï¼Ÿ 15.å­—ç¬¦ä¸²åè½¬ äºŒé¢1.autoreleasepool ä»€ä¹ˆæ—¶å€™é‡Šæ”¾ 2.deviceId æ€ä¹ˆç¡®ä¿å”¯ä¸€æ€§ 3.å¾®ä¿¡ Mac ç«¯ç™»å½•ä¸ºä»€ä¹ˆè¦åšæˆæ‰«æäºŒç»´ç çš„æ–¹å¼ï¼Ÿæ€ä¹ˆå®ç°çš„ï¼Ÿ 4.ä¸ªäººä¼˜ç¼ºç‚¹ï¼Œæœªæ¥è§„åˆ’ï¼Œçœ‹æœºä¼šåŸå›  5.æ€ä¹ˆå­¦ä¹ ä¸€é—¨æ–°æŠ€æœ¯ ä¸‰é¢1.ä»‹ç»é¡¹ç›®ï¼Œé¡¹ç›® DAU 2.å¿ƒè·³åŒ…æ˜¯è‡ªå·±å®ç°çš„å—ï¼Ÿå¿ƒè·³åŒ…åœæ‰æœ‰æ²¡æœ‰é‡åˆ°è¿‡ï¼Ÿ 3.æœ‰æ²¡æœ‰ offerï¼Œè§‰å¾—ä¸€ç‚¹çš„ä¼˜åŠ¿è·Ÿä¸è¶³ï¼Œå…¶ä»–ä¸€äº›ç§äººé—®é¢˜","link":"/ä¸€ç‚¹èµ„è®¯é¢è¯•é¢˜/"},{"title":"ä¹ä¿¡åœ£æ–‡","text":"ä¹ä¿¡åœ£æ–‡ ç¼–ç¨‹é¢˜ï¼š 1åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥â€œ10+2â€ï¼Œç‚¹å‡»ç¡®å®šæŒ‰é’®ï¼Œè¾“å‡ºâ€œ10+2=12â€ æ”¯æŒ+-*/ è¦æ±‚ï¼šè€ƒè™‘é¢å‘å¯¹è±¡ã€æ‰©å±•æ€§ï¼Œå¦‚åˆæ¥äº†ç¬¬äº”ç§è¿ç®—%ã€‚40åˆ†é’Ÿ åŸºç¡€ï¼š 1.@property weak å’Œ assign çš„åŒºåˆ«ï¼Œassign ä»€ä¹ˆæƒ…å†µä¸‹ä¿®é¥°å¯¹è±¡ï¼Œunsafe_unretain çš„ä½œç”¨ 2.category å’Œ extension çš„åŒºåˆ«ï¼Œå¤šä¸ª category å®ç°äº†åŒåæ–¹æ³•ï¼Œæ‰§è¡Œå“ªä¸ªï¼Ÿ 3.é€šçŸ¥æ˜¯åŒæ­¥çš„è¿˜æ˜¯å¼‚æ­¥çš„ï¼Ÿ 4.å†…å­˜æ³„æ¼éƒ½æœ‰å“ªäº›åœºæ™¯ï¼Œé™¤äº†å¾ªç¯å¼•ç”¨è¿˜æœ‰åˆ«çš„å—ï¼Ÿ 5.Runloop å’Œçº¿ç¨‹çš„å…³ç³»ï¼ŒMode çš„ä½œç”¨ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿé™¤äº†éš”ç¦»è¿˜æœ‰ä»€ä¹ˆä½œç”¨ï¼ŸRunloop ä»€ä¹ˆæ—¶å€™åœæ­¢ï¼Ÿ é¡¹ç›®ï¼š 1.æ„å»ºææ•ˆ 2.ç§æœ‰æ–¹æ³•è°ƒç”¨ 3.MVCS å’Œ MVC çš„åŒºåˆ« 4.å­å­™ç»„ä»¶ä¼ å€¼ å¦ä¸€ä½é¢è¯•å®˜ï¼š åŸç”Ÿå’Œè·¨ç«¯çš„å æ¯” æœ€è¿‘åšçš„é¡¹ç›® å‚è€ƒç­”æ¡ˆç¼–ç¨‹é¢˜ï¼š 1åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥â€œ10+2â€ï¼Œç‚¹å‡»ç¡®å®šæŒ‰é’®ï¼Œè¾“å‡ºâ€œ10+2=12â€ æ”¯æŒ+-*/ è¦æ±‚ï¼šè€ƒè™‘é¢å‘å¯¹è±¡ã€æ‰©å±•æ€§ï¼Œå¦‚åˆæ¥äº†ç¬¬äº”ç§è¿ç®—%ã€‚40åˆ†é’Ÿ ä½¿ç”¨ç­–ç•¥æ¨¡å¼å’Œå·¥å‚æ¨¡å¼ ç­–ç•¥æ¨¡å¼ï¼šå°†ä¸€ç³»åˆ—ç®—æ³•æˆ–è¡Œä¸ºå®šä¹‰æˆä¸€ç»„å¯ä»¥ç›¸äº’æ›¿æ¢çš„ç­–ç•¥ç±»ï¼Œå¹¶è®©å®ƒä»¬åœ¨åŒä¸€ä¸ªæ¥å£ä¸‹ç‹¬ç«‹å®ç°ï¼Œä»è€Œä½¿å¾—ç®—æ³•çš„é€‰æ‹©å¯ä»¥åœ¨è¿è¡Œæ—¶å†³å®šã€‚ ï¼ˆ1ï¼‰æŠ½è±¡ç­–ç•¥ å®šä¹‰ç»Ÿä¸€æ¥å£ ï¼ˆ2ï¼‰å…·ä½“ç­–ç•¥ å®ç°æŸä¸ªç‰¹å®šçš„ç®—æ³•é€»è¾‘ ï¼ˆ3ï¼‰ä¸Šä¸‹æ–‡ æŒæœ‰ç­–ç•¥ï¼Œå¹¶é€šè¿‡å®ƒæ¥æ‰§è¡Œç®—æ³• ç­–ç•¥æ¨¡å¼ï¼šä¾§é‡äº åŒä¸€ä¸ªå¯¹è±¡å¯ä»¥æœ‰ä¸åŒçš„è¡Œä¸ºï¼Œè¿è¡Œæ—¶å¯åˆ‡æ¢ã€‚ å·¥å‚æ¨¡å¼ï¼šä¾§é‡äº å¯¹è±¡å¦‚ä½•è¢«åˆ›å»ºï¼Œå±è”½åˆ›å»ºçš„å¤æ‚æ€§ã€‚ è¿ç®—çš„ åŠ å‡ä¹˜é™¤ = ä¸åŒçš„ç­–ç•¥ï¼ˆç­–ç•¥æ¨¡å¼ï¼‰ è¿ç®—ç±»ç”± å·¥å‚ç»Ÿä¸€åˆ›å»ºï¼ˆå·¥å‚æ¨¡å¼ï¼‰ æ‰€ä»¥æˆ‘ä»¬ç”¨äº† å·¥å‚ + ç­–ç•¥ çš„ç»„åˆã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107#import &lt;Foundation/Foundation.h&gt;/// è¿ç®—åè®®@protocol OperatorProtocol &lt;NSObject&gt;- (double)calculateWithLeft:(double)left right:(double)right;@end/// åŠ æ³•@interface AddOperator : NSObject &lt;OperatorProtocol&gt;@end@implementation AddOperator- (double)calculateWithLeft:(double)left right:(double)right { return left + right;}@end/// å‡æ³•@interface SubOperator : NSObject &lt;OperatorProtocol&gt;@end@implementation SubOperator- (double)calculateWithLeft:(double)left right:(double)right { return left - right;}@end/// ä¹˜æ³•@interface MulOperator : NSObject &lt;OperatorProtocol&gt;@end@implementation MulOperator- (double)calculateWithLeft:(double)left right:(double)right { return left * right;}@end/// é™¤æ³•@interface DivOperator : NSObject &lt;OperatorProtocol&gt;@end@implementation DivOperator- (double)calculateWithLeft:(double)left right:(double)right { if (right == 0) { NSLog(@\"é™¤æ•°ä¸èƒ½ä¸º0\"); return 0; } return left / right;}@end/// å–æ¨¡@interface ModOperator : NSObject &lt;OperatorProtocol&gt;@end@implementation ModOperator- (double)calculateWithLeft:(double)left right:(double)right { return fmod(left, right);}@end/// å·¥å‚ç±»@interface OperatorFactory : NSObject+ (id&lt;OperatorProtocol&gt;)operatorForSymbol:(NSString *)symbol;@end@implementation OperatorFactory+ (id&lt;OperatorProtocol&gt;)operatorForSymbol:(NSString *)symbol { static NSDictionary *map; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ map = @{ @\"+\": [AddOperator new], @\"-\": [SubOperator new], @\"*\": [MulOperator new], @\"/\": [DivOperator new], @\"%\": [ModOperator new] }; }); return map[symbol];}@end/// ä¸»æ§åˆ¶å™¨é€»è¾‘int main(int argc, const char * argv[]) { @autoreleasepool { // å‡è®¾è¾“å…¥æ¡†çš„å­—ç¬¦ä¸² NSString *input = @\"10+2\"; // ç®€å•è§£æï¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ªè¿ç®—ç¬¦ä½ç½® NSCharacterSet *operators = [NSCharacterSet characterSetWithCharactersInString:@\"+-*/%\"]; NSRange range = [input rangeOfCharacterFromSet:operators]; if (range.location != NSNotFound) { NSString *leftStr = [input substringToIndex:range.location]; NSString *rightStr = [input substringFromIndex:range.location + 1]; NSString *symbol = [input substringWithRange:range]; double left = [leftStr doubleValue]; double right = [rightStr doubleValue]; id&lt;OperatorProtocol&gt; op = [OperatorFactory operatorForSymbol:symbol]; if (op) { double result = [op calculateWithLeft:left right:right]; NSLog(@\"%@=%g\", input, result); } else { NSLog(@\"ä¸æ”¯æŒçš„è¿ç®—ç¬¦: %@\", symbol); } } } return 0;} åŸºç¡€ï¼š 1.@property weak å’Œ assign çš„åŒºåˆ«ï¼Œassign ä»€ä¹ˆæƒ…å†µä¸‹ä¿®é¥°å¯¹è±¡ï¼Œunsafe_unretain çš„ä½œç”¨ 2.category å’Œ extension çš„åŒºåˆ«ï¼Œå¤šä¸ª category å®ç°äº†åŒåæ–¹æ³•ï¼Œæ‰§è¡Œå“ªä¸ªï¼Ÿ 3.é€šçŸ¥æ˜¯åŒæ­¥çš„è¿˜æ˜¯å¼‚æ­¥çš„ åŒæ­¥çš„ 4.å†…å­˜æ³„æ¼éƒ½æœ‰å“ªäº›åœºæ™¯ï¼Œé™¤äº†å¾ªç¯å¼•ç”¨è¿˜æœ‰åˆ«çš„å—ï¼Ÿ å¾ªç¯å¼•ç”¨ï¼šblockã€NSTimerã€delegate éå¾ªç¯å¼•ç”¨ï¼šé OC å¯¹è±¡ï¼Œå¦‚ CGImage ç­‰éœ€è¦æ‰‹åŠ¨è°ƒç”¨ Release 5.Runloop å’Œçº¿ç¨‹çš„å…³ç³»ï¼ŒModeçš„ä½œç”¨ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿé™¤äº†éš”ç¦»è¿˜æœ‰ä»€ä¹ˆä½œç”¨ï¼ŸRunloop ä»€ä¹ˆæ—¶å€™åœæ­¢ ä¸»çº¿ç¨‹çš„ RunLoopï¼šå‡ ä¹ä¸åœæ­¢ï¼Œé™¤é App ç»“æŸã€‚ å­çº¿ç¨‹çš„ RunLoopï¼š æ²¡æœ‰äº‹ä»¶æºå°±é€€å‡ºï¼› æˆ–è€…ä½ æ˜¾å¼ CFRunLoopStop()ï¼› æˆ–è€…è¶…æ—¶è¿”å›ï¼› æˆ–è€…çº¿ç¨‹é”€æ¯ã€‚ é¡¹ç›®ï¼š 1.æ„å»ºææ•ˆï¼Œç±»æ•°é‡ åˆ é™¤2200+å¤´æ–‡ä»¶ï¼Œåˆ é™¤æœªä½¿ç”¨çš„ç±»100+ 2.ç§æœ‰æ–¹æ³•è°ƒç”¨ 3.MVCS å’Œ MVC çš„åŒºåˆ« 4.å­å­™ç»„ä»¶ä¼ å€¼","link":"/ä¹ä¿¡åœ£æ–‡/"},{"title":"ä¹ä¸ºé‡‘èé¢è¯•é¢˜","text":"ä¹ä¸ºé‡‘èé¢è¯•é¢˜ 1ã€è¯´ä¸€ä¸‹ç³»ç»Ÿæ¡†æ¶å’Œç”Ÿå‘½å‘¨æœŸã€‚ 2ã€ç³»ç»Ÿå­˜å‚¨ç©ºé—´æœ‰å“ªäº›ï¼Ÿå…¨å±€å˜é‡åŒºã€æ ˆã€å †ã€ä»£ç åŒº 3ã€æ ˆåŒºæ˜¯ç”¨æ¥æ”¾ä»€ä¹ˆçš„ï¼Ÿ 4ã€æ ˆæ˜¯ä»€ä¹ˆç»“æ„ï¼Ÿé“¾è¡¨æ˜¯ä»€ä¹ˆç»“æ„ï¼Ÿ 5ã€è¿›ç¨‹å’Œçº¿ç¨‹æœ‰å•¥å…³ç³»ï¼Ÿè¿›ç¨‹æ˜¯ä¸æ˜¯ä¸€ä¸ªAppï¼Ÿ 6ã€è¯´ä¸€ä¸‹ MVCã€MVVM 7ã€ä½ äº†è§£çš„è®¾è®¡æ¨¡å¼ï¼Ÿ 8ã€ä½ åšè¿‡çš„å†…å­˜ä¼˜åŒ–æœ‰å“ªäº›ï¼Ÿ 9ã€è¯´ä¸€ä¸‹ AFN/SDWebImage 10ã€åšç›´æ’­ã€èŠå¤©ï¼Œäº†è§£é•¿è¿æ¥æ˜¯ä»€ä¹ˆå®ç°çš„å—ï¼Ÿ 11ã€é¢å‘å¯¹è±¡çš„ä¸‰ä¸ªç‰¹æ€§ï¼Ÿå°è£…æ˜¯ä»€ä¹ˆï¼Ÿå¤šæ€æ˜¯ä»€ä¹ˆï¼Ÿ 12ã€ä½ ç”¨ OC å¼€å‘è¿˜æ˜¯ Swift å¼€å‘ï¼ŸSwift æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ","link":"/ä¹ä¸ºé‡‘èé¢è¯•é¢˜/"},{"title":"äº¬ä¸œé¢è¯•é¢˜","text":"äº¬ä¸œé¢è¯•é¢˜ 1ã€AFNetworking æ˜¯å¦‚ä½•å®ç°å¤šçº¿ç¨‹çš„ã€‚ 2ã€å¦‚ä½•è‡ªå·±æ§åˆ¶ AFNetWorking çš„å¤šçº¿ç¨‹ï¼Œå¦‚æœè§£å†³ä¸Šä¼ å¤šå¼ å›¾ç‰‡å¼•èµ·çš„å†…å­˜å‰§å¢çš„é—®é¢˜ã€‚ 3ã€æ¨¡å—åŒ–çš„å®ç°è¿‡ç¨‹ã€‚ 4ã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚ 5ã€æ•°æ®åº“çš„å‡çº§ï¼ˆå½“å‰æ•°æ®åº“ä¸èƒ½æ»¡è¶³ä¸šåŠ¡äº†ï¼Œ1.0-&gt;2.0-&gt;3.0â€¦..ï¼‰ã€‚","link":"/äº¬ä¸œé¢è¯•é¢˜/"},{"title":"ä½œä¸šå¸®","text":"ä½œä¸šå¸® ä¸€é¢ï¼š 1.Runtime å’Œ Runloop åº”ç”¨ï¼Œé™¤äº† OCï¼Œè¿˜æœ‰å“ªäº›æ˜¯åŠ¨æ€è¯­è¨€ 2.Swift ä¸­ @objc çš„ä½œç”¨ 3.IM æ–­çº¿é‡è¿ï¼Œç¦»çº¿æ¶ˆæ¯å’Œåœ¨çº¿æ¶ˆæ¯ï¼›IM çš„ç›‘å¬å›è°ƒçš„åˆ†å‘ï¼Œå¤šä¸ªé¡µé¢éƒ½éœ€è¦ç›‘å¬ 4.Webp åŠ è½½æ…¢ 5.è·Ÿ H5 äº¤äº’ é¢‘ç¹å‘æ¶ˆæ¯ 6.å†…è´­ï¼Œæ”¯ä»˜æˆåŠŸåï¼Œæ¥å£è¿”å›å¤±è´¥ 7.ç›´æ’­ åŠ¨ç”»ï¼Œè§†é¢‘æ’å¸§ï¼Œè§†é¢‘åŠ¨ç”»é‡Œçš„æŸä¸€å¸§é‡Œæ–°å¢è‡ªå®šä¹‰æ–‡å­— 8.æ€ä¹ˆæ§åˆ¶ä¾èµ–åº“çš„æ‰“åŒ…é¡ºåº 9.import å°–æ‹¬å·å’ŒåŒå¼•å·ï¼Œä¸ºä»€ä¹ˆå°–æ‹¬å·å°±èƒ½æ‰¾åˆ°ç¬¬ä¸‰æ–¹åº“çš„æŸä¸€ä¸ªæ–‡ä»¶ï¼Œè€Œä¸ç”¨å®Œæ•´è·¯å¾„ 10.subspec é™¤äº† dependency è¿˜æœ‰å“ªäº› 11.ç§»é™¤ armv7 åªæ”¯æŒçœŸæœºå—ï¼Ÿä¸€äº›ä¸‰æ–¹åº“å¸¦ armv7ï¼Œä¸ºäº†æå‡æ‰“åŒ…é€Ÿåº¦ï¼Œæ€ä¹ˆç§»é™¤ 12.export 13.ipa åŒ…é‡Œéƒ½æœ‰å“ªäº›ä¸œè¥¿ 14.æ¥å£ç¼“å­˜ 15.æœ‰æ²¡æœ‰å†™è¿‡ä¸€äº›è„šæœ¬ï¼Œææ•ˆçš„å·¥ä½œ 16.JSçš„å•çº¿ç¨‹å’Œäº‹ä»¶å¾ªç¯ ç®—æ³•ï¼š ä»»åŠ¡å¹¶å‘æ§åˆ¶çš„å®ç° 123456// tasks æ¯”å¦‚100ä¸ªè®¡ç®—ä»»åŠ¡// limit æœ€å¤š3ä¸ª// allDoneCallback æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•çš„å›è°ƒfunc excuteTasks(tasks: [func], limit: Int, allDoneCallback: func) {...} äºŒé¢ï¼š 1.Block åŸç†ï¼Œå¾ªç¯å¼•ç”¨ 2.Runtime åº”ç”¨ï¼ŒåŠ¨æ€æ›´æ–°ï¼Œä¸ºä»€ä¹ˆ OC è¦è¿™ä¹ˆè®¾è®¡ï¼Ÿ 3.Runloop åº”ç”¨ 4.åšè¿‡å“ªäº›ä¼˜åŒ– ç®—æ³•ï¼šåœ¨10000ä¸ª int æ•°ç»„é‡Œï¼Œæ‰¾å‡ºæœ€å¤§çš„ topK ä¸ªæ•° å‚è€ƒç­”æ¡ˆ 1.Runtime å’Œ Runloop åº”ç”¨ï¼Œé™¤äº†OCï¼Œè¿˜æœ‰å“ªäº›æ˜¯åŠ¨æ€è¯­è¨€ 2.Swift ä¸­ @objc çš„ä½œç”¨ åœºæ™¯ æ˜¯å¦éœ€è¦ @objc è¯´æ˜ Swift è°ƒç”¨ Swift âŒ æ— éœ€ Swift è°ƒç”¨ Obj-C âŒ Swift è‡ªåŠ¨æ¡¥æ¥ Obj-C è°ƒç”¨ Swift âœ… å¿…é¡»æ˜¾å¼ @objc ä½¿ç”¨ #selector âœ… å¦åˆ™ç¼–è¯‘é”™è¯¯ KVO / KVC âœ… @objc dynamic Method Swizzling âœ… @objc dynamic å“åº”äº‹ä»¶ (UIResponder) è‡ªåŠ¨æ·»åŠ  UIKit å†…éƒ¨å·²å¤„ç† 3.IM æ–­çº¿é‡è¿ï¼Œç¦»çº¿æ¶ˆæ¯å’Œåœ¨çº¿æ¶ˆæ¯ï¼›IM çš„ç›‘å¬å›è°ƒçš„åˆ†å‘ï¼Œå¤šä¸ªé¡µé¢éƒ½éœ€è¦ç›‘å¬ 4.Webp åŠ è½½æ…¢ 5.è·Ÿ H5 äº¤äº’ é¢‘ç¹å‘æ¶ˆæ¯ 6.å†…è´­ï¼Œæ”¯ä»˜æˆåŠŸåï¼Œæ¥å£è¿”å›å¤±è´¥ 7.ç›´æ’­ åŠ¨ç”»ï¼Œè§†é¢‘æ’å¸§ï¼Œè§†é¢‘åŠ¨ç”»é‡Œçš„æŸä¸€å¸§é‡Œæ–°å¢è‡ªå®šä¹‰æ–‡å­— 8.æ€ä¹ˆæ§åˆ¶ä¾èµ–åº“çš„æ‰“åŒ…é¡ºåº 9.import å°–æ‹¬å·å’ŒåŒå¼•å·ï¼Œä¸ºä»€ä¹ˆå°–æ‹¬å·å°±èƒ½æ‰¾åˆ°ç¬¬ä¸‰æ–¹åº“çš„æŸä¸€ä¸ªæ–‡ä»¶ï¼Œè€Œä¸ç”¨å®Œæ•´è·¯å¾„ 10.subspec é™¤äº† dependency è¿˜æœ‰å“ªäº› 11.ç§»é™¤ armv7 åªæ”¯æŒçœŸæœºå—ï¼Ÿä¸€äº›ä¸‰æ–¹åº“å¸¦ armv7ï¼Œä¸ºäº†æå‡æ‰“åŒ…é€Ÿåº¦ï¼Œæ€ä¹ˆç§»é™¤ 1234# æŸ¥çœ‹åŒ…å«å“ªäº›æ¶æ„lipo -info YourLib.framework/YourLib# ç§»é™¤ armv7lipo -remove armv7 YourLib.framework/YourLib -o YourLib.framework/YourLib 12.export 13.ipa åŒ…é‡Œéƒ½æœ‰å“ªäº›ä¸œè¥¿ 1234567891011121314MyApp.ipaâ”œâ”€â”€ Payload/â”‚ â””â”€â”€ MyApp.app/â”‚ â”œâ”€â”€ MyApp # å¯æ‰§è¡Œæ–‡ä»¶â”‚ â”œâ”€â”€ Info.plistâ”‚ â”œâ”€â”€ Assets.carâ”‚ â”œâ”€â”€ Frameworks/â”‚ â”œâ”€â”€ PlugIns/â”‚ â”œâ”€â”€ Base.lproj/â”‚ â”œâ”€â”€ embedded.mobileprovisionâ”‚ â””â”€â”€ _CodeSignature/â”œâ”€â”€ SwiftSupport/ # Swiftè¿è¡Œåº“ï¼ˆå¯é€‰ï¼‰â”œâ”€â”€ WatchKitSupport2/ # Watchæ”¯æŒï¼ˆå¯é€‰ï¼‰â””â”€â”€ META-INF/ # ç­¾åå…ƒæ•°æ®ï¼ˆå¯é€‰ï¼‰ 14.æ¥å£ç¼“å­˜ 15.æœ‰æ²¡æœ‰å†™è¿‡ä¸€äº›è„šæœ¬ï¼Œææ•ˆçš„å·¥ä½œ æ‰“åŒ…ä¸Šä¼ è’²å…¬è‹±å¹³å°ï¼Œåˆ‡æ¢æ±‰å£é“¶è¡ŒSDKçš„æ–‡ä»¶ï¼ŒJSONè‡ªåŠ¨ç”Ÿæˆæ¨¡å‹ 16.JSçš„å•çº¿ç¨‹å’Œäº‹ä»¶å¾ªç¯ æ‰§è¡ŒåŒæ­¥ä»»åŠ¡ï¼ˆä¸»çº¿ç¨‹ï¼‰ æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆPromiseã€nextTickï¼‰ æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼ˆsetTimeout ç­‰ï¼‰ é‡å¤å¾ªç¯ ç®—æ³•ï¼š ä»»åŠ¡å¹¶å‘æ§åˆ¶çš„å®ç° 123456// tasks æ¯”å¦‚100ä¸ªè®¡ç®—ä»»åŠ¡// limit æœ€å¤š3ä¸ª// allDoneCallback æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•çš„å›è°ƒfunc excuteTasks(tasks: [func], limit: Int, allDoneCallback: func) {...} 12345678910111213141516171819202122232425262728293031323334353637383940typedef void (^TaskBlock)(void);typedef void (^AllDoneBlock)(void);void executeTasks(NSArray&lt;TaskBlock&gt; *tasks, NSInteger limit, AllDoneBlock allDoneCallback) { if (tasks.count == 0) { if (allDoneCallback) allDoneCallback(); return; } // ä½¿ç”¨ GCD ä¿¡å·é‡æ§åˆ¶æœ€å¤§å¹¶å‘æ•° dispatch_semaphore_t semaphore = dispatch_semaphore_create(limit); // ç”¨äºè¿½è¸ªä»»åŠ¡å®Œæˆ dispatch_group_t group = dispatch_group_create(); // å¹¶å‘é˜Ÿåˆ—ï¼ˆå¯è‡ªå®šä¹‰ï¼‰ dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0); for (TaskBlock task in tasks) { dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER); // é™åˆ¶å¹¶å‘æ•° dispatch_group_enter(group); dispatch_async(queue, ^{ // æ‰§è¡Œä»»åŠ¡ if (task) { task(); } // ä»»åŠ¡å®Œæˆåé‡Šæ”¾ä¿¡å·é‡ dispatch_semaphore_signal(semaphore); dispatch_group_leave(group); }); } // æ‰€æœ‰ä»»åŠ¡å®Œæˆåæ‰§è¡Œå›è°ƒ dispatch_group_notify(group, dispatch_get_main_queue(), ^{ if (allDoneCallback) { allDoneCallback(); } });} äºŒé¢ï¼š 1.Block åŸç†ï¼Œå¾ªç¯å¼•ç”¨ 2.Runtime åº”ç”¨ï¼ŒåŠ¨æ€æ›´æ–°ï¼Œä¸ºä»€ä¹ˆ OC è¦è¿™ä¹ˆè®¾è®¡ï¼Ÿ 3.Runloop åº”ç”¨ 4.åšè¿‡å“ªäº›ä¼˜åŒ– ç®—æ³•ï¼šåœ¨10000ä¸ª int æ•°ç»„é‡Œï¼Œæ‰¾å‡ºæœ€å¤§çš„ topK ä¸ªæ•°","link":"/ä½œä¸šå¸®/"},{"title":"äººäººè½¦é¢è¯•é¢˜","text":"äººäººè½¦é¢è¯•é¢˜ ä¸€é¢1.äº†è§£å“ªäº›è®¾è®¡æ¨¡å¼ 2.MVVM è§£å†³ä»€ä¹ˆé—®é¢˜ 3.æ€§èƒ½ä¼˜åŒ– 4.å†…å­˜ç®¡ç†çš„ç†è§£ autoreleasePool çš„ç»“æ„ï¼Œä¸€ä¸ª autoreleasePoolPage çš„å¤§å° 5.weak çš„åŸç† 6.class çš„ç»“æ„ï¼Œcache çš„ç»“æ„ï¼Œbucket_t çš„ç»“æ„ï¼Œæ–¹æ³•æŸ¥æ‰¾çš„é¡ºåºï¼Œæ˜¯é€ä¸ªéå†å—ï¼Ÿ 7.å…³è”å¯¹è±¡å­˜åœ¨å“ªé‡Œ 8.Category çš„åŠ è½½æµç¨‹ 9.Runtime çš„åº”ç”¨ï¼ŒåŠ¨æ€æ–¹æ³•è§£æé‡Œè¿”å› YESï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ·»åŠ æ–¹æ³•ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿ 10.ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹åä¼šç«‹é©¬æ–­å¼€è¿æ¥å— 11.Swift è§£åŒ…æ–¹å¼ 12.Swift ä¸­è®¡ç®—å±æ€§å’Œå­˜å‚¨å±æ€§çš„åŒºåˆ« 13.Swift ç±»å’Œç»“æ„ä½“çš„åŒºåˆ«ï¼Œä½¿ç”¨å±æ€§çš„å†™æ³•ä¸Šçš„åŒºåˆ« 14.æ•°ç»„å’Œé“¾è¡¨çš„åŒºåˆ« 15.å¿«é€Ÿæ’åºï¼Œå¿«æ’æ—¶é—´å¤æ‚åº¦ äºŒé¢ä»‹ç»é¡¹ç›® 1.webView ä¸ H5 äº¤äº’ï¼Œæ‹¦æˆªåè®® url æœ‰é•¿åº¦é™åˆ¶ï¼Œæœ‰å®‰å…¨é—®é¢˜ï¼Œå¯èƒ½ä¼šè¢«æŠ“åŒ…ï¼ŒJSBridge 2.åŸ‹ç‚¹ åŸ‹ç‚¹ä¿å­˜/åˆ é™¤æ•°æ®çš„æ—¶æœº å†…å­˜é‡Œçš„æœ€å¤§å®¹é‡ï¼Œæ”¶åˆ°å†…å­˜è­¦å‘Š ä¸ŠæŠ¥ç½‘ç»œè¯·æ±‚å‘é€å¤±è´¥åçš„å¤„ç†ï¼ŒåŸ‹ç‚¹çš„è¡¥å¿æœºåˆ¶ 3.æ”¯ä»˜ 4.é¡µé¢ A push B A willDisappear didDisappear B willAppear didAppear çš„æ‰§è¡Œé¡ºåº 5.Person ç±»ç»§æ‰¿è‡ª NSObject ç±»ï¼Œæ²¡æœ‰å®ç° age æ–¹æ³•ã€‚ä¸¤ä¸ªå®ä¾‹ p1,p2ï¼Œæ€ä¹ˆè®© p1 å“åº” age æ–¹æ³•ï¼Œp2 ä¸å“åº” age æ–¹æ³•ã€‚ 6.æ¶ˆæ¯å‘é€æœºåˆ¶å’Œæ¶ˆæ¯è½¬å‘ã€‚ 7.KVO çš„å®ç°åŸç† 8.å¤šä¸ªåˆ†ç±»å®ç°äº†åŒä¸€ä¸ªæ–¹æ³•ï¼ŒæŸ¥æ‰¾é¡ºåº 9.Swift çš„ String ä¸ºä»€ä¹ˆè®¾è®¡æˆå€¼ç±»å‹ï¼Ÿ å®‰å…¨ï¼Œcopyï¼Œå¿«é€Ÿ 10.è®¾è®¡ LRU æœ€è¿‘æœ€å°‘ä½¿ç”¨","link":"/äººäººè½¦é¢è¯•é¢˜/"},{"title":"å…¨æ°‘çŸ­è§†é¢‘é¢è¯•é¢˜","text":"å…¨æ°‘çŸ­è§†é¢‘é¢è¯•é¢˜ 1ã€@property å±æ€§å…³é”®å­— 2ã€GCD 3ã€Runtime åº•å±‚ 4ã€Runloop åº•å±‚å®ç°ã€çº¿ç¨‹è·Ÿ Runloop çš„å…³ç³» 5ã€AFNetworking å†…éƒ¨ç»“æ„å’Œå®ç°åŸç†ã€‚ 6ã€æ€ä¹ˆé¿å…å´©æºƒï¼Œåƒæ•°ç»„å­—å…¸å´©æºƒç­‰ 7ã€å‹ç›Ÿåˆ†æé—ªé€€çš„å…·ä½“æ­¥éª¤ï¼Œæ€ä¹ˆå®šä½åˆ°é—ªé€€çš„ä»£ç ä½ç½® 8ã€å®‰å…¨æ”»é˜² 9ã€https è¯ä¹¦é…ç½® 10ã€è‡ªåŠ¨åŒ–æµ‹è¯• 11ã€æœ‰æ²¡æœ‰åšè¿‡å•å…ƒæµ‹è¯•","link":"/å…¨æ°‘çŸ­è§†é¢‘é¢è¯•é¢˜/"},{"title":"å…ƒçŸ³","text":"å…ƒçŸ³ ä¸€é¢ï¼š é¡¹ç›® 1.SSE æ€ä¹ˆå®ç°é€å­—æ‰“å°æ•ˆæœï¼Œeventæ¥äº†ä¸ªå¡ç‰‡ï¼Œæ€ä¹ˆä¿è¯é¡ºåºï¼Ÿ 2.ä¸‰æ–¹æ¥å…¥æˆæœ¬ä¸ºä»€ä¹ˆè¿˜éœ€è¦5äººæ—¥ï¼Ÿtoastè¿™ç§æ˜¯ä¸æ˜¯SDKå®ç°å¥½ç‚¹ï¼Œæ‹…å¿ƒå¢åŠ ä½“ç§¯å¯ä»¥ç”¨subPackage 3.SDKä½“ç§¯ä¼˜åŒ– 4.åŠ è½½é€Ÿåº¦ä¼˜åŒ– 5.æ´»åŠ¨é¡µç»„ä»¶åŒ– 6.å¡é¡¿ç›‘æ§ï¼Œèƒ½è·å–åˆ°å¡é¡¿çš„å †æ ˆå—ï¼Ÿ 7.ç»„ä»¶åŒ–èƒ½ä¸åœ¨+loadæ³¨å†Œå—ï¼Ÿattributeæ³¨å†Œäº†è§£å—ï¼Ÿ ç®—æ³•ï¼š 1.39. ç»„åˆæ€»å’Œ 2.åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ äºŒé¢ï¼š 1.é€šç”¨åŒ–æŠ€æœ¯æå‡è¿­ä»£æ•ˆç‡ï¼Œschemeå’ŒåŠ¨æ€åŒ–ï¼Œè®¾è®¡schemeéœ€è¦æœ‰å“ªäº›æ³¨æ„ç‚¹ 2.ç™½å±ç‡æ€ä¹ˆç»Ÿè®¡ï¼Ÿ 3.æ´»åŠ¨é¡µç»„ä»¶åŒ– 4.RNè·ŸFlutterçš„å¯¹æ¯” 5.SSEå®ç°æ‰“å­—æœºæ•ˆæœï¼Œå¯¹SSEçš„äº†è§£ï¼Œåˆ‡æ¢å‰åå°ï¼Œæ€ä¹ˆæ–­ç‚¹ç»­ä¼  6.ç®—æ³•ï¼šåè½¬æ•° è¾“å…¥int è¿”å›int è¾¹ç•Œæ¡ä»¶ã€èƒ½è¿è¡Œ","link":"/å…ƒçŸ³/"},{"title":"åç‚¹è¯»ä¹¦é¢è¯•é¢˜","text":"åç‚¹è¯»ä¹¦é¢è¯•é¢˜ 1ã€MRC å’Œ ARCï¼Œè‡ªåŠ¨é‡Šæ”¾æ±  AutoreleasePool å’Œ ARC çš„å…³ç³»ï¼Ÿ 2ã€ç›´æ’­æ˜¯ç”¨çš„ rmtp åè®®å—ï¼Ÿrmtp è¯´ä¸€ä¸‹ï¼Ÿ 3ã€èŠå¤©ç”¨çš„ä»€ä¹ˆï¼Ÿweb Socket äº†è§£å—ï¼ŸHTTP å±äºå“ªä¸€å±‚ï¼Ÿweb socket å±äºå“ªä¸€å±‚ï¼Ÿ 4ã€copy å’Œ MutableCopy ï¼Ÿä»å¯å˜ä¸å¯å˜å’Œæ·±æµ…æ‹·è´ä¸¤ä¸ªå±‚é¢è¯´ä¸€ä¸‹åŒºåˆ«ï¼Ÿ 5ã€NSString ç”¨ copy å’Œç”¨ Strong æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 6ã€å†…å­˜ä¼˜åŒ–ï¼Ÿ 7ã€weak å’Œ unown çš„åŒºåˆ«ï¼Ÿ 8ã€åè®®ç»§æ‰¿ä»€ä¹ˆï¼Ÿç»§æ‰¿ NSObjectProtocol å’Œç»§æ‰¿è‡ªæŸä¸ª class æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 9ã€Swift æ˜¯è¿è¡Œæ—¶è¯­è¨€å—ï¼ŸSwift æ€ä¹ˆç”¨ OC çš„è¿è¡Œæ—¶ç‰¹æ€§ï¼Ÿ","link":"/åç‚¹è¯»ä¹¦é¢è¯•é¢˜/"},{"title":"å¤ªä¸€äº‘é¢è¯•é¢˜","text":"å¤ªä¸€äº‘é¢è¯•é¢˜ 1ã€@property å±æ€§çš„ä¿®é¥°ç¬¦ï¼ŸString ä¸ºä»€ä¹ˆç”¨ copy ï¼ŸString èƒ½ä¸èƒ½ç”¨ strong ï¼ŸNSMutableString èƒ½ä¸èƒ½ç”¨ Strongï¼Ÿ 2ã€å•ä¾‹çš„æœ¬è´¨ï¼Ÿé¡¹ç›®é‡Œæ€ä¹ˆç”¨çš„å•ä¾‹ï¼Ÿ 3ã€è¯´ä¸€ä¸‹ KVOï¼Œè¯´ä¸€ä¸‹é€šçŸ¥ï¼Œé€šçŸ¥å±ä¸å±äºè§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ 4ã€è¯´ä¸€ä¸‹ GCD çš„åŒæ­¥ã€å¼‚æ­¥ã€‚GCD ä½ æ˜¯æ€ä¹ˆç”¨çš„ï¼Ÿ 5ã€è¯´ä¸€ä¸‹å†…å­˜ç®¡ç†ã€‚MRC äº†è§£å—ï¼ŸARC ä¸‹ç³»ç»Ÿæ˜¯æ€ä¹ˆè‡ªåŠ¨åŠ  retainã€release çš„ï¼Ÿ 6ã€äº†è§£ AutoreleasePool å—ï¼Ÿå¦‚æœä¸å†™ autoreleaseï¼Œå¯¹è±¡ä¼šè¢«æ·»åŠ åˆ° Pool é‡Œå—ï¼Ÿ 7ã€äº†è§£ Socket å—ï¼Ÿ","link":"/å¤ªä¸€äº‘é¢è¯•é¢˜/"},{"title":"å¢¨è¿¹å¤©æ°”é¢è¯•é¢˜","text":"å¢¨è¿¹å¤©æ°”é¢è¯•é¢˜ ä¸€é¢1.Swift ä¸ OC æ–¹æ³•è°ƒç”¨çš„åŒºåˆ« 2.æ–¹æ³•æŸ¥æ‰¾çš„è¿‡ç¨‹ï¼ŒRuntime æ¶ˆæ¯æœºåˆ¶ï¼Œæ€ä¹ˆé¿å…æ— æ³•è¯†åˆ«çš„æ–¹æ³•é€‰æ‹©å™¨çš„é—ªé€€ï¼Ÿ 3.Runtime çš„åº”ç”¨ 4.Category å’Œæœ¬ç±»çš„åŒåæ–¹æ³•æ‰§è¡Œå“ªä¸ª 5.çº¿ä¸Šå¡é¡¿æ€ä¹ˆç›‘æµ‹ï¼Œç›‘æµ‹åŸç† Runloop 6.åšè¿‡å“ªäº›ä¼˜åŒ– 7.å¤šçº¿ç¨‹ç”¨çš„å¤šå—ï¼Ÿçº¿ç¨‹åŒæ­¥æœ‰å“ªäº›æ–¹æ¡ˆï¼Ÿé”çš„æ•ˆç‡ä»é«˜åˆ°ä½è¯´ä¸€ä¸‹ 8.æ‰“å°ç»“æœ 1234567891011121314151617181920- (void)viewDidLoad { [super viewDidLoad]; dispatch_sync(dispatch_get_main_queue(), ^{ NSLog(@\"0\"); }); dispatch_async(dispatch_get_main_queue(), ^{ NSLog(@\"1\"); }); dispatch_async(dispatch_get_global_queue(0, 0), ^{ NSLog(@\"2\"); }); dispatch_sync(dispatch_get_global_queue(0, 0), ^{ NSLog(@\"3\"); }); NSLog(@\"4\");} 9.Flutter é‡åˆ°è¿‡ä»€ä¹ˆé—®é¢˜ï¼Œå›¾ç‰‡åˆ—è¡¨æ»‘åŠ¨æŠŠä¸åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„å†…å®¹å¹²æ‰(å¤ç”¨)ä¼šæœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Œä¼˜åŒ–æ–¹æ¡ˆ 10.ä¸ªäººè§„åˆ’ äºŒé¢1.Flutter çš„çŠ¶æ€ç®¡ç† 2.Flutter å¸ƒå±€ï¼ŒExpanded å’Œ Flex å¸ƒå±€çš„åŒºåˆ« 3.InheritedWidget ç”¨è¿‡å—ï¼Ÿstream ç”¨è¿‡å—ï¼Ÿ 4.Flutter åŠ¨ç”» 5.webView ä¸ H5 äº¤äº’ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰è€ƒè™‘æ³¨å†Œçš„æ–¹å¼ï¼ŒåŠ è½½ä¸€ä¸ª H5 é¡µé¢ç»å†äº†å“ªäº›æ­¥éª¤ï¼Ÿ 6.HTTPS å¢åŠ äº†å“ªäº›æµç¨‹ï¼ŸDNS çš„è¿‡ç¨‹ 7.é•¿é“¾æ¥ï¼Œäº†è§£ webSocket å— 8.ç›´æ’­æ¨æµçš„è¿‡ç¨‹ 9.å†…å­˜ç®¡ç†ï¼Œç±»çš„å±æ€§ p.name = @â€zhangsanâ€; å’Œæ–¹æ³•é‡Œçš„å˜é‡ NSString *name = @â€zhangsanâ€; åˆ†åˆ«å­˜åœ¨å“ªé‡Œï¼Ÿ 10.äº¤æ¢æ–¹æ³• 11.Category çš„æœ¬è´¨ 12.å¤šçº¿ç¨‹ï¼Œçº¿ç¨‹åŒæ­¥éƒ½æœ‰å“ªäº›æ–¹æ³•ï¼Œå€¼ä¸º1çš„ä¿¡å·é‡å’Œäº’æ–¥é”æœ‰ä»€ä¹ˆåŒºåˆ« 13.ç®—æ³•ï¼šä¸€ä¸ª int æ•°ç»„ï¼ŒæŸ¥æ‰¾ç¬¬ K ä¸ªå¤§çš„æ•°ã€‚ äºŒé¢1.ä»‹ç»é¡¹ç›®äº®ç‚¹ 2.æ•°æ®å’Œé“¾è¡¨åŒºåˆ« 3.æ–¹æ³•æŸ¥æ‰¾è¿‡ç¨‹ 4.frame bounds åŒºåˆ«ï¼ŒUIViewã€CALayerï¼ŒåŠ¨ç”» 5.block __block 6.å†…å­˜ä¼˜åŒ– æŸ¥æ‰¾å†…å­˜æ³„éœ² 7.é” è‡ªæ—‹é”ä½¿ç”¨åœºæ™¯ äº’æ–¥é”å’Œä¿¡å·é‡åŒºåˆ« 8.æ–¹æ³•äº¤æ¢æ˜¯æ€ä¹ˆäº¤æ¢çš„ï¼Œæ³¨æ„ç‚¹ 9.é“¾è¡¨æ˜¯å¦æœ‰ç¯ 10.flutter çš„çŠ¶æ€ç®¡ç† 11.å‘½ä»¤å¼ç¼–ç¨‹ä¸å“åº”å¼ç¼–ç¨‹","link":"/å¢¨è¿¹å¤©æ°”é¢è¯•é¢˜/"},{"title":"å¥½æœªæ¥é¢è¯•é¢˜","text":"å¥½æœªæ¥é¢è¯•é¢˜ ä¸€é¢1ã€è¯´ä¸€ä¸‹optionalã€‚ï¼ˆï¼Ÿ ï¼ ï¼Ÿï¼Ÿ å‡ ç§è§£åŒ…æ–¹å¼ if letã€guardã€ï¼Ÿï¼Ÿç­‰ï¼‰ 2ã€è¯´ä¸€ä¸‹é—­åŒ…ã€‚ 3ã€æ¯”è¾ƒä»£ç†ã€é€šçŸ¥ã€KVOï¼Ÿè¿™ä¸‰ä¸ªè°çš„æ•ˆç‡æœ€é«˜ï¼Œè°çš„æ•ˆç‡æœ€ä½ï¼Ÿ( KVO æ•ˆç‡æœ€ä½ï¼Œå› ä¸º Runtime ï¼‰ 4ã€NSString å’Œ String çš„åŒºåˆ«ï¼Ÿï¼ˆ String æ˜¯å€¼ç±»å‹ï¼ŒNSString æ˜¯å¼•ç”¨ç±»å‹ï¼‰ 5ã€Swift è·Ÿ OC çš„åŒºåˆ«ï¼Ÿï¼ˆ OC æ˜¯åŠ¨æ€çš„è¯­è¨€ï¼ŒSwift æ˜¯é™æ€çš„è¯­è¨€ï¼‰OC æ˜¯é¢å‘å¯¹è±¡çš„ï¼ŒSwift å‘¢ï¼Ÿï¼ˆé¢å‘å¯¹è±¡ã€é¢å‘åè®®ã€å“åº”å¼ç¼–ç¨‹ï¼‰è§£é‡Šä¸€ä¸‹é¢å‘åè®®ç¼–ç¨‹ï¼Ÿ 6ã€è¯´ä¸€ä¸‹ MRC ï¼Ÿè‡ªåŠ¨é‡Šæ”¾æ± ï¼Ÿè‡ªåŠ¨é‡Šæ”¾æ± ä»€ä¹ˆæ—¶å€™é‡Šæ”¾ï¼Ÿï¼ˆæˆ‘è¯´ drain ï¼‰ 7ã€è¯´ä¸€ä¸‹å¤šçº¿ç¨‹ï¼Ÿï¼ˆæˆ‘æåˆ°äº† dispatch_once å•ä¾‹ï¼‰ 8ã€åˆ†åˆ«ç”¨ OC å’Œ Swift æ‰‹å†™ä¸€ä¸‹å•ä¾‹ã€‚ï¼ˆ Swift çš„å•ä¾‹æˆ‘å¿˜è®°å†™ static äº†ï¼Œä½†æ˜¯ç»æé†’ç«‹é©¬è¯´å‡ºæ¥äº†ï¼‰ 9ã€SnaptKit å†…éƒ¨çœ‹è¿‡å—ï¼Ÿ 10ã€é“¾å¼è¯­æ³•çš„å®ç°ã€‚ UIView.top.equalTo().offSet(10) UIView.left.equalTo().offSet(10) ä¸ºä»€ä¹ˆèƒ½å†™æˆUIView.top.left.offSet(10) äºŒé¢ä¸»è¦æ˜¯æ‰‹å†™ç®—æ³•é¢˜ï¼š 1ã€ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—ã€‚ 2ã€ä»æ‰‘å…‹ç‰Œä¸­æŠ½å‡º5å¼ ï¼Œå†™ä¸€ä¸ªæ–¹æ³•åˆ¤æ–­æ˜¯ä¸æ˜¯é¡ºå­ã€‚ï¼ˆå¦‚34567ï¼‰å¤§å°ç‹æ˜¯ä¸‡èƒ½çš„ï¼Œå¯ä»¥æ›¿ä»£ä»»æ„æ•°å­—ã€‚ ä¸‰é¢é¡¹ç›®ç»ç† å››é¢HR","link":"/å¥½æœªæ¥é¢è¯•é¢˜/"},{"title":"å¥½æœªæ¥é¢è¯•é¢˜åŠç­”æ¡ˆ","text":"å¥½æœªæ¥é¢è¯•é¢˜ 1. ä¸€é¢1ã€è¯´ä¸€ä¸‹optionalã€‚?! ?? æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿæœ‰å‡ ç§è§£åŒ…æ–¹å¼ï¼Ÿè§£åŒ…æ–¹å¼ï¼šif letã€guardã€!å¼ºåˆ¶è§£åŒ…ã€?? ç­‰ã€‚ ?! ?? let a = b ?? c å¦‚æœbä¸ä¸ºnilï¼Œåˆ™a = b;å¦åˆ™a = c; 2ã€è¯´ä¸€ä¸‹é—­åŒ…ã€‚é—­åŒ…æ˜¯èƒ½å¤Ÿè¯»å–å…¶ä»–å‡½æ•°å†…éƒ¨å˜é‡çš„å‡½æ•°ï¼Œå¯ä»¥ç†è§£æˆå®šä¹‰åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å‡½æ•°ã€‚ å¯ä»¥ç”¨typealiasèµ·åˆ«å 1234typealias testBlock = (String) -&gt; Voidlet aaa: testBlock = {str in print(str)} å€¼æ•è· é—­åŒ…å¯ä»¥æ•è·ä¸Šä¸‹æ–‡ä¸­çš„å¸¸é‡å’Œå˜é‡ é€ƒé€¸é—­åŒ… å½“ä¸€ä¸ªé—­åŒ…ä½œä¸ºå‚æ•°ä¼ å…¥å‡½æ•°ä¸­ï¼Œè¿™ä¸ªé—­åŒ…éœ€è¦ç­‰å‡½æ•°æ‰§è¡Œç»“æŸè¿”å›åæ‰§è¡Œï¼Œè¿™ç§æƒ…å†µå°±ç§°ä½œè¿™ä¸ªé—­åŒ…åœ¨å‡½æ•°ä¸­é€ƒé€¸ã€‚åœ¨æ¶‰åŠå¼‚æ­¥æ“ä½œæ—¶ç»å¸¸ç”¨åˆ°ï¼Œç‰¹åˆ«æ˜¯ç½‘ç»œè¯·æ±‚åè¦è¿›è¡Œè¯·æ±‚æˆåŠŸåçš„å›è°ƒæ—¶ï¼Œé—­åŒ…å°±è¦é€ƒé€¸æ‰ï¼Œè¿™æ—¶å°±è¦åœ¨é—­åŒ…å½¢å‚å‰åŠ ä¸Š@escapingå…³é”®å­—ã€‚ 3ã€æ¯”è¾ƒä»£ç†ã€é€šçŸ¥ã€KVOï¼Ÿè¿™ä¸‰ä¸ªè°çš„æ•ˆç‡æœ€é«˜ï¼Œè°çš„æ•ˆç‡æœ€ä½ï¼ŸKVO æ•ˆç‡æœ€ä½ï¼Œå› ä¸ºä½¿ç”¨åˆ°äº† Runtimeã€‚ ä»£ç†æ•ˆç‡æœ€é«˜ï¼Œå› ä¸ºæ˜¯ä¸€å¯¹ä¸€ã€‚ 4ã€NSString å’Œ String çš„åŒºåˆ«ï¼ŸString æ˜¯å€¼ç±»å‹ï¼ŒNSString æ˜¯å¼•ç”¨ç±»å‹ã€‚ 5ã€Swift è·Ÿ OC çš„åŒºåˆ«ï¼ŸOC æ˜¯é¢å‘å¯¹è±¡çš„ï¼ŒSwift å‘¢ï¼Ÿï¼ˆé¢å‘å¯¹è±¡ã€é¢å‘åè®®ã€å“åº”å¼ç¼–ç¨‹ï¼‰è§£é‡Šä¸€ä¸‹é¢å‘åè®®ç¼–ç¨‹ï¼ŸOC æ˜¯åŠ¨æ€çš„è¯­è¨€ï¼ŒSwift æ˜¯é™æ€çš„è¯­è¨€ã€‚ 6ã€è¯´ä¸€ä¸‹ MRC ï¼Ÿè‡ªåŠ¨é‡Šæ”¾æ± ï¼Ÿè‡ªåŠ¨é‡Šæ”¾æ± ä»€ä¹ˆæ—¶å€™é‡Šæ”¾ï¼ŸiOS åœ¨ä¸»çº¿ç¨‹çš„Runloopä¸­æ³¨å†Œäº†2ä¸ªObserver ç¬¬1ä¸ªObserverç›‘å¬äº†kCFRunLoopEntryäº‹ä»¶ï¼Œä¼šè°ƒç”¨objc_autoreleasePoolPush() ç¬¬2ä¸ªObserver ç›‘å¬äº†kCFRunLoopBeforeWaitingäº‹ä»¶ï¼Œä¼šè°ƒç”¨objc_autoreleasePoolPop()ã€objc_autoreleasePoolPush() ç›‘å¬äº†kCFRunLoopBeforeExitäº‹ä»¶ï¼Œä¼šè°ƒç”¨objc_autoreleasePoolPop() 7ã€è¯´ä¸€ä¸‹å¤šçº¿ç¨‹ï¼ŸNSThread NSOperation GCD 8ã€åˆ†åˆ«ç”¨ OC å’Œ Swift æ‰‹å†™ä¸€ä¸‹å•ä¾‹ã€‚å•ä¾‹æ¨¡å¼åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­ï¼Œè¦ä¿è¯å®ä¾‹å˜é‡åªè¢«åˆ›å»ºä¸€æ¬¡ã€‚åœ¨æ•´ä¸ªå¼€å‘ä¸­éœ€è¦ç‰¹åˆ«æ³¨æ„çº¿ç¨‹å®‰å…¨ï¼Œå³ä½¿åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œä¾ç„¶åªåˆå§‹åŒ–ä¸€æ¬¡å˜é‡ã€‚ 12345678+ (instanceType)sharedManager { static Manager *sharedManager = nil; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ sharedManager = [[Manager alloc] init]; }); return sharedManager;} åœ¨ Swift ä¸­ï¼Œlet å…³é”®å­—å·²ç»ä¿è¯äº†å®ä¾‹å˜é‡ä¸ä¼šè¢«ä¿®æ”¹ï¼Œæ‰€ä»¥å•ä¾‹çš„åˆ›å»ºå°±ç®€å•å¾ˆå¤šï¼š1234class Manager { static let shared = Manager(); private init() {}} 9ã€SnaptKit å†…éƒ¨çœ‹è¿‡å—ï¼Ÿ10ã€é“¾å¼è¯­æ³•çš„å®ç°ã€‚UIView.top.equalTo().offSet(10) UIView.left.equalTo().offSet(10) ä¸ºä»€ä¹ˆèƒ½å†™æˆUIView.top.left.offSet(10) ï¼Ÿ block è¿”å› self è‡ªèº«ï¼Œä¾‹å¦‚ï¼š 123456789// å½“å‰ç±»æ˜¯ViewControllerç±» block è¿”å›ç±»å¯¹è±¡ ç±»å¯¹è±¡å°±å¯ä»¥ç»§ç»­è°ƒç”¨ test æ–¹æ³•äº†- (ViewController *(^)(int))test{ ViewController *(^block)(int i) = ^ViewController *(int i){ NSLog(@\"%d\",i); return self; }; return block;} è°ƒç”¨çš„æ—¶å€™å°±å¯ä»¥è¿™æ ·å†™ï¼š 1self.test(1).test(2).test(3); é“¾æ¡çš„æ‰§è¡Œé¡ºåº self è°ƒç”¨ test æ–¹æ³• test æ–¹æ³•è¿”å› block block å¾—åˆ°å°æ‹¬å·ä¸­çš„å‚æ•° å¹¶æ‰§è¡Œ block ä¸­çš„ä»£ç  block è¿”å›å¯¹è±¡ å¯¹è±¡æ¥ç€è°ƒç”¨ test æ–¹æ³• å®é™…åº”ç”¨ä¸­ test å¯ä»¥æ˜¯ä»»ä½•è¿™ç§æ ¼å¼çš„æ–¹æ³• OCä¸­é“¾å¼è¯­æ³•çš„ä½¿ç”¨åŠåŸç† 2. äºŒé¢ä¸»è¦æ˜¯æ‰‹å†™ç®—æ³•é¢˜ï¼š 1ã€ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—ã€‚123456789101112131415var inStack = [];var outStack = [];function push(node){ inStack.push(node);}function pop(){ if (outStack.length == 0) { while(inStack.length != 0) { outStack.push(inStack.pop()); } } return outStack.pop();} 2ã€ä»æ‰‘å…‹ç‰Œä¸­æŠ½å‡º5å¼ ï¼Œå†™ä¸€ä¸ªæ–¹æ³•åˆ¤æ–­æ˜¯ä¸æ˜¯é¡ºå­ã€‚ï¼ˆå¦‚34567ï¼‰å¤§å°ç‹æ˜¯ä¸‡èƒ½çš„ï¼Œå¯ä»¥æ›¿ä»£ä»»æ„æ•°å­—ã€‚å‰‘æŒ‡ Offer 61. æ‰‘å…‹ç‰Œä¸­çš„é¡ºå­ 1234567891011121314var isStraight = function(nums) { let repeat = new Set(); let max = 0, min = 14; for (let i = 0; i &lt; nums.length; i++) { if (nums[i] == 0) continue; // è·³è¿‡å¤§å°ç‹ max = Math.max(max, nums[i]); // æœ€å¤§ç‰Œ min = Math.min(min, nums[i]); // æœ€å°ç‰Œ if (repeat.has(nums[i])) { return false; } repeat.add(nums[i]); } return max - min &lt; 5; // æœ€å¤§ç‰Œ - æœ€å°ç‰Œ &lt; 5 åˆ™å¯æ„æˆé¡ºå­}; 3. ä¸‰é¢é¡¹ç›®ç»ç†èŠé¡¹ç›® 4. å››é¢HRé—®äº†å¾ˆå¤šé—®é¢˜ï¼ŒåŒ…æ‹¬ä¸ªäººä¼˜ç¼ºç‚¹ï¼Œé—²æš‡æ—¶é—´ä¼šåšä»€ä¹ˆï¼Œåœ¨å‰å…¬å¸3å¹´çš„æˆé•¿ç­‰ç­‰ã€‚","link":"/å¥½æœªæ¥é¢è¯•é¢˜åŠç­”æ¡ˆ/"},{"title":"å°çº¢ä¹¦","text":"å°çº¢ä¹¦ 1.å¾ªç¯å¼•ç”¨éƒ½æœ‰å“ªäº›ï¼Ÿ 2.Block çš„æœ¬è´¨ï¼Œéƒ½æœ‰å“ªäº› Block 3.NSMutableArray copy åè°ƒç”¨ addObject æ–¹æ³•ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ 4.æ¶ˆæ¯è½¬å‘æµç¨‹ çƒ­ä¿®å¤æ˜¯å‘ç”Ÿçš„å“ªä¸€æ­¥ï¼Ÿ 5.Runloop å’Œçº¿ç¨‹çš„å…³ç³»ï¼Œä¸»çº¿ç¨‹çš„ Runloop ä»€ä¹ˆæ—¶å€™å¯åŠ¨çš„ï¼ŸRunloop çš„åº”ç”¨ï¼Œåœ¨èŠå¤©é¡µæ€ä¹ˆç”¨ Runloop æ£€æµ‹å¡é¡¿ 6.GCD å’Œ NSOperation åŒºåˆ«ï¼Œä½¿ç”¨åœºæ™¯ï¼›dispatch_barrier çš„ç”¨æ³•ï¼› 7.æ€ä¹ˆå®ç°å¤šçº¿ç¨‹è¯»å–æ•°æ®åº“çº¿ç¨‹å®‰å…¨ï¼Ÿ 8.éƒ½æœ‰å“ªäº›é”ï¼Ÿæ€§èƒ½å¯¹æ¯” 9.ä»€ä¹ˆæ˜¯æ­»é”ï¼Œæœ‰å“ªäº›æ¡ä»¶ï¼Œæ€ä¹ˆè§£å†³ 10.Swift é‡Œç±»å’Œç»“æ„ä½“æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä½¿ç”¨åœºæ™¯ï¼Ÿ 11.å¯é€‰ç±»å‹æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿæšä¸¾ 12.SDK ä½“ç§¯ä¼˜åŒ–ï¼Œæ„å»ºææ•ˆï¼Œæ€ä¹ˆå®šä½çš„ import é—®é¢˜ï¼ŸCocoaPods æ€ä¹ˆæ„å»ºææ•ˆï¼ŸåŠ¨æ€åº“å’Œé™æ€åº“è°å å†…å­˜ 13.é¡µé¢åŠ è½½é€Ÿåº¦ä¼˜åŒ– 14.å¯åŠ¨æµç¨‹å’Œä¼˜åŒ–æ‰‹æ®µ 15.ç»„ä»¶åŒ– 16.é¸¿è’™å’Œ iOS å¼€å‘çš„åŒºåˆ« 17.SSE å®ç°æ‰“å­—æœºæ•ˆæœï¼Œå¦‚æœç”¨ iOS å®ç°ï¼ŒMarkdown æ ¼å¼ï¼Œå›¾ç‰‡ç­‰æ‰“å­—æœºæ•ˆæœï¼Œåº”è¯¥ç”¨ä»€ä¹ˆåè®®ï¼Œä»€ä¹ˆæ§ä»¶ï¼Œæ€ä¹ˆå®ç°è¡¨æ ¼ï¼Ÿ 18.ç®—æ³•ï¼šåè½¬é“¾è¡¨ ç”¨è¿­ä»£å’Œé€’å½’ä¸¤ç§æ–¹å¼å®ç°ï¼Œæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦","link":"/å°çº¢ä¹¦/"},{"title":"å®é¹„å‡ºè¡Œ","text":"å®é¹„å‡ºè¡Œ 1.éšç§æƒé™æ£€æµ‹ï¼Œä½œä¸ºå¹³å°æ–¹ï¼Œçœ‹ä¸šåŠ¡æ–¹æœ‰æ²¡æœ‰ç”¨åˆ°éšç§æƒé™ï¼Œæ²¡æœ‰æºç  2.å¹´åˆå®šäº†å´©æºƒç‡å’Œå¡é¡¿ç‡ï¼Œç°åœ¨çœ‹åŠ£åŒ–äº†ï¼Œä½ ä½œä¸ºå¹³å°ï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿ 3.é€ æˆå¡é¡¿æœ‰å“ªäº›åŸå›  4.ä½ çš„ä¼˜åŒ–æ–¹æ¡ˆé‡åˆ°æŒ‘æˆ˜ï¼Œåˆ«äººä¸è®¤å¯æ€ä¹ˆåŠï¼Ÿ 5.å•ä¸€èŒè´£æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ 6.ä½ å¸Œæœ›ä¸‹å®¶å…¬å¸ã€åŒäº‹æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œæœ‰ä»€ä¹ˆæœŸæœ›ï¼Œä½ æœŸæœ›åœ¨å›¢é˜Ÿä¸­çš„å®šä½æ˜¯ä»€ä¹ˆï¼Ÿ 7.ä½ è§‰å¾—ä»€ä¹ˆèƒ½æ¿€åŠ±åˆ°ä½ ï¼Ÿ 8.ä¸‰å¹´è§„åˆ’","link":"/å®é¹„å‡ºè¡Œ/"},{"title":"å¹³å®‰é¢è¯•é¢˜","text":"å¹³å®‰é¢è¯•é¢˜ 1.ä»€ä¹ˆæ˜¯å¤šæ€ï¼Ÿå…·ä½“åœ¨é¡¹ç›®ä¸­æ€ä¹ˆç”¨çš„ï¼Ÿ 2.è¯´ä¸€ä¸‹ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸šåŠ¡ç»„ä»¶éUIç»„ä»¶ï¼‰ï¼› 3.è°ƒç”¨æœªå®ç°çš„æ–¹æ³•ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œç„¶åé€šè¿‡ä»€ä¹ˆå¯ä»¥è¿›è¡Œå¤„ç†ï¼Ÿæ¶ˆæ¯è½¬å‘çš„å…·ä½“æµç¨‹ï¼Ÿæ¶ˆæ¯è½¬å‘æµç¨‹åœ¨å®é™…ä¸­çš„åº”ç”¨ï¼Ÿ 4.KVO çš„åŸç†ï¼Ÿ 5.åˆ†ç±»çš„åº•å±‚å®ç°ï¼Ÿ 6.App å¯åŠ¨ä¼˜åŒ–ï¼Ÿçƒ­å¯åŠ¨&amp;å†·å¯åŠ¨ï¼Œå…·ä½“ä¼˜åŒ–ï¼Ÿ 7.Vue çš„åŒå‘ç»‘å®šï¼Ÿ 8.è¯´ä¸€ä¸‹ä½ å¯¹ Runloop çš„ç†è§£ï¼ŒRunloop çš„åº”ç”¨ï¼Ÿ 9.é¡¹ç›®ä¸­å…·ä½“æ˜¯æ€ä¹ˆç”¨çš„å¤šçº¿ç¨‹ï¼Ÿ 10.bug ç®¡ç†å·¥å…·ï¼Ÿbug ç‡ï¼Œæ—¥æ´»ï¼Ÿ 11.é¡¹ç›®ä¸­ä½ çš„èŒè´£æ‰€åœ¨ï¼Ÿ 12.æ˜¯å¦è¯»è¿‡ SDWebImageï¼ŒAFNetworking åº•å±‚ï¼Ÿ","link":"/å¹³å®‰é¢è¯•é¢˜/"},{"title":"å¼€æœç§‘æŠ€é¢è¯•é¢˜","text":"å¼€æœç§‘æŠ€é¢è¯•é¢˜ ä¸€é¢1ã€å¡é¡¿åŸå› ã€è§£å†³åŠæ³•ã€‚ä¸ºä»€ä¹ˆé€æ˜è§†å›¾ä¸å¦‚ä¸é€æ˜è§†å›¾ï¼Ÿ 2ã€é—ªé€€åŸå› ã€ç›‘æµ‹ã€è¿‡ç¨‹ã€‚å‹ç›Ÿæ˜¯æ€ä¹ˆæ•è·é—ªé€€çš„ï¼Ÿä»ä¸€ä¸ªäº‹ä»¶åˆ°é—ªé€€å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ 3ã€å›¾ç‰‡çš„å‹ç¼©ï¼Œä»600kåˆ°500kï¼Œä¸èƒ½è®¾ç½®å›ºå®šå‹ç¼©æ¯”ï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿå‹ç¼©å›¾ç‰‡ï¼Œå‹ç¼©å›¾ç‰‡å®é™…å‹ç¼©çš„æ˜¯å“ªäº›ä¸œè¥¿ï¼ŸåŠ è½½è¶…å¤§å›¾ï¼›å›¾ç‰‡åœ¨è®¡ç®—æœºä¸­çš„å­˜å‚¨å½¢å¼ï¼›10Mçš„å›¾ç‰‡åŠ è½½åˆ°å†…å­˜ä¸­æ˜¯å¤šå¤§ï¼Ÿå¤§å›¾æ˜¯æ€ä¹ˆåŠ è½½çš„ï¼Ÿ å›¾åƒæ–‡ä»¶å­˜å‚¨çš„éƒ½æ˜¯æ¯ä¸€ä¸ªåƒç´ å¯¹åº”çš„é¢œè‰²å€¼ã€‚ 4ã€å­—å…¸çš„æœ¬è´¨ï¼Ÿå“ˆå¸Œè¡¨åŸç†ï¼Ÿ å“ˆå¸Œè¡¨ã€‚ 5ã€é“¾è¡¨å’Œæ•°ç»„ï¼Œå“ªä¸ªå®¹æ˜“æ‰¾åˆ°åœ°å€ï¼Ÿ æ•°ç»„ã€‚ åœ¨å†…å­˜ä¸­ï¼Œæ•°ç»„æ˜¯ä¸€å—è¿ç»­çš„åŒºåŸŸã€‚æ’å…¥å’Œåˆ é™¤æ•°æ®æ•ˆç‡ä½ã€‚éšæœºè¯»å–æ•ˆç‡å¾ˆé«˜ï¼Œå› ä¸ºæ•°ç»„æ˜¯è¿ç»­çš„ï¼ŒçŸ¥é“æ¯ä¸€ä¸ªæ•°æ®çš„å†…å­˜åœ°å€ï¼Œå¯ä»¥ç›´æ¥æ‰¾åˆ°ç»™åœ°å€çš„æ•°æ®ã€‚ é“¾è¡¨å¢åŠ å’Œåˆ é™¤æ•°æ®å¾ˆå®¹æ˜“ã€‚æŸ¥æ‰¾æ•°æ®æ—¶æ•ˆç‡ä½ï¼Œå› ä¸ºä¸å…·æœ‰éšæœºè®¿é—®æ€§ã€‚ 6ã€åˆ—è¡¨æœ‰å¥½å¤šé¡µï¼ŒæŸä¸€é¡µå’Œåè¾¹åŠ è½½çš„ä¸€é¡µä¸­æœ‰ç›¸åŒçš„æ•°æ®ï¼Œæ€ä¹ˆå¤„ç†ï¼Ÿ 7ã€åŠ¨æ€åº“å’Œé™æ€åº“çš„åŒºåˆ«ã€‚ 8ã€è®¾è®¡æ¨¡å¼ã€‚ äºŒé¢(ç”µè¯é¢è¯•)1ã€ä»€ä¹ˆæ—¶å€™å¼€å§‹æ¥è§¦ iOSï¼Ÿæ€ä¹ˆå­¦çš„iOSï¼Ÿ 2ã€å…¬å¸å¤šå°‘äººï¼Ÿä»€ä¹ˆé¡¹ç›®ï¼Ÿ 3ã€ä½ ä¼šé€‰æ‹©ä»€ä¹ˆæ ·çš„å…¬å¸ï¼Ÿ 4ã€æ•°æ®åº“ï¼ˆSQLite/Realmï¼‰æ˜¯æ€ä¹ˆä¿è¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ 5ã€UserDeafaults ç³»ç»Ÿåšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿä¸ºä»€ä¹ˆå¯ä»¥åœ¨ä¸»çº¿ç¨‹ä¸Šå»åšå­˜å–ï¼Ÿå¦‚æœè®©ä½ å®ç°ï¼Œæ–¹æ³•å·²ç»æ˜¯åŒæ­¥çš„æ–¹æ³•äº†ï¼Œä½ ä¼šæ€ä¹ˆå¤„ç†ï¼Ÿ 6ã€+load å’Œ +initialize æ–¹æ³•ä»€ä¹ˆæ—¶å€™ä¼šè°ƒç”¨ï¼Œ+load å’Œ +initialize æ–¹æ³•ã€main æ–¹æ³•è¿™ä¸‰ä¸ªçš„è°ƒç”¨é¡ºåºã€‚ 7ã€@class å’Œ #import åœ¨ç¼–è¯‘çš„æ—¶å€™æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ 8ã€JSON è½¬ Model ä½ ç”¨çš„æ˜¯ä»€ä¹ˆï¼ŸMJExtension å­—å…¸è½¬æ¨¡å‹çš„å…·ä½“æ­¥éª¤ï¼Ÿæ‹¿åˆ°å­—å…¸äº†ï¼Œç¬¬ä¸€æ­¥åšä»€ä¹ˆï¼Œç¬¬äºŒæ­¥åšä»€ä¹ˆï¼Ÿ 9ã€WebView è·Ÿ JS æ˜¯æ€ä¹ˆäº¤äº’çš„ï¼Ÿ 10ã€WebView æ€ä¹ˆå­˜ cookieï¼Ÿ 11ã€A-&gt;B-&gt;C-&gt;D ä»Dè¿”å›åˆ°Bã€‚è¯´å‡ ä¸ªä¸åŒçš„å®ç°æ€è·¯ã€‚ æ–¹æ¡ˆ1ï¼šfor å¾ªç¯ self.navigationController.viewControllers åˆ¤æ–­æŸä¸ªæ§åˆ¶å™¨æ˜¯å¦æ˜¯ B å¦‚æœæ˜¯å°± popToViewController:Bã€‚ æ–¹æ¡ˆ2ï¼šself.navigationController.viewControllers æ˜¯ä¸€ä¸ªä¸å¯å˜æ•°ç»„ï¼Œå¯ä»¥èµ‹å€¼ç»™ä¸€ä¸ªå¯å˜çš„æ•°ç»„ï¼Œç„¶åæŠŠ C ç§»é™¤ï¼Œç„¶åå†èµ‹å€¼ç»™ viewControllersã€‚ å…¶ä»–æ–¹æ¡ˆï¼šæç¤ºä¸ä¸€å®šè¦ pushï¼Œpresentå‡ºæ¥çš„æ€ä¹ˆå¼„ï¼Ÿ 12ã€äºŒåˆ†æŸ¥æ‰¾ã€‚ 13ã€æ·±æ‹·è´ä¸æµ…æ‹·è´ï¼ŒæŸä¸ªå€¼å¾—æ”¹å˜å¯èƒ½ä¼šå½±å“åŸå§‹å€¼ï¼Œé‚£æ˜¯æ·±æ‹·è´è¿˜æ˜¯æµ…æ‹·è´ï¼Ÿ 14ã€æ€§èƒ½ä¼˜åŒ–ï¼Ÿå›¾ç‰‡åŠ è½½åˆ° UIImageView ä¸Šç»è¿‡äº†å“ªäº›è¿‡ç¨‹ï¼Ÿ 15ã€Label æ€ä¹ˆå¤šè¡Œæ˜¾ç¤ºã€‚ 16ã€Buttonæœ‰å“ªäº›çŠ¶æ€ï¼Ÿ 17ã€dispatch_group_notify æ˜¯åœ¨å“ªä¸ªçº¿ç¨‹ä¸Šï¼Ÿ","link":"/å¼€æœç§‘æŠ€é¢è¯•é¢˜/"},{"title":"å¿«æ‰‹","text":"å¿«æ‰‹ é¢˜ç›®ä¸€ï¼šç®—æ³• åè½¬é“¾è¡¨äºŒï¼šæŒ‡å®šåŒºé—´åè½¬é“¾è¡¨ 1.Block æœ‰å“ªäº›ï¼Œå¾ªç¯å¼•ç”¨æ€ä¹ˆè§£å†³ï¼ŸGCD çš„ block ä¼šå¾ªç¯å¼•ç”¨å—ï¼Ÿ 2.KVO çš„å®ç°åŸç†ï¼Œæ´¾ç”Ÿç±»ä¼šé”€æ¯å—ï¼Ÿç”¨ä¸€å¥è¯æ€»ç»“ï¼šåŠ¨æ€ç”Ÿæˆæ´¾ç”Ÿç±»ï¼Œå¤å†™ set æ–¹æ³•ï¼›ç›´æ¥ä¿®æ”¹æˆå‘˜å˜é‡çš„å€¼ä¼šè§¦å‘ KVO å—ï¼ŸNSMutableArray é‡Œçš„å…ƒç´ å˜åŒ–ï¼Œç”¨ KVO èƒ½ç›‘å¬åˆ°å—ï¼Ÿæƒ³ç›‘å¬æ€ä¹ˆå®ç°ï¼Ÿ 3.Runtime æµç¨‹ï¼Œåº”ç”¨ 4.å†…å­˜ç®¡ç†ï¼Œweak çš„å®ç°åŸç† é¢˜ç›®äºŒï¼štableView cell å¡ç‰‡æœ‰æ•ˆçš„æ›å…‰ 1.å¤–æ¼è¶…è¿‡50% 2.åœç•™æ—¶é•¿è¶…è¿‡500ms é¡¹ç›® SDK ä½“ç§¯ä¼˜åŒ–ï¼Œé˜²åŠ£åŒ– å¯¹ AI çš„ä½¿ç”¨","link":"/å¿«æ‰‹/"},{"title":"å¾®åº—é¢è¯•é¢˜","text":"å¾®åº—é¢è¯•é¢˜ 1. ä¸€é¢1ã€è¯´é¡¹ç›®é‡Œçš„æœ‰ä»·å€¼çš„ä¸œè¥¿ï¼Ÿ 2ã€HTTPS è¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿéå¯¹ç§°åŠ å¯† 3ã€Swift ä¸­é€ƒé€¸é—­åŒ…å’Œéé€ƒé€¸é—­åŒ…çš„åŒºåˆ«ï¼Ÿ 4ã€å±æ€§ç”¨ copy å…³é”®å­—ï¼Œæ˜¯æ·±æ‹·è´è¿˜æ˜¯æµ…æ‹·è´ï¼Ÿæ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«ï¼Ÿ 5ã€SDWebImage çš„ç¼“å­˜æœºåˆ¶ï¼ŸLRU å†…éƒ¨åŸç†ï¼Ÿä¸‹è½½å®Œæˆå›¾ç‰‡åï¼Œæ˜¯å…ˆå­˜åˆ°å†…å­˜ã€ç£ç›˜åï¼Œæ‰æ˜¾ç¤ºåˆ°ç•Œé¢ä¸Šå—ï¼Ÿ 6ã€AFN ç”¨åˆ°äº† NSOperationã€GCDï¼Œè¯´ä¸€ä¸‹å†…éƒ¨ Operation ç›¸å…³çš„ï¼ŸManagerï¼Ÿ 7ã€GCD å†…éƒ¨å®ç°ï¼Ÿ 8ã€çº¦æŸ left/right å’Œ leading/trailing çš„åŒºåˆ«ï¼Ÿçº¦æŸæŠ¥é»„æ€ä¹ˆè§£å†³ï¼Ÿ 9ã€KVO çš„åŸç†ï¼Ÿå…·ä½“ NSObject çš„ä¸¤ä¸ªæ–¹æ³•ï¼Ÿ 10ã€æ¶ˆæ¯è½¬å‘æµç¨‹ï¼Ÿä½¿ç”¨åœºæ™¯ï¼Ÿ 11ã€æ•°æ®åº“å‡å­—æ®µæ€ä¹ˆå®¹é”™ï¼Ÿ 12ã€æœ‰æ²¡æœ‰æ‰“åŒ…è¿‡ç§æœ‰åº“ï¼Ÿ 13ã€ä»ç‚¹å‡» App çš„å›¾æ ‡åˆ° App å¯åŠ¨ï¼Œè¯´ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼Ÿ+load å‘ç”Ÿåœ¨ä»€ä¹ˆæ—¶å€™ï¼Ÿ 14ã€ç”¨ä»€ä¹ˆç®¡ç†ç¬¬ä¸‰æ–¹åº“ï¼ŸCocoaPods ä¸­çš„ .lock æ–‡ä»¶å­˜å‚¨äº†ä»€ä¹ˆä¿¡æ¯ï¼Ÿ 15ã€è¯´ä¸€ä¸‹ä¸€ä¸ªé¡¹ç›®çš„æ¶æ„ï¼Ÿ 16ã€ç»„ä»¶åŒ–ï¼Ÿ 17ã€æ‰‹å†™å†’æ³¡æ’åºç®—æ³•ï¼Ÿç®—æ³•å¤æ‚åº¦ï¼Ÿ 2. äºŒé¢1ã€é¡¹ç›®ä»‹ç»ï¼Œå¼€å‘äººå‘˜åˆ†å·¥ï¼Ÿè´­ç‰©è½¦æœ¬åœ°åŒ–å¦‚æœåŠ å…¥è´­ç‰©è½¦çš„ä»·æ ¼å˜äº†æ€ä¹ˆå¤„ç†çš„ï¼Ÿ 2ã€å†™ä¸€ä¸‹å…¶ä¸­ä¸€ä¸ªé¡¹ç›®çš„é¡¹ç›®æ¶æ„ï¼Ÿå†™ä¸€ä¸‹ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åº“ã€‚ 3ã€é¡¹ç›®ç”¨ä»€ä¹ˆç®¡ç†çš„ï¼ŸCocoaPods æŒ‡å®šç‰ˆæœ¬å·å¸¦ ~ è·Ÿä¸å¸¦ ~å„æœ‰ä»€ä¹ˆå«ä¹‰ï¼Ÿ 4ã€AFN å®ç°åŸç†ï¼Ÿå‘10ä¸ªç½‘ç»œè¯·æ±‚ï¼ŒAFN å†…éƒ¨æ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Ÿ 5ã€SDWebImage æ˜¯æ€ä¹ˆåŠ è½½å›¾ç‰‡çš„ï¼Ÿç”¨çš„æ˜¯ Get è¿˜æ˜¯ Post ï¼Ÿå¦‚æœè®©ä½ å®ç°ï¼Œä½ ä¼šé€‰æ‹© Get è¿˜æ˜¯ Post ï¼Ÿ 6ã€HTTPS æµç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿï¼ˆç”»ä¸€ä¸‹å®¢æˆ·ç«¯ã€æœåŠ¡å™¨çš„æ—¶åºå›¾ï¼‰ 7ã€åŠ å¯†ç®—æ³•ï¼Œå¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†ï¼Ÿ 8ã€å¦‚ä½•ç†è§£ OC æ˜¯åŠ¨æ€è¯­è¨€ï¼Ÿ 9ã€Runtimeï¼Ÿç”¨ Runtime åšè¿‡ä»€ä¹ˆï¼Ÿ 10ã€Runloopï¼Ÿå†…éƒ¨å®ç°åŸç†ï¼Ÿè·Ÿè‡ªå·±å†™ä¸ª for å¾ªç¯æœ‰æ²¡æœ‰åŒºåˆ«ï¼Ÿ 11ã€å†…å­˜ç®¡ç†ï¼Ÿå†…å­˜ä¼˜åŒ–ï¼Ÿ 12ã€å¡é¡¿ï¼Ÿ 13ã€å¤šçº¿ç¨‹ï¼Ÿç”¨ GCD å®ç°åŒæ­¥å¤šä¸ªå¼‚æ­¥è°ƒç”¨ï¼ˆaï¼Œbï¼‰ï¼Œç„¶åå†åŒæ­¥æ‰§è¡Œï¼ˆcï¼Œdï¼‰ 14ã€ä»ç‚¹å‡» App å›¾æ ‡ï¼Œåˆ°æ˜¾ç¤ºç•Œé¢æµç¨‹ï¼Ÿ 15ã€ç»„ä»¶åŒ–ï¼Ÿ 16ã€ç¼–è¯‘è¿‡ç¨‹ï¼ŸæŸä¸€ä¸ªä¸œè¥¿æ˜¯å±äºå“ªä¸€æ­¥éª¤çš„ï¼Ÿ 17ã€å¾®ä¿¡æ”¯ä»˜æµç¨‹ï¼ˆå®¢æˆ·ç«¯ã€å¾®ä¿¡ SDK ã€è‡ªå·±æœåŠ¡å™¨ã€å¾®ä¿¡æœåŠ¡å™¨æ—¶åºå›¾ï¼‰ 18ã€RNã€Weekï¼Ÿå†…éƒ¨æ˜¯æ€ä¹ˆç”¨ JS è°ƒç”¨åŸç”Ÿçš„ï¼Ÿ 19ã€æ—¥å¿—è®°å½•ï¼Ÿ 20ã€é‡åˆ°çš„é—ªé€€ï¼ŸBugï¼Ÿ 21ã€ç«äº‰åŒä¸€ä¸ªèµ„æºï¼Ÿ 22ã€è¿›ç¨‹çº¿ç¨‹ä¸ App çš„å…³ç³»ã€‚ 23ã€Git rebase","link":"/å¾®åº—é¢è¯•é¢˜åŠç­”æ¡ˆ/"},{"title":"å¿…è¦å•†åŸé¢è¯•é¢˜","text":"å¿…è¦å•†åŸé¢è¯•é¢˜ 1.é¡¹ç›®æ­å»ºéƒ½åšäº†å“ªäº›ï¼Ÿ2.æœ‰æ²¡æœ‰åšè¿‡è§£è€¦ï¼Ÿå‚è€ƒé“¾æ¥ï¼šiOSç»„ä»¶åŒ–ï¼ˆå››ï¼‰-ä»£ç è§£è€¦åˆ iOSç»„ä»¶åŒ–ä»é›¶å¼€å§‹ 3.è·¯ç”±æ€ä¹ˆå®ç°ä¼ å€¼çš„ï¼Ÿå‚è€ƒé“¾æ¥ï¼šiOSç»„ä»¶åŒ–ï¼ˆäº”ï¼‰-ç»„ä»¶é—´è°ƒç”¨ 4.é¡¹ç›®ä¼˜åŒ–ï¼Ÿ å®‰è£…åŒ…å¤§å°ä¼˜åŒ– æ€§èƒ½ä¼˜åŒ– å¯åŠ¨ä¼˜åŒ– é˜²å´©æºƒ 5.é˜²å´©æºƒå¤„ç†ï¼Ÿruntime äº¤æ¢æ–¹æ³• 6.cell åŠ è½½å›¾ç‰‡çš„ä¼˜åŒ–ï¼Ÿ7.é¡¹ç›®éš¾ç‚¹ï¼Ÿ8.æ•°æ®ä¼ é€’é™¤äº†åŠ å¯†ä»¥å¤–ï¼Œæ€ä¹ˆä¿è¯æ•°æ®å®‰å…¨ï¼Ÿ ä½¿ç”¨æ•°å­—è¯ä¹¦é”å®šæ¥ä¿è¯ä¸è¢«ä¸­é—´äººæ‹¦æˆªï¼Œå°†æœåŠ¡å™¨è¿”å›çš„æ•°æ®å’Œæˆ‘çš„æœ¬åœ°è¯ä¹¦è¿›è¡Œå¯¹æ¯”ï¼Œç¡®ä¿æ˜¯ä»æœåŠ¡å™¨è¿”å›å›æ¥çš„ã€‚ ä½¿ç”¨ https åè®®è¯·æ±‚ç½‘é¡µï¼Œpost æ¥è¯·æ±‚ç½‘é¡µæ•°æ®ï¼Œä¿è¯ç”¨æˆ·çš„è´¦å·å¯†ç ä¸è¢«è¢«äººè·å–åˆ°ã€‚ ä½¿ç”¨è‹¹æœè‡ªå·±çš„ SSKeyChain é’¥åŒ™ä¸²ï¼Œå°†ç”¨æˆ·çš„è´¦å·å¯†ç ä¿å­˜åœ¨é’¥åŒ™ä¸²ä¸­ã€‚ å‚è€ƒé“¾æ¥ï¼šiOSå¼€å‘ï¼Œè®©æ•°æ®æ›´å®‰å…¨çš„å‡ ä¸ªåŠ å¯†æ–¹å¼ 9.åŸç”Ÿä¸ H5 çš„äº¤äº’ï¼ŸWKWebView å’Œ UIWebView çš„åŒºåˆ«ï¼Ÿ10.Cocopods æ€ä¹ˆç®¡ç†è‡ªå·±çš„ç¬¬ä¸‰æ–¹åº“ï¼Ÿ11.é™¤äº† MVC æœ‰æ²¡æœ‰äº†è§£è¿‡åˆ«çš„è®¾è®¡æ¨¡å¼ï¼Ÿ12.æ–¹æ³•äº¤æ¢åŸç†ï¼Ÿæ–¹æ³•äº¤æ¢ï¼Œäº¤æ¢çš„æ˜¯æ–¹æ³•çš„å®ç°ã€‚","link":"/å¿…è¦å•†åŸé¢è¯•é¢˜/"},{"title":"å¿«ç‹—æ‰“è½¦é¢è¯•é¢˜","text":"å¿«ç‹—æ‰“è½¦é¢è¯•é¢˜ 1.dart è¯­æ³• .. æ˜¯ä»€ä¹ˆæ„æ€ 2.æ€ä¹ˆå°è£…ä¸€ä¸ª Flutter ç»„ä»¶æ¥è®©åŸç”Ÿè°ƒç”¨ 3.ç”¨çš„ç½‘ç»œè¯·æ±‚åº“æ˜¯å“ªä¸ªï¼ŸFlutter æ€ä¹ˆæŠ“åŒ… 4.state çš„ç”Ÿå‘½å‘¨æœŸ 5.buildContext æ˜¯æ¥å£ã€åè®®è¿˜æ˜¯ä»€ä¹ˆï¼Ÿ 6.Widget æ˜¯ä»€ä¹ˆ 7.çˆ¶å­ widget ä¹‹é—´æ€ä¹ˆä¼ å€¼ï¼Œçˆ¶ widget æ€ä¹ˆç®¡ç†å­ widget çš„çŠ¶æ€ï¼Œæ€ä¹ˆå±€éƒ¨åˆ·æ–°ï¼Ÿ 8.åŒæ­¥å¯ä»¥ä½¿ç”¨ try catch æ¥æ•è·å¼‚å¸¸ï¼Œå¸¦ Future çš„å¼‚æ­¥æ–¹æ³•çš„å¼‚å¸¸æ€ä¹ˆæ•è· 9.å•é“¾è¡¨åè½¬æœ‰å‡ ç§æ–¹æ³•ï¼Œä½ è§‰å¾—ä½ çš„æ–¹æ³•æ˜¯æœ€ä¼˜çš„å—ï¼Ÿ 10.å¿«é€Ÿæ’åºï¼Œè½´ç‚¹èƒ½ä¸èƒ½ç”¨ä¸­é—´çš„ä¸€ä¸ªæ•°ï¼Œæ€ä¹ˆä¼˜åŒ–å¿«æ’","link":"/å¿«ç‹—æ‰“è½¦é¢è¯•é¢˜/"},{"title":"æœ€å³","text":"æœ€å³ ä¸€é¢ï¼š 1.NSCoding çš„ä½œç”¨ï¼ˆå¯¹è±¡åºåˆ—åŒ– / ååºåˆ—åŒ–ï¼‰ 2.weak çš„å®ç°åŸç† 3.å¾ªç¯å¼•ç”¨éƒ½æœ‰å“ªäº›åœºæ™¯ï¼›æ€ä¹ˆæ£€æµ‹ï¼Ÿæ€ä¹ˆåŠ¨æ€è¿è¡Œæ—¶æ£€æµ‹ï¼ŸLeaksFinder 4.KVO å®ç°åŸç†ï¼Œéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼›KVO æ·»åŠ å’Œç§»é™¤è§‚å¯Ÿè€…æˆå¯¹å‡ºç°ï¼Œæœ‰æ²¡æœ‰å…¶ä»–åŠæ³•ä¸ç”¨æ‰‹åŠ¨ç§»é™¤è§‚å¯Ÿè€…ï¼Ÿç”¨è¿‡ KVOController å—ï¼Ÿ 5.æ€ä¹ˆæ£€æµ‹å¡é¡¿ï¼Ÿ é¡¹ç›®ï¼š 1.ä»‹ç»è´Ÿè´£çš„æ¨¡å— 2.IM é¡µé¢é€Ÿåº¦ä¼˜åŒ– 3.ç»„ä»¶åŒ–ï¼Œç»„ä»¶ä¹‹é—´ä¼ å€¼ ç®—æ³•ï¼šåè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯ äºŒé¢ï¼š 1.SDK åŒ…å«é¡µé¢å—ï¼Ÿä¸ºä»€ä¹ˆè¦åšæˆ SDKï¼Ÿå¼€å‘é‡åˆ°çš„æŒ‘æˆ˜ï¼Ÿ 2.æ€ä¹ˆä¼°ç®—ä¸€ä¸ª PNG å›¾ç‰‡å±•ç¤ºåœ¨é¡µé¢ä¸Šå ç”¨å†…å­˜å¤§å°ï¼Œéƒ½è·Ÿå›¾ç‰‡çš„å“ªäº›å› ç´ æœ‰å…³ï¼Ÿ 3.PNG æ˜¯æ€ä¹ˆå‹ç¼©çš„ï¼Ÿæœ‰æŠŠ PNG è½¬æˆ SVG çŸ¢é‡å›¾å—ï¼Ÿ 4.IM å‘é€å›¾ç‰‡çš„è¿‡ç¨‹ï¼›IM æ€ä¹ˆå‘åå…¼å®¹çš„ 5.åŸç”Ÿã€RNã€å°ç¨‹åºæ€ä¹ˆé€‰å‹çš„ï¼Ÿ ä¸‰é¢ï¼š HR 1.é¡¹ç›® 2.ç¦»èŒåŸå›  3.å¤§å‚å’Œå°å‚çš„åŒºåˆ« 4.æ‰¾å·¥ä½œæœ€çœ‹é‡çš„å“ªä¸‰ç‚¹ï¼Ÿ 5.åˆ«äººæ€ä¹ˆè¯„ä»·ä½ ï¼Ÿ","link":"/æœ€å³/"},{"title":"æŒé˜…","text":"æŒé˜… ä¸€é¢ï¼š 1.ç»„ä»¶åŒ–ï¼Œè¿™äº›æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹ 2.æ€ä¹ˆçŸ¥é“å¤šæ¬¡åˆ·æ–°çš„ 3.è§£å†³è¿‡çš„çº¿ä¸Šé—®é¢˜ï¼ŒOOMï¼Œé‡æŒ‡é’ˆï¼ŒAPM ç›‘æ§æ˜¯æ€ä¹ˆæ•è·ï¼Œæ€ä¹ˆä¸ŠæŠ¥çš„ï¼Ÿ 4.ç®—æ³•ï¼šæŸ¥æ‰¾ä¸¤ä¸ªè§†å›¾çš„å…¬å…±çˆ¶è§†å›¾ã€‚ äºŒé¢ï¼š 1.æŒ‘é€‰ä¸€ä¸ªé¡¹ç›®ä»‹ç»è‡ªå·±è´Ÿè´£çš„éƒ¨åˆ† 2.ç»„ä»¶åŒ–ä¸­é¡µé¢æ˜¯ä¸€ä¸€å¯¹åº”çš„å—ï¼Ÿ 3.AB å®éªŒæ˜¯æ€ä¹ˆåšçš„ï¼Ÿ 4.åŸ‹ç‚¹è®¾è®¡ï¼šåœ¨ VIP ä¸­å¿ƒæ€ä¹ˆç»Ÿè®¡åˆ°æ¥æº 5.æ¨èåˆ—è¡¨åˆ’äº†å¾ˆå¤šé¡µåå¡é¡¿ï¼Œä½ è§‰å¾—æ˜¯é—®é¢˜å—ï¼Ÿæœ‰å“ªäº›ä¼˜åŒ–æ‰‹æ®µ 6.è®²è®²åšè¿‡çš„ä¸šåŠ¡ 7.ç®—æ³•ï¼šæŠŠæ— åºæ•°ç»„å˜æˆå‡åŒ€çš„ V å­—å½¢æ•°ç»„ ä¸‰é¢ï¼šHR","link":"/æŒé˜…/"},{"title":"æ’å¤©è´¢å¯Œé¢è¯•é¢˜","text":"æ’å¤©è´¢å¯Œé¢è¯•é¢˜ ä¸€é¢1.KVO çš„å®ç°åŸç† 2.Category çš„åº•å±‚ç»“æ„ï¼ŒCategory èƒ½æ·»åŠ æˆå‘˜å˜é‡å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ 3.load å’Œ initialize çš„åŒºåˆ«ï¼Ÿinitialize çš„è°ƒç”¨é¡ºåºï¼Ÿ 4.Block ä¸ºä»€ä¹ˆç”¨ copyï¼ŸBlock çš„ç±»å‹ï¼ŸBlock çš„ç»“æ„ 5.Runtime çš„æ¶ˆæ¯æµç¨‹ 6.è¯´è¯´ä½ äº†è§£çš„ Runloop 7.é¡¹ç›®äº®ç‚¹ 8.æ€ä¹ˆå®ç° webView ç§’å¼€ H5 9.é¡¹ç›®ä¼˜åŒ– äºŒé¢ï¼ˆå‰ç«¯è´Ÿè´£äººï¼‰1.æ‰“å¼€ä¸€ä¸ª Appï¼Œé¦–é¡µå…³æ‰ç½‘ç»œåè¿˜å¯ä»¥æ˜¾ç¤ºä¸€äº›å†…å®¹ï¼Œæ€ä¹ˆå®ç°çš„ï¼Œæœ‰è½åœ°å—ï¼Ÿ 2.webView è·Ÿ H5 äº¤äº’æ–¹å¼ï¼Ÿæ˜¯ url scheme å—ï¼ŸBridge ç”¨äº†å— 3.ä»åŠ è½½ H5 åˆ°ç•Œé¢æ˜¾ç¤ºå‡ºæ¥è¿™æ®µæ—¶é—´çš„ç™½å±å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ 4.æ‰“å¼€ä¸€ä¸ªç¤ºä¾‹ Appï¼ŒwebView åŠ è½½ H5 ç§’å¼€ï¼Ÿç¦»çº¿åŒ…äº†è§£å—ï¼Ÿè¡Œä¸šè§£å†³æ–¹æ¡ˆ 5.Vue çš„ç”Ÿå‘½å‘¨æœŸ 6.v-if çš„ä½œç”¨ 7.çˆ¶å­ç»„ä»¶æ€ä¹ˆä¼ å€¼ï¼Ÿ 8.çŸ¥é“ vuex å—ï¼Ÿ ä¸‰é¢ï¼ˆåç«¯è´Ÿè´£äººï¼‰1.ä»‹ç»é¡¹ç›®æ¨¡å—ï¼Œé¡¹ç›®åˆ†å·¥ 2.å®‰å“ App æç¤ºæ›´æ–°ï¼Œæ›´æ–°ä¸€åŠé€€å‡ºå†è¿›æ¥ï¼Œä»å¤´ä¸‹è½½äº†ã€‚æ–­ç‚¹ç»­ä¼ æ€ä¹ˆåšï¼Ÿ 3.æŸ¥çœ‹è¯åº—é¦–é¡µï¼Œç™½å± loading æ—¶é—´é•¿æ€ä¹ˆä¼˜åŒ–ï¼Ÿ 4.webView ç™½å±æ€ä¹ˆä¼˜åŒ–ï¼Ÿ 5.åšè¿‡å“ªäº›å…·ä½“çš„ä¼˜åŒ– 6.é™¤äº†åŸ‹ç‚¹è¿˜æœ‰ä»€ä¹ˆæ–¹å¼æ’æŸ¥é—®é¢˜ï¼Ÿä¸èƒ½å¤ç°çš„é—®é¢˜æ€ä¹ˆæŸ¥ï¼Ÿ å››é¢ï¼ˆéƒ¨é—¨è´Ÿè´£äººï¼‰ HR","link":"/æ’å¤©è´¢å¯Œé¢è¯•é¢˜/"},{"title":"æ–°æµªä¹å±…é¢è¯•é¢˜","text":"æ–°æµªä¹å±…é¢è¯•é¢˜ ç¬”è¯•é¢˜ç¬”è¯•é¢˜ ä¸€é¢1ã€ç±»æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 2ã€ç”¨å°è£…çš„ç±»æ–¹æ³•å»è¯·æ±‚ç½‘ç»œä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ 3ã€è¯´ä¸€ä¸‹å•ä¾‹ã€‚å•ä¾‹çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½å¤šæ¬¡åˆ›å»ºå¯¹è±¡ï¼Ÿ 4ã€è¯´ä¸€ä¸‹ ARCã€MRCï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæœ‰å•¥ä¼˜ç¼ºç‚¹ï¼Ÿ 5ã€è‡ªåŠ¨é‡Šæ”¾æ± çš„ä½¿ç”¨åœºæ™¯ï¼Ÿè€—å†…å­˜æ—¶éœ€è¦åŠ åˆ°æ± å­é‡Œã€‚ 6ã€æ²™ç›’ç›®å½•é™¤äº† Documents è¿˜æœ‰å•¥ï¼ŸCache å’Œ Temp æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ SDWebImage æ˜¯åœ¨ Library ä¸‹çš„ Caches é‡Œ 7ã€é¡¹ç›®é‡Œç”¨åœ°å›¾äº†å—ï¼Ÿå¦‚æœç”¨ç³»ç»Ÿçš„åœ°å›¾ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œç”µé‡æ€¥é€Ÿä¸‹é™ï¼Œé‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜å—ï¼Ÿ 8ã€éƒ½æœ‰å“ªäº›å¯èƒ½å¾ªç¯å¼•ç”¨ï¼Ÿ 9ã€è¯´ä¸€ä¸‹ä»ç½‘ç»œè¯·æ±‚å›æ¥çš„æ•°æ®æ€ä¹ˆå­˜ï¼Ÿæ•°æ®æŒä¹…åŒ–çš„æ–¹æ³•ã€‚æ•°æ®åº“æ˜¯å­˜åœ¨æ²™ç›’çš„å“ªä¸ªç›®å½•ï¼Ÿæˆ‘è¯´åœ¨ Documents ä¸­ã€‚ 10ã€assign ä¸ weak åŒºåˆ«ï¼Ÿ 11ã€ç¬”è¯•é¢˜19çš„ç­”æ¡ˆä¸ºä»€ä¹ˆæ˜¯2ã€5ï¼Ÿ 12ã€è¯´ä¸€ä¸‹å†’æ³¡æ’åºçš„æ€è·¯ï¼Ÿ 13ã€GCD éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿæˆ‘è¯´äº†ä¸€ä¸‹ä½¿ç”¨åœºæ™¯ã€‚ 14ã€Runtimeã€Runloop äº†è§£å—ï¼ŸRunloop æœ‰å“ªäº› Modeï¼Ÿè¯´ä¸€ä¸‹ CommonMode ï¼Ÿ 15ã€æœ€åä¸€ä¸ªé—®é¢˜ï¼šç±»ä¼¼ç®€å† å³ä¸Šè§’æ˜¯å›¾ç‰‡ï¼ˆå®½é«˜å·²çŸ¥ï¼‰ å·¦è¾¹æ˜¯ä¸€æ®µæ–‡å­— æ–‡å­—ä¼šåŒ…è£¹ç€å›¾ç‰‡ï¼Œé—®å®ç°æ€è·¯ï¼Ÿ è¯´äº†ä¸‰ä¸ªæ€è·¯ï¼šï¼ˆ1ï¼‰è®¡ç®—ä¸€ä¸‹ä¸Šè¾¹ label å®½é«˜ï¼Œå·¦è¾¹ç”¨ä¸€ä¸ª label æ˜¾ç¤ºï¼Œä¸‹è¾¹å¤šä½™çš„å­—ä¹Ÿç”¨å¦ä¸€ä¸ª label æ˜¾ç¤ºã€‚ ï¼ˆ2ï¼‰YYText å¯èƒ½æœ‰å¤„ç†åŠæ³•ï¼Œç®—æ˜¯ç¬¬ä¸‰æ–¹ã€‚ ï¼ˆ3ï¼‰ä»–æç¤ºåº•å±‚ä¸€ç‚¹çš„ï¼Œæˆ‘è¯´ç»˜åˆ¶ã€‚ äºŒé¢1ã€äº†è§£é¡¹ç›®ï¼Œé—®åœ¨å…¬å¸å¹²å•¥ã€‚ 2ã€AutoLayout å’Œ Masonry æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 3ã€é¢å‘å¯¹è±¡åœ¨ OC ä¸­çš„ä½“ç°ï¼Ÿå°è£…ã€ç»§æ‰¿ã€å¤šæ€ã€‚ä½ è§‰å¾—æœ€ä¸»è¦çš„æ˜¯é¢å‘å¯¹è±¡çš„å“ªä¸ªç‰¹æ€§ï¼Ÿ 4ã€ä½ å¯¹ H5ã€åŸç”Ÿäº¤äº’çš„çœ‹æ³•ã€‚æˆ‘è¯´äº†å®ç°æ–¹å¼åï¼Œä»–è¯´ä¸è¦å®ç°ç»†èŠ‚ï¼Œå°±ä½ çš„çœ‹æ³•ã€‚æˆ‘åˆè¯´äº†é˜¿é‡Œæ˜¯å¤§å‰ç«¯ï¼Œä»–è¯´ä¸è¦è¯´é˜¿é‡Œï¼Œä½ çš„çœ‹æ³•å‘¢ï¼Ÿæˆ‘è¯´æ´»åŠ¨é¡µç”¨H5ï¼Œå…¶ä»–ç”¨åŸç”Ÿï¼Œå¯èƒ½æ•ˆç‡é«˜ã€‚ 5ã€Block å’Œ delegate çš„ä½¿ç”¨åœºæ™¯å·®å¼‚ï¼Ÿ 6ã€ä½ è§‰å¾—å¼€å‘ä¸€ä¸ªé¡¹ç›®éš¾ç‚¹åœ¨å“ªå„¿ï¼Ÿ 7ã€å…¶ä»–é—®é¢˜ï¼šè–ªæ°´èƒ½å•†é‡å—ï¼Ÿæœ‰ä»€ä¹ˆè¦é—®æˆ‘çš„ï¼Ÿ","link":"/æ–°æµªä¹å±…é¢è¯•é¢˜/"},{"title":"æ™®åå•†å­¦é™¢é¢è¯•é¢˜","text":"æ™®åå•†å­¦é™¢é¢è¯•é¢˜ 1.æ€ä¹ˆå­¦çš„ iOSï¼Ÿ 2.è¿å‡»åŠ¨ç”»å®ç°ï¼Ÿï¼ˆé˜Ÿåˆ—ã€çº¿ç¨‹ï¼‰ 3.ç›´æ’­åº•å±‚æŠ€æœ¯ï¼Ÿ 4.å°è£…ç½‘ç»œè¯·æ±‚æ€ä¹ˆå°è£…çš„ï¼Ÿè¯¦ç»†çš„éœ€è¦è€ƒè™‘çš„ä¸œè¥¿ 5.runtime æ‰¾ä¸åˆ°è¿™ä¸ªæ–¹æ³•æ€ä¹ˆèƒ½å¤Ÿä¸æŠ¥é”™ï¼Ÿåœ¨åŠ¨æ€æ–¹æ³•è§£æé‚£ä¸ªæ–¹æ³•é‡Œå…·ä½“æ€ä¹ˆå†™ï¼Ÿruntime æœ‰å“ªäº›åº”ç”¨ï¼Ÿ 6.ç±»çš„æœ¬è´¨ ç»“æ„ä½“é‡Œè¾¹æœ‰å“ªäº›ä¸œè¥¿ï¼Ÿ 7.æ•°æ®å­˜å‚¨æœ‰å“ªäº›ï¼Ÿ 8.runloop timer runloop åº•å±‚æ˜¯ä»€ä¹ˆï¼Ÿ 9.timer æ€ä¹ˆé˜²æ­¢å¾ªç¯å¼•ç”¨ï¼Ÿåœ¨å“ªé‡Œåœæ‰ timerï¼ŸdidDisappeareré‡Œè¡Œä¸è¡Œï¼Ÿé™¤äº† timer è¿˜æœ‰å“ªäº›å¯ä»¥å®ç°å®šæ—¶å™¨ï¼ŸCADispalyLink 10.delegate ç”¨ä»€ä¹ˆä¿®é¥°ç¬¦ï¼Ÿç”¨ asign è¡Œä¸è¡Œï¼Ÿweak æ˜¯æ€ä¹ˆæŠŠæŒ‡é’ˆç½®ä¸º nil çš„ï¼Ÿ 11.tableView cell é‡Œæœ‰å›¾ç‰‡ é¡µé¢æ»‘åŠ¨æ—¶ SDWebImage æœ‰æ²¡æœ‰å¤„ç† åœ¨æ»‘åŠ¨æ—¶ä¸åŠ è½½ åœæ­¢æ»‘åŠ¨æ—¶åŠ è½½ å®ƒæ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿ 12.é«˜åº¦ç¼“å­˜æœ‰æ²¡æœ‰åšï¼Ÿ 13.ä½ å¯¹åŠ ç­æ€ä¹ˆçœ‹ï¼Ÿ","link":"/æ™®åå•†å­¦é™¢é¢è¯•é¢˜/"},{"title":"æœç‹é¢è¯•é¢˜","text":"æœç‹é¢è¯•é¢˜ 1.ä»‹ç»ä¸€ä¸ªå°è±¡æ·±åˆ»çš„é¡¹ç›®ï¼Œé‡åˆ°è¿‡ä»€ä¹ˆé—®é¢˜ï¼Œæ€ä¹ˆè§£å†³çš„ã€‚ ç»„ä»¶åŒ–ä¸ºä»€ä¹ˆæ²¡æœ‰ç”¨ä¸€ä¸ªé€šç”¨çš„å­—å…¸æ¥æ¥æ”¶é¡µé¢å‚æ•°ï¼Œè¿™æ ·ä¸æ˜¯æ›´é€šç”¨ï¼Ÿ webView äº¤äº’åè®®æ€ä¹ˆåˆ¶å®šçš„ï¼ŸH5 ä»åŸç”Ÿæ‹¿è¿”å›å€¼æ€ä¹ˆå®ç°çš„ï¼Ÿ 2.åšè¿‡å“ªäº›ä¼˜åŒ– 3.ä½ è§‰å¾—ä½ æœ€æ“…é•¿å“ªæ–¹é¢ï¼Ÿæ¯”å¦‚ UIã€æ¶æ„å•¥çš„ 4.å¾®åšè¯¦æƒ…é¡µï¼ˆå†…å®¹ã€è½¬å‘ã€è¯„è®ºï¼‰è®©ä½ æ¥åšï¼Œä½ ä¼šæ€ä¹ˆå®ç°ï¼Ÿä»å¤–å±‚åˆ°å†…å±‚ç”¨ä»€ä¹ˆæ§ä»¶ï¼Œå…·ä½“å®ç°ã€‚ 5.ç®—æ³•é¢˜ æœ‰ä¸€ä¸ªäº§å“å‘å¸ƒäº†å¤šä¸ªç‰ˆæœ¬ï¼Œå®ƒéµå¾ªä»¥ä¸‹è§„åˆ™ï¼šå‡å¦‚æŸä¸ªç‰ˆæœ¬å´©æºƒäº†ï¼Œåˆ™åé¢çš„æ‰€æœ‰ç‰ˆæœ¬éƒ½ä¼šå´©æºƒã€‚ ä¸¾ä¸ªä¾‹å­ï¼šä¸€ä¸ªäº§å“å‡å¦‚æœ‰5ä¸ªç‰ˆæœ¬ï¼Œå…¶ä¸­ç¬¬1-3ç‰ˆæœ¬éƒ½æ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯ç¬¬4ä¸ªç‰ˆæœ¬å´©æºƒäº†ï¼Œé‚£ä¹ˆç¬¬5ä¸ªç‰ˆæœ¬ï¼ˆæœ€æ–°ç‰ˆæœ¬ï¼‰ä¸€å®šä¹Ÿå´©æºƒï¼Œç¬¬4ä¸ªç‰ˆæœ¬è¢«ç§°ä¸ºç¬¬ä¸€ä¸ªå´©æºƒç‰ˆæœ¬ã€‚ ç°åœ¨å·²çŸ¥ä¸€ä¸ªäº§å“æœ‰nä¸ªç‰ˆæœ¬ï¼Œè€Œä¸”æœ‰ä¸€ä¸ªæ£€æŸ¥ç®—æ³•func isBadVersion(version:Int) -&gt; Bool å¯ä»¥åˆ¤æ–­ä¸€ä¸ªç‰ˆæœ¬æ˜¯å¦å´©æºƒï¼Œå‡è®¾è¿™ä¸ªäº§å“çš„æœ€æ–°ç‰ˆæœ¬å´©æºƒäº†ï¼Œæ±‚ç¬¬ä¸€ä¸ªå´©æºƒçš„ç‰ˆæœ¬ã€‚ æ€è·¯ï¼šæœ¬è´¨ä¸Šæ˜¯æœ‰é‡å¤æ•°å­—çš„å‡åºæ•°ç»„çš„äºŒåˆ†æŸ¥æ‰¾ 1234567891011121314151617function search( nums , target ) { let start = 0 if(!nums.length) return -1; let left = 0, right = nums.length - 1; while(left &lt;= right) { let mid = Math.floor((left + right) / 2); if(target == nums[mid]) { while(mid != 0 &amp;&amp; nums[mid - 1] == nums[mid]) mid--; // æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ•° return mid; } else if(target &lt; nums[mid]) { right = mid - 1; } else { left = mid + 1; } } return -1;} 6.æƒ³å®ç°ä¸€ä¸ªå›¾ç‰‡ï¼Œåˆ é™¤åæ’¤é”€åˆ é™¤ï¼Œä½ ä¼šç”¨ä»€ä¹ˆæ•°æ®ç»“æ„æ¥æ€ä¹ˆå®ç°ï¼Ÿ","link":"/æœç‹é¢è¯•é¢˜/"},{"title":"æœ—æ’­ç½‘é¢è¯•é¢˜","text":"æœ—æ’­ç½‘é¢è¯•é¢˜ æœºè¯•é¢˜ 1ã€å›¾ç‰‡è½®æ’­æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ 2ã€ç¼“å­˜å›¾ç‰‡ç”¨çš„ä»€ä¹ˆï¼Ÿï¼ˆSDWebImageï¼‰è¯´ä¸€ä¸‹ SD çš„ç¼“å­˜æœºåˆ¶ï¼Ÿ 3ã€SD ç¼“å­˜æ»¡äº†ï¼Œæ˜¯æ€ä¹ˆæ¸…ç†çš„ï¼Ÿ 4ã€ä»ç£ç›˜å–å‡ºï¼Œä»å†…å­˜å–å‡ºï¼Œæ˜¾ç¤ºåˆ°ç•Œé¢ä¸Šï¼Œè¿™ä¸ªè¿‡ç¨‹å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ 5ã€ç§»åŠ¨ä¸€ä¸ªå›¾ç‰‡ï¼Œæ¯”å¦‚ä»å·¦è¾¹ç§»åŠ¨åˆ°å³è¾¹ï¼ŒCPU/GPU åšäº†ä»€ä¹ˆï¼Ÿè°çš„è´¡çŒ®å¤§ä¸€ç‚¹ï¼Ÿ 6ã€æ•°æ®ç»“æ„è·Ÿç®—æ³•ï¼Œå•é“¾è¡¨åè½¬ 7ã€åªéå†ï¼Œç”¨æ•°ç»„è¿˜æ˜¯é“¾è¡¨å¥½ï¼Ÿ 8ã€å¤§æ•°æ®æ’åºï¼Ÿæ€ä¹ˆåˆå¹¶æ‹†åˆ†çš„å°æ®µçš„ï¼Ÿ 9ã€æ·˜æ±°ç®—æ³•ï¼Ÿ","link":"/æœ—æ’­ç½‘é¢è¯•é¢˜/"},{"title":"æ ¸æ¡ƒç¼–ç¨‹é¢è¯•é¢˜","text":"æ ¸æ¡ƒç¼–ç¨‹é¢è¯•é¢˜ 1.æ¶ˆæ¯å‘é€å’Œæ¶ˆæ¯è½¬å‘çš„è¿‡ç¨‹ 2.KVO çš„åŸç† 3.èƒ½ä¸èƒ½åŠ¨æ€æ·»åŠ æˆå‘˜å˜é‡ 4.åˆ†ç±»ä¸ºå•¥ä¸èƒ½æ·»åŠ æˆå‘˜å˜é‡ 5.è¯´ä¸€ä¸‹ HTTPS å’Œ TCPã€UDP 6.è¯´ä¸€ä¸‹é¡¹ç›®äº®ç‚¹ 7.æ–¹æ³•äº¤æ¢æ³¨æ„ä»€ä¹ˆ 8.é“¾è¡¨åè½¬ 9.NSNumber æ€ä¹ˆè¿›è¡Œä¼˜åŒ–çš„ï¼Œæ•°æ®å­˜å‚¨å“ªé‡Œ 10.GCD å’Œ NSOperation å„è‡ªçš„ä¼˜ç‚¹ 11.Runtime çš„åº”ç”¨","link":"/æ ¸æ¡ƒç¼–ç¨‹é¢è¯•é¢˜/"},{"title":"æ£µæœµé¢è¯•é¢˜","text":"æ£µæœµé¢è¯•é¢˜ 1ã€ç»“æ„ä½“å’Œç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 2ã€NSString å’Œ String æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 3ã€?? æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ ? æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ ! æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ 4ã€è¯´ä¸€ä¸‹ @propertyï¼Œ weak å’Œ assign æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿweak èƒ½ä¸èƒ½ä¿®é¥°é OC çš„å¯¹è±¡ï¼Ÿ 5ã€MutableCopy å’Œ copy ï¼Œå³æ·±æ‹·è´å’Œæµ…æ‹·è´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 6ã€NSã€CAã€CFã€UI åˆ†åˆ«å±äºå“ªä¸ªæ¡†æ¶ï¼Ÿ 7ã€å¤šçº¿ç¨‹æœ‰æ²¡æœ‰è‡ªå·±å¼€è¾Ÿè¿‡çº¿ç¨‹ï¼Ÿ 8ã€ä»æœåŠ¡å™¨å¾—åˆ°5ä¸ªå›¾ç‰‡é“¾æ¥ï¼Œ5å¼ å›¾ç‰‡å±•ç¤ºåˆ°ä¸€ä¸ªé¡µé¢ä¸Šï¼Œæˆªå›¾åˆ†äº«åˆ°å¾®ä¿¡ï¼Ÿæ€ä¹ˆä¿è¯5å¼ å›¾å…¨éƒ¨åŠ è½½å‡ºæ¥äº†å†å»æˆªå›¾åˆ†äº«ï¼Ÿ 9ã€JS ä¸ OC äº¤äº’ï¼Œç‚¹å‡» H5 æŸä¸ªåœ°æ–¹è·³è½¬åˆ°è´­ç‰©è½¦ï¼Œç‚¹å‡»æŸä¸ªåœ°æ–¹è·³è½¬åˆ°è¯¦æƒ…é¡µï¼Œç‚¹å‡»æŸä¸ªåœ°æ–¹è·³è½¬åˆ°è®¢å•é¡µï¼Œè·³è½¬åˆ°æŒ‡å®šçš„é¡µé¢ä½ ç°åœ¨ç”¨çš„æ˜¯åˆ¤æ–­çš„è·³è½¬ç±»å‹ï¼Œå¦‚æœæ–°å¢äº†ä¸€ç§ï¼Œæ€ä¹ˆèƒ½ä¸å‘ç‰ˆå®Œæˆéœ€æ±‚ï¼Ÿ 10ã€ä½ ç”¨ swift å¼€å‘ç”¨æ²¡ç”¨è¿‡ VIPER æ¶æ„æ¨¡å¼ï¼Ÿ","link":"/æ£µæœµé¢è¯•é¢˜/"},{"title":"æ»´æ»´","text":"æ»´æ»´ 1.ä»‹ç»æœ‰æŒ‘æˆ˜çš„é¡¹ç›®ï¼Œç»„ä»¶åŒ–çš„å„ç§æ–¹æ¡ˆä¼˜åŠ£ 2.unrecognized selector å‘ç”Ÿå‰ç»å†å“ªäº›æ­¥éª¤ Runtime åº”ç”¨ï¼Œé™¤äº†äº¤æ¢æ–¹æ³•è¿˜æœ‰å“ªäº›åº”ç”¨ 3.åœ°å›¾ä¸Šæœ‰ä¸ªæ¨¡å—ï¼Œå¯ä»¥æ‹–åŠ¨ï¼Œæ‹–åŠ¨åˆ°è¾¹ç¼˜ï¼Œæœ‰å“ªäº›è¾¹ç•Œ caseï¼Œæ‰‹åŠ¿å†²çªæ€ä¹ˆè§£å†³ 4.ç”¨è¿‡å“ªäº›è·¨ç«¯ï¼Œå®ç°åŸç†ï¼Œflutter çš„çŠ¶æ€ç®¡ç†ç”¨çš„æ˜¯å•¥ï¼Œé™¤äº† provider è¿˜æœ‰å…¶ä»–çš„å—ï¼Ÿåœ¨ flutter é¡¹ç›®é‡Œçš„èŒè´£ï¼Œflutter é‡åˆ°è¿‡å“ªäº›é—®é¢˜ 5.åšè¿‡å“ªäº›ä¼˜åŒ– 6.å…±äº«å±å¹•ç”¨ Xcode å†™ï¼Œå­—ç¬¦ä¸²çš„å¤šè¯»å¤šå†™ï¼Œç”¨å¤šçº¿ç¨‹ï¼Œä¸è¦ç”¨é”","link":"/æ»´æ»´/"},{"title":"æ±½è½¦ä¹‹å®¶","text":"æ±½è½¦ä¹‹å®¶1.åŠ¨æ€åº“å’Œé™æ€åº“çš„åŒºåˆ« 2.ç½‘ç»œä¼˜åŒ– 3.é™æ€åˆ†æå‘ç°äº†å“ªäº›é—®é¢˜ï¼Ÿ 4.åŠ è½½é€Ÿåº¦ä¼˜åŒ– 5.Crash ç›‘æµ‹ï¼Œé‡æŒ‡é’ˆå®šä½ .æ‰“å°ç»“æœ 123456789__block int a = 0; int(^aBlock)(int) = ^(int num) { a += num; if (a &lt; 5) { aBlock(a); } return a++; }; NSLog(@\"%d\", aBlock(1)); aBlockä¸ºä»€ä¹ˆæ˜¯ç©ºï¼Ÿ","link":"/æ±½è½¦ä¹‹å®¶/"},{"title":"ç‚¹ä¼—ç§‘æŠ€","text":"ç‚¹ä¼—ç§‘æŠ€ ä¸€é¢ï¼š 1.ç»„ä»¶åŒ–ï¼Œå“ªç§æœ€å¥½ 2.åšè¿‡å†…è´­å—ï¼Ÿ 3.åšè¿‡å“ªäº›æ€§èƒ½ä¼˜åŒ–ï¼Ÿå¯åŠ¨ä¼˜åŒ–ï¼Œmain ä¹‹åï¼Œåšè¿‡äºŒè¿›åˆ¶é‡æ’å—ï¼Ÿwebp æ‰“åŒ…å‡ºæ¥ä¼šæ¯” png å°å—ï¼Ÿ 4.Runtime æµç¨‹ï¼Œåº”ç”¨ 5.åˆ†ç±»éƒ½ç”¨åˆ°å“ªäº›åœ°æ–¹ 6.é‡åˆ°è¿‡æ­»é”å—ï¼Ÿ 7.å¤šçº¿ç¨‹ç”¨çš„å¤šå—ï¼Ÿ 8.NSTimer å¾ªç¯å¼•ç”¨ï¼Œä¸­é—´å¯¹è±¡ç”¨ NSObject å’Œ NSProxy åœ¨æµç¨‹ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå†™æ³•ä¸€æ ·å—ï¼Ÿåœ¨ dealloc é‡Œåœæ‰å®šæ—¶å™¨å¯ä»¥å—ï¼Ÿ5sçš„å®šæ—¶å™¨æ‰“å°ï¼Œæå‰å…³æ‰å®šæ—¶å™¨è¿˜ä¼šæ‰“å°å—ï¼Ÿç”¨ weakSelf èƒ½è§£å†³å¾ªç¯å¼•ç”¨å—ï¼Ÿ 9.å±æ€§ä¿®é¥°ç¬¦éƒ½æœ‰å“ªäº›ï¼Ÿ ï¼ˆ1ï¼‰nonatomic å’Œ atomic åŒºåˆ« ï¼ˆ2ï¼‰å¯å˜æ•°ç»„ä¸ºä»€ä¹ˆç”¨ strongï¼Œä¸å¯å˜æ•°ç»„ä¸ºä»€ä¹ˆç”¨ copyï¼Œç”¨ strong æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ ï¼ˆ3ï¼‰block ä¸ºä»€ä¹ˆç”¨ copyï¼ŒMRC ä¸‹èƒ½ç”¨ retain å—ï¼Ÿæ–°åˆ›å»ºçš„ç±»è¢«å®å®šä¹‰åŒ…è£¹æ˜¯ä»€ä¹ˆä½œç”¨ï¼Ÿç±»ä¼¼ swift ä¸­çš„ï¼Ÿå¯é€‰ç±»å‹ï¼Œunnull æˆ– nullable 10.åšè¿‡å¹¿å‘Šå—ï¼Ÿåšè¿‡æ’­æ”¾å™¨å—ï¼Ÿ 11.å£è¿°ç®—æ³•ï¼šåœ¨éè´Ÿ int å€¼çš„æ•°ç»„ï¼Œæ‰€æœ‰å…ƒç´ éƒ½ç”¨ä¸Šï¼Œå¯ä»¥+æˆ–-ï¼Œç»“æœä¸º targetï¼Œèƒ½æœ‰å¤šå°‘ç§å†™æ³•ï¼Ÿæ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ äºŒé¢ï¼š 1.ä»‹ç»é¡¹ç›®ï¼Œç»„ä»¶åŒ–é™¤äº†è·¯ç”±ï¼Œéœ€è¦æ³¨å†Œï¼Œè¿˜äº†è§£å“ªäº›ä¸éœ€è¦æ³¨å†Œçš„æ–¹æ¡ˆå—ï¼Ÿtarget-action æ€ä¹ˆå®ç°çš„ï¼Ÿè®©ä½ è®¾è®¡ä¸€ä¸ªä¸ä¾èµ–æ³¨å†Œçš„ç»„ä»¶åŒ–ï¼Œå¦‚ä½•è®¾è®¡ï¼Ÿ 2.è¿è¡Œæ—¶ runtime æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿruntime çš„ APIï¼Œæ–¹æ³•äº¤äº’ï¼ŒKVOï¼Œæ–°ç”Ÿæˆä¸€ä¸ªç±»ï¼Œæ³¨å†Œç±»çš„ä¿¡æ¯ï¼Œè¿˜æœ‰åˆ«çš„å—ï¼Ÿ 3.ä»0åˆ°1çš„é¡¹ç›®ï¼Œéœ€è¦æ³¨æ„å“ªäº›ï¼Ÿ 4.swift åŸºäºåè®®ï¼Œæ€ä¹ˆç†è§£åè®®ï¼Œåœ¨ä»€ä¹ˆåœºæ™¯ç”¨åè®®å¤šä¸€äº›ï¼Ÿç»„ä»¶ä¼ å€¼ç”¨åè®®æ„Ÿè§‰ä¸å¤Ÿæ³› 5.è§†é¢‘é€šè¯æµç¨‹ï¼Œæ˜¯å®¢æˆ·ç«¯å½•åˆ¶å—ï¼Ÿ ä¸‰é¢ï¼š 1.ä»‹ç»é‡åˆ°çš„æœ‰æŒ‘æˆ˜çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ 2.æ€ä¹ˆçŸ¥è¯†ç®¡ç†çš„ï¼Ÿ 3.æœªæ¥è§„åˆ’ 4.æƒ³æ‰¾ä¸€ä¸ªä»€ä¹ˆæ ·çš„å·¥ä½œï¼Ÿ","link":"/ç‚¹ä¼—ç§‘æŠ€/"},{"title":"æ»´æ»´é¢è¯•é¢˜","text":"æ»´æ»´é¢è¯•é¢˜ ç¬”è¯•é¢˜ç¬”è¯•é¢˜ æ»´æ»´ä¸€é¢çœ‹äº†ä¸€ä¸‹ç¬”è¯•é¢˜çš„ç­”æ¡ˆï¼Œç¬¬ä¸€é¢˜ C è¯­è¨€å­—ç¬¦ä¸²åè½¬æ‰“å°äº†ä¸€ä¸‹ 1ã€è¯´ä¸€ä¸‹ä½ è§‰å¾—é¡¹ç›®ä¸­é‡åˆ°äº†ä»€ä¹ˆå°è±¡æ·±åˆ»çš„é—®é¢˜ï¼Œä½ æ˜¯æ€ä¹ˆè§£å†³çš„ï¼Ÿ 2ã€å¤§å­¦é‡Œå­¦äº†å“ªäº›è¯¾ï¼Ÿä¿¡æ¯ç®¡ç†ä¸ä¿¡æ¯ç³»ç»Ÿä¸“ä¸šæ˜¯å“ªä¸ªå­¦é™¢çš„ï¼Ÿ 3ã€é¡¹ç›®é‡Œçš„ç½‘ç»œè¯·æ±‚ç”¨åˆ°äº†ç½‘ç»œ5å±‚æ¨¡å‹çš„å“ªäº›ï¼ŒTCP/IP å±äºå“ªä¸€å±‚ï¼ŸHTTP å‘¢ï¼Ÿ 4ã€ä½ è§‰å¾—è‡ªå·±æ˜¯ä»€ä¹ˆçº§åˆ«çš„ï¼Ÿä¼˜åŠ¿å’Œä¸è¶³ä¸»è¦æ˜¯å“ªæ–¹é¢ï¼Ÿ 5ã€GCD å¹³æ—¶é¡¹ç›®é‡Œæ€ä¹ˆç”¨çš„ï¼Ÿæˆ‘æåˆ°äº†å›åˆ°ä¸»çº¿ç¨‹æ“ä½œ UI éœ€è¦ dispatch_get_mainQueue 6ã€ä¸ºä»€ä¹ˆæ“ä½œ UI éœ€è¦åœ¨ä¸»çº¿ç¨‹ï¼Ÿ 7ã€å“ªäº›æ˜¯ä½ ç‹¬ç«‹å¼€å‘çš„é¡¹ç›®ï¼Ÿ 8ã€é—®äº†ä¸€ä¸‹ä¸Šå®¶å…¬å¸çš„æƒ…å†µ 9ã€ä¹‹åæœ‰ä»€ä¹ˆæ‰“ç®—ï¼Ÿ 10ã€ä¸Šå®¶è–ªèµ„å¤šå°‘ï¼Ÿä½ è¿˜æœ‰å•¥æƒ³é—®çš„å—ï¼Ÿ æ»´æ»´äºŒé¢1ã€è‡ªå®šä¹‰å°è£…æ§ä»¶éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆè§„èŒƒï¼Ÿ 2ã€è¯´ä¸€ä¸‹ä½ äº†è§£çš„è®¾è®¡æ¨¡å¼ã€‚ 3ã€æ•°æ®åº“æ€ä¹ˆä¼˜åŒ–ï¼Ÿæˆ‘è¯´æ•°æ®é‡å¤§çš„è¯åŠ ç´¢å¼•æå‡æŸ¥è¯¢æ•ˆç‡ã€‚é—®å…¶ä»–ä¼˜åŒ–å‘¢ï¼Ÿæ¯”å¦‚æ•°æ®åº“å¤§å°æœ‰æ²¡æœ‰åšè¿‡ä¼˜åŒ–ï¼Ÿ 4ã€å†…å­˜ä¼˜åŒ–æ˜¯æ€ä¹ˆåšçš„ï¼Ÿæˆ‘æåˆ°äº†å†…å­˜æ³„æ¼ã€‚ä»€ä¹ˆæƒ…å†µä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ï¼Ÿ 5ã€App å¯åŠ¨æ—¶é—´ä¼˜åŒ–ï¼Ÿ 6ã€è§†å›¾åšè¿‡å“ªäº›ä¼˜åŒ–ï¼Œæˆ‘æäº† TableViewã€‚é‚£å°±ä»¥ TableView è¯´ä¸€ä¸‹ä¼˜åŒ–äº†å“ªäº›æ–¹é¢ï¼Ÿ 7ã€AFNetworking å†…éƒ¨æ˜¯æ€ä¹ˆæ ·çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Ÿ 8ã€ä½ è¿˜æœ‰ä»€ä¹ˆæƒ³é—®æˆ‘çš„ï¼Ÿ","link":"/æ»´æ»´é¢è¯•é¢˜/"},{"title":"æ»´æ»´ç¬”è¯•é¢˜","text":"æ»´æ»´ç¬”è¯•é¢˜ ç¬”è¯•é¢˜0.å§“åï¼Ÿæ—¥æœŸã€‚ 1.Cè¯­è¨€å®ç°å­—ç¬¦ä¸²åè½¬ï¼švoid reverse(char *str, int length) {} 2.å®ç°ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„å»é‡å‡½æ•°ã€‚ 3.æè¿°OCä¸­å¯¹è±¡çš„å®ç°åŸç†ã€‚ 4.ç¼–å†™ä»£ç ï¼Œå®ç° NSObject ä¸­æ·»åŠ ä¸€ä¸ªå±æ€§ p1 5.KVO çš„å®ç°åŸç†å’Œæ³¨æ„äº‹é¡¹ã€‚ 6.ä¸‹é¢çš„ä»£ç æœ‰å“ªäº›é—®é¢˜ï¼Ÿ 123456789101112131415@interface Demo : NSObject@property (nonatomic, assign) BOOL *p1;@property (nonatomic, strong) NSString *p2;@end@implementation Demo@dynamic p1;- (void)setP2:(NSString *)p2;{ self.p1 = YES; self.p2 = p2;}@end 7.JS å’Œ Native çš„é€šè®¯æ–¹å¼ã€‚ 8.ç½‘ç»œ5å±‚æ¨¡å‹æ˜¯å“ª5å±‚ï¼Ÿ 9.æŠŠt1è¡¨ä¸­ name ä¸º mike çš„è®°å½•ä¸­ status å€¼æ”¹ä¸º1 10.å¸¸ç”¨çš„ Linux å‘½ä»¤ã€‚ 11.ç”¨è¿‡çš„åŒ…/åº“ç®¡ç†å·¥å…·ã€‚","link":"/æ»´æ»´ç¬”è¯•é¢˜/"},{"title":"ç”Ÿæ•°ç§‘æŠ€","text":"ç”Ÿæ•°ç§‘æŠ€ ä¸€é¢ï¼šï¼ˆå¤§å‰ç«¯è´Ÿè´£äººï¼‰ 1.ç¦»èŒåŸå› ï¼Œæƒ³æ‰¾ä¸€ä¸ªä»€ä¹ˆæ ·çš„å·¥ä½œã€å›¢é˜Ÿ 2.ä»‹ç»é¡¹ç›® 3.webP å…¼å®¹æ€§ 4.åšè¿‡å“ªäº›æ€§èƒ½ä¼˜åŒ– 5.ç®—æ³•ï¼šä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ— 6.ç”¨å“ªäº› AI å·¥å…·ææ•ˆ äºŒé¢ï¼šï¼ˆiOSï¼‰ 1.Swift å¼ºåˆ¶è§£åŒ…ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ 2.ç±»å’Œç»“æ„ä½“æœ‰ä»€ä¹ˆåŒºåˆ« 3.ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿä½¿ç”¨åœºæ™¯ 4.GCD å’Œ NSOperation åŒºåˆ« 5.è®¾è®¡å°è£…æ”¯æŒå¹¶å‘ä¸‹è½½ä»»åŠ¡ï¼Œä¸‹è½½æ–¹æ³•æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Œä¸‹è½½å®Œæˆæ€ä¹ˆå¤„ç†ï¼Ÿ 6.è¯´ä¸€ä¸‹ Runloopï¼Œæ€ä¹ˆè®© Runloop ç©ºé—²æ—¶åšä»»åŠ¡ï¼Ÿ 7.å“åº”è€…é“¾ 8.UIViewController çš„ç”Ÿå‘½å‘¨æœŸï¼ŒlayoutSubviews ä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼ŸA push B ç”Ÿå‘½å‘¨æœŸï¼›setNeedsLayout å’Œ layoutIfNeededã€layoutSubviews æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 9.iOS èƒ½åŠ è½½ webP å—ï¼Ÿ é¡¹ç›®ï¼š 1.å°è£…çˆ¶ç±»åŠ¨ç”»ä¸äº‹ä»¶åˆ†å‘æ˜¯ä»€ä¹ˆ 2.SSE å®ç°æ‰“å­—æœºæ•ˆæœ ä¸‰é¢ï¼šè´Ÿè´£äºº 1.ä½ ä¼šè´¨ç–‘éœ€æ±‚å—ï¼Ÿ 2.éœ€æ±‚é‡Œæœ‰ä¸€äº›åŠ¨ç”»ï¼Œæ€ä¹ˆè¯„ä¼°æˆæœ¬è·Ÿæ”¶ç›Šï¼Ÿ 3.æ€ä¹ˆå®ç°ç±»ä¼¼æŠ–éŸ³çš„æ•ˆæœï¼Œä¸Šä¸‹æ»‘åŠ¨åˆ‡æ¢è§†é¢‘ã€‚åŸç”Ÿæ’­æ”¾å™¨ã€å¼€æºæ’­æ”¾å™¨ã€ä»˜è´¹æ’­æ”¾å™¨æ€ä¹ˆé€‰å‹ï¼Ÿä¼šå¯¹æ¯”å“ªäº›ï¼Ÿ å››é¢ï¼šHR","link":"/ç”Ÿæ•°ç§‘æŠ€/"},{"title":"çŒ«ç³–è·³åŠ¨","text":"çŒ«ç³–è·³åŠ¨ 1.Swift çš„åº•å±‚åŸç† 2.Swift çš„æ´¾å‘æœºåˆ¶ 3.Struct ä¸­åŒ…å« Class é‡Œçš„ä¸€ä¸ªå±æ€§ï¼Œä¼š copy å—ï¼Ÿ 4.App å¯åŠ¨ä¸ºä»€ä¹ˆéœ€è¦ Rebase&amp;Bind 5.GCD æ€ä¹ˆå–æ¶ˆä»»åŠ¡ 6.Hook å’Œå Hook çš„æ–¹æ³• 7.å¼±ç½‘ç¯å¢ƒä¸‹ä¸Šä¼ å¤§å›¾","link":"/çŒ«ç³–è·³åŠ¨/"},{"title":"ç™»äº‘ç¾ä¸šé¢è¯•é¢˜","text":"ç™»äº‘ç¾ä¸šé¢è¯•é¢˜ 1ã€@porperty ç³»ç»Ÿè‡ªåŠ¨å¸®æˆ‘ä»¬åšäº†ä»€ä¹ˆï¼Ÿå¦‚æœåè¾¹çš„æ‹¬å·é‡Œå•¥éƒ½ä¸å†™ï¼Œç³»ç»Ÿé»˜è®¤çš„æ˜¯å“ªä¸‰ä¸ªï¼Ÿå“ªäº›ç”¨ copy ï¼Ÿä¸ºä»€ä¹ˆ String ç”¨ copy ï¼Ÿä¸ºä»€ä¹ˆ block ç”¨ copy ï¼Ÿ 2ã€å•ä¾‹çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆç”¨çš„ï¼Ÿ 3ã€å°è£…äº†ä»€ä¹ˆè‡ªå®šä¹‰æ§ä»¶ï¼Ÿ 4ã€è¯´ä¸€ä¸‹ MVCã€MVVM 5ã€å¤šçº¿ç¨‹éƒ½æœ‰å“ªäº›ï¼Ÿé¡¹ç›®é‡Œå“ªé‡Œç”¨åˆ°äº† GCD ï¼Ÿ 6ã€è¯´ä¸€ä¸‹ RuntimeKNFather : NSObjectKNSon : KNFatheråœ¨ KNSon ä¸­çš„ init æ–¹æ³•é‡Œæ‰“å° NSLog [self class] [super class]KNSon alloc init ä¹‹åæ‰“å°ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ 7ã€AFN å†…éƒ¨çœ‹è¿‡å—ï¼ŸAFN å°è£…äº†å—ï¼Ÿ 8ã€è¯´ä¸€ä¸‹ SDWebImage ç¼“å­˜æœºåˆ¶ 9ã€Instruments ä½ ä»¬é¡¹ç›®ä»€ä¹ˆå‘¨æœŸç”¨ï¼Ÿç”¨å®ƒçš„å“ªäº›åŠŸèƒ½ï¼Ÿ 10ã€äº¬ä¸œçš„æŸä¸ªé¡µé¢æ˜¯æ€ä¹ˆåšçš„ æ¶‰åŠåˆ° tableView çš„ contentSize å˜åŒ–ã€‚ 11ã€é¡¹ç›®é‡Œè·‘é©¬ç¯æ€ä¹ˆå®ç°çš„ï¼Ÿ 12ã€TouchID æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ 13ã€KeyChain ä¿å­˜å¯†ç ä½ ä»¬æ˜¯å•¥æ—¶å€™ä¿å­˜çš„ï¼Œä¿å­˜çš„å¯†ç åŠ å¯†äº†å—ï¼Ÿ 14ã€JS äº¤äº’æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ 15ã€äººè„¸è¯†åˆ« SDK å°è£…äº†å—ï¼Ÿ 16ã€ä¸ªæ¨æ¶ˆæ¯æœ‰æ²¡æœ‰åšç¼“å­˜ï¼ŸApp åœ¨å‰å°ã€åå°ã€æ€æ­»è¿™ä¸‰ç§çŠ¶æ€ä¸‹æ€ä¹ˆå¤„ç†çš„ï¼Ÿ 17ã€é¡¹ç›®é‡Œä½ è§‰å¾—å“ªé‡Œæœ€æœ‰æ”¶è·ï¼Ÿ","link":"/ç™»äº‘ç¾ä¸šé¢è¯•é¢˜/"},{"title":"ç™¾æ˜“å›¾","text":"ç™¾æ˜“å›¾1.å†…å­˜ç®¡ç†ï¼ŒARCã€MRCï¼Œæœ‰æ²¡æœ‰é‡åˆ°å†…å­˜é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³çš„ï¼Œå†…å­˜æ³„æ¼ 2.äº†è§£çš„iOSä¸­çš„è®¾è®¡æ¨¡å¼ï¼ŒtableViewç”¨äº†ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿäº«å…ƒæ¨¡å¼ 3.MVVMæ€ä¹ˆå®ç°åŒå‘ç»‘å®š 4.å¤šçº¿ç¨‹ï¼Œå¤šä¸ªè¯·æ±‚å¹¶å‘ï¼Œè¯·æ±‚å›æ¥åå¤„ç† 5.åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼Œæ€ä¹ˆä¼˜åŒ–çš„å¤šæ¬¡åˆ·æ–° 6.ç›´æ’­èŠå¤©å®¤å¤§é‡æ¶ˆæ¯ä¼˜åŒ–ï¼Œé€ç¤¼ç‰©æ€ä¹ˆä¿è¯è§¦è¾¾ 7.500äººç¾¤é‡ŒæŠ¢çº¢åŒ…çš„åœºæ™¯å¤„ç† 8.swiftç±»å’Œç»“æ„ä½“çš„åŒºåˆ« 9.å‡å°‘CPUå ç”¨çš„ä¼˜åŒ– å‚è€ƒç­”æ¡ˆ 1.å†…å­˜ç®¡ç†ï¼ŒARCã€MRCï¼Œæœ‰æ²¡æœ‰é‡åˆ°å†…å­˜é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³çš„ï¼Œå†…å­˜æ³„æ¼ Tagged Pointer NSNumberã€NSDateã€NSStringç­‰å°å¯¹è±¡çš„å­˜å‚¨ï¼Œæ•°æ®ç›´æ¥å­˜å‚¨åœ¨æŒ‡é’ˆä¸­ å¼•ç”¨è®¡æ•°æ¥ç®¡ç†OCå¯¹è±¡çš„å†…å­˜ å¼•ç”¨è®¡æ•°å­˜å‚¨åœ¨ nonpointer ä¼˜åŒ–è¿‡çš„isaæŒ‡é’ˆä¸­ï¼Œä¹Ÿå¯èƒ½å­˜å‚¨åœ¨SideTableç±»ä¸­ï¼Œ SideTable { â€‹ spinlock_t slock; â€‹ RefcountMap refcnts; â€‹ weak_table_t weak_table; }; refcnts æ˜¯ä¸€ä¸ªå­˜æ”¾ç€å¯¹è±¡å¼•ç”¨è®¡æ•°çš„æ•£åˆ—è¡¨ 2.äº†è§£çš„iOSä¸­çš„è®¾è®¡æ¨¡å¼ï¼ŒtableViewç”¨äº†ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿ åœ¨iOSå¼€å‘ä¸­ï¼ŒUITableView ä¸»è¦ä½¿ç”¨äº†ä¸€ç³»åˆ—è®¾è®¡æ¨¡å¼æ¥å®ç°å…¶åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹å‡ ç§è®¾è®¡æ¨¡å¼ï¼š 1. å§”æ‰˜æ¨¡å¼ï¼ˆDelegateï¼‰æè¿°ï¼šé€šè¿‡å°†ä¸€ä¸ªå¯¹è±¡çš„æŸäº›èŒè´£å§”æ‰˜ç»™å¦ä¸€ä¸ªå¯¹è±¡æ¥å®ç°å¯¹è±¡é—´çš„æ¾è€¦åˆã€‚ åœ¨ UITableView ä¸­çš„åº”ç”¨ï¼š UITableView ä½¿ç”¨å§”æ‰˜æ¨¡å¼æ¥å¤„ç†ç”¨æˆ·äº¤äº’å’Œé…ç½®ç‰¹å®šè¡Œä¸ºã€‚UITableViewDelegate åè®®å®šä¹‰äº†ä¸€äº›æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ç”±å§”æ‰˜å¯¹è±¡ï¼ˆé€šå¸¸æ˜¯è§†å›¾æ§åˆ¶å™¨ï¼‰å®ç°ï¼Œä»¥å“åº”ç”¨æˆ·æ“ä½œï¼ˆå¦‚è¡Œé€‰æ‹©ã€è¡Œé«˜è®¾ç½®ç­‰ï¼‰ã€‚ 2. æ•°æ®æºæ¨¡å¼ï¼ˆData Sourceï¼‰æè¿°ï¼šé€šè¿‡å°†æ•°æ®è®¿é—®å’Œæ•°æ®ç®¡ç†çš„èŒè´£å§”æ‰˜ç»™å¦ä¸€ä¸ªå¯¹è±¡æ¥å®ç°æ•°æ®çš„è§£è€¦ã€‚ åœ¨ UITableView ä¸­çš„åº”ç”¨ï¼š UITableView ä½¿ç”¨æ•°æ®æºæ¨¡å¼æ¥æä¾›æ•°æ®ã€‚UITableViewDataSource åè®®å®šä¹‰äº†ä¸€äº›æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ç”±æ•°æ®æºå¯¹è±¡å®ç°ï¼Œä»¥æä¾›è¡¨æ ¼è§†å›¾æ‰€éœ€çš„æ•°æ®ï¼ˆå¦‚å•å…ƒæ ¼å†…å®¹ã€è¡Œæ•°ç­‰ï¼‰ã€‚ 3. å¤ç”¨æ¨¡å¼ï¼ˆReuseï¼‰æè¿°ï¼šé€šè¿‡å¯¹è±¡çš„å¤ç”¨æ¥æå‡æ€§èƒ½å’Œå‡å°‘å†…å­˜æ¶ˆè€—ã€‚ åœ¨ UITableView ä¸­çš„åº”ç”¨ï¼š UITableView ä½¿ç”¨å•å…ƒæ ¼å¤ç”¨æœºåˆ¶æ¥æé«˜æ€§èƒ½ã€‚é€šè¿‡ dequeueReusableCellWithIdentifier: æ–¹æ³•ï¼Œè¡¨æ ¼è§†å›¾å¯ä»¥å¤ç”¨å·²ç»åˆ›å»ºçš„å•å…ƒæ ¼ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½åˆ›å»ºæ–°çš„å•å…ƒæ ¼ã€‚ 4. MVC æ¨¡å¼ï¼ˆModel-View-Controllerï¼‰æè¿°ï¼šä¸€ç§ç”¨äºç»„ç»‡ä»£ç çš„æ¶æ„æ¨¡å¼ï¼Œå°†åº”ç”¨çš„é€»è¾‘å±‚ã€æ•°æ®å±‚å’Œè§†å›¾å±‚åˆ†ç¦»ã€‚ åœ¨ UITableView ä¸­çš„åº”ç”¨ï¼š UITableView æœ¬èº«æ˜¯è§†å›¾å±‚çš„ä¸€éƒ¨åˆ†ï¼Œæ•°æ®æºå’Œå§”æ‰˜å¯¹è±¡ï¼ˆé€šå¸¸æ˜¯è§†å›¾æ§åˆ¶å™¨ï¼‰è´Ÿè´£å¤„ç†æ•°æ®å±‚å’Œé€»è¾‘å±‚ã€‚è¿™ç§åˆ†ç¦»ä½¿å¾—ä»£ç æ›´æ¸…æ™°ã€å¯ç»´æŠ¤æ€§æ›´é«˜ã€‚ 3.MVVMæ€ä¹ˆå®ç°åŒå‘ç»‘å®š 4.å¤šçº¿ç¨‹ï¼Œå¤šä¸ªè¯·æ±‚å¹¶å‘ï¼Œè¯·æ±‚å›æ¥åå¤„ç† 5.åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼Œæ€ä¹ˆä¼˜åŒ–çš„å¤šæ¬¡åˆ·æ–° 6.ç›´æ’­èŠå¤©å®¤å¤§é‡æ¶ˆæ¯ä¼˜åŒ–ï¼Œé€ç¤¼ç‰©æ€ä¹ˆä¿è¯è§¦è¾¾ 7.500äººç¾¤é‡ŒæŠ¢çº¢åŒ…çš„åœºæ™¯å¤„ç† 8.swiftç±»å’Œç»“æ„ä½“çš„åŒºåˆ« 9.å‡å°‘CPUå ç”¨çš„ä¼˜åŒ–","link":"/ç™¾æ˜“å›¾/"},{"title":"ç¥å·ç§Ÿè½¦","text":"ç¥å·ç§Ÿè½¦ ä¸€é¢ï¼š é¸¿è’™: 1.ç»„ä»¶ç”¨çš„æ˜¯V1è¿˜æ˜¯V2ï¼Œä¼ å€¼ï¼›V1ç»„ä»¶æœ‰æ²¡æœ‰é‡åˆ°è¿‡å±‚çº§è¾ƒæ·±æ—¶çµæ•æ€§ä¸é«˜çš„é—®é¢˜ï¼Ÿ 2.ç”¨äº†å“ªäº›æ¡†æ¶ï¼Ÿ 3.æœ‰å“ªäº›å¼€å‘è§„èŒƒï¼Ÿ 4.åˆ—è¡¨æ¸²æŸ“ç”¨çš„ä»€ä¹ˆï¼Ÿç”¨è¿‡ Lazy for each å—ï¼Ÿ 5.Hub åŒ…å’Œ HSP åŒºåˆ« 6.åŸ‹ç‚¹æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ iOSï¼š 1.é¡¹ç›® SDK ä½“ç§¯ä¼˜åŒ–ï¼›æ€ä¹ˆé¿å…è¯¯åˆ é™¤ï¼Ÿæ€ä¹ˆåè°ƒ QA èµ„æºï¼Ÿæ€ä¹ˆè·Ÿä¸Šç‰ˆæœ¬ï¼Œæ€ä¹ˆå¤„ç†å¢é‡é—®é¢˜ï¼Ÿ 2.ç¦»å±æ¸²æŸ“ 3.å¤šçº¿ç¨‹ 4.ç»„ä»¶åŒ–ï¼Œç»„ä»¶åˆ’åˆ† äºŒé¢ï¼š 1.ä¸šåŠ¡æµç¨‹ 2.åšè¿‡å“ªäº›æå‡ç¨³å®šæ€§çš„æŠ€æœ¯é¡¹ç›® 3.ç”¨çš„ä»€ä¹ˆ AIï¼ŒAI ç”Ÿæˆä»£ç çš„å æ¯” ä¸‰é¢ï¼š HR 1.ç¦»èŒåŸå› ï¼Œè£å‘˜æ¯”ä¾‹ 2.æœ€æœ‰æˆå°±æ„Ÿçš„é¡¹ç›®ï¼›é¡¹ç›®æœ‰å“ªäº›æ”¶ç›Šï¼Ÿå¦‚æœç»§ç»­åšè¿™ä¸ªé¡¹ç›®ï¼Œè¿˜æœ‰å“ªäº›èƒ½æ”¹è¿›çš„åœ°æ–¹ 3.ä½ ä¹‹å‰çš„é¢†å¯¼å¦‚ä½•è¯„ä»·ä½ ï¼Œç”¨ä¸‰ä¸ªå…³é”®è¯ï¼Œæœ‰å“ªäº›ç¼ºç‚¹ï¼Ÿ 4.ä½ ä¼šå› ä¸ºä»€ä¹ˆåŸå› ä¸»åŠ¨ç¦»å¼€ä¸€å®¶å…¬å¸ 5.ä½ ä¼šå¦‚ä½•é€‰æ‹© offer","link":"/ç¥å·ç§Ÿè½¦/"},{"title":"ç™¾åº¦é¢è¯•é¢˜","text":"ç™¾åº¦é¢è¯•é¢˜ ç™¾åº¦ä¸€é¢1.APP ä¼˜åŒ–2.åˆ—è¡¨å¿«é€Ÿæ»‘åŠ¨ä¸éœ€è¦åŠ è½½çš„å›¾ç‰‡æ€ä¹ˆå¤„ç†3.cell åŠ è½½å¤§å›¾4.å¼‚æ­¥ç»˜åˆ¶5.äº¤æ¢æ–¹æ³•6.åœ†è§’çš„å¤„ç†7.ç›‘å¬å­çº¿ç¨‹å¤„ç† UI äº‹ä»¶ ç™¾åº¦äºŒé¢1.é¡¹ç›®ç»éªŒä»‹ç»ï¼ˆé—® RTMP åè®®ï¼ŒUDP ä¸»åŠ¨ä¸¢åŒ…ç­–ç•¥ï¼‰2.é¡¹ç›®ä¸­é‡åˆ°ä»€ä¹ˆéš¾ç‚¹3.ä¸ºä»€ä¹ˆè¦åˆ¶ä½œåŠ¨æ€åº“ ç³»ç»ŸåŠ¨æ€åº“ä¼šå½±å“å¯åŠ¨æ—¶é—´å—4.HTTPS ( CA è¯ä¹¦éªŒè¯æµç¨‹)5.Category åŸç†6.å¼‚æ­¥å‘é€é€šçŸ¥ (NSNotificationQueue)7.ç®—æ³• å‚è€ƒç­”æ¡ˆç™¾åº¦ä¸€é¢1.APP ä¼˜åŒ– iOS ä¿æŒç•Œé¢æµç•…çš„æŠ€å·§ å¯åŠ¨ä¼˜åŒ– å®‰è£…åŒ…å¤§å°ä¼˜åŒ–ï¼šæ­£ç»åˆ†æiOSåŒ…å¤§å°ä¼˜åŒ– 2.åˆ—è¡¨å¿«é€Ÿæ»‘åŠ¨ä¸éœ€è¦åŠ è½½çš„å›¾ç‰‡æ€ä¹ˆå¤„ç†ç›®å‰æœ‰äº›ç¬¬ä¸‰æ–¹å¾®åšå®¢æˆ·ç«¯ï¼ˆæ¯”å¦‚ VVeboã€å¢¨å®¢ç­‰ï¼‰ï¼Œä½¿ç”¨äº†ä¸€ç§æ–¹å¼æ¥é¿å…é«˜é€Ÿæ»‘åŠ¨æ—¶ Cell çš„ç»˜åˆ¶è¿‡ç¨‹ï¼Œç›¸å…³å®ç°è§è¿™ä¸ªé¡¹ç›®ï¼šVVeboTableViewDemoã€‚å®ƒçš„åŸç†æ˜¯ï¼Œå½“æ»‘åŠ¨æ—¶ï¼Œæ¾å¼€æ‰‹æŒ‡åï¼Œç«‹åˆ»è®¡ç®—å‡ºæ»‘åŠ¨åœæ­¢æ—¶ Cell çš„ä½ç½®ï¼Œå¹¶é¢„å…ˆç»˜åˆ¶é‚£ä¸ªä½ç½®é™„è¿‘çš„å‡ ä¸ª Cellï¼Œè€Œå¿½ç•¥å½“å‰æ»‘åŠ¨ä¸­çš„ Cellã€‚è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒæœ‰æŠ€å·§æ€§ï¼Œå¹¶ä¸”å¯¹äºæ»‘åŠ¨æ€§èƒ½æ¥è¯´æå‡ä¹Ÿå¾ˆå¤§ï¼Œå”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯å¿«é€Ÿæ»‘åŠ¨ä¸­ä¼šå‡ºç°å¤§é‡ç©ºç™½å†…å®¹ã€‚å¦‚æœä½ ä¸æƒ³å®ç°æ¯”è¾ƒéº»çƒ¦çš„å¼‚æ­¥ç»˜åˆ¶ä½†åˆæƒ³ä¿è¯æ»‘åŠ¨çš„æµç•…æ€§ï¼Œè¿™ä¸ªæŠ€å·§æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ 3.cell åŠ è½½å¤§å›¾ åˆ†ç‰‡æ¯”ä¾‹è£å‰ªæ–¹å¼ã€‚å‚è€ƒè‹¹æœç»™å‡ºçš„ demo,åˆ©ç”¨ CGImageCreateWithImageInRect æˆªå–åŸå›¾å¯¹åº”ä½ç½®çš„å†…å®¹,å†é€šè¿‡ CGContextDrawImage æ¸²æŸ“åˆ°æŒ‡å®šä½ç½®; åˆ©ç”¨ CATiledLayer å±‚çº§çš„API,è‡ªåŠ¨è¿›è¡Œç»˜åˆ¶; å‚è€ƒé“¾æ¥ï¼šiOS å¤§å›¾æ˜¾ç¤ºè§£å†³åŠæ³• 4.å¼‚æ­¥ç»˜åˆ¶ 5.äº¤æ¢æ–¹æ³•6.åœ†è§’çš„å¤„ç†ä¼˜åŒ–æ–¹å¼1 ï¼šä½¿ç”¨è´å¡å°”æ›²çº¿ UIBezierPath å’Œ Core Graphics æ¡†æ¶ç”»å‡ºä¸€ä¸ªåœ†è§’ 1234567891011UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(100,100,100,100)];imageView.image = [UIImage imageNamed:@\"myImg\"];//å¼€å§‹å¯¹imageViewè¿›è¡Œç”»å›¾UIGraphicsBeginImageContextWithOptions(imageView.bounds.size,NO,1.0);//ä½¿ç”¨è´å¡å°”æ›²çº¿ç”»å‡ºä¸€ä¸ªåœ†å½¢å›¾[[UIBezierPath bezierPathWithRoundedRect:imageView.boundscornerRadius:imageView.frame.size.width]addClip];[imageView drawRect:imageView.bounds];imageView.image=UIGraphicsGetImageFromCurrentImageContext();//ç»“æŸç”»å›¾UIGraphicsEndImageContext();[self.view addSubview:imageView]; å‚è€ƒé“¾æ¥ï¼šiOS åœ†è§’ä¼˜åŒ–å®ç°ä»£ç  7.ç›‘å¬å­çº¿ç¨‹å¤„ç† UI äº‹ä»¶[CALayer display] ç™¾åº¦äºŒé¢1.é¡¹ç›®ç»éªŒä»‹ç»ï¼ˆé—® RTMP åè®®ï¼ŒUDP ä¸»åŠ¨ä¸¢åŒ…ç­–ç•¥ï¼‰2.é¡¹ç›®ä¸­é‡åˆ°ä»€ä¹ˆéš¾ç‚¹3.ä¸ºä»€ä¹ˆè¦åˆ¶ä½œåŠ¨æ€åº“ ç³»ç»ŸåŠ¨æ€åº“ä¼šå½±å“å¯åŠ¨æ—¶é—´å— åº“ç±»å‹ ä¼˜ç‚¹ ç¼ºç‚¹ é™æ€åº“ 1. ç›®æ ‡ç¨‹åºæ²¡æœ‰å¤–éƒ¨ä¾èµ–ï¼Œç›´æ¥å°±å¯ä»¥è¿è¡Œã€‚2. æ•ˆç‡æ•™åŠ¨æ€åº“é«˜ã€‚ 1. ä¼šä½¿ç”¨ç›®æ ‡ç¨‹åºçš„ä½“ç§¯å¢å¤§ã€‚ åŠ¨æ€åº“ 1. ä¸éœ€è¦æ‹·è´åˆ°ç›®æ ‡ç¨‹åºä¸­ï¼Œä¸ä¼šå½±å“ç›®æ ‡ç¨‹åºçš„ä½“ç§¯ã€‚ 2. åŒä¸€ä»½åº“å¯ä»¥è¢«å¤šä¸ªç¨‹åºä½¿ç”¨ï¼ˆå› ä¸ºè¿™ä¸ªåŸå› ï¼ŒåŠ¨æ€åº“ä¹Ÿè¢«ç§°ä½œå…±äº«åº“ï¼‰ã€‚ 3. ç¼–è¯‘æ—¶æ‰è½½å…¥çš„ç‰¹æ€§ï¼Œä¹Ÿå¯ä»¥è®©æˆ‘ä»¬éšæ—¶å¯¹åº“è¿›è¡Œæ›¿æ¢ï¼Œè€Œä¸éœ€è¦é‡æ–°ç¼–è¯‘ä»£ç ã€‚å®ç°åŠ¨æ€æ›´æ–° 1. åŠ¨æ€è½½å…¥ä¼šå¸¦æ¥ä¸€éƒ¨åˆ†æ€§èƒ½æŸå¤±(å¯ä»¥å¿½ç•¥ä¸è®¡ï¼‰ 2. åŠ¨æ€åº“ä¹Ÿä¼šä½¿å¾—ç¨‹åºä¾èµ–äºå¤–éƒ¨ç¯å¢ƒã€‚å¦‚æœç¯å¢ƒç¼ºå°‘åŠ¨æ€åº“æˆ–è€…åº“çš„ç‰ˆæœ¬ä¸æ­£ç¡®ï¼Œå°±ä¼šå¯¼è‡´ç¨‹åºæ— æ³•è¿è¡Œï¼ˆLinux lib not found é”™è¯¯ï¼‰ã€‚ å‚è€ƒé“¾æ¥ï¼šiOSåŠ¨æ€åº“ã€é™æ€åº“åŠä½¿ç”¨åœºæ™¯ã€æ–¹å¼ 4.HTTPS (CA è¯ä¹¦éªŒè¯æµç¨‹)æ•°å­—è¯ä¹¦è®¤è¯æœºæ„çš„ä¸šåŠ¡æµç¨‹ æœåŠ¡å™¨çš„è¿è¥äººå‘˜å‘ç¬¬ä¸‰æ–¹æœºæ„ CA æäº¤å…¬é’¥ã€ç»„ç»‡ä¿¡æ¯ã€ä¸ªäººä¿¡æ¯(åŸŸå)ç­‰ä¿¡æ¯å¹¶ç”³è¯·è®¤è¯; CA é€šè¿‡çº¿ä¸Šã€çº¿ä¸‹ç­‰å¤šç§æ‰‹æ®µéªŒè¯ç”³è¯·è€…æä¾›ä¿¡æ¯çš„çœŸå®æ€§ï¼Œå¦‚ç»„ç»‡æ˜¯å¦å­˜åœ¨ã€ä¼ä¸šæ˜¯å¦åˆæ³•ï¼Œæ˜¯å¦æ‹¥æœ‰åŸŸåçš„æ‰€æœ‰æƒç­‰; å¦‚ä¿¡æ¯å®¡æ ¸é€šè¿‡ï¼ŒCA ä¼šå‘ç”³è¯·è€…ç­¾å‘è®¤è¯æ–‡ä»¶-è¯ä¹¦ã€‚è¯ä¹¦åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼šç”³è¯·è€…å…¬é’¥ã€ç”³è¯·è€…çš„ç»„ç»‡ä¿¡æ¯å’Œä¸ªäººä¿¡æ¯ã€ç­¾å‘æœºæ„ CAçš„ä¿¡æ¯ã€æœ‰æ•ˆæ—¶é—´ã€è¯ä¹¦åºåˆ—å·ç­‰ä¿¡æ¯çš„æ˜æ–‡ï¼ŒåŒæ—¶åŒ…å«ä¸€ä¸ªç­¾åã€‚ å…¶ä¸­ç­¾åçš„äº§ç”Ÿç®—æ³•ï¼šé¦–å…ˆï¼Œä½¿ç”¨æ•£åˆ—å‡½æ•°è®¡ç®—å…¬å¼€çš„æ˜æ–‡ä¿¡æ¯çš„ä¿¡æ¯æ‘˜è¦ï¼Œç„¶åï¼Œé‡‡ç”¨ CA çš„ç§é’¥å¯¹ä¿¡æ¯æ‘˜è¦è¿›è¡ŒåŠ å¯†ï¼Œå¯†æ–‡å³ç­¾å; ã€æ•°å­—ç­¾åç”Ÿæˆçš„è¿‡ç¨‹ã€‘ å®¢æˆ·ç«¯ Client å‘æœåŠ¡å™¨ Server å‘å‡ºè¯·æ±‚æ—¶ï¼ŒServer è¿”å›è¯ä¹¦æ–‡ä»¶; å®¢æˆ·ç«¯ Client è¯»å–è¯ä¹¦ä¸­çš„ç›¸å…³çš„æ˜æ–‡ä¿¡æ¯ï¼Œé‡‡ç”¨ç›¸åŒçš„æ•£åˆ—å‡½æ•°è®¡ç®—å¾—åˆ°ä¿¡æ¯æ‘˜è¦ï¼Œç„¶åï¼Œåˆ©ç”¨å¯¹åº” CA çš„å…¬é’¥è§£å¯†ç­¾åæ•°æ®ï¼Œå¯¹æ¯”è¯ä¹¦çš„ä¿¡æ¯æ‘˜è¦ï¼Œå¦‚æœä¸€è‡´ï¼Œåˆ™å¯ä»¥ç¡®è®¤è¯ä¹¦çš„åˆæ³•æ€§ï¼Œå³æœåŠ¡å™¨çš„å…¬å¼€å¯†é’¥æ˜¯å€¼å¾—ä¿¡èµ–çš„ã€‚ã€æ ¡éªŒæ•°å­—ç­¾åçš„è¿‡ç¨‹ã€‘ å®¢æˆ·ç«¯è¿˜ä¼šéªŒè¯è¯ä¹¦ç›¸å…³çš„åŸŸåä¿¡æ¯ã€æœ‰æ•ˆæ—¶é—´ç­‰ä¿¡æ¯; å®¢æˆ·ç«¯ä¼šå†…ç½®ä¿¡ä»» CA çš„è¯ä¹¦ä¿¡æ¯(åŒ…å«å…¬é’¥)ï¼Œå¦‚æœ CA ä¸è¢«ä¿¡ä»»ï¼Œåˆ™æ‰¾ä¸åˆ°å¯¹åº” CA çš„è¯ä¹¦ï¼Œè¯ä¹¦ä¹Ÿä¼šè¢«åˆ¤å®šéæ³•ã€‚ å‚è€ƒé“¾æ¥ï¼šç»å¾—ä½æ‹·é—®çš„HTTPSåŸç†è§£æ 5.Category åŸç†6.å¼‚æ­¥å‘é€é€šçŸ¥ (NSNotificationQueue)å‚è€ƒé“¾æ¥ï¼šiOSä¸­çš„NSNotification 7.ç®—æ³•","link":"/ç™¾åº¦é¢è¯•é¢˜/"},{"title":"çº¢æ¾","text":"çº¢æ¾ ä¸€é¢ï¼š 1.ç»„ä»¶åŒ–ï¼ŒåŒºåˆ«ï¼Œä¼˜ç¼ºç‚¹ 2.SDK ä½“ç§¯ä¼˜åŒ– 3.IM æ˜¯ä½¿ç”¨è¿˜æ˜¯å®ç° 4.MVCSï¼ŒSectionProvider 5.RN çš„åŸç†ï¼Œå®ç°è¿‡ RN å— 6.åœ°å›¾ 7.å†…å­˜ç®¡ç†ï¼Œæ€§èƒ½ä¼˜åŒ–ï¼Œå¡é¡¿ 8.MVP å’Œ MVVM çš„åŒºåˆ« 9.Runtimeã€Runloop çš„åŸç†å’Œåº”ç”¨ 10.é¸¿è’™çš„äº†è§£ 11.WebView çš„äº†è§£ 12.HTTP2 å’Œ HTTP3 äº†è§£å—ï¼Ÿ äºŒé¢ï¼š 1.SDK ä½“ç§¯ä¼˜åŒ–ä¸æ„å»ºææ•ˆ 2.SectionProvider æ‹†åˆ† TableView çš„èƒŒæ™¯ 3.æ€ä¹ˆæ‰“å‡º SDK åŒ… .xcframeworkï¼Œæ‰“åŒ…é…ç½®éƒ½æœ‰å“ªäº› å¤šä¸ªç»„ä»¶ä¾èµ–åŒä¸€ä¸ªç»„ä»¶çš„ä¸åŒç‰ˆæœ¬ï¼Œä¸ºä»€ä¹ˆä¼šæŠ¥é”™ 5.ç»„ä»¶åŒ–ï¼Œä½ è§‰å¾—å¥½çš„ç»„ä»¶åŒ–åº”è¯¥æ˜¯å“ªç§ï¼Œå£³å·¥ç¨‹è¦æä¾›å“ªäº›ï¼Œåˆ†å±‚ 6.podfile å’Œ podspec åŒºåˆ« 7.å¯åŠ¨ä¼˜åŒ–ï¼Œåˆå¹¶ç±»å’Œåˆ†ç±»æ•°é‡ 8.é¡µé¢å¡é¡¿éƒ½æœ‰å“ªäº›æ£€æµ‹æ‰‹æ®µï¼Œå¯èƒ½æœ‰å“ªäº›åŸå›  9.åšè¿‡å“ªäº›å·¥å…·ï¼Œæ’æŸ¥é—®é¢˜ 10.åŸ‹ç‚¹æ€ä¹ˆç¡®ä¿æ•°æ®ä¸é—æ¼ï¼Œåº”è¯¥é€‰æ‹©åœ¨ä»€ä¹ˆæ—¶æœºä¸ŠæŠ¥ï¼Ÿ 11.æ€ä¹ˆä¼˜åŒ–å¼±ç½‘ç¯å¢ƒä½“éªŒï¼ŒUDP 12.åœ¨åˆ«äººçœ¼é‡Œä½ æ˜¯ä¸ªä»€ä¹ˆæ ·çš„äººï¼Ÿä»£ç  CR ä½“ç°ç»†å¿ƒçš„åœ°æ–¹ 13.ç¦»èŒåŸå› ï¼Œæƒ³æ‰¾ä¸€ä¸ªä»€ä¹ˆæ ·çš„å·¥ä½œ ä¸‰é¢ï¼š ä¸¤ä¸ª HR 1.ç¦»èŒåŸå› ï¼Œæœ‰æ²¡æœ‰åæ€ 2.æœ‰æ²¡æœ‰æ™‹å‡ï¼Œæ²¡æ™‹å‡åŸå›  3.èƒ½ä¸èƒ½åŠ ç­","link":"/çº¢æ¾/"},{"title":"ç½‘æ˜“","text":"ç½‘æ˜“ ä¸€é¢ï¼š 1.UIButton çš„çˆ¶ç±»ä¾æ¬¡æ˜¯ä»€ä¹ˆï¼Ÿå„è‡ªçš„ä½œç”¨ï¼Ÿé™¤äº† NSObject è¿˜æœ‰åˆ«çš„åŸºç±»å—ï¼ŸSwift é‡Œæœ‰åŸºç±»å—ï¼ŸSwift é‡Œçš„æšä¸¾å’Œ OC çš„æšä¸¾æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 2.ä¸‹é¢ä»£ç çš„æ‰“å°ç»“æœæ˜¯ï¼š 12345678910111213141516171819202122232425@interface Animal : NSObject@end@implementation Animal@end@interface Cat : Animal@end@implementation Cat- (instancetype)init { self = [super init]; if (self) { NSLog(@\"%@\", NSStringFromClass([self class])); NSLog(@\"%@\", NSStringFromClass([super class])); } return self;}@endint main() { Cat *c = [[Cat alloc] init]; return 0;} ä¸ºä»€ä¹ˆæ‰“å°ç»“æœæ˜¯ Cat 3.ä¸‹é¢ä»£ç çš„è¾“å‡ºç»“æœæ˜¯ï¼š 123int a[5] = {1, 2, 3, 4, 5};int *ptr = (int *)(&amp;a + 1);printf(\"%d, %d\", *(a+1), *(ptr - 1)); 4.ä¸‹é¢ä»£ç è¿è¡Œçš„ç»“æœæ˜¯ 12345678- (void)viewDidLoad { [super viewDidLoad]; NSLog(@\"1\") dispatch_sync(dispatch_get_main_queue(), ^{ NSLog(@\"2\"); }); NSLog(@\"3\"); } å¦‚æœæŠŠ sync æ¢æˆ asyncï¼Œæ‰“å°ç»“æœæœ‰ä»€ä¹ˆä¸åŒï¼Œå¦‚æœæ‰§è¡Œéå¸¸å¤šçš„æ¬¡æ•°ï¼Œä¼šå‡ºç°1,2,3å—ï¼Ÿ 5.ä¸‹é¢ä»£ç çš„æ‰§è¡Œç»“æœæ˜¯ï¼Ÿ 123456789NSMutableString *a = [NSMutableString string];NSMutableString *b = [a copy];[b stringByAppendingString:@\"test\"];NSLog(@\"%p\", &amp;a);NSLog(@\"%p\", &amp;b); aå’Œbçš„åœ°å€ä¸€æ ·å—ï¼Ÿ bä¼šå´©æºƒå—ï¼Ÿ 6.å“ªä¸€ä¸ªä¼šå´©æºƒ A. B.å­—å…¸æ’å…¥nil C.å¯¹nilå‘æ¶ˆæ¯ D.å¯¹énilå‘æ¶ˆæ¯ï¼Œæ²¡æœ‰è¯¥æ–¹æ³• 7.å“åº”è€…é“¾ï¼ŒæŸ¥æ‰¾è§†å›¾å’Œå“åº”è€…é“¾åŒæ—¶è¿›è¡Œå—ï¼Ÿ 8.å£è¿°ç®—æ³•ï¼šåˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯ æœ‰ä¸€ä¸ª 500G çš„å¤§æ–‡ä»¶ï¼Œå†…å­˜åªèƒ½ä½¿ç”¨ 20Mï¼Œè¦æ‰¾åˆ° Top10ï¼Œæ€ä¹ˆå¤„ç†ï¼Ÿ 9.Runtime å’Œ Runloop çš„åº”ç”¨ï¼Œæ¶ˆæ¯æœºåˆ¶ï¼Œå¦‚æœä¸€ä¸ªç±»æ–¹æ³•æ‰¾ä¸åˆ°ï¼Œæ‰¾åˆ°æœ€åæœ‰ä¸ªåŒåçš„å®ä¾‹æ–¹æ³•ï¼Œä¼šè°ƒç”¨å—ï¼Ÿ 10.KVC çš„åŸç†ï¼ŒKVO çš„åŸç† 11.é¡µé¢æµç•…åº¦ä¼˜åŒ– é¡¹ç›®ï¼š æ„å»ºææ•ˆåšäº†å“ªäº› äº†è§£ Socket å—ï¼Ÿ ç®—æ³•ï¼š 1.çˆ¬æ¥¼æ¢¯ 2.ä¸¤æ•°ä¹‹å’ŒäºŒ ä¸€ä¸ªéé™åºæ•°ç»„ï¼Œå’Œ targetï¼Œä¸ä½¿ç”¨é¢å¤–ç©ºé—´ï¼Œåªéå†ä¸€æ¬¡ ä»‹ç»é¡¹ç›®é‡Œæœ‰æŒ‘æˆ˜çš„ äºŒé¢ï¼š 1.iOS æ–¹å‘äº†è§£çš„æ¯”è¾ƒæ·±å…¥çš„ä¸œè¥¿ 2.è¿™æ®µä»£ç æ‰§è¡Œåï¼Œæ‰“å°é¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ 12345678910111213141516171819let group = DispatchGroup()group.notify(queue: .global()) { print(\"1\")}group.enter()group.notify(queue: .global()) { print(\"2\")}group.leave()group.enter()group.notify(queue: .global()) { print(\"3\")} gcd. group notify å¦‚æœè®©ä½ å®ç°ä¸€ä¸ªç±»ä¼¼ gcd group enter leave å¦‚ä½•å®ç° 3.tableView cell å¤ç”¨ï¼Œä½ æ€ä¹ˆå®ç°ä¸€ä¸ªç±»ä¼¼çš„å¤ç”¨æ±  æœ‰ identifer å’Œ Cell ç±»å‹ 4.ä»Šå¹´ WWDC æœ‰å“ªäº›æ–°ä¸œè¥¿ï¼Ÿ 5.åšè¿‡ iPad å’Œ Mac çš„é€‚é…å—ï¼Ÿè‡ªåŠ¨å¸ƒå±€ï¼Œå›¾ç‰‡æŒ‰16:9æ€ä¹ˆå†™çº¦æŸï¼Œå·¦ä¾§ label è¶…å‡ºå±å¹•å®½åº¦ä¸€åŠæ—¶ï¼ŒæŠŠå³ä¾§ label æ”¾åœ¨ä¸‹ä¸€è¡Œã€‚ä¸ºä»€ä¹ˆè¦æŠŠè§†å›¾æ·»åŠ åˆ° cell.contentView ä¸Šï¼Œè€Œä¸æ˜¯ç›´æ¥æ·»åŠ åˆ° cell ä¸Šï¼Ÿ 6.å†™è¿‡ python å—ï¼Ÿ 7.åšè¿‡ IAP å’Œå›½é™…åŒ–å—ï¼Ÿ 8.åšè¿‡ CI å—ï¼Ÿæµæ°´çº¿é™æ€åˆ†æé”™è¯¯æ˜¯ä½ åšçš„å—ï¼Ÿ 9.å¤§å­¦å­¦äº†å“ªäº›è¯¾ç¨‹ï¼Œå­¦è¿‡è®¾è®¡æ¨¡å¼å—ï¼Ÿå­¦è¿‡ Java å—ï¼Ÿ 10.ç”¨ AI åšè¿‡å“ªäº›å·¥å…·","link":"/ç½‘æ˜“/"},{"title":"ç¾å›¢ä¼˜é€‰é¢è¯•é¢˜2åŠç­”æ¡ˆ","text":"ç¾å›¢ä¼˜é€‰é¢è¯•é¢˜2 ä»‹ç»å€¼å¾—è¯´çš„é¡¹ç›® 1.æ‰“å°ç»“æœ1234567- (void)someMethod { int i = 10; dispatch_async(dispatch_get_main_queue(), ^{ NSLog(@\"%d\",i); }); i = 20;} 10 1234567- (void)someMethod { static int i = 10; dispatch_async(dispatch_get_main_queue(), ^{ NSLog(@\"%d\",i); }); i = 20;} 20 1234567- (void)someMethod { __block int i = 10; dispatch_async(dispatch_get_main_queue(), ^{ NSLog(@\"%d\",i); }); i = 20;} 20 1234567- (void)someMethod { int i = 10; dispatch_sync(dispatch_get_main_queue(), ^{ NSLog(@\"%d\",i); }); i = 20;} 10 2.+load å’Œ initialize çš„åŒºåˆ«ï¼Ÿ+load çš„è°ƒç”¨æ—¶æœº1.è°ƒç”¨æ–¹å¼ (1) load æ˜¯æ ¹æ®å‡½æ•°åœ°å€ç›´æ¥è°ƒç”¨ã€‚ (2) initialize æ˜¯é€šè¿‡ objc_msgSend è°ƒç”¨ã€‚ 2.è°ƒç”¨æ—¶åˆ»(ä»€ä¹ˆæ—¶å€™ä¼šè°ƒç”¨) (1) load æ˜¯ runtime åŠ è½½ç±»ã€åˆ†ç±»çš„æ—¶å€™è°ƒç”¨(åªä¼šè°ƒç”¨ä¸€æ¬¡) (2) initialize æ˜¯ç±»ç¬¬ä¸€æ¬¡æ¥æ”¶åˆ°æ¶ˆæ¯çš„æ—¶å€™è°ƒç”¨ï¼Œæ¯ä¸€ä¸ªç±»åªä¼š initialize ä¸€æ¬¡(çˆ¶ç±»çš„ initialize æ–¹æ³•å¯èƒ½ä¼šè¢«è°ƒç”¨å¤šæ¬¡)ã€‚ 3.App å¯åŠ¨ pre-main åšäº†ä»€ä¹ˆäº‹æƒ…1.åŠ è½½ dyld åˆ° App è¿›ç¨‹ï¼ˆdyld é¦–å…ˆè¯»å– mach-o Header å’Œ load commandsï¼Œæ¥ç€å°±çŸ¥é“äº†è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä¾èµ–çš„åŠ¨æ€åº“ï¼‰2.åŠ è½½åŠ¨æ€åº“ï¼ˆåŒ…æ‹¬æ‰€ä¾èµ–çš„æ‰€æœ‰åŠ¨æ€åº“ï¼‰3.Rebase &amp; Bind (ä½¿ç”¨äº†ASLRåœ°å€ç©ºé—´å¸ƒå±€éšæœºåŒ–å’Œ Code Sign æ¥ä¿è¯åº”ç”¨çš„å®‰å…¨ï¼ŒRebase ä¿®æ­£å†…éƒ¨æŒ‡é’ˆæŒ‡å‘ï¼ŒBind ä¿®æ­£å¤–éƒ¨æŒ‡é’ˆæŒ‡å‘)4.åˆå§‹åŒ– Objective-C Runtime ï¼ˆRuntime ç»´æŠ¤äº†ä¸€å¼ æ˜ å°„ç±»åä¸ç±»çš„å…¨å±€è¡¨ï¼Œå½“åŠ è½½ä¸€ä¸ª dylib æ—¶ï¼ŒæŠŠç±»çš„ä¿¡æ¯æ³¨å†Œåˆ°è¿™ä¸ªå…¨å±€è¡¨ä¸­ï¼Œä¹Ÿä¼šæŠŠ Category ä¸­çš„æ–¹æ³•æ³¨å†Œåˆ°å¯¹åº”çš„ç±»ä¸­ï¼‰5.Initializers å…¶ä»–åˆå§‹åŒ–ä»£ç 6.dyld è°ƒç”¨ main() å‡½æ•°ï¼Œmain() å‡½æ•°è°ƒç”¨ UIApplicationMain(),ç¨‹åºå¯åŠ¨ã€‚ 4.KVO çš„å®ç°åŸç†ã€‚ åˆ©ç”¨ Runtime API åŠ¨æ€ç”Ÿæˆä¸€ä¸ªå­ç±»ï¼Œå¹¶ä¸”è®© instance å¯¹è±¡çš„ isa æŒ‡å‘è¿™ä¸ªå…¨æ–°çš„å­ç±» å½“ä¿®æ”¹ instance å¯¹è±¡çš„å±æ€§æ—¶ï¼Œä¼šè°ƒç”¨ Foundation çš„ _NSSetXXXValueAndNotify å‡½æ•°willChangeValueForKey:çˆ¶ç±»åŸæ¥çš„ setterdidChangeValueForKey:å†…éƒ¨ä¼šè§¦å‘ç›‘å¬å™¨ï¼ˆOberserï¼‰çš„ç›‘å¬æ–¹æ³•(observeValueForKeyPath:ofObject:change:context:ï¼‰ 5.KVC çš„å®ç°åŸç†ï¼Œæ˜¯ç›´æ¥è®¿é—®æˆå‘˜å˜é‡èµ‹å€¼å—ï¼ŸæŒ‰ç…§ setKey:ã€_setKey: é¡ºåºæŸ¥æ‰¾æ–¹æ³•ï¼Œæ‰¾åˆ°æ–¹æ³•è°ƒç”¨ã€‚æ²¡æ‰¾åˆ°ç»§ç»­ã€‚ æŸ¥çœ‹ accessInstanceVariablesDirectly æ–¹æ³•çš„è¿”å›å€¼ã€‚å¦‚æœæ˜¯ YES ç»§ç»­ã€‚ æŒ‰ç…§_keyã€_isKeyã€keyã€isKeyé¡ºåºæŸ¥æ‰¾æˆå‘˜å˜é‡ã€‚æ‰¾åˆ°äº†ç›´æ¥èµ‹å€¼ã€‚ æ²¡æ‰¾åˆ°æˆå‘˜å˜é‡ï¼šè°ƒç”¨ setValue:forUndefinedKey: å¹¶æŠ›å‡ºå¼‚å¸¸NSUnknownKeyException 6.autoreleasepool ä»€ä¹ˆæ—¶å€™é‡Šæ”¾ï¼Ÿ å­çº¿ç¨‹ä½¿ç”¨äº† autorelease åï¼Œå¦‚æœå½“å‰çº¿ç¨‹æ²¡æœ‰ AutorelesepoolPage çš„è¯ï¼Œä»£ç æ‰§è¡Œé¡ºåºä¸º autorelease -&gt; autoreleaseFast -&gt; autoreleaseNoPageã€‚åœ¨ autoreleaseNoPage æ–¹æ³•ä¸­ï¼Œä¼šåˆ›å»ºä¸€ä¸ª hotPage ï¼Œç„¶åè°ƒç”¨page-&gt;add(obj) ã€‚ä¹Ÿå°±æ˜¯è¯´å³ä½¿è¿™ä¸ªçº¿ç¨‹æ²¡æœ‰ AutorelesepoolPage ï¼Œä½¿ç”¨äº† autorelease å¯¹è±¡æ—¶ä¹Ÿä¼š new ä¸€ä¸ª AutoreleasepoolPage å‡ºæ¥ç®¡ç† autorelese å¯¹è±¡ã€‚ å­çº¿ç¨‹çš„ autoreleasepool æ˜¯åœ¨çº¿ç¨‹é”€æ¯çš„æ—¶å€™é‡Šæ”¾çš„ã€‚ 7.Category æ·»åŠ ä¸€ä¸ªå±æ€§ç³»ç»Ÿåšäº†ä»€ä¹ˆï¼Ÿæ€ä¹ˆæ·»åŠ å±æ€§ï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½æ·»åŠ æˆå‘˜å˜é‡ã€‚å…³è”å¯¹è±¡å­˜åœ¨å“ªé‡Œï¼ŸCategory é‡Œå†™äº†å’Œç±»ç›¸åŒçš„æ–¹æ³•ä¼šæ€ä¹ˆæ ·ï¼Ÿå£°æ˜äº† set å’Œ get æ–¹æ³•ã€‚ å®ç°å…³è”å¯¹è±¡æŠ€æœ¯çš„æ ¸å¿ƒå¯¹è±¡æœ‰ AssociationsManagerï¼šå…³è”å¯¹è±¡å­˜å‚¨åœ¨å…¨å±€çš„ç»Ÿä¸€çš„ä¸€ä¸ª AssociationsManager ä¸­ AssociationsHashMapï¼škey ä¸ºå¯¹è±¡ï¼Œvalue ä¸º ObjectAssociationMap ObjectAssociationMapï¼škey ä¸ºå…³è”å¯¹è±¡çš„ keyï¼Œvalue ä¸º ObjcAssociation ObjcAssociationï¼šå­˜å‚¨ policy å’Œ value ä¼šå…ˆæ‰¾åˆ°åˆ†ç±»é‡Œçš„æ–¹æ³•æ‰§è¡Œã€‚ 8.isa æŒ‡å‘ï¼Œå…ƒç±»å¯¹è±¡ isa æŒ‡å‘å“ªé‡Œï¼ŸNSObject çš„ isa æŒ‡å‘å“ªé‡Œï¼Ÿä¸ºä»€ä¹ˆè¦è®¾è®¡ç±»ã€å…ƒç±»ï¼Ÿisa çš„ç»“æ„ å…ƒç±»å¯¹è±¡çš„ isa æŒ‡å‘åŸºç±»çš„å…ƒç±»å¯¹è±¡ã€‚NSObject çš„ isa æŒ‡å‘å®ƒæœ¬èº«ã€‚ åœ¨ arm64 æ¶æ„ä¹‹å‰ï¼Œisa å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„æŒ‡é’ˆï¼Œå­˜å‚¨ç€ Classã€Meta-Class å¯¹è±¡çš„å†…å­˜åœ°å€ ä» arm64 æ¶æ„å¼€å§‹ï¼Œå¯¹ isa è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå˜æˆäº†ä¸€ä¸ªå…±ç”¨ä½“ï¼ˆunionï¼‰ç»“æ„ï¼Œè¿˜ä½¿ç”¨ä½åŸŸæ¥å­˜å‚¨æ›´å¤šçš„ä¿¡æ¯ nonpointer0ï¼šä»£è¡¨æ™®é€šçš„æŒ‡é’ˆï¼Œå­˜å‚¨ç€ Classã€Meta-Classå¯¹è±¡çš„å†…å­˜åœ°å€1ï¼šä»£è¡¨ä¼˜åŒ–è¿‡ï¼Œä½¿ç”¨ä½åŸŸå­˜å‚¨æ›´å¤šçš„ä¿¡æ¯ has_assocæ˜¯å¦æœ‰è®¾ç½®è¿‡å…³è”å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‡Šæ”¾æ—¶ä¼šæ›´å¿« has_cxx_dtoræ˜¯å¦æœ‰ C++ çš„ææ„å‡½æ•°ï¼ˆ.cxx_destructï¼‰ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‡Šæ”¾æ—¶ä¼šæ›´å¿« shiftclså­˜å‚¨ç€ Classã€Meta-Class å¯¹è±¡çš„å†…å­˜åœ°å€ä¿¡æ¯ magicç”¨äºåœ¨è°ƒè¯•æ—¶åˆ†è¾¨å¯¹è±¡æ˜¯å¦æœªå®Œæˆåˆå§‹åŒ– weakly_referencedæ˜¯å¦æœ‰è¢«å¼±å¼•ç”¨æŒ‡å‘è¿‡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‡Šæ”¾æ—¶ä¼šæ›´å¿« deallocatingå¯¹è±¡æ˜¯å¦æ­£åœ¨é‡Šæ”¾ extra_rcé‡Œé¢å­˜å‚¨çš„å€¼æ˜¯å¼•ç”¨è®¡æ•°å™¨å‡1 has_sidetable_rcå¼•ç”¨è®¡æ•°å™¨æ˜¯å¦è¿‡å¤§æ— æ³•å­˜å‚¨åœ¨ isa ä¸­å¦‚æœä¸º1ï¼Œé‚£ä¹ˆå¼•ç”¨è®¡æ•°ä¼šå­˜å‚¨åœ¨ä¸€ä¸ªå« SideTable çš„ç±»çš„å±æ€§ä¸­ 9.æœ‰åšè¿‡å¡é¡¿æ£€æµ‹å—ï¼ŸRunloop æ£€æµ‹å¡é¡¿æ€ä¹ˆçŸ¥é“æ˜¯å“ªä¸ªæ–¹æ³•å¡ï¼Ÿæ–¹æ³•å¡äº†å¤šé•¿æ—¶é—´ï¼Ÿ10.æœ‰åšé—ªé€€ç›‘æµ‹å—ï¼Ÿbugly æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿcrash ç‡æ˜¯å¤šå°‘ï¼Ÿcrash ç‡æ˜¯æ€ä¹ˆç®—å‡ºæ¥çš„ï¼Ÿcrash ç‡ = å´©æºƒæ¬¡æ•° / æ´»è·ƒè®¾å¤‡æ•° 11.ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„ç»“ç‚¹å®ç°åè½¬å•å‘é“¾è¡¨çš„å‡½æ•°ã€‚å¦‚ 1-&gt;2-&gt;3-&gt;4 åè½¬åå˜æˆ 2-&gt;1-&gt;4-&gt;3 LeetCodeé¢˜ç›®é“¾æ¥ï¼šä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ 1234567891011121314var swapPairs = function(head) { let dummyNode = new ListNode(0); dummyNode.next = head; let temp = dummyNode; while (temp.next != null &amp;&amp; temp.next.next != null) { let head1 = temp.next; let head2 = temp.next.next; temp.next = head2; head1.next = head2.next; head2.next = head1; temp = head1; } return dummyNode.next;}; æœ‰ä»€ä¹ˆæƒ³é—®æˆ‘çš„ï¼Ÿ","link":"/ç¾å›¢ä¼˜é€‰é¢è¯•é¢˜2/"},{"title":"ç¾å›¢é¢è¯•é¢˜","text":"ç¾å›¢é¢è¯•é¢˜ 1ã€Block çš„åº•å±‚åŸç†ï¼Œç»“æ„ï¼Œå†…å­˜ä»¥åŠéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚ 2ã€å›¾ç‰‡æ¸²æŸ“ï¼Œä¸€å¼  png/jpg æ ¼å¼çš„å›¾ç‰‡æ¸²æŸ“åˆ°é¡µé¢ä¸Šæ˜¾ç¤ºæœ‰å“ªäº›æµç¨‹ã€‚png å’Œ jpg çš„åŒºåˆ«ã€‚png ä¸€å®šæ˜¯æ— æŸçš„å—ï¼Ÿ 3ã€Runtimeã€‚ 4ã€Runloop çš„ç»“æ„å’Œå¾ªç¯æµç¨‹ï¼Œç”¨ Runloop åšè¿‡ä»€ä¹ˆäº‹æƒ…ã€‚ 5ã€å¤šçº¿ç¨‹ï¼ŒNSOperationQueue å’Œ GCD çš„åŒºåˆ«ã€‚ç”¨å¤šçº¿ç¨‹åšè¿‡ä»€ä¹ˆäº‹æƒ…ã€‚çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚åŠ é”æœ‰å‡ ç§æ–¹å¼ã€‚ 6ã€NSURLSession å’Œ NSURLConnection çš„åŒºåˆ«ï¼Œ NSURLConnection æ˜¯æ€ä¹ˆå°è£…çš„ã€‚CFNetworkã€‚ 7ã€åšè¿‡ä»€ä¹ˆåŠ¨ç”»ã€‚ 8ã€HTTPS çš„å·¥ä½œåŸç†ï¼Œå’Œ HTTP çš„åŒºåˆ«ã€‚RSA åŠ å¯†åŸç†ã€‚ 9ã€ç½‘ç»œå±‚çº§ï¼ŒTCP å’Œ UDP çš„åŒºåˆ«ã€‚ 10ã€SDWebImage çš„æ¡†æ¶ç»“æ„ï¼Œç¼“å­˜æœºåˆ¶ã€‚ 11ã€Git çš„ rebase çš„åŸç†ã€‚Git æµç¨‹ã€‚ 12ã€å¯¹ç»„ä»¶åŒ–çš„äº†è§£ï¼Œç»„ä»¶åŒ–æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ã€‚ 13ã€JSPatch çš„åŸç†ã€‚ 14ã€å•ä¾‹æ˜¯ä¸ºäº†å¤„ç†ä»€ä¹ˆé—®é¢˜è€Œä½¿ç”¨çš„ï¼Œå•ä¾‹å’Œå…¨å±€å˜é‡çš„åŒºåˆ«ã€‚ 15ã€å¯¹è®¾è®¡æ¨¡å¼çš„æŒæ¡ã€‚ 16ã€åˆ†å±‚æ‰“å°äºŒå‰æ ‘ã€‚","link":"/ç¾å›¢é¢è¯•é¢˜/"},{"title":"ç¾å›¢é¢è¯•é¢˜åŠç­”æ¡ˆ","text":"ç¾å›¢é¢è¯•é¢˜ 1ã€Block çš„åº•å±‚åŸç†ï¼Œç»“æ„ï¼Œå†…å­˜ä»¥åŠéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚blockæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªOCå¯¹è±¡ï¼Œå®ƒå†…éƒ¨ä¹Ÿæœ‰ä¸ªisaæŒ‡é’ˆã€‚blockæ˜¯å°è£…äº†å‡½æ•°è°ƒç”¨ä»¥åŠå‡½æ•°è°ƒç”¨ç¯å¢ƒçš„OCå¯¹è±¡ã€‚ blockç±»å‹ ç¯å¢ƒ NSGlobalBlock æ²¡æœ‰è®¿é—®autoå˜é‡ NSStackBlock è®¿é—®äº†autoå˜é‡ NSMallocBlock NSStackBlockè°ƒç”¨äº†copy 2ã€å›¾ç‰‡æ¸²æŸ“ï¼Œä¸€å¼  png/jpg æ ¼å¼çš„å›¾ç‰‡æ¸²æŸ“åˆ°é¡µé¢ä¸Šæ˜¾ç¤ºæœ‰å“ªäº›æµç¨‹ã€‚png å’Œ jpg çš„åŒºåˆ«ã€‚png ä¸€å®šæ˜¯æ— æŸçš„å—ï¼Ÿå›¾ç‰‡æ¸²æŸ“çš„è¿‡ç¨‹: è¯»å–æ–‡ä»¶ -&gt; è®¡ç®—frame -&gt;å›¾ç‰‡è§£ç  -&gt;è§£ç åé€šè¿‡æ•°æ®æ€»çº¿äº¤ç»™GPU -&gt;GPUè·å–å›¾ç‰‡frameåè¿›è¡Œé¡¶ç‚¹å˜æ¢è®¡ç®— -&gt;å…‰æ …åŒ– -&gt;æ ¹æ®çº¹ç†åæ ‡è·å–æ¯ä¸€ä¸ªåƒç´ ç‚¹çš„é¢œè‰²å€¼ -&gt; äº¤ç»™å¸§ç¼“å†²åŒº -&gt;æ¸²æŸ“åˆ°å±å¹•ä¸Š iOSä¸­å›¾ç‰‡æ¸²æŸ“çš„æµç¨‹ iOS ä¿æŒç•Œé¢æµç•…çš„æŠ€å·§ iOSå›¾å½¢åŸç†ä¸ç¦»å±æ¸²æŸ“ 3ã€Runtimeã€‚OCä¸­çš„æ–¹æ³•è°ƒç”¨å…¶å®éƒ½æ˜¯è½¬æˆäº†objc_msgSendå‡½æ•°çš„è°ƒç”¨ï¼Œç»™receiverï¼ˆæ–¹æ³•è°ƒç”¨è€…ï¼‰å‘é€äº†ä¸€æ¡æ¶ˆæ¯ï¼ˆselectoræ–¹æ³•åï¼‰objc_msgSendåº•å±‚æœ‰3å¤§é˜¶æ®µæ¶ˆæ¯å‘é€ï¼ˆå½“å‰ç±»ã€çˆ¶ç±»ä¸­æŸ¥æ‰¾ï¼‰ã€åŠ¨æ€æ–¹æ³•è§£æã€æ¶ˆæ¯è½¬å‘ å…·ä½“åº”ç”¨åˆ©ç”¨å…³è”å¯¹è±¡ï¼ˆAssociatedObjectï¼‰ç»™åˆ†ç±»æ·»åŠ å±æ€§éå†ç±»çš„æ‰€æœ‰æˆå‘˜å˜é‡ï¼ˆä¿®æ”¹textfieldçš„å ä½æ–‡å­—é¢œè‰²ã€å­—å…¸è½¬æ¨¡å‹ã€è‡ªåŠ¨å½’æ¡£è§£æ¡£ï¼‰äº¤æ¢æ–¹æ³•å®ç°ï¼ˆäº¤æ¢ç³»ç»Ÿçš„æ–¹æ³•ï¼‰åˆ©ç”¨æ¶ˆæ¯è½¬å‘æœºåˆ¶è§£å†³æ–¹æ³•æ‰¾ä¸åˆ°çš„å¼‚å¸¸é—®é¢˜ 4ã€Runloop çš„ç»“æ„å’Œå¾ªç¯æµç¨‹ï¼Œç”¨ Runloop åšè¿‡ä»€ä¹ˆäº‹æƒ…ã€‚01ã€é€šçŸ¥Observersï¼šè¿›å…¥Loop02ã€é€šçŸ¥Observersï¼šå³å°†å¤„ç†Timers03ã€é€šçŸ¥Observersï¼šå³å°†å¤„ç†Sources04ã€å¤„ç†Blocks05ã€å¤„ç†Source0ï¼ˆå¯èƒ½ä¼šå†æ¬¡å¤„ç†Blocksï¼‰06ã€å¦‚æœå­˜åœ¨Source1ï¼Œå°±è·³è½¬åˆ°ç¬¬8æ­¥07ã€é€šçŸ¥Observersï¼šå¼€å§‹ä¼‘çœ ï¼ˆç­‰å¾…æ¶ˆæ¯å”¤é†’ï¼‰08ã€é€šçŸ¥Observersï¼šç»“æŸä¼‘çœ ï¼ˆè¢«æŸä¸ªæ¶ˆæ¯å”¤é†’ï¼‰01&gt; å¤„ç†Timer02&gt; å¤„ç†GCD Async To Main Queue03&gt; å¤„ç†Source109ã€å¤„ç†Blocks10ã€æ ¹æ®å‰é¢çš„æ‰§è¡Œç»“æœï¼Œå†³å®šå¦‚ä½•æ“ä½œ01&gt; å›åˆ°ç¬¬02æ­¥02&gt; é€€å‡ºLoop11ã€é€šçŸ¥Observersï¼šé€€å‡ºLoop æ§åˆ¶çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸï¼ˆçº¿ç¨‹ä¿æ´»ï¼‰ è§£å†³NSTimeråœ¨æ»‘åŠ¨æ—¶åœæ­¢å·¥ä½œçš„é—®é¢˜ ç›‘æ§åº”ç”¨å¡é¡¿ æ€§èƒ½ä¼˜åŒ– 5ã€å¤šçº¿ç¨‹ï¼ŒNSOperationQueue å’Œ GCD çš„åŒºåˆ«ã€‚ç”¨å¤šçº¿ç¨‹åšè¿‡ä»€ä¹ˆäº‹æƒ…ã€‚çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚åŠ é”æœ‰å‡ ç§æ–¹å¼ã€‚dispatch_after dispatch_group dispatch_barrier dispatch_once OSSpinLockos_unfair_lockpthread_mutexdispatch_semaphoredispatch_queue(DISPATCH_QUEUE_SERIAL)NSLockNSRecursiveLockNSConditionNSConditionLock@synchronized 6ã€NSURLSession å’Œ NSURLConnection çš„åŒºåˆ«ï¼Œ NSURLConnection æ˜¯æ€ä¹ˆå°è£…çš„ã€‚CFNetworkã€‚7ã€åšè¿‡ä»€ä¹ˆåŠ¨ç”»ã€‚8ã€HTTPS çš„å·¥ä½œåŸç†ï¼Œå’Œ HTTP çš„åŒºåˆ«ã€‚RSA åŠ å¯†åŸç†ã€‚9ã€ç½‘ç»œå±‚çº§ï¼ŒTCP å’Œ UDP çš„åŒºåˆ«ã€‚ TCP UDP é¢å‘è¿æ¥ é¢å‘æ•°æ®æŠ¥ å¯é ä¼ è¾“ ä¸å¯é ä¼ è¾“ ä¼ è¾“æ•ˆç‡ä½ ä¼ è¾“æ•ˆç‡é«˜ 10ã€SDWebImage çš„æ¡†æ¶ç»“æ„ï¼Œç¼“å­˜æœºåˆ¶ã€‚11ã€Git çš„ rebase çš„åŸç†ã€‚Git æµç¨‹ã€‚12ã€å¯¹ç»„ä»¶åŒ–çš„äº†è§£ï¼Œç»„ä»¶åŒ–æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ã€‚13ã€JSPatch çš„åŸç†ã€‚14ã€å•ä¾‹æ˜¯ä¸ºäº†å¤„ç†ä»€ä¹ˆé—®é¢˜è€Œä½¿ç”¨çš„ï¼Œå•ä¾‹å’Œå…¨å±€å˜é‡çš„åŒºåˆ«ã€‚15ã€å¯¹è®¾è®¡æ¨¡å¼çš„æŒæ¡ã€‚16ã€åˆ†å±‚æ‰“å°äºŒå‰æ ‘ã€‚","link":"/ç¾å›¢é¢è¯•é¢˜åŠç­”æ¡ˆ/"},{"title":"è…°æœå…¬è€ƒé¢è¯•é¢˜","text":"è…°æœå…¬è€ƒé¢è¯•é¢˜ ç¬”è¯•ï¼š1ã€NSTimer å—æ»‘åŠ¨å½±å“ 2ã€æ·±æ‹·è´ã€æµ…æ‹·è´ï¼Ÿ 3ã€assign ä¸ weak åŒºåˆ«ï¼Ÿ 4ã€å†…å­˜ç®¡ç†ï¼Ÿ 5ã€[self class] [super class] ç®—æ³•ï¼š1ã€æ•°ç»„å»é‡ï¼Ÿ 2ã€å·²çŸ¥ä¸€ä¸ªç”Ÿæˆ 0-6 éšæœºæ•°çš„å‡½æ•°ï¼Œå†™ä¸€ä¸ªç”Ÿæˆ 0-9 éšæœºæ•°çš„å‡½æ•°ã€‚ 3ã€ä»æ•°ç»„ä¸­æ‰¾åˆ°æ‰€æœ‰ 3 ä¸ªæ•°å’Œä¸º 0 çš„ç»„åˆï¼Œå¦‚ [0,-1,1] é¢è¯•é¢˜ï¼šç¬”è¯•é¢˜é—®ä¸€é 1ã€assign ä¸ weak åŒºåˆ«ï¼Ÿweak å†…éƒ¨å®ç°åŸç†ï¼Ÿå¦‚æœè®©ä½ è‡ªå·±å®ç° weakï¼Ÿ 2ã€æ·±æµ…æ‹·è´åœ¨å¯å˜ä¸ä¸å¯å˜æ—¶å…·ä½“è¯´ä¸€ä¸‹ã€‚ 3ã€NSTimer å—æ»‘åŠ¨å½±å“ 4ã€å¿«é€Ÿæ’åºï¼Ÿ 5ã€åˆ¤æ–­ [[]] å‰åæ‹¬å·å¯¹åº” 6ã€GCD çš„ API 7ã€å®ç°å•ä¾‹ï¼Ÿæ€ä¹ˆä¿è¯ alloc init æ—¶ä¹Ÿåªåˆ›å»ºä¸€æ¬¡æˆ–è€…è°ƒç”¨ä¸äº† alloc init ç¡®ä¿å•ä¾‹çš„å”¯ä¸€ï¼Ÿ 8ã€åœ†è§’çš„ä¼˜åŒ–ï¼Ÿå‡ºç°é—®é¢˜çš„åŸå› ï¼Ÿç¦»å±æ¸²æŸ“ï¼Ÿ 9ã€Masonry é“¾å¼è°ƒç”¨çš„åŸç†ï¼Ÿ 10ã€å¾®ä¿¡æ”¯ä»˜æµç¨‹ 11ã€å¯Œæ–‡æœ¬ï¼Ÿ 12ã€block å¾ªç¯å¼•ç”¨æ€ä¹ˆä¸ªå¾ªç¯å¼•ç”¨ï¼Ÿ","link":"/è…°æœå…¬è€ƒé¢è¯•é¢˜/"},{"title":"è€è™å›½é™…","text":"è€è™å›½é™… 1.ç»„ä»¶åŒ–ï¼Œæ€ä¹ˆé€šä¿¡çš„ï¼Œæœ‰æ²¡æœ‰å…¬å…±æ•°æ®ï¼Œç»„ä»¶ä¼ å€¼ï¼Œå¤šä¸ªç»„ä»¶éƒ½å¯ä»¥ä¿®æ”¹è¿™ä¸ªå€¼ å€¼å˜åŒ–æ—¶é€šçŸ¥åˆ°å¦ä¸€ä¸ªç»„ä»¶ 2.SDK ä½“ç§¯ä¼˜åŒ–ï¼Œæ„å»ºææ•ˆï¼Œä¸ºå•¥æ„å»ºé‚£ä¹ˆä¹… 3.IM é¡µé¢å¤æ‚å—ï¼Ÿåº•å±‚æ€ä¹ˆå®ç°çš„ï¼ŸIM ä»æ•°æ®åº“è¯»å‡ºæ¥çš„å’Œæ¥å£æ‹‰å›æ¥çš„æ•°æ®æ€ä¹ˆåˆå¹¶ï¼Œæœ‰å†²çªäº†æ€ä¹ˆåŠï¼ŸIM çš„å¼‚å¸¸åœºæ™¯ï¼Œå‘é€å¤±è´¥ä¹‹ç±»çš„ 4.SSE ç›´æ¥æ›´æ–° UI å’Œå…¶ä»–æ–¹å¼ 5.é¸¿è’™é‡åˆ°çš„é—®é¢˜ï¼Œæœ‰æ²¡æœ‰é¸¿è’™ç‰ˆæœ¬çš„é—®é¢˜ï¼Œç”¨çš„æ˜¯ V2 è¿˜æ˜¯ V1 ç®—æ³•ï¼š ä»4ä¸ªç®—æ³•é¢˜ä¸­é€‰æ‹©ï¼Œè¦æ±‚ç”¨ OC æˆ– Swift å®ç°ï¼Œç”¨é£ä¹¦è¿è¡Œ 1.å­ä¸²æ˜¯å¦æ˜¯å›æ–‡å­ä¸² 2.æ•°ç»„æ˜¯å¦æ˜¯è°ƒæ€§æ•°ç»„ å‚è€ƒç­”æ¡ˆ1.ç»„ä»¶åŒ–ï¼Œæ€ä¹ˆé€šä¿¡çš„ï¼Œæœ‰æ²¡æœ‰å…¬å…±æ•°æ®ï¼Œç»„ä»¶ä¼ å€¼ï¼Œå¤šä¸ªç»„ä»¶éƒ½å¯ä»¥ä¿®æ”¹è¿™ä¸ªå€¼ å€¼å˜åŒ–æ—¶é€šçŸ¥åˆ°å¦ä¸€ä¸ªç»„ä»¶ å…±äº«æ•°æ®æ¨¡å‹ï¼š å•ä¾‹ + Notification 12345678910111213141516171819202122232425262728293031// SharedModel.h@interface SharedModel : NSObject@property (nonatomic, copy) NSString *value;+ (instancetype)shared;@end// SharedModel.m@implementation SharedModel+ (instancetype)shared { static SharedModel *instance; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ instance = [[SharedModel alloc] init]; }); return instance;}@end// ä¿®æ”¹å€¼æ—¶å‘é€šçŸ¥[SharedModel shared].value = @\"new value\";[[NSNotificationCenter defaultCenter] postNotificationName:@\"SharedValueDidChange\" object:nil userInfo:@{@\"newValue\": [SharedModel shared].value}];// ç›‘å¬å€¼å˜åŒ–[[NSNotificationCenter defaultCenter] addObserverForName:@\"SharedValueDidChange\" object:nil queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification * _Nonnull note) { NSLog(@\"å€¼å˜åŒ–: %@\", note.userInfo[@\"newValue\"]);}]; å•ä¾‹ + KVO 123456789101112131415// ç›‘å¬[[SharedModel shared] addObserver:self forKeyPath:@\"value\" options:NSKeyValueObservingOptionNew context:nil];// å›è°ƒ- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary&lt;NSKeyValueChangeKey,id&gt; *)change context:(void *)context { if ([keyPath isEqualToString:@\"value\"]) { NSLog(@\"å€¼å˜åŒ–ï¼š%@\", change[NSKeyValueChangeNewKey]); }} å•ä¾‹ + Block å›è°ƒï¼ˆè‡ªå®šä¹‰ï¼‰ ä½ ä¹Ÿå¯ä»¥åœ¨ SharedModel é‡Œç»´æŠ¤ä¸€ä¸ªå›è°ƒåˆ—è¡¨ï¼Œå½“å€¼ä¿®æ”¹æ—¶æ‰‹åŠ¨è°ƒç”¨å›è°ƒã€‚ 12345678910111213141516171819202122232425262728293031323334353637typedef void(^ValueChangeBlock)(NSString *newValue);@interface SharedModel : NSObject@property (nonatomic, copy) NSString *value;@property (nonatomic, strong) NSMutableArray&lt;ValueChangeBlock&gt; *observers;+ (instancetype)shared;- (void)addObserver:(ValueChangeBlock)block;@end@implementation SharedModel+ (instancetype)shared { static SharedModel *instance; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ instance = [[SharedModel alloc] init]; instance.observers = [NSMutableArray array]; }); return instance;}- (void)setValue:(NSString *)value { _value = [value copy]; for (ValueChangeBlock block in self.observers) { block(value); }}- (void)addObserver:(ValueChangeBlock)block { [self.observers addObject:[block copy]];}@end// ä½¿ç”¨[[SharedModel shared] addObserver:^(NSString *newValue) { NSLog(@\"å€¼å˜åŒ–äº†ï¼š%@\", newValue);}];[SharedModel shared].value = @\"hello\"; 2.SDK ä½“ç§¯ä¼˜åŒ–ï¼Œæ„å»ºææ•ˆï¼Œä¸ºå•¥æ„å»ºé‚£ä¹ˆä¹… 3.IM é¡µé¢å¤æ‚å—ï¼Ÿåº•å±‚æ€ä¹ˆå®ç°çš„ï¼ŸIM ä»æ•°æ®åº“è¯»å‡ºæ¥çš„å’Œæ¥å£æ‹‰å›æ¥çš„æ•°æ®æ€ä¹ˆåˆå¹¶ï¼Œæœ‰å†²çªäº†æ€ä¹ˆåŠï¼ŸIM çš„å¼‚å¸¸åœºæ™¯ï¼Œå‘é€å¤±è´¥ä¹‹ç±»çš„ 4.SSE ç›´æ¥æ›´æ–° UI å’Œå…¶ä»–æ–¹å¼ 5.é¸¿è’™é‡åˆ°çš„é—®é¢˜ï¼Œæœ‰æ²¡æœ‰é¸¿è’™ç‰ˆæœ¬çš„é—®é¢˜ï¼Œç”¨çš„æ˜¯ V2 è¿˜æ˜¯ V1 ç®—æ³•ï¼š ä»4ä¸ªç®—æ³•é¢˜ä¸­é€‰æ‹©ï¼Œè¦æ±‚ç”¨ OC æˆ– Swift å®ç°ï¼Œç”¨é£ä¹¦è¿è¡Œ 1.å­ä¸²æ˜¯å¦æ˜¯å›æ–‡å­ä¸² 2.æ•°ç»„æ˜¯å¦æ˜¯è°ƒæ€§æ•°ç»„","link":"/è€è™å›½é™…/"},{"title":"ç¾å›¢é¢è¯•é¢˜2åŠç­”æ¡ˆ","text":"ç¾å›¢é¢è¯•é¢˜2 1.gcd, block,__block, static2.ç¨‹åºå¯åŠ¨æ—¶æ‰§è¡Œäº†ä»€ä¹ˆ3.runloop: å¦‚ä½•è®©ä¸€ä¸ª block åªåœ¨å­çº¿ç¨‹runloop ä¸Šæ‰§è¡Œ4.autorelease å¯¹è±¡ä½•æ—¶é‡Šæ”¾ï¼Œä¸»çº¿ç¨‹ï¼Œå­çº¿ç¨‹åˆ†åˆ«å¦‚ä½•é‡Šæ”¾5.isaæŒ‡å‘çš„å†…å­˜å¸ƒå±€6.å¦‚ä½•å®šä¹‰ä¸€ä¸ªåªå­˜åœ¨äºæ ˆçš„å¯¹è±¡7.çº¿ä¸Šå¡é¡¿ç›‘æ§8.crash è§¦å‘æµç¨‹ï¼Œæ¶‰åŠçš„åº•å±‚ç³»ç»Ÿè°ƒç”¨9.é“¾è¡¨åè½¬ï¼š 1-&gt;2-&gt;3-&gt;4 åè½¬ä¸º 2-&gt;1-&gt;4-&gt;3","link":"/ç¾å›¢é¢è¯•é¢˜2/"},{"title":"è‹å®é¢è¯•é¢˜","text":"è‹å®é¢è¯•é¢˜ 1. ç¬”è¯•é¢˜1.1 å†’æ³¡æ’åºObjective-C å®ç°å¦‚ä¸‹ï¼š1234567891011121314- (void)bubbleSort:(NSMutableArray *)array { for (int i = 0; i &lt; array.count; i++) { for (int j = 0; j &lt; array.count-1-i; j++) { NSInteger left = [array[j] integerValue]; NSInteger right = [array[j+1] integerValue]; if (left &lt; right) { [array exchangeObjectAtIndex:j withObjectAtIndex:j+1]; } } } NSLog(@&quot;%@&quot;,array);} å‚è€ƒé“¾æ¥ï¼šã€ç®—æ³•ã€‘å†’æ³¡æ’åº 1.2 äºŒåˆ†æŸ¥æ‰¾Swiftå®ç°å¦‚ä¸‹ï¼š123456789101112131415func binarySearch&lt;T: comparable&gt;(_a: [T], key: T) -&gt; Int? { var lowerBound = 0 var upperBound = a.count while lowerBound &lt; upperBound { let midIndex = lowerBound + (upperBound - lowerBound) / 2 if a[midIndex] == key { return midIndex } else if a[midIndex] &lt; key { lowerBound = midIndex + 1 } else { upperBound = midIndex } } return nil} å‚è€ƒé“¾æ¥ï¼šã€ç®—æ³•ã€‘äºŒåˆ†æŸ¥æ‰¾ 1.3 åˆå¹¶ä¸¤ä¸ªæ•°ç»„å»é‡å‚è€ƒé“¾æ¥ï¼šã€ç®—æ³•ã€‘åˆå¹¶ä¸¤ä¸ªæ•°ç»„å¹¶å»é‡ 1.4 ä¸¤ä¸ªå¤§æ•°ç›¸åŠ å‚è€ƒé“¾æ¥ï¼šå¤§æ•°ç›¸åŠ ç®—æ³• 2. ä¸€é¢2.1 SDWebImage çš„ç¼“å­˜æœºåˆ¶ï¼ŸLRU è¯´ä¸€ä¸‹ã€‚SDWebImageåŠ è½½å›¾ç‰‡æ‹¿åˆ°urlä¼šå…ˆæŠŠurlçš„MD5å€¼ä½œä¸ºkeyä»å†…å­˜ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœå†…å­˜ä¸­æœ‰ï¼Œåˆ™ç›´æ¥å–å›¾ç‰‡æ˜¾ç¤ºï¼›å¦‚æœå†…å­˜ä¸­æ²¡æœ‰ï¼Œä¼šä»ç£ç›˜ä¸­æŸ¥æ‰¾ã€‚ç£ç›˜ä¸­æ²¡æœ‰ï¼Œä¼šèµ°ä¸‹è½½æµç¨‹ã€‚LRU æœ€è¿‘æœ€å°‘ä½¿ç”¨ã€‚ç¼“å­˜å®¹é‡æ»¡æ—¶ï¼Œä¼šå…ˆæ¸…ç†æœ€è¿‘æœ€å°‘çš„ç¼“å­˜ã€‚ 2.2 æ•°æ®åº“å‡çº§ï¼Œæ¯”å¦‚ä» 1.0 å‡çº§åˆ° 2.0ï¼Œå¢åŠ äº†å­—æ®µã€‚åšå¥½å…¼å®¹å¤„ç†ã€‚ 2.3 æ€§èƒ½ä¼˜åŒ–2.3.1 ä¼˜åŒ–å¯åŠ¨æ—¶é—´ å°†ä¸€äº›è€—æ—¶æ“ä½œå»¶è¿Ÿæ‰§è¡Œã€‚æ¯”å¦‚SDKçš„åˆå§‹åŒ–ï¼Œç•Œé¢çš„åˆ›å»ºã€‚ ä¸èƒ½å»¶è¿Ÿæ‰§è¡Œçš„ï¼Œå°½é‡æ”¾åˆ°åå°æ‰§è¡Œã€‚æ¯”å¦‚æ•°æ®è¯»å–ï¼ŒåŸå§‹ JSON æ•°æ®è½¬å¯¹è±¡ï¼Œæ—¥å¿—å‘é€ã€‚ å‡å°‘åŠ¨æ€åº“ã€åˆå¹¶åŠ¨æ€åº“ï¼Œå®šæœŸæ¸…ç†ä¸å¿…è¦çš„åŠ¨æ€åº“ã€‚ å‡å°‘ç±»ã€åˆ†ç±»çš„æ•°é‡ï¼Œåˆå¹¶Categoryå’ŒåŠŸèƒ½ç±»ä¼¼çš„ç±»ã€‚åˆ é™¤ä¸å¿…è¦çš„æ–¹æ³•å’Œç±»ã€åˆ†ç±»ã€‚ å°†ä¸å¿…é¡»åœ¨+loadä¸­åšçš„äº‹å»¶æ—¶åˆ°+initializeä¸­ã€‚ 2.3.2 å‡å°‘CPUã€GPUèµ„æºæ¶ˆè€— cellå¤ç”¨ï¼Œheaderã€footerå¤ç”¨ã€‚ å°½é‡æŠŠviewè®¾ç½®ä¸é€æ˜ã€‚ å‡å°‘è§†å›¾çš„å±‚çº§ã€‚ å°½é‡é¿å…è°ƒæ•´è§†å›¾å±‚æ¬¡ã€æ·»åŠ å’Œç§»é™¤è§†å›¾ã€‚ åˆç†é€‰æ‹©åŠ è½½å›¾ç‰‡çš„æ–¹å¼ï¼ŒUIImage imageNamed: ImageAssets ç”¨äºå¤šä¸ªåœ°æ–¹é‡å¤ä½¿ç”¨ï¼ŒUIImage imageWithContentsOfFile ä¸€èˆ¬ç”¨åœ¨å›¾ç‰‡æ•°æ®å¾ˆå¤§ï¼Œä¸€èˆ¬ä¸éœ€è¦å¤šæ¬¡ä½¿ç”¨çš„æƒ…å†µã€‚ å›¾ç‰‡å¤§å°æœ€å¥½å’ŒUIImageViewçš„å¤§å°ç›¸åŒã€‚ ä¸è¦é˜»å¡ä¸»çº¿ç¨‹ï¼Œè€—æ—¶æ“ä½œæ”¾åœ¨å­çº¿ç¨‹è¿›è¡Œã€‚ æ‡’åŠ è½½ã€‚ ç¼“å­˜ï¼Œç¼“å­˜å›¾ç‰‡SDWebImageï¼Œç¼“å­˜è¡Œé«˜ï¼ŒNSCacheç¼“å­˜ã€‚ å¤ç”¨é«˜å¼€é”€å¯¹è±¡NSDateFormatterå’ŒNSCalendarã€‚ å‡å°‘ç¦»å±æ¸²æŸ“ï¼Œä¼˜åŒ–åœ†è§’ã€é˜´å½±ã€‚ ä½¿ç”¨æ­£ç¡®çš„æ•°æ®å­˜å‚¨ã€‚ 2.3.3 å†…å­˜ä¼˜åŒ– å‡å°‘å†…å­˜æ³„æ¼ã€‚ é™ä½å†…å­˜ä½¿ç”¨å³°å€¼ã€‚ æ‡’åŠ è½½ã€‚ çµæ´»è¿ç”¨å›¾ç‰‡å’Œæ–‡ä»¶åŠ è½½ã€‚ æ‹‰é•¿æ–‡ä»¶å¤„ç†æœºåˆ¶ï¼Œé€æ­¥å¤„ç†æ–‡ä»¶ã€‚ 2.3.4 è€—ç”µä¼˜åŒ–è€—ç”µåŠŸç‡æ˜¯ä¸ªæ¯”è¾ƒç»¼åˆçš„æŒ‡æ ‡ï¼Œå½±å“å› ç´ å¾ˆå¤šã€‚å¯†é›†çš„ç½‘ç»œè¯·æ±‚ï¼Œé•¿é“¾æ¥ï¼Œå¯†é›†çš„CPUæ“ä½œï¼ˆæ¯”å¦‚å¤§é‡çš„å¤æ‚è®¡ç®—ï¼‰éƒ½ä¼šä½¿è€—ç”µåŠŸç‡å¢åŠ ã€‚ç½‘ç»œçŠ¶å†µï¼ˆæµç•…çš„Wi-Fiè¿˜æ˜¯ä¿¡å·ä¸å¥½çš„3Gï¼‰éƒ½ä¼šå½±å“ã€‚ ä¼˜åŒ–ç½‘ç»œã€‚ å‡å°‘ã€å‹ç¼©ç½‘ç»œæ•°æ®ã€‚ è‹¥å¤šæ¬¡ç½‘ç»œè¯·æ±‚ç»“æœç›¸åŒï¼Œå°½é‡ä½¿ç”¨ç¼“å­˜ã€‚ ç½‘ç»œä¸å¯ç”¨æ—¶ï¼Œä¸è¿›è¡Œç½‘ç»œè¯·æ±‚ã€‚ ä¼˜åŒ–CPUã€GPUæ¶ˆè€—ã€‚ ä¼˜åŒ–I/Oæ“ä½œï¼Œä½¿ç”¨dispatch_ioã€‚ å®šä½ä¼˜åŒ– å°½é‡é™ä½å®šä½ç²¾åº¦ï¼Œå¦‚ä¸è¦ä½¿ç”¨ç²¾åº¦æœ€é«˜çš„KCLLocationAccuracyBestã€‚ å¦‚æœåªæ˜¯éœ€è¦å¿«é€Ÿç¡®å®šç”¨æˆ·ä½ç½®ï¼Œç”¨ CLLocationManager çš„ requestLocation æ–¹æ³•å®šä½ï¼Œå®šä½å®Œæˆåï¼Œå®šä½ç¡¬ä»¶ä¼šè‡ªåŠ¨æ–­ç”µã€‚ 2.4 Git å¼€å‘æµç¨‹ã€‚ master develop dev-xx å…·ä½“å¼€å‘äººå‘˜åˆ†æ”¯ å¼€å‘å®Œæˆåå‘èµ·PRã€‚é¡¹ç›®æå®¡æ‰“Tag 2.5 å¾®ä¿¡ç™»å½•æµç¨‹ã€‚æ³¨å†Œå¾®ä¿¡çš„AppKeyä¸AppSecretã€‚ä½¿ç”¨å¾®ä¿¡SDKæ–¹æ³•è°ƒèµ·å¾®ä¿¡ï¼Œå›è°ƒæ‹¿åˆ°ä¸€äº›å‚æ•°ï¼ŒæŠŠåŒ…å«openIdç­‰åå®šå¥½çš„å‚æ•°ä¼ ç»™æœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨åˆ¤æ–­è¯¥ç”¨æˆ·æ˜¯å¦æ³¨å†Œè¿‡ï¼Œå¦‚æœæ³¨å†Œè¿‡ï¼Œè¿”å›ç™»å½•æˆåŠŸåçš„ç”¨æˆ·ç›¸å…³ä¿¡æ¯ã€‚ 2.6 WebView ä¸ JS äº¤äº’ã€‚H5è°ƒç”¨åŸç”Ÿé‡‡ç”¨æ‹¦æˆªåè®®çš„æ–¹å¼ã€‚æ‰§è¡ŒJSæ–¹æ³•ï¼ševaluateScriptä¹Ÿå¯ä»¥ä½¿ç”¨JSBridgeç­‰æ–¹å¼ã€‚ 2.7 è¯´ä¸€ä¸‹Runloopï¼Œè‹¹æœè®¾è®¡ Runloop çš„åˆè¡·æ˜¯ä»€ä¹ˆï¼ŸRunloop è¿è¡Œå¾ªç¯ã€‚è®©çº¿ç¨‹åœ¨æœ‰ä»»åŠ¡çš„æ—¶å€™å¿™ä»»åŠ¡ï¼Œæ²¡ä»»åŠ¡çš„æ—¶å€™ä¼‘çœ ã€‚å‚è€ƒé“¾æ¥ï¼šã€iOS å¼€å‘ã€‘RunLoop æ€»ç»“ 2.8 Delegateä»£ç†ç”¨assignä¿®é¥°ã€‚ 2.9 GCDå‚è€ƒé“¾æ¥ï¼šGCD çš„ API 2.10 æ·±æ‹·è´ä¸æµ…æ‹·è´æ·±æ‹·è´æ˜¯æ‹·è´æ•´ä¸ªå¯¹è±¡ã€‚æµ…æ‹·è´åªæ‹·è´å¯¹è±¡çš„æŒ‡é’ˆã€‚copyç”¨äºä¿®é¥°NSArrayã€NSDictionaryã€NSStringã€‚å¦‚æœ=å³è¾¹èµ‹å€¼çš„å¯¹è±¡æ˜¯å¯å˜çš„ï¼Œcopyæ˜¯æ·±æ‹·è´ï¼Œæ‹·è´å¯¹è±¡çš„æœ¬èº«ã€‚å¦‚æœèµ‹å€¼çš„å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œcopyæ˜¯æµ…æ‹·è´ï¼Œåªæ‹·è´å¯¹è±¡çš„æŒ‡é’ˆã€‚ç”¨copyå’Œç”¨strongçš„åŒºåˆ«ï¼Ÿç”¨copyæ›´å®‰å…¨ï¼Œé¿å…èµ‹çš„å€¼æ˜¯å¯å˜çš„ã€‚å¦‚æœèƒ½ç¡®ä¿èµ‹çš„å€¼æ˜¯ä¸å¯å˜çš„ï¼Œé‚£ä¹ˆç”¨strongå’Œç”¨copyéƒ½æ˜¯æµ…æ‹·è´ï¼Œcopyåªæ˜¯å¤šäº†ä¸€ä¸ªåˆ¤æ–­ï¼Œåˆ¤æ–­å¯å˜è¿˜æ˜¯ä¸å¯å˜ï¼Œå…¶ä»–æ˜¯ä¸€æ ·çš„ã€‚NSMutableArrayã€NSMutableDictionaryç”¨Strongä¿®é¥°ï¼Œå¦‚æœç”¨copyï¼Œå°±ä¼šæ‹·è´ä¸€ä»½ï¼Œå˜æˆä¸å¯å˜çš„ï¼Œå¦‚æœå¢åˆ æ•°æ®ï¼Œå°±ä¼šå‘ç”Ÿé”™è¯¯ã€‚ 2.11 è¿›ç¨‹é—´é€šä¿¡URL Schemes 2.12 çº¿ç¨‹é—´é€šä¿¡ï¼Œä¸¤ä¸ªçº¿ç¨‹æ€ä¹ˆåˆ‡æ¢ï¼ŸperformSelectorOnThread 2.13 å¤šæ€å¤šæ€ï¼ˆPolymorphismï¼‰æŒ‰å­—é¢çš„æ„æ€å°±æ˜¯â€œå¤šç§çŠ¶æ€â€ã€‚åœ¨é¢å‘å¯¹è±¡è¯­è¨€ä¸­ï¼Œæ¥å£çš„å¤šç§ä¸åŒçš„å®ç°æ–¹å¼å³ä¸ºå¤šæ€ã€‚å­ç±»ç»§æ‰¿çˆ¶ç±»åï¼Œå­ç±»é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œå®ç°å¤šæ€ã€‚ 2.14 HTTP ä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹ã€‚3. äºŒé¢3.1 æœ‰æ²¡æœ‰å¤æ‚ç‚¹çš„é¡µé¢ã€‚3.2 ï¼ˆè¿™ä¸ªéƒ¨é—¨æ˜¯åšæ™ºèƒ½ç¡¬ä»¶çš„ï¼‰è“ç‰™æœ‰å“ªäº›APIã€‚3.3 æ’­æ”¾éŸ³é¢‘ï¼Œå±•ç¤ºéŸ³é¢‘çš„æ›²çº¿ï¼Œå…·ä½“æ€ä¹ˆåšï¼Ÿ4. ä¸‰é¢","link":"/è‹å®é¢è¯•é¢˜åŠç­”æ¡ˆ/"},{"title":"è‡ªå¦‚é¢è¯•é¢˜","text":"è‡ªå¦‚é¢è¯•é¢˜ ä¸€é¢1.ä½ è§‰å¾—è‡ªå·±æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ 2.çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«ï¼Ÿ 3.çº¿ç¨‹é—´æ˜¯æ€ä¹ˆé€šä¿¡çš„ï¼ŸCPUæ˜¯æ€ä¹ˆå¤„ç†çº¿ç¨‹çš„ 4.åŒæ­¥ä¸²è¡Œé˜Ÿåˆ—ä¼šä¸ä¼šå¼€çº¿ç¨‹ï¼Ÿå¼‚æ­¥ä¸²è¡Œé˜Ÿåˆ—ä¼šä¸ä¼šå¼€çº¿ç¨‹ï¼Ÿ 5.GCDé¡¹ç›®é‡Œæœ‰å“ªäº›åœ°æ–¹ç”¨äº† 6.æ€ä¹ˆä¿è¯ç½‘ç»œä¼ è¾“çš„å®‰å…¨ï¼ŸMD5çš„åŠ å¯†è§„åˆ™ï¼ŒMD5å¯ä»¥ç ´è§£å—ï¼ŸAES/RSAï¼ŒRSAæœ‰é•¿åº¦é™åˆ¶å—ï¼Ÿ 7.ä»€ä¹ˆæ˜¯æ­»é” 8.åšè¿‡å“ªäº›ä¼˜åŒ–ï¼Œä»€ä¹ˆæ˜¯ç¦»å±æ¸²æŸ“ï¼Ÿ 9.ç½‘ç»œæœ‰æ²¡æœ‰ä¼˜åŒ–è¿‡ 10.å‘ä¸€ä¸ªç½‘ç»œè¯·æ±‚ç»è¿‡äº†å“ªäº›æ­¥éª¤ï¼Ÿæœ‰æ²¡æœ‰ç»Ÿè®¡å‘èµ·ç½‘ç»œè¯·æ±‚å’Œæ¥æ”¶ç½‘ç»œè¯·æ±‚çš„æ—¶é•¿ 11.ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ 12.å†·å¯åŠ¨å’Œçƒ­å¯åŠ¨æ€ä¹ˆåŒºåˆ†ï¼Ÿå†·å¯åŠ¨æ˜¯æŒ‡å…³æœºåé¦–æ¬¡æ‰“å¼€Appï¼Œçƒ­å¯åŠ¨æ˜¯æŒ‡æ‰“å¼€è¿‡Appæ€æ­»åå†æ‰“å¼€ã€‚ 13.ä»€ä¹ˆæ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼Ÿ 14.åˆå¹¶å¤šä¸ªæœ‰åºé“¾è¡¨ äºŒé¢1.ä»‹ç»å°è±¡æ·±åˆ»çš„é¡¹ç›®ï¼Œé‡åˆ°çš„é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³çš„ 2.webView ç™½å±é™¤äº†è¯ä¹¦é—®é¢˜è¿˜æœ‰ä»€ä¹ˆæƒ…å†µå¯èƒ½ä¼šå¯¼è‡´ã€‚ 3.è¯´ä¸€ä¸‹å¯¹ Flutter çš„äº†è§£ã€‚ 4.å¤šä¸ª widget ä¹‹é—´æ€ä¹ˆç›¸äº’ä¼ å€¼ï¼Œæ­£å‘åå‘ã€‚ 5.è¯´ä¸€ä¸‹å¯¹ iOS çš„ç†è§£ã€‚ 6.Runtime æ˜¯æ€ä¹ˆå®ç°åŠ¨æ€åŒ–çš„ï¼Œå…¶ä»–è¯­è¨€ä¹Ÿå†™ä¸€å¥—æ±‡ç¼–çš„é€»è¾‘èƒ½å®ç°åŠ¨æ€åŒ–å—ï¼Ÿ 7.RunLoop åº”ç”¨ï¼Œå¡é¡¿æ£€æµ‹ï¼Œrunloop çš„ activity ä¹‹å‰åˆ‡æ¢æ—¶é•¿å¤šå°‘ä½ è§‰å¾—æ˜¯å¡é¡¿ï¼Ÿrunloop å’Œå†…å­˜ä¹‹å‰çš„ç›¸å…³çŸ¥è¯†ï¼Œautoreleasepool 8.å†…å­˜ç®¡ç† 9.ç¼–è¯‘åçš„ç»“æ„æ·»åŠ ä¸äº†æˆå‘˜å˜é‡äº†ï¼Œå¦‚æœæƒ³æ·»åŠ ï¼Œæœ‰æ²¡æœ‰åŠæ³•å®ç°ï¼Ÿä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡åœ¨å†…å­˜ä¸­æ˜¯æ€ä¹ˆå­˜å‚¨çš„ï¼Ÿæ€ä¹ˆè¯»å–ä¸€ä¸ªæˆå‘˜å˜é‡ï¼Ÿæœ‰ä»€ä¹ˆè¦æ³¨æ„çš„ï¼Ÿç»™ NSNumber èµ‹å€¼ä¸€ä¸ª NSStringï¼Œæ­£ç¡®ä½¿ç”¨ NSString æ—¶ä¼šä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚ 10.ç»„ä»¶åŒ–ï¼Œè·¯ç”±æ¨¡å¼ï¼Œå¦‚æœä¸€ä¸ªç±»è¢«ä¿®æ”¹äº†ï¼Œä»–çš„æ˜ å°„å…³ç³»æ€ä¹ˆåŠæ—¶ç»´æŠ¤ï¼Ÿ 11.è¯´ä¸€ä¸‹ä½ äº†è§£çš„è®¾è®¡æ¨¡å¼ï¼Œè¯´ä¸€ä¸‹å·¥å‚æ¨¡å¼ 12.è®²ä¸€ä¸ªä½ æ¯”è¾ƒç†Ÿæ‚‰çš„æ¡†æ¶ 13.é¡¹ç›®å¼€å‘æµç¨‹ã€‚æœ‰å“ªäº›åœ°æ–¹å¯ä»¥æé«˜æ•ˆç‡ 14.é¡¹ç›®æ˜¯æ€ä¹ˆæ¶æ„çš„ 15.åè½¬å­—ç¬¦ä¸²ï¼Œç¬¬ä¸€æ¬¡åè½¬ä¸€ä¸ª ç¬¬äºŒæ¬¡åè½¬ä¸¤ä¸ª æœ€åä¸å¤Ÿçš„å…¨æ‹¿è¿‡æ¥ã€‚ ä¸‰é¢1.ä»‹ç»é¡¹ç›® 2.Flutter å¼€å‘é‡åˆ°çš„é—®é¢˜ 3.Vue å¼€å‘é‡åˆ°çš„é—®é¢˜ èµ‹å€¼éœ€è¦ç”¨setæ–¹æ³•çš„åŸå›  4.å­¦ä¹ ä¸€é—¨æ–°çŸ¥è¯†çš„é€”å¾„ 5.æœ‰æ²¡æœ‰çœ‹è¿‡ä¸€äº›æºç  6.ä»æ¡†æ¶ä¸­ä½ è§‰å¾—æœ‰ä»€ä¹ˆç‚¹å°è±¡æ·±åˆ»ï¼Œä»æ¡†æ¶ä¸­æœ‰æ²¡æœ‰ä»€ä¹ˆç‚¹åº”ç”¨åˆ°é¡¹ç›®é‡Œ 7.è§„åˆ’ è€ƒè™‘æ–°å…¬å¸çœ‹ä¸­å“ªäº›æ–¹é¢ï¼Œ 8.æ‰‹é‡Œæœ‰æ²¡æœ‰offer offerä¸Šçš„å…¥èŒæ—¶é—´ å…¶ä»–é—®é¡¹ç›®ä¸­é‡åˆ°è¿‡å•¥é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³çš„ã€‚å¹³æ—¶æ€ä¹ˆå­¦ä¹ ç›¸å…³çŸ¥è¯†çš„è¯´è¯´é¡¹ç›®ä¸­çš„äº®ç‚¹ï¼Œä½ åœ¨å¼€å‘ä¸­æ‹…ä»»çš„è§’è‰²ï¼Œä½ è´Ÿè´£çš„æ¨¡å— å‚è€ƒç­”æ¡ˆä¸€é¢1.ä½ è§‰å¾—è‡ªå·±æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ 2.çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«ï¼Ÿ 3.çº¿ç¨‹é—´æ˜¯æ€ä¹ˆé€šä¿¡çš„ï¼ŸCPUæ˜¯æ€ä¹ˆå¤„ç†çº¿ç¨‹çš„ 4.åŒæ­¥ä¸²è¡Œé˜Ÿåˆ—ä¼šä¸ä¼šå¼€çº¿ç¨‹ï¼Ÿå¼‚æ­¥ä¸²è¡Œé˜Ÿåˆ—ä¼šä¸ä¼šå¼€çº¿ç¨‹ï¼Ÿ 5.GCDé¡¹ç›®é‡Œæœ‰å“ªäº›åœ°æ–¹ç”¨äº† 6.æ€ä¹ˆä¿è¯ç½‘ç»œä¼ è¾“çš„å®‰å…¨ï¼ŸMD5çš„åŠ å¯†è§„åˆ™ï¼ŒMD5å¯ä»¥ç ´è§£å—ï¼ŸAES/RSAï¼ŒRSAæœ‰é•¿åº¦é™åˆ¶å—ï¼Ÿ 7.ä»€ä¹ˆæ˜¯æ­»é” 8.åšè¿‡å“ªäº›ä¼˜åŒ–ï¼Œä»€ä¹ˆæ˜¯ç¦»å±æ¸²æŸ“ï¼Ÿ 9.ç½‘ç»œæœ‰æ²¡æœ‰ä¼˜åŒ–è¿‡ 10.å‘ä¸€ä¸ªç½‘ç»œè¯·æ±‚ç»è¿‡äº†å“ªäº›æ­¥éª¤ï¼Ÿæœ‰æ²¡æœ‰ç»Ÿè®¡å‘èµ·ç½‘ç»œè¯·æ±‚å’Œæ¥æ”¶ç½‘ç»œè¯·æ±‚çš„æ—¶é•¿ 11.ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ 12.å†·å¯åŠ¨å’Œçƒ­å¯åŠ¨æ€ä¹ˆåŒºåˆ†ï¼Ÿå†·å¯åŠ¨æ˜¯æŒ‡å…³æœºåé¦–æ¬¡æ‰“å¼€Appï¼Œçƒ­å¯åŠ¨æ˜¯æŒ‡æ‰“å¼€è¿‡Appæ€æ­»åå†æ‰“å¼€ã€‚ 13.ä»€ä¹ˆæ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼Ÿ 14.åˆå¹¶å¤šä¸ªæœ‰åºé“¾è¡¨ äºŒé¢1.ä»‹ç»å°è±¡æ·±åˆ»çš„é¡¹ç›®ï¼Œé‡åˆ°çš„é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³çš„ 2.webView ç™½å±é™¤äº†è¯ä¹¦é—®é¢˜è¿˜æœ‰ä»€ä¹ˆæƒ…å†µå¯èƒ½ä¼šå¯¼è‡´ã€‚ 3.è¯´ä¸€ä¸‹å¯¹ Flutter çš„äº†è§£ã€‚ 4.å¤šä¸ª widget ä¹‹é—´æ€ä¹ˆç›¸äº’ä¼ å€¼ï¼Œæ­£å‘åå‘ã€‚ 5.è¯´ä¸€ä¸‹å¯¹ iOS çš„ç†è§£ã€‚ 6.Runtime æ˜¯æ€ä¹ˆå®ç°åŠ¨æ€åŒ–çš„ï¼Œå…¶ä»–è¯­è¨€ä¹Ÿå†™ä¸€å¥—æ±‡ç¼–çš„é€»è¾‘èƒ½å®ç°åŠ¨æ€åŒ–å—ï¼Ÿ 7.RunLoop åº”ç”¨ï¼Œå¡é¡¿æ£€æµ‹ï¼Œrunloop çš„ activity ä¹‹å‰åˆ‡æ¢æ—¶é•¿å¤šå°‘ä½ è§‰å¾—æ˜¯å¡é¡¿ï¼Ÿrunloop å’Œå†…å­˜ä¹‹å‰çš„ç›¸å…³çŸ¥è¯†ï¼Œautoreleasepool 8.å†…å­˜ç®¡ç† 9.ç¼–è¯‘åçš„ç»“æ„æ·»åŠ ä¸äº†æˆå‘˜å˜é‡äº†ï¼Œå¦‚æœæƒ³æ·»åŠ ï¼Œæœ‰æ²¡æœ‰åŠæ³•å®ç°ï¼Ÿä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡åœ¨å†…å­˜ä¸­æ˜¯æ€ä¹ˆå­˜å‚¨çš„ï¼Ÿæ€ä¹ˆè¯»å–ä¸€ä¸ªæˆå‘˜å˜é‡ï¼Ÿæœ‰ä»€ä¹ˆè¦æ³¨æ„çš„ï¼Ÿç»™ NSNumber èµ‹å€¼ä¸€ä¸ª NSStringï¼Œæ­£ç¡®ä½¿ç”¨ NSString æ—¶ä¼šä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚ 10.ç»„ä»¶åŒ–ï¼Œè·¯ç”±æ¨¡å¼ï¼Œå¦‚æœä¸€ä¸ªç±»è¢«ä¿®æ”¹äº†ï¼Œä»–çš„æ˜ å°„å…³ç³»æ€ä¹ˆåŠæ—¶ç»´æŠ¤ï¼Ÿ 11.è¯´ä¸€ä¸‹ä½ äº†è§£çš„è®¾è®¡æ¨¡å¼ï¼Œè¯´ä¸€ä¸‹å·¥å‚æ¨¡å¼ 12.è®²ä¸€ä¸ªä½ æ¯”è¾ƒç†Ÿæ‚‰çš„æ¡†æ¶ 13.é¡¹ç›®å¼€å‘æµç¨‹ã€‚æœ‰å“ªäº›åœ°æ–¹å¯ä»¥æé«˜æ•ˆç‡ 14.é¡¹ç›®æ˜¯æ€ä¹ˆæ¶æ„çš„ 15.åè½¬å­—ç¬¦ä¸²ï¼Œç¬¬ä¸€æ¬¡åè½¬ä¸€ä¸ª ç¬¬äºŒæ¬¡åè½¬ä¸¤ä¸ª æœ€åä¸å¤Ÿçš„å…¨æ‹¿è¿‡æ¥ã€‚ ä¸‰é¢1.ä»‹ç»é¡¹ç›® 2.Flutter å¼€å‘é‡åˆ°çš„é—®é¢˜ 3.Vue å¼€å‘é‡åˆ°çš„é—®é¢˜ èµ‹å€¼éœ€è¦ç”¨setæ–¹æ³•çš„åŸå›  4.å­¦ä¹ ä¸€é—¨æ–°çŸ¥è¯†çš„é€”å¾„ 5.æœ‰æ²¡æœ‰çœ‹è¿‡ä¸€äº›æºç  6.ä»æ¡†æ¶ä¸­ä½ è§‰å¾—æœ‰ä»€ä¹ˆç‚¹å°è±¡æ·±åˆ»ï¼Œä»æ¡†æ¶ä¸­æœ‰æ²¡æœ‰ä»€ä¹ˆç‚¹åº”ç”¨åˆ°é¡¹ç›®é‡Œ 7.è§„åˆ’ è€ƒè™‘æ–°å…¬å¸çœ‹ä¸­å“ªäº›æ–¹é¢ï¼Œ 8.æ‰‹é‡Œæœ‰æ²¡æœ‰offer offerä¸Šçš„å…¥èŒæ—¶é—´ å…¶ä»–é—®é¡¹ç›®ä¸­é‡åˆ°è¿‡å•¥é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³çš„ã€‚å¹³æ—¶æ€ä¹ˆå­¦ä¹ ç›¸å…³çŸ¥è¯†çš„è¯´è¯´é¡¹ç›®ä¸­çš„äº®ç‚¹ï¼Œä½ åœ¨å¼€å‘ä¸­æ‹…ä»»çš„è§’è‰²ï¼Œä½ è´Ÿè´£çš„æ¨¡å—","link":"/è‡ªå¦‚é¢è¯•é¢˜/"},{"title":"è´§æ‹‰æ‹‰é¢è¯•é¢˜","text":"è´§æ‹‰æ‹‰é¢è¯•é¢˜ ä¸€é¢1.Vue ç”¨è¿‡å“ªäº›æŒ‡ä»¤ 2.v-model æœ‰æ²¡æœ‰é‡åˆ°è¿‡ä»€ä¹ˆé—®é¢˜ï¼Ÿæ•°ç»„é‡Œçš„å¯¹è±¡èµ‹å€¼å UI æœªæ›´æ–°ï¼Œéœ€è¦ä½¿ç”¨ set æ–¹æ³•çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ 3.Vue åŒå‘ç»‘å®šæ˜¯æ€ä¹ˆå®ç°çš„ 4.è¯´ä¸€ä¸‹ä½ å¯¹ Flutter çš„ç†è§£ï¼Œä½¿ç”¨è¿‡å“ªäº› Widget 5.Flutter é™¤äº†æ‹†åˆ†ç»„ä»¶è¿˜æœ‰ä»€ä¹ˆæ–¹æ³•èƒ½å¤Ÿä½¿ä»£ç ç»“æ„æ›´æ¸…æ™° 6.Flutter æœ‰æ²¡æœ‰è·ŸåŸç”Ÿäº¤äº’çš„éƒ¨åˆ†ï¼Œæœ‰æ²¡æœ‰æ¶‰åŠåŒå¼•æ“/å•å¼•æ“çš„é—®é¢˜ 7.Masonry å’Œ SnapKit çš„é€‰æ‹© 8.åšè¿‡å“ªäº›ä¼˜åŒ– 9.è¯´ä¸€ä¸‹è£…é¥°æ¨¡å¼ 10.å¯¹ MVVM çš„ç†è§£ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¼šé€‰æ‹© MVVM 11.å¤šçº¿ç¨‹çš„å‡ ç§å®ç°æ–¹æ³•å¦‚ä½•é€‰æ‹©ï¼Œé™¤äº†ä½¿ç”¨ dispatch_semaphoreï¼Œè¿˜æœ‰ä»€ä¹ˆæ›´å¥½ç”¨çš„æ–¹æ³•æ¥è§£å†³ç½‘ç»œè¯·æ±‚ä¾èµ–ï¼ŒåµŒå¥—åœ°ç‹±çš„é—®é¢˜ 12.Git çš„ä½¿ç”¨ï¼Œé¡¹ç›®é‡Œæœ‰å“ªäº›åˆ†æ”¯ äºŒé¢1.ä»‹ç»æœ€ç†Ÿæ‚‰çš„é¡¹ç›®ï¼Œé‡åˆ°çš„é—®é¢˜ 2.é¡¹ç›®æ¶æ„ 3.å¯åŠ¨è€—æ—¶ï¼Œå¯åŠ¨è¿‡ç¨‹ï¼Œå¯åŠ¨ä¼˜åŒ– 4.å®‰è£…åŒ…å¤§å°ä¼˜åŒ–ï¼Œä¼˜åŒ–åçš„å®‰è£…åŒ…å¤§å°æœ‰å¤šå¤§ 5.å›¾ç‰‡åŠ è½½ä¼˜åŒ– 6.æ€§èƒ½ä¼˜åŒ–ï¼Œå†…å­˜ã€CPU å³°å€¼å¤šå°‘ï¼Œä½¿ç”¨å“ªäº›å·¥å…·åˆ†ææ€§èƒ½ 7.é¡¹ç›®ç¨³å®šæ€§ crashç‡ï¼Œæœ‰å“ªäº›é—ªé€€çš„é—®é¢˜ 8.å¯¹è±¡çš„å†…å­˜ç»“æ„ 9.äº†è§£å“ªäº›è®¾è®¡æ¨¡å¼ 10.7å±‚/5å±‚ç½‘ç»œæ¨¡å‹ï¼ŒTCP/UDP åŒºåˆ«ï¼ŒTCP çš„è¿æ¥è¿‡ç¨‹ 11.Vue çš„ç”Ÿå‘½å‘¨æœŸ 12.ä»‹ç»ä¸€ä¸ªç†Ÿæ‚‰çš„æ’åºç®—æ³• 13.è®¾è®¡ä¸€ä¸ªä¸‹è½½æ–‡ä»¶çš„éœ€æ±‚ï¼ˆå¯èƒ½æ˜¯å¤šä¸ªæ–‡ä»¶ï¼Œå¯èƒ½ç”¨åˆ°çº¿ç¨‹æ± ï¼›è¾¹ä¸‹è½½è¾¹è¯»å–ï¼‰ ä¸‰é¢ï¼ˆHRï¼‰1.ä¸»è¦çš„å·¥ä½œï¼Œé‡åˆ°çš„æŒ‘æˆ˜ï¼Œæœ€æœ‰æˆå°±æ„Ÿçš„äº‹æƒ…ï¼Œä¸¾ä¸ªä¾‹å­ 2.ç®¡ç†çš„åšçš„å¥½çš„åœ°æ–¹ï¼Œæœ‰å¾…æ”¹è¿›çš„åœ°æ–¹ 3.å…¶ä»–å®¶çš„æœºä¼šåˆ°å“ªä¸ªé˜¶æ®µäº†ï¼Œå„ä¸ªå…¬å¸çš„æ¯”è¾ƒ 4.å¯¹è´§æ‹‰æ‹‰çš„æ„å‘é«˜å—ï¼Œå¯¹è´§æ‹‰æ‹‰çš„äº†è§£ 5.é€‰æ‹©ä¸€å®¶å…¬å¸æ¯”è¾ƒçœ‹é‡å“ªäº›","link":"/è´§æ‹‰æ‹‰é¢è¯•é¢˜/"},{"title":"è¾¾è¾¾é¢è¯•é¢˜","text":"è¾¾è¾¾é¢è¯•é¢˜ 1.æ·±æ‹·è´ã€æµ…æ‹·è´åŒºåˆ«ã€‚æ•°ç»„é‡Œæ”¾å¯¹è±¡ï¼Œcopy æ•°ç»„ï¼Œæ˜¯æ·±æ‹·è´è¿˜æ˜¯æµ…æ‹·è´ï¼Ÿæ•°ç»„é‡Œå¯¹è±¡çš„æŒ‡é’ˆæ˜¯ä¸€æ ·çš„å—ï¼Ÿ æµ…æ‹·è´ï¼šæŒ‡é’ˆæ‹·è´ï¼Œä¸ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚å¯¹æŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆæ‹·è´ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„æŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆã€‚ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚å¯¹è±¡çš„å¼•ç”¨è®¡æ•°+1ï¼› æ·±æ‹·è´ï¼šå†…å®¹æ‹·è´ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚æ·±æ‹·è´å°±æ˜¯æ‹·è´åœ°å€ä¸­çš„å†…å®¹ã€‚ æ·±æ‹·è´å’Œæµ…æ‹·è´çš„æœ¬è´¨æ˜¯å†…å­˜åœ°å€æ˜¯å¦ç›¸åŒã€‚ copy å¯å˜æ•°ç»„æ˜¯æ·±æ‹·è´ã€‚copy ä¸å¯å˜æ•°ç»„æ˜¯æµ…æ‹·è´ã€‚æ•°ç»„é‡Œå¯¹è±¡çš„æŒ‡é’ˆæ˜¯ä¸€æ ·çš„ã€‚ copy mutableCopy NSString NSString æµ…æ‹·è´ NSMutableString æ·±æ‹·è´ NSMutableString NSString æ·±æ‹·è´ NSMutableString æ·±æ‹·è´ NSArray NSArray æµ…æ‹·è´ NSMutableArray æ·±æ‹·è´ NSMutableArray NSArray æ·±æ‹·è´ NSMutableArray æ·±æ‹·è´ NSDictionary NSDictionary æµ…æ‹·è´ NSMutableDictionary æ·±æ‹·è´ NSMutableDictionary NSDictionary æ·±æ‹·è´ NSMutableDictionary æ·±æ‹·è´ 2.å¸ƒå±€ä½¿ç”¨ Masony è¿˜æ˜¯ Xib3.StatefulWidgetã€StatelessWidget åŒºåˆ« Widget æ˜¯éƒ¨åˆ†ç•Œé¢çš„ä¸å¯å˜çš„æè¿°ä¿¡æ¯ã€‚ StatelessWidget å’Œ StatefulWidget æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œä»–ä»¬çš„æ‰€æœ‰å±æ€§éƒ½æ˜¯ä¸å¯å˜çš„ã€‚å®ƒä»¬éƒ½æ²¡æ³•æ›´æ–°ï¼Œé™¤éç”¨ä¸€ä¸ªæ–°çš„ Widget å»æ›¿æ¢å®ƒä»¬ã€‚ StatefulWidget æ‹¥æœ‰ä¸€ä¸ªå¯å˜çš„ Stateã€‚ StatefulWidget å’Œ StatelessWidget çš„åŒºåˆ«åœ¨äºå¯å˜çš„ Stateã€‚æœ¬è´¨åŒºåˆ«æ˜¯èƒ½å¦è‡ªæˆ‘é‡æ–°æ„å»ºï¼ˆself rebuildï¼‰ã€‚ å‚è€ƒé“¾æ¥ï¼šç®€ä¹¦-StatelessWidgetå’ŒStatefulWidgetçš„åŒºåˆ« 4.UITableViewã€UICollectionView çš„è°ƒç”¨æµç¨‹åŒºåˆ«5.å¸¸ç”¨çš„ pod å‘½ä»¤pod init: åˆ›å»º Podfile æ–‡ä»¶ã€‚ pod installï¼šä¼šæ ¹æ® podfile.lock æ–‡ä»¶ä¸­æŒ‡å®šçš„ pod ä¾èµ–åº“çš„ç‰ˆæœ¬å»æ‹‰å»é¡¹ç›®çš„ pod ä¾èµ–åº“ã€‚ pod install --no-repo-update: åä½œå¼€å‘æ—¶ä½¿ç”¨æ­¤å‘½ä»¤å¯ä»¥æ ¹æ® podfile.lock æ–‡ä»¶é™åˆ¶ç¬¬ä¸‰æ–¹åº“çš„ç‰ˆæœ¬ã€‚ pod updateï¼šè¿™ä¸ªå‘½ä»¤ä¼šæ£€æŸ¥ podfile.lock æ–‡ä»¶ä¸­çš„ pod ä¾èµ–åº“çš„ç‰ˆæœ¬ï¼Œå¹¶è¿›è¡Œæ›´æ–°ï¼Œä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ª podfile.lock æ–‡ä»¶ã€‚ pod repo add NAME URL[branch] ï¼šæ·»åŠ  pod æºã€‚ pod searchï¼šæœç´¢å¯ä»¥ä½¿ç”¨çš„ pod ä¾èµ–åº“ã€‚ pod listï¼šåˆ—å‡ºæ‰€æœ‰é¡¹ç›®ä¾èµ–ä»“åº“ä¸­çš„ pod ä¾èµ–åº“ã€‚ pod repoï¼šç”¨æ¥ç®¡ç† pod ä¾èµ–ä»“åº“çš„åœ°å€ã€‚ pod specï¼šç®¡ç† pod è§„èŒƒã€‚ pod envï¼šæ¥æ‰“å°å‡º pod çš„ç¯å¢ƒï¼Œä¸€èˆ¬æ˜¯ podfile æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚ pod cacheï¼šç®¡ç† cocoapod çš„ç¼“å­˜ï¼šå¯ä»¥ç”¨æ¥æ¸…ç©ºå†…å­˜ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æŸ¥çœ‹æ¯ä¸ª pod åº“çš„ç¼“å­˜ã€‚ åˆ¶ä½œç§æœ‰åº“ä½¿ç”¨ pod lib create [ä»“åº“å]ï¼šåœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªåŸºäº pod æ¨¡æ¿çš„ git ä»“åº“ã€‚ pod lib lintï¼špod æœ¬åœ°åº“éªŒè¯ï¼ŒéªŒè¯ .podspec æ–‡ä»¶æ˜¯å¦æœ‰é”™ã€‚ pod repo add NAME URL[branch]ï¼šæ·»åŠ è‡ªå·±çš„ pod ä»“åº“ã€‚ pod spec lintï¼špod è¿œç¨‹åº“éªŒè¯ã€‚ pod repo add xxx https://gitxxxx ï¼šæ”¾ç½® spec æ–‡ä»¶çš„ git ä»“åº“åœ°å€ï¼Œç»™è‡ªå·±æ·»åŠ ç§æœ‰ä»“åº“ã€‚ pod repo push ç´¢å¼•åº“å podspecæ–‡ä»¶åï¼šå‘½ä»¤æ‰§è¡Œä¼šå…ˆå°† pod ç´¢å¼•æ·»åŠ åˆ°æœ¬åœ°çš„ç´¢å¼•åº“ï¼Œç„¶åä¼šè‡ªåŠ¨æ¨é€åˆ°è¿œç¨‹çš„ç´¢å¼•åº“ã€‚ 1234567891011121314151617181920Commands: + cache Manipulate the CocoaPods cache + deintegrate Deintegrate CocoaPods from your project + env Display pod environment + init Generate a Podfile for the current directory + install Install project dependencies according to versions from a Podfile.lock + ipc Inter-process communication + lib Develop pods + list List pods + outdated Show outdated project dependencies + plugins Show available CocoaPods plugins + repo Manage spec-repositories + search Search for pods + setup Setup the CocoaPods environment + spec Manage pod specs + trunk Interact with the CocoaPods API (e.g. publishing new specs) + try Try a Pod! + update Update outdated project dependencies and create new Podfile.lock 6.å›¾æ–‡æ··æ’æœ‰æ²¡æœ‰åšè¿‡ï¼Œæœ‰æ²¡æœ‰å†…å­˜ã€æ€§èƒ½é—®é¢˜å‚è€ƒé“¾æ¥ï¼šç®€ä¹¦-iOSå¼€å‘ä¹‹å¯Œæ–‡æœ¬(å›¾æ–‡æ··æ’) 7.å†™è¿‡å“ªäº›è„šæœ¬ï¼Œæœ‰æ²¡æœ‰å†™è¿‡å‡½æ•°ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œçš„å‡½æ•°ã€‚buglyã€Fastlaneã€åˆ‡æ¢ SDK é…ç½®æ–‡ä»¶ å‚è€ƒé“¾æ¥ï¼šèœé¸Ÿæ•™ç¨‹- Shell æ•™ç¨‹ 8.é—ªé€€æ•è·ï¼ŒFlutter é”™è¯¯æ•è·1234567891011121314151617181920212223void main() { // Flutter framework å¼‚å¸¸æ•è· FlutterError.onError = (FlutterErrorDetails details) { bool isDebugMode = false; assert(() { isDebugMode = true; return true; }()); if (isDebugMode) { FlutterError.dumpErrorToConsole(details); } else { //profile,releaseä¸¤ä¸ªæ¨¡å¼ä¸‹ä¸‹æ•æ‰å¼‚å¸¸ä¿¡æ¯ reportFrameworkError(details); } }; // å…¶ä»–ç±»å‹å¼‚å¸¸ runZoned( () =&gt; runAutoSizeApp(MyApp(), width: 375, height: 667), onError: (dynamic ex, StackTrace stack) { reportError(ex, stack); }, ); } å‚è€ƒé“¾æ¥ï¼šFlutterå¼‚å¸¸æ•æ‰åŸç†å’Œå¼‚å¸¸ä¸ŠæŠ¥ 9.åŸ‹ç‚¹æ˜¯æ€ä¹ˆåšçš„ï¼Ÿé¡µé¢ä¸Šçš„æŸä¸€ä¸ª view çš„åœç•™æ—¶é•¿æ€ä¹ˆç»Ÿè®¡ï¼Ÿ10.æ€§èƒ½ä¼˜åŒ–ã€å›¾ç‰‡åŠ è½½ä¼˜åŒ–ã€å®‰è£…åŒ…å¤§å°ä¼˜åŒ–åšäº†å•¥ï¼Œæ²¡ç”¨åˆ°çš„ä»£ç æˆ–å›¾ç‰‡æœ‰å†™è„šæœ¬æ¥æ£€æŸ¥å—ï¼Ÿ æœªä½¿ç”¨çš„ä»£ç å¯ä»¥ç”¨ AppCode æ¥æ£€æµ‹ã€‚ æœªä½¿ç”¨çš„å›¾ç‰‡å¯ä»¥ç”¨ LSUnusedResources æ¥æ£€æµ‹ã€‚ 12.ç•Œé¢æ¸²æŸ“æµç¨‹ã€UIView æ¸²æŸ“æµç¨‹ï¼Œæœ‰æ²¡æœ‰åšè¿‡å¼‚æ­¥ç»˜åˆ¶ï¼Ÿ 13.è§£å†³é‡åˆ°çš„çº¿ç¨‹é—®é¢˜æè¿°ä¸€ä¸‹ï¼Œåœ¨å­çº¿ç¨‹åˆ·æ–° UI ä¼šæ€ä¹ˆæ ·ï¼Ÿ14.æœ‰æ²¡æœ‰åšè¿‡ç»„ä»¶æ¨¡å—åŒ–ï¼Ÿ","link":"/è¾¾è¾¾é¢è¯•é¢˜/"},{"title":"é“¾è¡¨ç®—æ³•é¢˜","text":"é“¾è¡¨ç®—æ³•é¢˜ï¼ˆ JavaScript å®ç°ï¼‰ åè½¬é“¾è¡¨123456789101112function reverseList(pHead){ let prev = null; let curr = pHead; while (curr) { const next = curr.next; curr.next = prev; prev = curr; curr = next; } return prev;} ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹1234567891011121314var swapPairs = function(head) { let dummyNode = new ListNode(0); dummyNode.next = head; let temp = dummyNode; while (temp.next != null &amp;&amp; temp.next.next != null) { let head1 = temp.next; let head2 = temp.next.next; temp.next = head2; head1.next = head2.next; head2.next = head1; temp = head1; } return dummyNode.next;}; åˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯123456789101112131415function hasCycle( head ) { if (head == null) { return false; } let slow = head; let fast = head; while (fast.next &amp;&amp; fast.next.next) { slow = slow.next; fast = fast.next.next; if (slow == fast) { return true; } } return false;} ç¯çš„å…¥å£ç»“ç‚¹1234567891011121314151617function detectCycle( head ) { if (!head) return null; let slow = head, fast = head; while(fast.next &amp;&amp; fast.next.next) { fast = fast.next.next slow = slow.next if (slow == fast) { var a = head; while (slow != a) { a = a.next slow = slow.next } return a; } } return null;} é“¾è¡¨ä¸­å€’æ•°ç¬¬ k ä¸ªç»“ç‚¹1234567891011121314151617181920212223function FindKthToTail( pHead , k ) { let length = getLength(pHead); if (length &lt; k) { return null; } let i = length - k; let p = pHead; while (i &gt; 0) { p = p.next; i--; } return p;}var getLength = function( pHead ) { let p = pHead; let length = 0; while (p != null) { p = p.next; length++; } return length;} åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹1234567891011121314151617181920212223242526function removeNthFromEnd( head , n ) { let length = getLength(head); if (length &lt; n) { return null; } let i = length - n; let dummy = new ListNode(0); dummy.next = head; let p = dummy; while (i &gt; 0) { p = p.next; i--; } p.next = p.next.next; return dummy.next;}var getLength = function ( head ) { let length = 0; let p = head; while (p != null) { p = p.next; length ++; } return length;} åˆ é™¤æœ‰åºé“¾è¡¨ä¸­é‡å¤çš„å…ƒç´ 1234567891011function deleteDuplicates( head ) { let p = head; while (p != null &amp;&amp; p.next != null) { if (p.val == p.next.val) { p.next = p.next.next; } else { p = p.next; } } return head;} äº¤å‰é“¾è¡¨æ‰¾äº¤ç‚¹123456789101112function FindFirstCommonNode(pHead1, pHead2){ if (pHead1 == null || pHead2 == null) { return null; } let p1 = pHead1, p2 = pHead2; while (p1 != p2) { p1 = p1 == null ? pHead2 : p1.next; p2 = p2 == null ? pHead1 : p2.next; } return p1;} åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨123456789101112131415161718192021function mergeTwoLists( l1 , l2 ) { let newHead = new ListNode(-1); let p = newHead; while(l1 != null &amp;&amp; l2 != null) { if (l1.val &lt; l2.val) { p.next = l1; l1 = l1.next; } else { p.next = l2; l2 = l2.next; } p = p.next; } if (l1 != null) { p.next = l1; } if (l2 != null) { p.next = l2; }; return newHead.next;}","link":"/é“¾è¡¨ç®—æ³•é¢˜/"},{"title":"é—²å¾•äº’å¨±é¢è¯•é¢˜","text":"é—²å¾•äº’å¨±é¢è¯•é¢˜ 1.ViewController çš„ç”Ÿå‘½å‘¨æœŸ ä»æ§åˆ¶å™¨ A è·³è½¬åˆ° B ä¸¤ä¸ªæ§åˆ¶å™¨é‡Œæ–¹æ³•çš„è°ƒç”¨é¡ºåº loadView viewDidLoad viewWillAppear viewDidAppear viewWillDisappear viewDidDisappear 2.MVC å…·ä½“æµç¨‹ 3.GCD å“ªäº›åœ°æ–¹ç”¨åˆ°äº†ï¼Ÿ 4.webView ä¸ JS äº¤äº’ï¼Œæ˜¯å“ªä¸ªä»£ç†æ–¹æ³•ï¼Ÿ 5.NSTimer åˆ›å»ºæ–¹æ³•é‡Œæœ‰å“ªäº›å‚æ•°ï¼Ÿé‡Œè¾¹çš„ self æ˜¯å¼ºå¼•ç”¨è¿˜æ˜¯å¼±å¼•ç”¨ï¼Ÿæ€ä¹ˆé¿å…å¾ªç¯å¼•ç”¨ï¼Ÿ 6.Notification æ³¨å†Œé€šçŸ¥æ–¹æ³•é‡Œæœ‰å“ªäº›å‚æ•°ï¼Ÿé‡Œè¾¹ä¼ å…¥çš„ self æ˜¯å¼ºå¼•ç”¨è¿˜æ˜¯å¼±å¼•ç”¨ï¼Ÿæ€ä¹ˆä½¿ç”¨çš„é€šçŸ¥ï¼Ÿï¼ˆæ³¨å†Œã€é”€æ¯ã€å‘é€åœ¨å“ªé‡Œå†™çš„ï¼‰ 7.æ•°æ®æŒä¹…åŒ–ä½ éƒ½å“ªäº›åœ°æ–¹ç”¨äº†ï¼Ÿ 8.UserDefaults ä¸­å­˜äº†ä»€ä¹ˆä¸œè¥¿ï¼Ÿ 9.Runtime åº•å±‚çœ‹è¿‡æ²¡æœ‰ï¼Ÿisa æŒ‡å‘å“ªé‡Œï¼Ÿæ¯”å¦‚ NSString è¿™ä¸ªå¯¹è±¡çš„ isa æŒ‡é’ˆæŒ‡å‘å“ªé‡Œï¼Ÿ 10.Runtime ä½ ç”¨åˆ°è¿‡çš„åœ°æ–¹æˆ–è€…ä½ çŸ¥é“çš„å“ªäº›ç¬¬ä¸‰æ–¹åº“ç”¨åˆ°äº†ï¼Œæ€ä¹ˆç”¨çš„ï¼Ÿjson è½¬Model æ€ä¹ˆç”¨çš„ runtimeï¼Ÿ 11.RunLoop ä½ åœ¨å“ªå„¿ç”¨çš„ï¼ŸRunLoop ä¸çº¿ç¨‹çš„å…³ç³»ã€‚ 12.SDWebImage ä½ ç”¨è¿‡å“ªäº›åŠŸèƒ½ï¼Ÿ 13.Instruments ä½ ç”¨è¿‡å“ªäº›åŠŸèƒ½ï¼Ÿ 14.æŸä¸ªé¡µé¢ä½ æ˜¯æ€ä¹ˆå¸ƒå±€çš„ï¼Ÿï¼ˆç›´æ’­é¦–é¡µï¼‰","link":"/é—²å¾•äº’å¨±é¢è¯•é¢˜/"},{"title":"é›·ç¥ç½‘ç»œ","text":"é›·ç¥ç½‘ç»œ 1.Runtime çš„æµç¨‹ï¼Œå®é™…é¡¹ç›®ä¸­ä½¿ç”¨ 2.IM é«˜å¹¶å‘æ—¶æ€ä¹ˆé¿å…å¡é¡¿ï¼Ÿå¡é¡¿ä¸å³æ—¶æ€§ï¼Œå‡ åƒæ¡æ¶ˆæ¯ æ‰¹é‡åˆ·æ–°ï¼Œå¯ä»¥è®¾ç½®ç§¯ç´¯å‡ æ¡æ¶ˆæ¯ååˆ·æ–°ï¼Œæˆ–å¤šé•¿æ—¶é—´æ²¡æœ‰æ¶ˆæ¯æ—¶åˆ·æ–°ï¼› ç”¨æˆ·æ»‘åŠ¨æ—¶ä¸åˆ·æ–° 3.è®¾è®¡ SDK æ€ä¹ˆè€ƒè™‘å®‰å…¨æ€§ï¼Œä¸å®¹æ˜“å´©æºƒã€æ‰©å±•æ€§ï¼Ÿ åˆ†å±‚ã€å†™ä»£ç ç”¨å®‰å…¨æ–¹æ³•ã€å¼€é—­åŸåˆ™ã€å°½å¯èƒ½å°‘çš„æš´æ¼éå¿…è¦çš„å±æ€§ 4.é¸¿è’™å’ŒåŸç”Ÿå¼€å‘æ•ˆç‡çš„æ¯”è¾ƒ 5.AIææ•ˆåšäº†å“ªäº› é¡¹ç›®ï¼š 1.SDK æ„å»ºæ—¶é•¿ä¸ºä»€ä¹ˆé‚£ä¹ˆé•¿ï¼Ÿ 2.ç™¾åº¦æ–‡åº“çš„æ¶æ„ï¼Œæ€ä¹ˆé›†æˆçš„å°ç¨‹åºï¼Ÿ 3.ç™¾åº¦å°ç¨‹åºè·¨åŸŸæ€ä¹ˆè§£å†³çš„ï¼Ÿ 4.å°ç¨‹åºã€H5 åŒå‘é€šä¿¡æ–¹æ³•å°ç¨‹åºæä¾›æœ‰ï¼Œä½ åšçš„æ˜¯ï¼Ÿ 5.ç¨³å®šæ€§ï¼Œå´©æºƒã€å¡é¡¿æ£€æµ‹","link":"/é›·ç¥ç½‘ç»œ/"},{"title":"é©¬ä¸Šæ¶ˆè´¹é‡‘è","text":"é©¬ä¸Šæ¶ˆè´¹é‡‘è ä¸€é¢ï¼š é¡¹ç›®ï¼š 1.ç»„ä»¶åŒ–ï¼Œç±»ä¼¼ CTMediator ï¼Ÿå¹³çº§ç»„ä»¶ A å’Œ Bï¼ŒProtocol æ˜¯å†™Aé‡Œè¿˜æ˜¯Bé‡Œï¼Ÿæ€ä¹ˆçŸ¥é“å¯¹å¤–çš„API 2.è·¯ç”±ç¡¬ç¼–ç ï¼Ÿ 3.SDK ä½“ç§¯ä¼˜åŒ–ï¼Œå›¾ç‰‡å å¤§å¤´å—ï¼Ÿæ„å»ºæ—¶é•¿ä¸ºä»€ä¹ˆé‚£ä¹ˆé•¿ï¼Ÿ 4.ç§æœ‰æ–¹æ³•è°ƒç”¨å…¶å®æš´æ¼å‡ºæ¥æ–¹æ³•å°±èƒ½è§£å†³å§ï¼Ÿ 5.MVCSã€MVCã€MVVM çš„å…±æ€§å’ŒåŒºåˆ«ï¼›SectionProvider æ‹†åˆ† TableViewï¼ŒCell æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™æ³¨å†Œçš„ï¼Ÿæ€ä¹ˆè‡ªæ³¨å†Œï¼Ÿåœ¨å¤ç”¨çš„æ—¶å€™åˆ¤æ–­æ˜¯å¦æœ‰ï¼Œç”¨NSDictionaryå­˜ï¼Œæ²¡æœ‰åˆ™åˆ›å»ºã€‚ 6.é¸¿è’™å¼€å‘æ˜¯ä»€ä¹ˆæ°´å¹³ï¼Ÿ 7.éšç‰ˆ-&gt;ééšæ€ä¹ˆåšçš„ï¼Ÿ 8.æŠ½è±¡æ‰‹ç™¾èƒ½åŠ›ï¼Œæœ‰ç‚¹ç±»ä¼¼ä¾èµ–æ³¨å…¥ï¼Ÿ 9.æ¥å£ç²¾ç®€å­—æ®µæ€ä¹ˆä¿è¯å†å²ç‰ˆæœ¬æ²¡é—®é¢˜ï¼Ÿ 10.æ´»åŠ¨é¡µç»„ä»¶åŒ–æ˜¯ç±»ä¼¼ DSL å—ï¼Ÿæœ‰ä¸‹å‘æ ·å¼å—ï¼Ÿ 11.H5 æ€ä¹ˆæå‡è®¿é—®é€Ÿåº¦ï¼Ÿ 12.H5ã€å°ç¨‹åºåŒå‘é€šä¿¡æ–¹æ³•åšäº†å•¥ï¼Ÿ 13.æ¥å£å±‚ã€JS ç›‘æ§ï¼›é‡åˆ°å †æ ˆä¸æ¸…æ™°çš„æ€ä¹ˆå¤„ç†ï¼Ÿ 14.æŠ½ç¦»å…¬å…±ç»„ä»¶éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ åŸºç¡€çŸ¥è¯†ï¼š 1.URL çš„ç»„æˆï¼Œ#çš„ä½œç”¨ 1https://user:pass@www.example.com:8080/path/page.html?id=10&amp;sort=asc#content åè®®ï¼šhttps ç”¨æˆ·ä¿¡æ¯ï¼šuser:pass ä¸»æœºï¼šwww.example.com ç«¯å£ï¼š8080 è·¯å¾„ï¼š/path/page.html æŸ¥è¯¢å‚æ•°ï¼šid=10&amp;sort=asc ç‰‡æ®µï¼šcontent ç”¨ # å¼•å…¥ï¼Œé€šå¸¸ç”¨äºå®šä½é¡µé¢å†…éƒ¨çš„ä½ç½®ï¼ˆä¸ä¼šå‘é€åˆ°æœåŠ¡å™¨ï¼Œåªåœ¨æµè§ˆå™¨ç«¯è§£æï¼‰ 2.AFN post è¯·æ±‚æ€ä¹ˆä¿®æ”¹ body æ ¼å¼ 3.autoreleasepoolã€Runloop ä»€ä¹ˆæ—¶å€™é‡Šæ”¾ ç®—æ³•ï¼šæ‹¬å·åŒ¹é…å£è¿°ï¼Œå¦‚æœæ ˆæå‰ä¸ºç©ºï¼Œç¬¦åˆå—ï¼Ÿ æ ˆæå‰ä¸ºç©ºï¼Œé€šå¸¸æ„å‘³ç€å­—ç¬¦ä¸²é‡Œå‡ºç°äº†å¤šä½™çš„å³æ‹¬å· åœ¨ â€œ())â€ é‡Œï¼Œå‰ä¸¤ä¸ª () åŒ¹é…æ²¡é—®é¢˜ï¼Œä½†å½“é‡åˆ°ç¬¬ä¸‰ä¸ª ) æ—¶ï¼Œæ ˆå·²ç»ç©ºäº† â†’ æ²¡æœ‰å¯¹åº”çš„å·¦æ‹¬å· â†’ ä¸åˆæ³•ã€‚ åœ¨ â€œ)(â€œ é‡Œï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯å³æ‹¬å·ï¼Œæ ˆä¸€å¼€å§‹å°±ç©º â†’ ä¸åˆæ³•ã€‚ åªæœ‰åœ¨æ•´ä¸ªéå†ç»“æŸåï¼Œæ ˆä¸ºç©ºï¼Œæ‰è¯´æ˜æ‹¬å·å®Œå…¨åŒ¹é…ã€‚ äºŒé¢ï¼š é¡¹ç›® 1.ç»„ä»¶é—´é€šä¿¡ 2.SDK æ„å»ºæ—¶é•¿ä¸ºå•¥é‚£ä¹ˆä¹…ï¼Ÿç»„ä»¶åŒ–åº”è¯¥æ€ä¹ˆç»†åˆ† 3.åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼Œç¼“å­˜çš„ç­–ç•¥ 4.æ´»åŠ¨é¡µç»„ä»¶åŒ–åº”è¯¥æ˜¯æ¨¡å—åŒ–å§ 5.é¸¿è’™ä¸ºä»€ä¹ˆ iOS æ¥å¼€å‘ï¼Œå®‰å“æ›´æ¥è¿‘å§","link":"/é©¬ä¸Šæ¶ˆè´¹é‡‘è/"},{"title":"é¦–æ±½çº¦è½¦","text":"é¦–æ±½çº¦è½¦ 1.ç»„ä»¶åŒ– 2.å¤šçº¿ç¨‹ï¼Œé‡åˆ°å“ªäº›é—®é¢˜ï¼›ä¸€ä¸ªé¡µé¢8ä¸ªè¯·æ±‚ï¼Œéœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿæ•°æ®è¯»å†™å®‰å…¨ 3.tableView æµç•…æ€§ 4.ç”¨è¿‡ RACã€RxSwift å—ï¼Ÿ 5.ç”¨åœ°å›¾å¤šå—ï¼Ÿ","link":"/é¦–æ±½çº¦è½¦/"},{"title":"é¦–æ±½ç§Ÿè½¦é¢è¯•é¢˜","text":"é¦–æ±½ç§Ÿè½¦é¢è¯•é¢˜ 1.ä»€ä¹ˆæ˜¯é‡æŒ‡é’ˆï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹ä¼šé‡æŒ‡é’ˆï¼Ÿ 2.æ‰“å°ç»“æœï¼š 12345678- (void)testWeak { id obj1 = @\"12131\"; __weak id obj2 = obj1; id obj3 = [NSObject new]; __weak id obj4 = [[NSObject alloc] init]; NSLog(@\"obj1:%@ obj2:%@ obj3:%@ obj4:%@\",obj1,obj2,obj3,obj4);} 3.å­ç±»æ€ä¹ˆé‡å†™çˆ¶ç±»çš„å±æ€§ï¼Ÿé—®é¢˜ç®€åŒ–æ€ä¹ˆé‡å†™ä¸€ä¸ªç±»çš„å±æ€§ï¼Ÿåªé‡å†™setæ–¹æ³•å¯ä»¥å—ï¼Ÿ 4.äº†è§£å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿå•ä¾‹æœ‰å“ªäº›ä¸å¥½çš„åœ°æ–¹ï¼Ÿ 5.è¯´ä¸€ä¸‹å“åº”è€…é“¾ 6.Masonry é“¾å¼è°ƒç”¨çš„å®ç°ï¼Œå®ç°ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œå±æ€§çš„é“¾å¼è°ƒç”¨ï¼ˆæ‰‹å†™ï¼‰ 7.æ‰“å°ç»“æœï¼š 12345678910111213141516- (void)testGCD { dispatch_queue_t queue = dispatch_queue_create(\"testqueue\", DISPATCH_QUEUE_SERIAL); dispatch_async(queue, ^{ NSLog(@\"1\"); dispatch_async(queue, ^{ NSLog(@\"2\"); dispatch_sync(queue, ^{ NSLog(@\"3\"); }); NSLog(@\"4\"); }); NSLog(@\"5\"); });} 8.é¡¹ç›®äº®ç‚¹æˆ–éš¾ç‚¹","link":"/é¦–æ±½ç§Ÿè½¦é¢è¯•é¢˜/"},{"title":"é«˜æ€æ•™è‚²ç¬”è¯•é¢˜","text":"é«˜æ€æ•™è‚²ç¬”è¯•é¢˜ ç¬”è¯•é¢˜ï¼ˆéƒ¨åˆ†ï¼‰3.ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ 1234567int a = 0;void (^foo)(void) = ^{ a = 1; NSLog(@\"inner a=%d\",a);};foo();NSLog(@\"outer a=%@\",a); 4.ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ 123456789- (void)viewDidLoad{ [super viewDidLoad]; NSLog(@\"1\"); dispatch_sync(dispatch_get_main_queue(),^{ NSLog(@\"2\"); }); NSLog(@\"3\");} 5.ä»€ä¹ˆæƒ…å†µä½¿ç”¨ weak å…³é”®å­—ï¼Œç›¸æ¯” assign æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ 6.@property ä¸­æœ‰å“ªäº›å±æ€§å…³é”®å­—ï¼Ÿ/ @property åé¢å¯ä»¥æœ‰å“ªäº›ä¿®é¥°ç¬¦ï¼Ÿ 7.@synthesize å’Œ @dynamic åˆ†åˆ«æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ 8.ä»€ä¹ˆæ—¶å€™ä¼šæŠ¥ unrecognized selector çš„å¼‚å¸¸ï¼Ÿ 9.èƒ½å¦æƒ³ç¼–è¯‘åå¾—åˆ°çš„ç±»ä¸­å¢åŠ å®ä¾‹å˜é‡ï¼Ÿèƒ½å¦å‘è¿è¡Œæ—¶åˆ›å»ºçš„ç±»ä¸­æ·»åŠ å®ä¾‹å˜é‡ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ 10.å¦‚ä½•ç”¨ GCD åŒæ­¥è‹¥å¹²å¼‚æ­¥è°ƒç”¨ï¼Ÿdispatch_barrier_async çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ 11.å¦‚ä½•æ‰‹åŠ¨è§¦å‘ä¸€ä¸ª value çš„ KVO 12.Native çš„ Webï¼ˆWK/UIï¼‰æ§ä»¶å’Œ js çš„äº¤äº’æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿï¼ˆnativejsï¼‰ 13.JavaScriptCore æ¡†æ¶ä¸­ï¼Œnative å¦‚ä½•è°ƒç”¨ jsï¼Ÿåä¹‹ï¼Œjså¦‚ä½•è°ƒç”¨nativeï¼Ÿ 14.æœ‰é˜…è¯» Weexã€ReactNative æˆ–è€… Cordova æ¡†æ¶çš„æè¿°å…¶ä¸€å³å¯ã€‚","link":"/é«˜æ€æ•™è‚²ç¬”è¯•é¢˜/"},{"title":"é«˜æ€æ•™è‚²é¢è¯•é¢˜","text":"é«˜æ€æ•™è‚²é¢è¯•é¢˜ ç¬”è¯•é¢˜ç¬”è¯•é¢˜ ä¸€é¢1ã€@property æœ¬è´¨æ˜¯ä»€ä¹ˆï¼ŸNSString ä¸ºä»€ä¹ˆç”¨ Copyï¼Œç”¨ Strong è¡Œä¸è¡Œï¼Ÿ 2ã€block ä¸ºä»€ä¹ˆç”¨ copy ï¼Ÿ 3ã€block å’Œä»£ç†ä½ ç”¨çš„å“ªä¸ªå¤šï¼Ÿå„æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ 4ã€GCD çš„ä¸¤ä¸ªé˜Ÿåˆ—ï¼ˆä¸²è¡Œã€å¹¶è¡Œï¼‰æœ‰äº†è§£å—ï¼Ÿä»å­—é¢æ„æ€çœ‹ï¼Œä½ è§‰å¾—è¿™ä¿©å“ªä¸ªæ•ˆç‡é«˜ï¼Œå“ªä¸ªå ç©ºé—´ 5ã€ç±»ä¼¼ç½‘æ˜“æ–°é—»é‚£ç§æ»‘åŠ¨åˆ‡æ¢é¡µé¢ä½ æ˜¯æ€ä¹ˆåšçš„ï¼Ÿæˆ‘è¯´æ˜¯ä¸€ä¸ª scrollViewï¼Œç‚¹å‡»æŒ‰é’®åæ»šåŠ¨åˆ°æŒ‡å®šçš„ indexã€‚ä»–è¯´çš„é¡¶éƒ¨æŒ‰é’®æ˜¯3ä¸ªï¼Œå¦‚æœæ˜¯30ä¸ªå‘¢ï¼Œä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿä»–è¯´å¦‚æœ1ä¸ªé¡µé¢å ç”¨5Mï¼Œ30ä¸ªé¡µé¢å°±å ç”¨5x30Mï¼Œä¼šæœ‰å†…å­˜é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿæˆ‘è¯´çœ‹è¿‡åˆ«äººå†™çš„ï¼Œç”¨çš„æ˜¯å­æ§åˆ¶å™¨ï¼ŒæŠŠè¿™äº›é¡µé¢åŠ åˆ°å½“å‰æ§åˆ¶å™¨çš„å­æ§åˆ¶å™¨ä¸­ã€‚ï¼ˆç°åœ¨æƒ³æƒ³æˆ‘ä¹Ÿæ˜¯è¿™ä¹ˆåšçš„ã€‚ã€‚ä½†æ˜¯æ²¡è¯´æ˜¯è¿™ä¹ˆåšï¼‰ 6ã€AFNå†…éƒ¨çœ‹è¿‡å—ï¼ŸAFNçš„5ä¸ªæ¨¡å—ã€‚ å¤§æ¦‚è¿™æ—¶å€™é—®ï¼Œä½ è§‰å¾—è‡ªå·±æ˜¯ä»€ä¹ˆçº§åˆ«çš„ï¼Ÿ 7ã€è¯´ä¸€ä¸‹å“åº”è€…é“¾ã€‚ 8ã€ä¸€ä¸ªçº¦æŸé¢˜ã€‚ 9ã€é¡¹ç›®ä¸å¿™çš„æ—¶å€™åšè¿‡ä»€ä¹ˆä¼˜åŒ–ï¼Ÿä»–è¯´å‘ç°è¿‡ä»€ä¹ˆé—®é¢˜ï¼Ÿä»–è¯´é‚£è€ƒè™‘ç”¨ä»€ä¹ˆæ›¿æ¢å®šæ—¶å™¨å‘¢ï¼Ÿ è¿˜åšè¿‡ä»€ä¹ˆä¼˜åŒ–ï¼Ÿ 10ã€é‡æŒ‡é’ˆæ˜¯å•¥ï¼Ÿå¦‚æœåˆæœ‰å…¶ä»–æŒ‡é’ˆæŒ‡å‘äº†è¿™å—å†…å­˜ï¼Œä¼šæ€ä¹ˆæ · 12ã€æ–æ³¢é‚£åˆ‡æ•°åˆ— 0 1 2 3 4 5â€¦ 1 1 2 3 5 8 13 21 æ±‚n f(n) = f(n-1) + f(n-2) å¤è¯•1ã€æ€ä¹ˆå­¦çš„ iOS ï¼Ÿä¸ºä»€ä¹ˆæ²¡æ Java 2ã€ä»‹ç»å…¬å¸æƒ…å†µï¼Œäººå‘˜è§„æ¨¡ï¼Œä»‹ç»é¡¹ç›® 3ã€è¯´ä¸€ä¸‹é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³çš„ï¼Ÿ 4ã€è¯´ä¸€ä¸‹å†…å­˜ç®¡ç†ï¼Œæ€ä¹ˆæ£€æµ‹å†…å­˜æ³„æ¼çš„ï¼Ÿ 5ã€ä½ ç”¨ OC å¼€å‘è¿˜æ˜¯ Swift ï¼Ÿä½ è§‰å¾—ä¸¤è€…æœ‰å•¥ä¸åŒï¼Ÿ 6ã€é‡‘è App åº”è¯¥æœ‰ä¸€äº›å®‰å…¨æªæ–½å§ï¼Ÿä½ ä»¬æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ 7ã€TCP å’Œ UDP æœ‰å•¥åŒºåˆ«ï¼Ÿ 8ã€TCP å‡ æ¬¡æ¡æ‰‹ï¼Ÿè¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ 9ã€Post è¯·æ±‚å’Œ Get è¯·æ±‚æœ‰å•¥åŒºåˆ«ï¼Ÿ 10ã€æ•°æ®æŒä¹…åŒ–éƒ½æœ‰å“ªäº›ï¼Ÿ 11ã€AFN çš„å®ç°åŸç†ï¼ŸSDWebImage çš„å®ç°åŸç†ï¼Ÿå“ªäº›å­˜åœ¨å†…å­˜ï¼Œå“ªäº›å­˜åœ¨ç£ç›˜ï¼Ÿ 12ã€ä¸¤ä¸ªç½‘ç»œè¯·æ±‚æœ‰ä¾èµ–å…³ç³»æ—¶ï¼Œæ€ä¹ˆå¤„ç†çš„ï¼Ÿ 13ã€åŒæ­¥ã€å¼‚æ­¥ ä¸²è¡Œã€å¹¶è¡Œ 14ã€å‡ å¼ å›¾åˆæˆä¸€å¼ å›¾ 15ã€è¯´ä¸€ä¸‹ Runloop 16ã€KVO çš„å®ç°åŸç† 17ã€ä¸ä½¿ç”¨ä¸­é—´å˜é‡ å®ç°äº¤æ¢ä¸¤ä¸ªæ•° swap(a, b) 18ã€copy å…³é”®å­—ä¿®é¥°ä»€ä¹ˆï¼Ÿ 19ã€ç±»çš„ç§æœ‰å±æ€§ï¼Œæ€ä¹ˆè®¾ç½®å±æ€§å€¼ï¼Ÿæˆ‘ç­”äº† KVC ä»–æåˆ°äº† Runtime 20ã€æœ‰æ²¡æœ‰åšè¿‡éŸ³é¢‘çš„å¤„ç†ï¼Ÿç±»ä¼¼å”±å§æŠŠåŸå”±å…³æ‰ã€‚ 21ã€åŠ¨ç”»äº†è§£çš„æ€ä¹ˆæ ·ï¼Ÿ 22ã€äº†è§£ ARKit å—ï¼Ÿ 23ã€æ•°æ®ç»“æ„å’Œç®—æ³•ä½ æ€ä¹ˆæ ·ï¼Ÿå†’æ³¡æ’åºï¼Œé€‰æ‹©æ’åºï¼Ÿ","link":"/é«˜æ€æ•™è‚²é¢è¯•é¢˜/"},{"title":"äº¬ä¸œ","text":"äº¬ä¸œ ä¸€é¢ï¼š 1.SDK ä½“ç§¯ä¼˜åŒ– 2.ç»„ä»¶åŒ– 3.ç«¯åˆ°ç«¯ç›‘æ§ï¼Œå…·ä½“å®ç° 4.YYModel çš„å®ç°åŸç†ï¼Œå’Œ MJExtension åŒºåˆ«ï¼Œä¸ºä»€ä¹ˆæ¯” MJExtension å¿«ï¼Ÿ 5.OOM æ€ä¹ˆæ’æŸ¥ 6.Facebook å‡ºçš„å¼‚æ­¥æ¸²æŸ“æ¡†æ¶ AsyncDisplayKit åŸç† 7.æ ·å¼å­—æ®µå¾ˆå¤šï¼Œæ€ä¹ˆå’Œé€»è¾‘å­—æ®µåˆ†å¼€ä¸‹å‘ï¼Ÿ 8.è·¨ç«¯æ–¹æ¡ˆï¼ŒTalos lite 9.æ€ä¹ˆæå‡ä»£ç è´¨é‡ 10.è®¾è®¡æ¨¡å¼ï¼šç­–ç•¥æ¨¡å¼ã€ä¸­ä»‹è€…æ¨¡å¼ 11.æ‰“ç‚¹ cell 50%å±•ç°æ—¶æ‰“ç‚¹ æ‰“ç‚¹è§„èŒƒï¼Œæ€ä¹ˆå¿«é€Ÿæ‰¾åˆ°æŸä¸€ä¸ªé¡µé¢çš„æ‰€æœ‰ç‚¹å‡»ç‚¹ä½ 12.äº§å“ä¸Šçš„ä¸šåŠ¡æŒ‡æ ‡ 13.è¯»å†™å®‰å…¨ï¼Œé™¤äº†åŠ é”è¿˜æœ‰å“ªäº›æ–¹æ³• 14.ç®—æ³•ï¼šå®ç°ä¸€ä¸ªåˆ—è¡¨ï¼Œå¤ç”¨ï¼Œä¸å¡é¡¿ï¼Œcell ä¸Šæ˜¯å¤šä¸ªæ–‡æœ¬ äºŒé¢ï¼š 1.Flutter ä¸ iOS äº¤äº’æ–¹æ³•ï¼Ÿ 2.Flutter çš„ UI å±‚åœ¨å“ªå„¿ï¼ŸRN æ˜¯åŸç”Ÿæ§ä»¶ 3.ç»„ä»¶åŒ–çš„ Router é‡Œçš„æ˜ å°„è¡¨ä»€ä¹ˆæ—¶å€™ç”Ÿæˆï¼Ÿ 4.JSBridge åŸç†ï¼Œå‰ç«¯ JS æœ‰å“ªäº›å¼‚æ­¥æ–¹æ³•ï¼Ÿå‰ç«¯æœ‰å“ªäº›å­˜å‚¨æ–¹æ³•ï¼Œlocalstorageæœ‰å¤§å°é™åˆ¶å—ï¼Ÿ 5.iOS æ‰“åŒ…æµç¨‹ï¼Œå‘½ä»¤ Xcode buildï¼›Cocoapods æ‰“åŒ…å‡ºæ¥çš„ç¬¬ä¸‰æ–¹åº“æ˜¯ä»€ä¹ˆå½¢å¼çš„ï¼Ÿæºç è¿˜æ˜¯äºŒè¿›åˆ¶ï¼Ÿ.aå’Œ.framework æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 6.æ¥å£ç›‘æ§ 7.ä¸ºä»€ä¹ˆç”¨åˆ°åŠ¨æ€åº“ï¼ŒåŠ¨æ€åº“ç±»å‹æ˜¯ä»€ä¹ˆ soï¼Ÿ 8.åŠ è½½é€Ÿåº¦ä¼˜åŒ– 9.SDK ä½“ç§¯ä¼˜åŒ– 10.RN çš„åŸç†ï¼Œæ€ä¹ˆè½¬æˆäº†åŸç”Ÿæ§ä»¶ï¼Ÿäº†è§£å“ªäº›åŠ¨æ€åŒ–çš„æ–¹æ¡ˆï¼ŸWeexã€å°ç¨‹åºç­‰çš„åŒºåˆ« 11.äº†è§£å“ªäº›æ€§èƒ½ä¼˜åŒ–ï¼Œæ»‘åŠ¨æµç•…æ€§çš„æŒ‡æ ‡ 12.æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ« 13.App å¯åŠ¨æµç¨‹ï¼Œä¼˜åŒ–æ‰‹æ®µï¼Œmainå‡½æ•°æœ‰å“ªäº›ä¼˜åŒ–åœ°æ–¹ 14.å‘ä¸€ä¸ª Post è¯·æ±‚ï¼Œæ€ä¹ˆåŠ å¿«é€Ÿåº¦ï¼ŸGet å’Œ Post è¯·æ±‚åŒºåˆ«ï¼ŒGet å¯ä»¥å°†å‚æ•°æ”¾åœ¨è¯·æ±‚ä½“å—ï¼Ÿ 15.è§¦æ‘¸å±å¹•æµç¨‹ 16.Swift ä¸­ Class å’Œ Struct åŒºåˆ«ï¼ŒStruct å¯ä»¥ç»§æ‰¿å—ï¼Ÿ 17.å †å’Œæ ˆçš„åŒºåˆ« 18.å†…å­˜ isa 19.ç»˜åˆ¶æµç¨‹ 20.åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼Œå„ä¸ªé˜¶æ®µè€—æ—¶æœ‰ç»Ÿè®¡å—ï¼Ÿç½‘ç»œçš„è€—æ—¶åœ¨å“ªå—å„¿ï¼Ÿ 21.IM çš„æ¶æ„ 22.IM æ€ä¹ˆä¿è¯æ¶ˆæ¯çš„é¡ºåº å‚è€ƒç­”æ¡ˆä¸€é¢ï¼š 1.SDKä½“ç§¯ä¼˜åŒ– 2.ç»„ä»¶åŒ– 3.ç«¯åˆ°ç«¯ç›‘æ§ï¼Œå…·ä½“å®ç° 4.OOMæ€ä¹ˆæ’æŸ¥ 5.æ ·å¼å­—æ®µå¾ˆå¤šï¼Œæ€ä¹ˆå’Œé€»è¾‘å­—æ®µåˆ†å¼€ä¸‹å‘ï¼Ÿ 6.è·¨ç«¯æ–¹æ¡ˆï¼ŒTalos lite 7.æ€ä¹ˆæå‡ä»£ç è´¨é‡ 8.è®¾è®¡æ¨¡å¼ï¼šç­–ç•¥æ¨¡å¼ã€ä¸­ä»‹è€…æ¨¡å¼ å¸¸è§çš„23ç§è®¾è®¡æ¨¡å¼åŒ…æ‹¬ï¼š åˆ›å»ºå‹æ¨¡å¼ï¼š å•ä¾‹æ¨¡å¼ (Singleton) å·¥å‚æ–¹æ³•æ¨¡å¼ (Factory Method) æŠ½è±¡å·¥å‚æ¨¡å¼ (Abstract Factory) å»ºé€ è€…æ¨¡å¼ (Builder) åŸå‹æ¨¡å¼ (Prototype) ç»“æ„å‹æ¨¡å¼ï¼š é€‚é…å™¨æ¨¡å¼ (Adapter) æ¡¥æ¥æ¨¡å¼ (Bridge) ç»„åˆæ¨¡å¼ (Composite) è£…é¥°å™¨æ¨¡å¼ (Decorator) å¤–è§‚æ¨¡å¼ (Facade) äº«å…ƒæ¨¡å¼ (Flyweight) ä»£ç†æ¨¡å¼ (Proxy) è¡Œä¸ºå‹æ¨¡å¼ï¼š è´£ä»»é“¾æ¨¡å¼ (Chain of Responsibility) å‘½ä»¤æ¨¡å¼ (Command) è§£é‡Šå™¨æ¨¡å¼ (Interpreter) è¿­ä»£å™¨æ¨¡å¼ (Iterator) ä¸­ä»‹è€…æ¨¡å¼ (Mediator) å­˜å‚¨å™¨æ¨¡å¼ (Memento) è§‚å¯Ÿè€…æ¨¡å¼ (Observer) çŠ¶æ€æ¨¡å¼ (State) ç­–ç•¥æ¨¡å¼ (Strategy) æ¨¡æ¿æ–¹æ³•æ¨¡å¼ (Template Method) è®¿é—®è€…æ¨¡å¼ (Visitor) ä¸­ä»‹è€…æ¨¡å¼ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator Patternï¼‰æ˜¯ç”¨æ¥é™ä½å¤šä¸ªå¯¹è±¡å’Œç±»ä¹‹é—´çš„é€šä¿¡å¤æ‚æ€§ï¼Œå±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚ ä¸­ä»‹è€…æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—å¯¹è±¡ä¹‹é—´çš„äº¤äº’ã€‚ä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¹‹é—´ä¸éœ€è¦æ˜¾å¼åœ°ç›¸äº’å¼•ç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚ ç­–ç•¥æ¨¡å¼åœ¨ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰ä¸­ä¸€ä¸ªç±»çš„è¡Œä¸ºæˆ–å…¶ç®—æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶æ›´æ”¹ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚ åœ¨ç­–ç•¥æ¨¡å¼å®šä¹‰äº†ä¸€ç³»åˆ—ç®—æ³•æˆ–ç­–ç•¥ï¼Œå¹¶å°†æ¯ä¸ªç®—æ³•å°è£…åœ¨ç‹¬ç«‹çš„ç±»ä¸­ï¼Œä½¿å¾—å®ƒä»¬å¯ä»¥äº’ç›¸æ›¿æ¢ã€‚é€šè¿‡ä½¿ç”¨ç­–ç•¥æ¨¡å¼ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶æ ¹æ®éœ€è¦é€‰æ‹©ä¸åŒçš„ç®—æ³•ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹å®¢æˆ·ç«¯ä»£ç ã€‚ åœ¨ç­–ç•¥æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºè¡¨ç¤ºå„ç§ç­–ç•¥çš„å¯¹è±¡å’Œä¸€ä¸ªè¡Œä¸ºéšç€ç­–ç•¥å¯¹è±¡æ”¹å˜è€Œæ”¹å˜çš„ context å¯¹è±¡ã€‚ç­–ç•¥å¯¹è±¡æ”¹å˜ context å¯¹è±¡çš„æ‰§è¡Œç®—æ³•ã€‚ 9.æ‰“ç‚¹ cell 50%å±•ç°æ—¶æ‰“ç‚¹ å¯ä»¥ä½¿ç”¨UITableViewçš„scrollViewDidScrollæ–¹æ³•æ¥æ£€æµ‹cellçš„å¯è§åŒºåŸŸã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š è®¾ç½®UITableViewDelegate: ç¡®ä¿ä½ çš„è§†å›¾æ§åˆ¶å™¨å®ç°äº†UITableViewDelegateåè®®ï¼Œå¹¶è®¾ç½®delegateã€‚ è®¡ç®—å¯è§åŒºåŸŸ: åœ¨scrollViewDidScrollæ–¹æ³•ä¸­ï¼Œè®¡ç®—æ¯ä¸ªcellçš„å¯è§åŒºåŸŸï¼Œå¹¶æ£€æŸ¥å®ƒæ˜¯å¦è‡³å°‘å±•ç°äº†50%ã€‚ æ‰“ç‚¹é€»è¾‘: æ ¹æ®è®¡ç®—ç»“æœè¿›è¡Œæ‰“ç‚¹æ“ä½œï¼Œä¾‹å¦‚è®°å½•æ•°æ®æˆ–å‘é€ç½‘ç»œè¯·æ±‚ã€‚ ç¤ºä¾‹ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950#import \"ViewController.h\"@interface ViewController () &lt;UITableViewDelegate, UITableViewDataSource&gt;@property (weak, nonatomic) IBOutlet UITableView *tableView;@end@implementation ViewController- (void)viewDidLoad { [super viewDidLoad]; self.tableView.delegate = self; self.tableView.dataSource = self;}#pragma mark - UITableViewDataSource- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section { return 100; // ç¤ºä¾‹è¡Œæ•°}- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@\"cell\" forIndexPath:indexPath]; cell.textLabel.text = [NSString stringWithFormat:@\"Row %ld\", (long)indexPath.row]; return cell;}#pragma mark - UIScrollViewDelegate- (void)scrollViewDidScroll:(UIScrollView *)scrollView { NSArray&lt;UITableViewCell *&gt; *visibleCells = [self.tableView visibleCells]; CGRect visibleRect; visibleRect.origin = self.tableView.contentOffset; visibleRect.size = self.tableView.bounds.size; for (UITableViewCell *cell in visibleCells) { CGRect cellRect = [self.tableView convertRect:cell.frame toView:self.tableView.superview]; CGRect intersection = CGRectIntersection(visibleRect, cellRect); CGFloat intersectionRatio = intersection.size.height / cellRect.size.height; if (intersectionRatio &gt;= 0.5) { NSIndexPath *indexPath = [self.tableView indexPathForCell:cell]; NSLog(@\"Cell at %ld is at least 50%% visible.\", (long)indexPath.row); // æ‰“ç‚¹é€»è¾‘ï¼Œä¾‹å¦‚è®°å½•æˆ–å‘é€è¯·æ±‚ } }}@end è¯´æ˜ è®¡ç®—å¯è§åŒºåŸŸï¼šä½¿ç”¨convertRect:toView:æ–¹æ³•å°†cellçš„frameè½¬æ¢åˆ°superviewçš„åæ ‡ç³»ï¼Œç„¶åè®¡ç®—äº¤é›†åŒºåŸŸã€‚ æ£€æŸ¥æ¯”ä¾‹ï¼šåˆ¤æ–­äº¤é›†åŒºåŸŸçš„é«˜åº¦ä¸cellçš„æ€»é«˜åº¦çš„æ¯”ä¾‹æ˜¯å¦å¤§äºæˆ–ç­‰äº50%ã€‚ è¿™ä¸ªå®ç°å°†ç¡®ä¿åœ¨UITableViewæ»šåŠ¨æ—¶ï¼Œå¯¹æ¯ä¸ªcellè¿›è¡Œæ£€æŸ¥ï¼Œå¹¶åœ¨å…¶è‡³å°‘å±•ç°50%æ—¶æ‰§è¡Œæ‰“ç‚¹æ“ä½œã€‚ æ‰“ç‚¹è§„èŒƒï¼Œæ€ä¹ˆå¿«é€Ÿæ‰¾åˆ°æŸä¸€ä¸ªé¡µé¢çš„æ‰€æœ‰ç‚¹å‡»ç‚¹ä½ 10.äº§å“ä¸Šçš„ä¸šåŠ¡æŒ‡æ ‡ 11.è¯»å†™å®‰å…¨ï¼Œé™¤äº†åŠ é”è¿˜æœ‰å“ªäº›æ–¹æ³• 12.ç®—æ³•ï¼šå®ç°ä¸€ä¸ªåˆ—è¡¨ï¼Œå¤ç”¨ï¼Œä¸å¡é¡¿ï¼Œcellä¸Šæ˜¯å¤šä¸ªæ–‡æœ¬ äºŒé¢ï¼š 1.Flutter ä¸ iOS äº¤äº’æ–¹æ³•ï¼Ÿ 2.Flutter çš„ UI å±‚åœ¨å“ªå„¿ï¼ŸRN æ˜¯åŸç”Ÿæ§ä»¶ 3.ç»„ä»¶åŒ–çš„ Router é‡Œçš„æ˜ å°„è¡¨ä»€ä¹ˆæ—¶å€™ç”Ÿæˆï¼Ÿ 4.JSBridge åŸç† 5.iOS æ‰“åŒ…æµç¨‹ï¼Œå‘½ä»¤ Xcode buildï¼›Cocoapods æ‰“åŒ…å‡ºæ¥çš„ç¬¬ä¸‰æ–¹åº“æ˜¯ä»€ä¹ˆå½¢å¼çš„ï¼Ÿæºç è¿˜æ˜¯äºŒè¿›åˆ¶ï¼Ÿ.aå’Œ.framework æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ CocoaPods æ‰“åŒ…å‡ºæ¥çš„ç¬¬ä¸‰æ–¹åº“å¯ä»¥æ˜¯æºç å½¢å¼ï¼Œä¹Ÿå¯ä»¥æ˜¯äºŒè¿›åˆ¶å½¢å¼ï¼Œå–å†³äºåº“çš„å‘å¸ƒæ–¹å¼ã€‚ æºç å½¢å¼ï¼šå¤§å¤šæ•°CocoaPodsåº“ä»¥æºç å½¢å¼æä¾›ã€‚è¿™æ„å‘³ç€CocoaPodsä¼šå°†åº“çš„æºä»£ç ä¸‹è½½åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼Œå¹¶åœ¨æ„å»ºæ—¶ç¼–è¯‘è¿™äº›ä»£ç ã€‚ äºŒè¿›åˆ¶å½¢å¼ï¼šä¸€äº›åº“æä¾›äºŒè¿›åˆ¶é¢„ç¼–è¯‘ç‰ˆæœ¬ï¼Œä»¥å‡å°‘ç¼–è¯‘æ—¶é—´å’Œæé«˜æ„å»ºé€Ÿåº¦ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒCocoaPodsä¼šä¸‹è½½é¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè€Œä¸æ˜¯æºç ã€‚ ä½ å¯ä»¥åœ¨Podspecæ–‡ä»¶ä¸­æ£€æŸ¥åº“çš„å…·ä½“å½¢å¼ï¼Œé€šå¸¸åœ¨sourceå­—æ®µä¸­å®šä¹‰äº†åº“çš„æ¥æºã€‚å¦‚æœæ˜¯äºŒè¿›åˆ¶åº“ï¼ŒPodspecä¼šæŒ‡å®šäºŒè¿›åˆ¶æ–‡ä»¶çš„URLå’Œç›¸å…³é…ç½®ã€‚ .aå’Œ.frameworkæ˜¯iOSå¼€å‘ä¸­å¸¸è§çš„ä¸¤ç§äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼Œåˆ†åˆ«ä»£è¡¨é™æ€åº“å’ŒåŠ¨æ€åº“ã€‚å®ƒä»¬çš„ä¸»è¦åŒºåˆ«å¦‚ä¸‹ï¼š .aï¼ˆé™æ€åº“ï¼‰ï¼š æ‰“åŒ…å½¢å¼ï¼šé™æ€åº“æ˜¯ä¸€ä¸ªå½’æ¡£æ–‡ä»¶ï¼ŒåŒ…å«äº†å¤šä¸ªç¼–è¯‘å¥½çš„ç›®æ ‡æ–‡ä»¶ï¼ˆ.oæ–‡ä»¶ï¼‰ã€‚ é“¾æ¥æ–¹å¼ï¼šåœ¨ç¼–è¯‘æ—¶ï¼Œé™æ€åº“çš„ä»£ç ä¼šè¢«ç›´æ¥é“¾æ¥åˆ°åº”ç”¨ç¨‹åºä¸­ã€‚æ¯æ¬¡æ„å»ºæ—¶ï¼Œåº“çš„ä»£ç ä¼šè¢«å¤åˆ¶åˆ°æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚ æ›´æ–°ï¼šå¦‚æœé™æ€åº“çš„ä»£ç æœ‰æ›´æ–°ï¼Œå¿…é¡»é‡æ–°ç¼–è¯‘æ•´ä¸ªåº”ç”¨ç¨‹åºã€‚ ä½“ç§¯ï¼šç”±äºä»£ç è¢«å¤åˆ¶åˆ°åº”ç”¨ç¨‹åºä¸­ï¼Œæœ€ç»ˆçš„åº”ç”¨åŒ…å¯èƒ½ä¼šè¾ƒå¤§ã€‚ .frameworkï¼ˆåŠ¨æ€åº“ï¼‰ï¼š æ‰“åŒ…å½¢å¼ï¼šåŠ¨æ€åº“æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ˆåŒ…ï¼‰ï¼ŒåŒ…å«åº“çš„äºŒè¿›åˆ¶æ–‡ä»¶ä»¥åŠç›¸å…³çš„èµ„æºæ–‡ä»¶ï¼ˆå¦‚å¤´æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶ï¼‰ã€‚å®ƒå¯ä»¥åŒ…å«å¤šä¸ªç‰ˆæœ¬å’Œèµ„æºã€‚ é“¾æ¥æ–¹å¼ï¼šåŠ¨æ€åº“åœ¨è¿è¡Œæ—¶è¢«åŠ è½½åˆ°å†…å­˜ä¸­ã€‚åº”ç”¨ç¨‹åºåœ¨è¿è¡Œæ—¶ä¸åº“é“¾æ¥ï¼Œè€Œä¸æ˜¯åœ¨ç¼–è¯‘æ—¶ã€‚è¿™æ ·ï¼Œå¤šä¸ªåº”ç”¨ç¨‹åºå¯ä»¥å…±äº«åŒä¸€ä¸ªåŠ¨æ€åº“ã€‚ æ›´æ–°ï¼šæ›´æ–°åŠ¨æ€åº“åªéœ€æ›¿æ¢åº“æ–‡ä»¶ï¼Œä¸éœ€è¦é‡æ–°ç¼–è¯‘ä¾èµ–äºè¯¥åº“çš„åº”ç”¨ç¨‹åºã€‚ ä½“ç§¯ï¼šåŠ¨æ€åº“çš„ä½¿ç”¨å¯ä»¥å‡å°‘æœ€ç»ˆåº”ç”¨ç¨‹åºçš„ä½“ç§¯ï¼Œå› ä¸ºåº“çš„ä»£ç å’Œèµ„æºåœ¨è¿è¡Œæ—¶è¢«å…±äº«å’ŒåŠ è½½ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œ.aæ˜¯é™æ€åº“ï¼Œç¼–è¯‘æ—¶ç›´æ¥åŒ…å«åœ¨åº”ç”¨ä¸­ï¼›.frameworkæ˜¯åŠ¨æ€åº“ï¼Œåœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ è½½å’Œå…±äº«ã€‚ 6.æ¥å£ç›‘æ§ 7.ä¸ºä»€ä¹ˆç”¨åˆ°åŠ¨æ€åº“ï¼ŒåŠ¨æ€åº“ç±»å‹æ˜¯ä»€ä¹ˆ soï¼Ÿ 8.åŠ è½½é€Ÿåº¦ä¼˜åŒ– 9.SDK ä½“ç§¯ä¼˜åŒ– 10.RN çš„åŸç†ï¼Œæ€ä¹ˆè½¬æˆäº†åŸç”Ÿæ§ä»¶ï¼Ÿäº†è§£å“ªäº›åŠ¨æ€åŒ–çš„æ–¹æ¡ˆï¼ŸWeexã€å°ç¨‹åºç­‰çš„åŒºåˆ« 11.äº†è§£å“ªäº›æ€§èƒ½ä¼˜åŒ–ï¼Œæ»‘åŠ¨æµç•…æ€§çš„æŒ‡æ ‡ 12.æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ« 13.App å¯åŠ¨æµç¨‹ï¼Œä¼˜åŒ–æ‰‹æ®µï¼Œmainå‡½æ•°æœ‰å“ªäº›ä¼˜åŒ–åœ°æ–¹ 14.å‘ä¸€ä¸ª Post è¯·æ±‚ï¼Œæ€ä¹ˆåŠ å¿«é€Ÿåº¦ï¼ŸGet å’Œ Post è¯·æ±‚åŒºåˆ«ï¼ŒGet å¯ä»¥å°†å‚æ•°æ”¾åœ¨è¯·æ±‚ä½“å—ï¼Ÿ 15.è§¦æ‘¸å±å¹•æµç¨‹ 16.Swift ä¸­ Class å’Œ Struct åŒºåˆ«ï¼ŒStruct å¯ä»¥ç»§æ‰¿å—ï¼Ÿ 17.å †å’Œæ ˆçš„åŒºåˆ« 18.å†…å­˜ isa 19.ç»˜åˆ¶æµç¨‹ 20.åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼Œå„ä¸ªé˜¶æ®µè€—æ—¶æœ‰ç»Ÿè®¡å—ï¼Ÿç½‘ç»œçš„è€—æ—¶åœ¨å“ªå—å„¿ï¼Ÿ 21.IM çš„æ¶æ„ 22.IM æ€ä¹ˆä¿è¯æ¶ˆæ¯çš„é¡ºåº","link":"/2024-08-29-äº¬ä¸œ/"},{"title":"OCè¯­æ³•","text":"OCè¯­æ³• é¢å‘å¯¹è±¡ä¸€ä¸ªNSObjectå¯¹è±¡å ç”¨å¤šå°‘å†…å­˜ç³»ç»Ÿåˆ†é…äº†16ä¸ªå­—èŠ‚ç»™NSObjectå¯¹è±¡ï¼ˆmalloc_sizeï¼‰ä½†NSObjectå¯¹è±¡å†…éƒ¨åªä½¿ç”¨äº†8ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼ˆclass_getInstanceSizeï¼‰ å¯¹è±¡çš„isaæŒ‡é’ˆæŒ‡å‘å“ªé‡Œinstanceå¯¹è±¡isaæŒ‡å‘classå¯¹è±¡è°ƒç”¨å¯¹è±¡æ–¹æ³•æ—¶ï¼Œé€šè¿‡isaæŒ‡é’ˆæ‰¾åˆ°ç±»å¯¹è±¡ï¼Œæ‰¾åˆ°å¯¹è±¡æ–¹æ³•å®ç°è¿›è¡Œè°ƒç”¨classå¯¹è±¡isaæŒ‡å‘meta-classå¯¹è±¡è°ƒç”¨ç±»æ–¹æ³•æ—¶ï¼Œé€šè¿‡isaæŒ‡é’ˆæ‰¾åˆ°å…ƒç±»å¯¹è±¡ï¼Œæ‰¾åˆ°ç±»æ–¹æ³•çš„è§†çº¿è¿›è¡Œè°ƒç”¨meta-classå¯¹è±¡isaæŒ‡å‘åŸºç±»çš„meta-classå¯¹è±¡ OCçš„ç±»ä¿¡æ¯å­˜æ”¾åœ¨å“ªé‡Œå¯¹è±¡æ–¹æ³•ã€å±æ€§ã€æˆå‘˜å˜é‡ã€åè®®ä¿¡æ¯ï¼Œå­˜æ”¾åœ¨classå¯¹è±¡ç±»æ–¹æ³•å­˜æ”¾åœ¨meta-classå¯¹è±¡æˆå‘˜å˜é‡çš„å…·ä½“å€¼ï¼Œå­˜æ”¾åœ¨instanceå¯¹è±¡ KVOiOSç”¨ä»€ä¹ˆæ–¹å¼å®ç°ä¸€ä¸ªå¯¹è±¡çš„KVOï¼ˆKVOçš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼‰åˆ©ç”¨runtimeåŠ¨æ€ç”Ÿæˆä¸€ä¸ªå­ç±»ï¼Œå¹¶ä¸”è®©instanceå¯¹è±¡çš„isaæŒ‡å‘è¯¥å­ç±»å½“ä¿®æ”¹instanceå¯¹è±¡çš„å±æ€§æ—¶ï¼Œä¼šè°ƒç”¨Foundationçš„_NSSetXXXValueAndNotifyå‡½æ•°willChangeValueForKey:çˆ¶ç±»åŸæ¥çš„setæ–¹æ³•didChangeValueForKey:å†…éƒ¨ä¼šè§¦å‘Observerçš„ç›‘å¬æ–¹æ³•ï¼ˆobserveValueForKeyPath:ofObject:change:contextï¼‰ å¦‚ä½•æ‰‹åŠ¨è§¦å‘KVOæ‰‹åŠ¨è°ƒç”¨willSetValueForKey:å’ŒdidChangeValueForKey: ç›´æ¥ä¿®æ”¹æˆå‘˜å˜é‡çš„å€¼ä¼šè§¦å‘KVOå—ä¸ä¼š é€šè¿‡KVCä¿®æ”¹å±æ€§ä¼šè§¦å‘KVOå—ä¼š KVCçš„èµ‹å€¼å’Œå–å€¼è¿‡ç¨‹ï¼Ÿèµ‹å€¼ å…ˆè°ƒç”¨setA isA _age CategoryCategoryçš„å®ç°åŸç†Categoryç¼–è¯‘åçš„åº•å±‚ç»“æ„æ˜¯struct category_t é‡Œé¢å­˜æ”¾åˆ†ç±»çš„å¯¹è±¡æ–¹æ³•ã€ç±»æ–¹æ³•ã€å±æ€§ã€åè®®ä¿¡æ¯åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œruntimeä¼šå°†Categoryçš„æ•°æ®ï¼Œåˆå¹¶åˆ°ç±»ä¿¡æ¯ä¸­ï¼ˆç±»å¯¹è±¡ã€å…ƒç±»å¯¹è±¡ä¸­ï¼‰ Categoryå’ŒClass Extensionçš„åŒºåˆ«æ˜¯ä»€ä¹ˆClass Extensionåœ¨ç¼–è¯‘æ—¶æ•°æ®å°±åœ¨ç±»ä¿¡æ¯ä¸­Categoryæ˜¯åœ¨è¿è¡Œæ—¶ï¼Œå°†æ•°æ®åˆå¹¶åˆ°ç±»ä¿¡æ¯ä¸­ Categroyä¸­æœ‰loadæ–¹æ³•å—ï¼Ÿloadæ–¹æ³•æ˜¯ä»€ä¹ˆæ—¶å€™è°ƒç”¨çš„ï¼Ÿloadæ–¹æ³•èƒ½ç»§æ‰¿å—ï¼Ÿæœ‰loadæ–¹æ³•loadæ˜¯åœ¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼ŒåŠ è½½ç±»ã€åˆ†ç±»çš„æ—¶å€™è°ƒç”¨loadæ–¹æ³•å¯ä»¥ç»§æ‰¿ï¼Œä½†ä¸€èˆ¬ä¸ä¼šä¸»åŠ¨å»è°ƒç”¨loadæ–¹æ³•ï¼Œéƒ½æ˜¯è®©ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ loadã€initializeæ–¹æ³•çš„åŒºåˆ«ï¼Ÿåœ¨Categoryä¸­çš„è°ƒç”¨é¡ºåºï¼Œå‡ºç°ç»§æ‰¿æ—¶ä»–ä»¬ä¹‹é—´çš„è°ƒç”¨è¿‡ç¨‹ï¼Ÿ Categoryèƒ½å¦æ·»åŠ æˆå‘˜å˜é‡ï¼Ÿå¦‚æœå¯ä»¥ï¼Œå¦‚ä½•ç»™Categoryæ·»åŠ æˆå‘˜å˜é‡ï¼Ÿä¸èƒ½ç›´æ¥ç»™Categoryæ·»åŠ æˆå‘˜å˜é‡ï¼Œä½†å¯ä»¥é€šè¿‡runtimeå®ç°Categoryæœ‰æˆå‘˜å˜é‡çš„æ•ˆæœ Objective-Cçš„æœ¬è´¨OCçš„æœ¬è´¨åº•å±‚éƒ½æ˜¯C/C++ä»£ç ï¼Œç¼–è¯‘æˆäº†æ±‡ç¼–è¯­è¨€ã€æœºå™¨è¯­è¨€OCçš„é¢å‘å¯¹è±¡æ˜¯é€šè¿‡C/C++çš„ç»“æ„ä½“å®ç°çš„ å°†OCä»£ç è½¬æ¢æˆC/C++ä»£ç xcrun -sdk iphoneos clang -arch arm64 -rewrite-objc OCæºæ–‡ä»¶ -o è¾“å‡ºçš„CPPæ–‡ä»¶ ä¸€ä¸ªOCå¯¹è±¡åœ¨å†…å­˜ä¸­çš„å¸ƒå±€struct NSObject_IMPL { Class isa;} Class å³ objc_classclassã€meta-classå¯¹è±¡çš„æœ¬è´¨ç»“æ„éƒ½æ˜¯struct objc_class åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œè‡³å°‘éœ€è¦å¤šå°‘å†…å­˜class_getInstanceSize([NSObject class]); åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œå®é™…ä¸Šåˆ†é…äº†å¤šå°‘å†…å­˜malloc_size(obj); å¸¸è§LLDBæŒ‡ä»¤p æ‰“å°po æ‰“å°å¯¹è±¡ è¯»å–å†…å­˜memory read/æ•°æ®æ ¼å¼å­—èŠ‚æ•° å†…å­˜åœ°å€x/æ•°é‡æ ¼å¼å­—èŠ‚æ•° å†…å­˜åœ°å€ ä¿®æ”¹å†…å­˜ä¸­çš„å€¼memory write OCå¯¹è±¡çš„åˆ†ç±»instanceå¯¹è±¡ï¼ˆå®ä¾‹å¯¹è±¡ï¼‰ã€classå¯¹è±¡ï¼ˆç±»å¯¹è±¡ï¼‰ã€meta-classå¯¹è±¡ï¼ˆå…ƒç±»å¯¹è±¡ï¼‰ classå¯¹è±¡åœ¨å†…å­˜ä¸­å­˜å‚¨çš„ä¿¡æ¯ä¸»è¦åŒ…æ‹¬isaæŒ‡é’ˆsuperclassæŒ‡é’ˆå±æ€§ã€å¯¹è±¡æ–¹æ³•ã€åè®®ã€æˆå‘˜å˜é‡ meta-classå¯¹è±¡åœ¨å†…å­˜ä¸­å­˜å‚¨çš„ä¿¡æ¯isaæŒ‡é’ˆsuperclassæŒ‡é’ˆç±»æ–¹æ³• object_getClass([NSObject class]); è·å–å…ƒç±»å¯¹è±¡class_isMetaClass([NSObject class]); æŸ¥çœ‹Classæ˜¯å¦æ˜¯å…ƒç±»å¯¹è±¡ instanceçš„isaæŒ‡å‘classclassçš„isaæŒ‡å‘meta-classmeta-classçš„isaæŒ‡å‘åŸºç±»çš„meta-class classçš„superclassæŒ‡å‘çˆ¶ç±»çš„classå¦‚æœæ²¡æœ‰çˆ¶ç±»ï¼ŒsuperclassæŒ‡é’ˆä¸ºnil meta-classçš„superclassæŒ‡å‘çˆ¶ç±»çš„meta-classåŸºç±»çš„meta-classçš„superclassæŒ‡å‘åŸºç±»çš„class isaæŒ‡é’ˆisaé€šè¿‡&amp; ISA_MASK ï¼ˆä½è¿ç®—ï¼‰ï¼Œå¾—åˆ°çœŸå®åœ°å€12345678910111213141516171819202122232425262728293031struct objc_class { Class isa; Class superClass; cache_t cache; // æ–¹æ³•ç¼“å­˜ class_data_bits_t bits; // ç”¨äºè·å–å…·ä½“çš„ç±»ä¿¡æ¯}bits &amp; FAST_DATA_MASKå¾—åˆ°class_rw_tclass_rw_t { uint32_t flags; uint32_t version; const class_ro_t *ro; method_list_t *methods; // æ–¹æ³•åˆ—è¡¨ property_list_t *properties; // å±æ€§åˆ—è¡¨ const protocol_list_t *protocols; // åè®®åˆ—è¡¨ Class firstSubClass; Class nextSiblingClass; char *demangledName;}class_ro_t { uint32_t flags; uint32_t instanceStart; uint32_t instanceSize; const char *name; // ç±»å method_list_t *baseMethodList; protocol_list_t *baseProtocols; const ivar_list_t *ivars; // æˆå‘˜å˜é‡åˆ—è¡¨ const uint8_t *weakIvarLayout; property_list_t *baseProperties;} KVCsetValue:forKey:åŸç†æŒ‰ç…§setKey: _setKey:é¡ºåºæŸ¥æ‰¾æ–¹æ³•ï¼Œæ‰¾åˆ°æ–¹æ³•è°ƒç”¨æ²¡æ‰¾åˆ°æ–¹æ³•ï¼ŒæŸ¥çœ‹accessInstanceVariablesDirectlyæ–¹æ³•çš„è¿”å›å€¼NO-&gt;è°ƒç”¨setValue:forUndefinedKey: å¹¶æŠ›å‡ºå¼‚å¸¸NSUnknownKeyExceptionYES-&gt;æŒ‰ç…§_key _isKey key isKeyé¡ºåºæŸ¥æ‰¾æˆå‘˜å˜é‡ï¼Œæ‰¾åˆ°åç›´æ¥èµ‹å€¼ï¼Œæ‰¾ä¸åˆ°æŠ¥é”™ valueForKey:åŸç†æŒ‰ç…§getKeyã€keyã€isKeyã€_keyé¡ºåºæŸ¥æ‰¾æ–¹æ³•ï¼Œæ‰¾åˆ°æ–¹æ³•è°ƒç”¨æ²¡æ‰¾åˆ°æ–¹æ³•ï¼ŒæŸ¥çœ‹accessInstanceVariablesDirectlyæ–¹æ³•çš„è¿”å›å€¼NO-&gt;è°ƒç”¨valueForUndefinedKey: å¹¶æŠ›å‡ºå¼‚å¸¸NSUnknownKeyExceptionYES-&gt;æŒ‰ç…§_keyã€_isKeyã€keyã€isKeyé¡ºåºæŸ¥æ‰¾æˆå‘˜å˜é‡ï¼Œæ‰¾åˆ°åç›´æ¥å–å€¼ Caregoryçš„åº•å±‚ç»“æ„12345678910111213141516struct category_t { const char *name; classref cls; struct method_list_t *instanceMethods; struct method_list_t *classMethods; struct protocol_list_t *protocols; struct property_list_t *instanceProperties; struct property_list_t *_classProperties; method_list_t *methodForMeta(bool isMeta) { if (isMeta) return classMethods; else return instanceMethods; } property_list_t *propertiesForMeta(bool isMeta, struct header_info *hi);} Categoryçš„åŠ è½½å¤„ç†è¿‡ç¨‹1.é€šè¿‡RuntimeåŠ è½½æŸä¸ªç±»çš„æ‰€æœ‰Categoryæ•°æ®2.æŠŠæ‰€æœ‰Categoryçš„æ–¹æ³•ã€å±æ€§ã€åè®®æ•°æ®ï¼Œåˆå¹¶åˆ°ä¸€ä¸ªå¤§æ•°ç»„é‡Œï¼Œåé¢å‚ä¸ç¼–è¯‘çš„Categoryæ•°æ®ï¼Œä¼šåœ¨æ•°ç»„çš„å‰é¢3.å°†åˆå¹¶åçš„åˆ†ç±»æ•°æ®ï¼ˆæ–¹æ³•ã€å±æ€§ã€åè®®ï¼‰ï¼Œæ’å…¥åˆ°ç±»åŸæ¥æ•°æ®çš„å‰é¢ +loadæ–¹æ³•+loadæ–¹æ³•ä¼šåœ¨runtimeåŠ è½½ç±»ã€åˆ†ç±»æ—¶è°ƒç”¨æ¯ä¸ªç±»ã€åˆ†ç±»çš„+loadæ–¹æ³•ï¼Œåœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­åªè°ƒç”¨ä¸€æ¬¡ è°ƒç”¨é¡ºåºï¼š1.å…ˆè°ƒç”¨ç±»çš„+loadï¼ŒæŒ‰ç…§ç¼–è¯‘å…ˆåé¡ºåºè°ƒç”¨ï¼ˆå…ˆç¼–è¯‘ï¼Œå…ˆè°ƒç”¨ï¼‰ï¼Œè°ƒç”¨å­ç±»çš„+loadä¹‹å‰ä¼šå…ˆè°ƒç”¨çˆ¶ç±»çš„+load2.å†è°ƒç”¨åˆ†ç±»çš„+loadï¼ŒæŒ‰ç…§ç¼–è¯‘å…ˆåé¡ºåºè°ƒç”¨ï¼ˆå…ˆç¼–è¯‘ï¼Œå…ˆè°ƒç”¨ï¼‰123456789101._objc_Init2.load_images3.prepare_load_methodsschedule_class_loadadd_class_to_loadable_listadd_category_to_loadable_list4.call_load_methodscall_class_loadscall_category_loads(*load_method)(cls, SEL_load) +loadæ–¹æ³•æ—¶æ ¹æ®æ–¹æ³•åœ°å€ç›´æ¥è°ƒç”¨ï¼Œå¹¶ä¸æ˜¯ç»è¿‡objc_msgSendå‡½æ•°è°ƒç”¨ +initializeæ–¹æ³•+initializeæ–¹æ³•ä¼šåœ¨ç±»ç¬¬ä¸€æ¬¡æ¥æ”¶åˆ°æ¶ˆæ¯æ—¶è°ƒç”¨ è°ƒç”¨é¡ºåºå…ˆè°ƒç”¨çˆ¶ç±»çš„+initializeï¼Œå†è°ƒç”¨å­ç±»çš„+initializeå…ˆåˆå§‹åŒ–çˆ¶ç±»ï¼Œåœ¨åˆå§‹åŒ–å­ç±»ï¼Œæ¯ä¸ªç±»åªä¼šåˆå§‹åŒ–ä¸€æ¬¡1234567objc_msgSendclass_getInstanceMethodlookUpImpOrNillookUpImpOrForword_class_initializecallInitializeobjc_msgSend(cls, SEL_initialize) +initializeå’Œ+loadåŒºåˆ«+initializeæ˜¯é€šè¿‡objc_msgSendè¿›è¡Œè°ƒç”¨å¦‚æœå­ç±»æ²¡æœ‰å®ç°+initializeï¼Œä¼šè°ƒç”¨çˆ¶ç±»çš„+initializeï¼ˆæ‰€ä»¥çˆ¶ç±»çš„+initializeå¯èƒ½ä¼šè¢«è°ƒç”¨å¤šæ¬¡ï¼‰å¦‚æœåˆ†ç±»å®ç°äº†+initializeï¼Œå°±ä¼šè¦†ç›–ç±»æœ¬èº«çš„+initializeè°ƒç”¨ å¦‚ä½•ç»™åˆ†ç±»æ·»åŠ æˆå‘˜å˜é‡ï¼Ÿå› ä¸ºåˆ†ç±»çš„åº•å±‚ç»“æ„é™åˆ¶ï¼Œä¸èƒ½æ·»åŠ æˆå‘˜å˜é‡åˆ°åˆ†ç±»ï¼Œå¯ä»¥é€šè¿‡å…³è”å¯¹è±¡é—´æ¥å®ç° æ·»åŠ å…³è”å¯¹è±¡12void objc_setAssociatedObject(id object, const void * key, id value, objc_AssociationPolicy policy) è·å¾—å…³è”å¯¹è±¡1id objc_getAssociatedObject(id object, const void * key) ç§»é™¤æ‰€æœ‰çš„å…³è”å¯¹è±¡1void objc_removeAssociatedObjects(id object) å…³è”å¯¹è±¡çš„åŸç†å…³è”å¯¹è±¡å¹¶ä¸æ˜¯å­˜å‚¨åœ¨å…³è”å¯¹è±¡æœ¬èº«å†…å­˜ä¸­å…³è”å¯¹è±¡å­˜å‚¨åœ¨å…¨å±€ç»Ÿä¸€çš„ä¸€ä¸ªAssociationsManagerä¸­è®¾ç½®å…³è”å¯¹è±¡ä¸ºnilï¼Œå°±ç›¸å½“äºç§»é™¤å…³è”å¯¹è±¡ blockçš„æœ¬è´¨blockæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªOCå¯¹è±¡ï¼Œå†…éƒ¨æœ‰ä¸ªisaæŒ‡é’ˆblockæ˜¯å°è£…äº†å‡½æ•°è°ƒç”¨ä»¥åŠå‡½æ•°è°ƒç”¨ç¯å¢ƒçš„OCå¯¹è±¡ blockçš„å˜é‡æ•è·å±€éƒ¨å˜é‡ auto æ•è·åˆ°blockå†…éƒ¨ è®¿é—®æ–¹å¼ï¼šå€¼ä¼ é€’å±€éƒ¨å˜é‡ static æ•è·åˆ°blockå†…éƒ¨ è®¿é—®æ–¹å¼ï¼šæŒ‡é’ˆä¼ é€’å…¨å±€å˜é‡ ä¸æ•è· è®¿é—®æ–¹å¼ï¼šç›´æ¥è®¿é—® autoå˜é‡çš„æ•è· blockçš„ç±»å‹blockæœ‰3ç§ç±»å‹ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨classæ–¹æ³•æˆ–è€…isaæŒ‡é’ˆæŸ¥çœ‹å…·ä½“ç±»å‹ï¼Œæœ€ç»ˆéƒ½æ˜¯ç»§æ‰¿è‡ªNSBlockç±»å‹123__NSGlobalBlock__ (_NSConcreteGlobalBlock) æ•°æ®åŒºåŸŸ .dataåŒº__NSStackBlock__ (_NSConcreteStackBlock) æ ˆåŒº__NSMallocBlock__ (_NSConcreteMallocBlock) å †åŒº 123__NSGlobalBlock__ æ²¡æœ‰è®¿é—®autoå˜é‡__NSStackBlock__ è®¿é—®äº†autoå˜é‡__NSMallocBlock__ __NSStackBlock__è°ƒç”¨äº†copy è°ƒç”¨copyåçš„ç»“æœ123_NSConcreteStackBlock ç¨‹åºçš„æ•°æ®åŒºåŸŸ å¤åˆ¶æ•ˆæœï¼šä»€ä¹ˆä¹Ÿä¸åš_NSConcreteStackBlock æ ˆ å¤åˆ¶æ•ˆæœï¼šä»æ ˆå¤åˆ¶åˆ°å †_NSConcreteMallocBlock å † å¤åˆ¶æ•ˆæœï¼šå¼•ç”¨è®¡æ•°å¢åŠ  blockçš„copyåœ¨ARCä¸‹ï¼Œç¼–è¾‘å™¨ä¼šåœ¨ä¸‹åˆ—æƒ…å†µè‡ªåŠ¨å°†æ ˆä¸Šçš„blockæ‹·è´åˆ°å †ä¸Šï¼š1.blockä½œä¸ºå‡½æ•°è¿”å›å€¼æ—¶2.å°†blockèµ‹å€¼ç»™å¼ºæŒ‡é’ˆæ—¶3.blockä½œä¸ºCocoa APIä¸­æ–¹æ³•åå«æœ‰usingBlockçš„æ–¹æ³•å‚æ•°æ—¶4.blockä½œä¸ºGCD APIçš„æ–¹æ³•å‚æ•°æ—¶ MRCä¸‹blockçš„å»ºè®®å†™æ³•ï¼š@property(copy, nonatomic) void (^block)(void); ARCä¸‹blockçš„å»ºè®®å†™æ³•ï¼š@property(strong, nonatomic) void (^block)(void);@property(copy, nonatomic) void (^block)(void); å¯¹è±¡ç±»å‹çš„autoå˜é‡å½“blockå†…éƒ¨è®¿é—®äº†å¯¹è±¡ç±»å‹çš„autoå˜é‡æ—¶å¦‚æœblockåœ¨æ ˆä¸Šï¼Œå°†ä¸ä¼šå¯¹autoå˜é‡äº§ç”Ÿå¼ºå¼•ç”¨ å¦‚æœblockè¢«æ‹·è´åˆ°å †ä¸Šä¼šè°ƒç”¨blockå†…éƒ¨çš„copyå‡½æ•°copyå‡½æ•°å†…éƒ¨ä¼šè°ƒç”¨_Block_object_assignå‡½æ•°_Block_object_assignå‡½æ•°ä¼šæ ¹æ®autoå˜é‡çš„ä¿®é¥°ç¬¦åšå‡ºç›¸åº”æ“ä½œï¼Œå½¢æˆå¼ºå¼•ç”¨æˆ–å¼±å¼•ç”¨ å¦‚æœblockä»å †ä¸Šç§»é™¤ä¼šè°ƒç”¨blockå†…éƒ¨çš„disposeå‡½æ•°disposeå‡½æ•°å†…éƒ¨ä¼šè°ƒç”¨_Block_object_disposeå‡½æ•°_Block_object_disposeå‡½æ•°ä¼šè‡ªåŠ¨é‡Šæ”¾å¼•ç”¨çš„autoå˜é‡ï¼ˆreleaseï¼‰ __blockä¿®é¥°ç¬¦å¯ä»¥è§£å†³blockå†…éƒ¨æ— æ³•ä¿®æ”¹autoå˜é‡å€¼çš„é—®é¢˜ä¸èƒ½ä¿®é¥°å…¨å±€å˜é‡ã€é™æ€å˜é‡ç¼–è¯‘å™¨ä¼šæŠŠ__blockåŒ…è£…æˆä¸€ä¸ªå¯¹è±¡ å½“blockåœ¨æ ˆä¸Šæ—¶ï¼Œå¹¶ä¸ä¼šå¯¹__blockå˜é‡äº§ç”Ÿå¼ºå¼•ç”¨ å½“blockè¢«copyåˆ°å †æ—¶ä¼šè°ƒç”¨blockå†…éƒ¨çš„copyå‡½æ•°copyå‡½æ•°å†…éƒ¨ä¼šè°ƒç”¨_Block_object_assignå‡½æ•°_Block_object_assignå‡½æ•°ä¼šå¯¹__blockå˜é‡å½¢æˆå¼ºå¼•ç”¨ï¼ˆretainï¼‰ å½“blockä»å †ä¸­ç§»é™¤æ—¶ä¼šè°ƒç”¨blockå†…éƒ¨çš„disposeå‡½æ•°disposeå‡½æ•°å†…éƒ¨ä¼šè°ƒç”¨_Block_object_disposeå‡½æ•°_Block_object_disposeå‡½æ•°ä¼šè‡ªåŠ¨é‡Šæ”¾å¼•ç”¨çš„__blockå˜é‡ï¼ˆreleaseï¼‰ __blockçš„__forwardingæŒ‡é’ˆ å¯¹è±¡ç±»å‹çš„autoå˜é‡ã€__blockå˜é‡å½“blockåœ¨æ ˆä¸Šæ—¶ï¼Œå¯¹å®ƒä»¬éƒ½ä¸ä¼šäº§ç”Ÿå¼ºå¼•ç”¨ è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ - ARCç”¨__weakã€__unsafe_unretainedè§£å†³ç”¨__blockè§£å†³ï¼ˆå¿…é¡»è¦è°ƒç”¨blockï¼‰ è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ - MRCç”¨__unsafe_unretainedè§£å†³ç”¨__blockè§£å†³(ARCæ—¶ä¼šretainï¼ŒMRCæ—¶ä¸ä¼šretain)","link":"/OCè¯­æ³•/"},{"title":"å­—èŠ‚è·³åŠ¨é¢è¯•é¢˜","text":"å­—èŠ‚è·³åŠ¨é¢è¯•é¢˜ 1.retain strong åŒºåˆ«åœ¨å£°æ˜ block æ—¶ï¼Œretain ç›¸å½“äº assignï¼Œstrong ç›¸å½“äº copyï¼Œblockä¸€èˆ¬ä½¿ç”¨ copy 2.NSClassFromString åŸç†åå°„æ–¹æ³•ç³»ç»ŸFoundationæ¡†æ¶ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€äº›æ–¹æ³•åå°„çš„ APIï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™äº› API æ‰§è¡Œå°†å­—ç¬¦ä¸²è½¬ä¸ºSELç­‰æ“ä½œã€‚ç”±äºOCè¯­è¨€çš„åŠ¨æ€æ€§ï¼Œè¿™äº›æ“ä½œéƒ½æ˜¯å‘ç”Ÿåœ¨è¿è¡Œæ—¶çš„ã€‚ 123456789// SELå’Œå­—ç¬¦ä¸²è½¬æ¢FOUNDATION_EXPORT NSString *NSStringFromSelector(SEL aSelector);FOUNDATION_EXPORT SEL NSSelectorFromString(NSString *aSelectorName);// Classå’Œå­—ç¬¦ä¸²è½¬æ¢FOUNDATION_EXPORT NSString *NSStringFromClass(Class aClass);FOUNDATION_EXPORT Class __nullable NSClassFromString(NSString *aClassName);// Protocolå’Œå­—ç¬¦ä¸²è½¬æ¢FOUNDATION_EXPORT NSString *NSStringFromProtocol(Protocol *proto) NS_AVAILABLE(10_5, 2_0);FOUNDATION_EXPORT Protocol * __nullable NSProtocolFromString(NSString *namestr) NS_AVAILABLE(10_5, 2_0); å¸¸ç”¨åˆ¤æ–­æ–¹æ³•åœ¨NSObjectç±»ä¸­ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€äº›åŸºç¡€æ–¹æ³•ï¼Œç”¨æ¥åšä¸€äº›åˆ¤æ–­æ“ä½œï¼Œè¿™äº›æ–¹æ³•éƒ½æ˜¯å‘ç”Ÿåœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ¤æ–­çš„ã€‚ 12345678// å½“å‰å¯¹è±¡æ˜¯å¦è¿™ä¸ªç±»æˆ–å…¶å­ç±»çš„å®ä¾‹- (BOOL)isKindOfClass:(Class)aClass;// å½“å‰å¯¹è±¡æ˜¯å¦æ˜¯è¿™ä¸ªç±»çš„å®ä¾‹- (BOOL)isMemberOfClass:(Class)aClass;// å½“å‰å¯¹è±¡æ˜¯å¦éµå®ˆè¿™ä¸ªåè®®- (BOOL)conformsToProtocol:(Protocol *)aProtocol;// å½“å‰å¯¹è±¡æ˜¯å¦å®ç°è¿™ä¸ªæ–¹æ³•- (BOOL)respondsToSelector:(SEL)aSelector; å‚è€ƒé“¾æ¥ï¼šiOSåå°„æœºåˆ¶ 3.httpåè®®ç‰ˆæœ¬1ã€HTTP 0.9 ï¼šï¼ˆ1ï¼‰åªæ¥å—GETä¸€ç§è¯·æ±‚æ–¹æ³•ï¼Œæ²¡æœ‰åœ¨é€šä¿¡ä¸­æŒ‡å®šç‰ˆæœ¬å·ï¼Œä¸”ä¸æ”¯æŒè¯·æ±‚å¤´ï¼› ï¼ˆ2ï¼‰æ­¤å¤–è¯¥ç‰ˆæœ¬ä¹Ÿä¸æ”¯æŒPOSTæ–¹æ³•ï¼Œå› æ­¤å®¢æˆ·ç«¯æ— æ³•å‘æœåŠ¡å™¨ä¼ é€’å¤ªå¤šä¿¡æ¯ï¼› 2ã€HTTP 1.0ï¼šï¼ˆ1ï¼‰æ”¯æŒPOSTã€GETã€HEADä¸‰ç§æ–¹æ³•ï¼› ï¼ˆ2ï¼‰è§„å®šæµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´åªä¿æŒçŸ­æš‚çš„è¿æ¥ï¼Œæµè§ˆå™¨çš„æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦ä¸æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªTCPè¿æ¥ï¼ŒæœåŠ¡å™¨å®Œæˆè¯·æ±‚å¤„ç†åç«‹å³æ–­å¼€TCPè¿æ¥ï¼ŒæœåŠ¡å™¨ä¸è·Ÿè¸ªæ¯ä¸ªå®¢æˆ·ä¹Ÿä¸è®°å½•è¿‡å»çš„è¯·æ±‚ï¼› 3ã€HTTP 1.1ï¼šï¼ˆ1ï¼‰æ–°å¢äº†äº”ç§è¯·æ±‚æ–¹æ³•ï¼šPUTã€DELETEã€CONNECTã€TRACEã€OPTIONSï¼› ï¼ˆ2ï¼‰HTTP 1.1 åœ¨Requestæ¶ˆæ¯å¤´é‡Œå¤´å¤šäº†ä¸€ä¸ªHoståŸŸï¼Œä¾¿äºä¸€å°WEBæœåŠ¡å™¨ä¸Šå¯ä»¥åœ¨åŒä¸€ä¸ªIPåœ°å€å’Œç«¯å£å·ä¸Šä½¿ç”¨ä¸åŒçš„ä¸»æœºåæ¥åˆ›å»ºå¤šä¸ªè™šæ‹ŸWEBç«™ç‚¹ï¼› ï¼ˆ3ï¼‰é•¿è¿æ¥ ï¼ˆ4ï¼‰ç¼“å­˜ç­–ç•¥ä¸åŒ ï¼ˆ5ï¼‰åœ¨HTTP/1.1ä¸­æ–°å¢äº†24ä¸ªçŠ¶æ€å“åº”ç ï¼š100-199 ç”¨äºæŒ‡å®šå®¢æˆ·ç«¯åº”ç›¸åº”çš„æŸäº›åŠ¨ä½œã€‚200-299 ç”¨äºè¡¨ç¤ºè¯·æ±‚æˆåŠŸã€‚300-399 ç”¨äºå·²ç»ç§»åŠ¨çš„æ–‡ä»¶å¹¶ä¸”å¸¸è¢«åŒ…å«åœ¨å®šä½å¤´ä¿¡æ¯ä¸­æŒ‡å®šæ–°çš„åœ°å€ä¿¡æ¯ã€‚400-499 ç”¨äºæŒ‡å‡ºå®¢æˆ·ç«¯çš„é”™è¯¯ã€‚500-599 ç”¨äºæ”¯æŒæœåŠ¡å™¨é”™è¯¯ã€‚ 4ã€HTTP 2.0 äºŒè¿›åˆ¶ä¼ è¾“ï¼šhttp 1.x çš„è§£ææ˜¯åŸºäºæ–‡æœ¬ï¼Œhttp2çš„è§£ææ˜¯åŸºäºäºŒè¿›åˆ¶ï¼› å¤šè·¯å¤ç”¨ headerå‹ç¼© æœåŠ¡ç«¯æ¨é€ 4.http code 206 401206 Partial Content æœ€åä¸€æ¡ä¼šè¯è¿”å›äº†HTTP/206 â€œPartial Contentâ€å“åº”.è¿™ç§å“åº”æ˜¯åœ¨å®¢æˆ·ç«¯è¡¨æ˜è‡ªå·±åªéœ€è¦ç›®æ ‡URLä¸Šçš„éƒ¨åˆ†èµ„æºçš„æ—¶å€™è¿”å›çš„.è¿™ç§æƒ…å†µç»å¸¸å‘ç”Ÿåœ¨å®¢æˆ·ç«¯ç»§ç»­è¯·æ±‚ä¸€ä¸ªæœªå®Œæˆçš„ä¸‹è½½çš„æ—¶å€™(é€šå¸¸æ˜¯å½“å®¢æˆ·ç«¯åŠ è½½ä¸€ä¸ªä½“ç§¯è¾ƒå¤§çš„åµŒå…¥æ–‡ä»¶,æ¯”å¦‚è§†é¢‘æˆ–PDFæ–‡ä»¶),æˆ–è€…æ˜¯å®¢æˆ·ç«¯å°è¯•å®ç°å¸¦å®½éæµçš„æ—¶å€™ã€‚ ä½ å¯ä»¥é€šè¿‡Rangeè¯·æ±‚å¤´è¾¨è®¤å‡ºä¸€ä¸ªéƒ¨åˆ†å†…å®¹è¯·æ±‚.è¯¥è¯·æ±‚å¤´è¡¨æ˜äº†å®¢æˆ·ç«¯éœ€è¦è¯·æ±‚èµ„æºçš„å“ªä¸€éƒ¨åˆ†ã€‚ 401é”™è¯¯åŸå› ï¼šç”¨æˆ·æ²¡æœ‰è®¿é—®æƒé™ï¼Œéœ€è¦è¿›è¡Œèº«ä»½è®¤è¯ã€‚ http å¸¸è§çš„é”™è¯¯ç 2XX æˆåŠŸ Â· 200 OKï¼Œè¡¨ç¤ºä»å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚åœ¨æœåŠ¡å™¨ç«¯è¢«æ­£ç¡®å¤„ç† Â· 204 No contentï¼Œè¡¨ç¤ºè¯·æ±‚æˆåŠŸï¼Œä½†å“åº”æŠ¥æ–‡ä¸å«å®ä½“çš„ä¸»ä½“éƒ¨åˆ† Â· 206 Partial Contentï¼Œè¿›è¡ŒèŒƒå›´è¯·æ±‚ 3XX é‡å®šå‘ Â· 301 moved permanentlyï¼Œæ°¸ä¹…æ€§é‡å®šå‘ï¼Œè¡¨ç¤ºèµ„æºå·²è¢«åˆ†é…äº†æ–°çš„ URL Â· 302 foundï¼Œä¸´æ—¶æ€§é‡å®šå‘ï¼Œè¡¨ç¤ºèµ„æºä¸´æ—¶è¢«åˆ†é…äº†æ–°çš„ URL Â· 303 see otherï¼Œè¡¨ç¤ºèµ„æºå­˜åœ¨ç€å¦ä¸€ä¸ª URLï¼Œåº”ä½¿ç”¨ GET æ–¹æ³•ä¸é¦™è·å–èµ„æº Â· 304 not modifiedï¼Œè¡¨ç¤ºæœåŠ¡å™¨å…è®¸è®¿é—®èµ„æºï¼Œä½†å› å‘ç”Ÿè¯·æ±‚æœªæ»¡è¶³æ¡ä»¶çš„æƒ…å†µ Â· 307 temporary redirectï¼Œä¸´æ—¶é‡å®šå‘ï¼Œå’Œ302å«ä¹‰ç›¸åŒ 4XX å®¢æˆ·ç«¯é”™è¯¯ Â· 400 bad requestï¼Œè¯·æ±‚æŠ¥æ–‡å­˜åœ¨è¯­æ³•é”™è¯¯ Â· 401 unauthorizedï¼Œè¡¨ç¤ºå‘é€çš„è¯·æ±‚éœ€è¦æœ‰é€šè¿‡ HTTP è®¤è¯çš„è®¤è¯ä¿¡æ¯ Â· 403 forbiddenï¼Œè¡¨ç¤ºå¯¹è¯·æ±‚èµ„æºçš„è®¿é—®è¢«æœåŠ¡å™¨æ‹’ç» Â· 404 not foundï¼Œè¡¨ç¤ºåœ¨æœåŠ¡å™¨ä¸Šæ²¡æœ‰æ‰¾åˆ°è¯·æ±‚çš„èµ„æº 5XX æœåŠ¡å™¨é”™è¯¯ Â· 500 internal sever errorï¼Œè¡¨ç¤ºæœåŠ¡å™¨ç«¯åœ¨æ‰§è¡Œè¯·æ±‚æ—¶å‘ç”Ÿäº†é”™è¯¯ Â· 503 service unavailableï¼Œè¡¨æ˜æœåŠ¡å™¨æš‚æ—¶å¤„äºè¶…è´Ÿè½½æˆ–æ­£åœ¨åœæœºç»´æŠ¤ï¼Œæ— æ³•å¤„ç†è¯·æ±‚ 5.ä¸ºä»€ä¹ˆä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹6.dispatch_async(queue,block);ä¼šä¸ä¼šå¼€çº¿ç¨‹é™¤äº†ä¸»é˜Ÿåˆ—ï¼Œå…¶ä»–é˜Ÿåˆ—éƒ½å¼€çº¿ç¨‹ã€‚ 7.äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„LeetCodeé¢˜ç›®é“¾æ¥ï¼šå‰‘æŒ‡ Offer 34. äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„ 123456789101112131415161718class Solution { LinkedList&lt;List&lt;Integer&gt;&gt; res = new LinkedList&lt;&gt;(); LinkedList&lt;Integer&gt; path = new LinkedList&lt;&gt;(); public List&lt;List&lt;Integer&gt;&gt; pathSum(TreeNode root, int sum) { recur(root, sum); return res; } void recur(TreeNode root, int tar) { if(root == null) return; path.add(root.val); tar -= root.val; if(tar == 0 &amp;&amp; root.left == null &amp;&amp; root.right == null) res.add(new LinkedList(path)); recur(root.left, tar); recur(root.right, tar); path.removeLast(); }} 8.Runtime9.UIView ç»˜åˆ¶è¿‡ç¨‹UIViewçš„ç»˜åˆ¶åŸç† å½“æˆ‘ä»¬è°ƒç”¨ UIView çš„ setNeedsDisplay æ–¹æ³•ä»¥å,å®é™…ä¸Šå¹¶æ²¡æœ‰ç«‹åˆ»å‘ç”Ÿå½“å‰è§†å›¾çš„ç»˜åˆ¶å·¥ä½œ,è€Œæ˜¯åœ¨ä¹‹åçš„æŸä¸€æ—¶æœºæ‰ä¼šè¿›è¡Œå½“å‰è§†å›¾çš„ç»˜åˆ¶ ã€‚ä¸ºä»€ä¹ˆæ²¡æœ‰ç«‹åˆ»å‘ç”Ÿå½“å‰è§†å›¾çš„ç»˜åˆ¶å·¥ä½œï¼Ÿï¼ˆå› ä¸ºåˆ°å½“å‰ runloop å°†è¦ç»“æŸçš„æ—¶å€™,æ‰ä¼šå¼€å§‹ä»‹å…¥åˆ°UIè§†å›¾çš„ç»˜åˆ¶æµç¨‹ä¸­ï¼‰ å½“è°ƒç”¨ UIView çš„ setNeedsDisplay å ç³»ç»Ÿä¼šç«‹åˆ»è°ƒç”¨ view çš„ layer çš„åŒåæ–¹æ³• [view.layer setNeedsDisplay] ,ä¹‹åç›¸å½“äºåœ¨ layer ä¸Šé¢æ‰“ä¸Šäº†ä¸€ä¸ªè„æ ‡è®° ç„¶åå†å½“å‰ runloop å°†è¦ç»“æŸçš„æ—¶å€™,æ‰ä¼šè°ƒç”¨ CALayer çš„ display å‡½æ•°æ–¹æ³•ï¼Œç„¶åæ‰è¿›å…¥åˆ°å½“å‰è§†å›¾çš„çœŸæ­£ç»˜åˆ¶å·¥ä½œçš„æµç¨‹å½“ä¸­ CALayer çš„ display æ–¹æ³•,åœ¨å†…éƒ¨ä¼šé¦–å…ˆåˆ¤æ–­ layer çš„ delegate æ˜¯å¦å“åº” displayLayer è¿™ä¸ªæ–¹æ³• è‹¥ä¸å“åº”,åˆ™ç³»ç»Ÿå¼€å§‹ç»˜åˆ¶æµç¨‹ è‹¥å“åº”,åˆ™å¼€å§‹å¼‚æ­¥ç»˜åˆ¶ ç³»ç»Ÿç»˜åˆ¶æµç¨‹ é¦–å…ˆ CALayer å†…éƒ¨ä¼šåˆ›å»ºä¸€ä¸ª CGContextRef ,åœ¨ drawRect æ–¹æ³•ä¸­,å¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡å †æ ˆå½“ä¸­çš„å–å‡ºè¿™ä¸ª contextï¼Œæ‹¿åˆ°çš„å°±æ˜¯å½“å‰æ§ä»¶æˆ–è€…è¯´è§†å›¾çš„ä¸Šä¸‹æ–‡æˆ–è€…è¯´æ˜¯ backing store ç„¶å layer ä¼šåˆ¤æ–­å®ƒæ˜¯å¦æœ‰ä»£ç†ï¼Œè‹¥æ²¡æœ‰,åˆ™è°ƒç”¨ CALayer çš„ drawInContextã€‚ è‹¥æœ‰åˆ™è°ƒç”¨ä»£ç†æ–¹æ³•,ç„¶ååšå½“å‰è§†å›¾çš„ç»˜åˆ¶å·¥ä½œï¼ˆè¿™ä¸€æ­¥å‘ç”Ÿåœ¨ç³»ç»Ÿå†…éƒ¨å½“ä¸­ï¼‰,å†åœ¨åˆé€‚çš„æ—¶æœº,åŸºäº drawRect å›è°ƒæ–¹æ³•, drawRect é»˜è®¤æ“ä½œæ˜¯ä»€ä¹ˆéƒ½ä¸åš,è€Œä¹‹æ‰€ä»¥æœ‰è¿™ä¸ªæ¥å£,å°±æ˜¯ä¸ºäº†è®©æˆ‘ä»¬åœ¨ç³»ç»Ÿç»˜åˆ¶ä¹‹ä¸Š,å¯ä»¥åšäº›è‡ªå®šä¹‰çš„ç»˜åˆ¶å·¥ä½œã€‚ æœ€åå†ç”± CALayer ä¸Šä¼ å¯¹åº”çš„ backing store ç»™ GPU,è¿™é‡Œçš„ backing store æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºä½å›¾ã€‚ å¼‚æ­¥ç»˜åˆ¶æµç¨‹ å·¦ä¾§æ˜¯ä¸»é˜Ÿåˆ—ï¼Œå³ä¾§æ˜¯å…¨å±€å¹¶å‘é˜Ÿåˆ— å‡å¦‚åœ¨æŸä¸€æ—¶æœºè°ƒç”¨äº† setNeedsDiaplay æ–¹æ³•å åœ¨å½“å‰ runloop å°†è¦ç»“æŸçš„æ—¶å€™,ä¼šæœ‰ç³»ç»Ÿè°ƒç”¨è§†å›¾æ‰€å¯¹åº” layer çš„ display æ–¹æ³• å¦‚æœä»£ç†å®ç°äº† displayLayer æ–¹æ³•,ä¼šè°ƒç”¨è¿™ä¸ªä»£ç†çš„ displayLayer è¿™ä¸ªæ–¹æ³• ç„¶åé€šè¿‡å­çº¿ç¨‹çš„åˆ‡æ¢,æˆ‘ä»¬ä¼šåœ¨å­çº¿ç¨‹ä¸­å»åšä½å›¾çš„ç»˜åˆ¶ï¼Œæ­¤æ—¶ä¸»çº¿ç¨‹å¯ä»¥å»åšäº›å…¶ä»–çš„å·¥ä½œ ç„¶åå†å›åˆ°ä¸»é˜Ÿåˆ—ä¸­,æäº¤è¿™ä¸ªä½å›¾,è®¾ç½®ç»™ CALayer çš„ contents å±æ€§ å­çº¿ç¨‹çš„ç»˜åˆ¶ é€šè¿‡ CGBitmapContextCreat æ–¹æ³•,æ¥åˆ›å»ºä¸€ä¸ªä½å›¾çš„ä¸Šä¸‹æ–‡ é€šè¿‡ CoreGraphic çš„ç›¸å…³ API,å¯ä»¥åšå½“å‰ UI æ§ä»¶çš„ä¸€äº›ç»˜åˆ¶å·¥ä½œ ä¹‹åé€šè¿‡ CGBitmapContextCreatImage æ–¹æ³•,æ ¹æ®æ‰€ç»˜åˆ¶çš„ä¸Šä¸‹æ–‡,ç”Ÿæˆä¸€å¼  CGImage å›¾ç‰‡ æœ€åå›åˆ°ä¸»é˜Ÿåˆ—ä¸­ï¼Œå°†è¯¥ CGImage å›¾ç‰‡è®¾ç½®ä¸º CALayer çš„ contents å‚è€ƒé“¾æ¥ï¼šUIç»˜åˆ¶åŸç†&amp;ç³»ç»Ÿ/å¼‚æ­¥ç»˜åˆ¶æµç¨‹ UIViewçš„ç»˜åˆ¶åŸç†åŠä¼˜åŒ– 10.autoreleasepool å­çº¿ç¨‹ä½¿ç”¨äº† autorelease åï¼Œå¦‚æœå½“å‰çº¿ç¨‹æ²¡æœ‰ AutorelesepoolPage çš„è¯ï¼Œä»£ç æ‰§è¡Œé¡ºåºä¸º autorelease -&gt; autoreleaseFast -&gt; autoreleaseNoPageã€‚åœ¨ autoreleaseNoPage æ–¹æ³•ä¸­ï¼Œä¼šåˆ›å»ºä¸€ä¸ª hotPage ï¼Œç„¶åè°ƒç”¨page-&gt;add(obj) ã€‚ä¹Ÿå°±æ˜¯è¯´å³ä½¿è¿™ä¸ªçº¿ç¨‹æ²¡æœ‰ AutorelesepoolPage ï¼Œä½¿ç”¨äº† autorelease å¯¹è±¡æ—¶ä¹Ÿä¼š new ä¸€ä¸ª AutoreleasepoolPage å‡ºæ¥ç®¡ç† autorelese å¯¹è±¡ã€‚ å­çº¿ç¨‹çš„ autoreleasepool æ˜¯åœ¨çº¿ç¨‹é”€æ¯çš„æ—¶å€™é‡Šæ”¾çš„ã€‚ 11.VCç”Ÿå‘½å‘¨æœŸï¼ŒviewWillDisappear å’Œ viewDidDisappear ä¹‹é—´ä¼šä¸ä¼šè°ƒç”¨view çš„ layoutpush ä¼šè°ƒç”¨ï¼Œpop ä¸ä¼šè°ƒç”¨ 12345678910111 push 22-[2 loadView]2-[2 viewDidLoad]1-[1 viewWillDisappear:]2-[2 viewWillAppear:]2-[2 viewWillLayoutSubviews]2-[2 viewDidLayoutSubviews]1-[1 viewWillLayoutSubviews]1-[1 viewDidLayoutSubviews]1-[1 viewDidDisappear:]2-[2 viewDidAppear:] 12.autorelease è°ƒç”¨ release ä¼šç«‹å³é”€æ¯å—13.GCDèƒ½ä¸èƒ½å–æ¶ˆä»»åŠ¡ dispatch_block_cancel å®šä¹‰å¤–éƒ¨å˜é‡ï¼Œç”¨äºæ ‡è®°blockæ˜¯å¦éœ€è¦å–æ¶ˆ å‚è€ƒé“¾æ¥ï¼šå¦‚ä½•å–æ¶ˆGCDä»»åŠ¡","link":"/å­—èŠ‚è·³åŠ¨é¢è¯•é¢˜/"},{"title":"å°ç±³é¢è¯•é¢˜åŠç­”æ¡ˆ","text":"å°ç±³é¢è¯•é¢˜ 1.è¯´è¯´ä½ äº†è§£çš„è®¾è®¡æ¨¡å¼ã€‚è¯´è¯´ä½ äº†è§£çš„è®¾è®¡åŸåˆ™ã€‚è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™1ã€å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰ å¼€é—­åŸåˆ™çš„æ„æ€æ˜¯ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚åœ¨ç¨‹åºéœ€è¦è¿›è¡Œæ‹“å±•çš„æ—¶å€™ï¼Œä¸èƒ½å»ä¿®æ”¹åŸæœ‰çš„ä»£ç ï¼Œå®ç°ä¸€ä¸ªçƒ­æ’æ‹”çš„æ•ˆæœã€‚ç®€è¨€ä¹‹ï¼Œæ˜¯ä¸ºäº†ä½¿ç¨‹åºçš„æ‰©å±•æ€§å¥½ï¼Œæ˜“äºç»´æŠ¤å’Œå‡çº§ã€‚æƒ³è¦è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¥å£å’ŒæŠ½è±¡ç±»ï¼Œåé¢çš„å…·ä½“è®¾è®¡ä¸­æˆ‘ä»¬ä¼šæåˆ°è¿™ç‚¹ã€‚ 2ã€é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰ é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯é¢å‘å¯¹è±¡è®¾è®¡çš„åŸºæœ¬åŸåˆ™ä¹‹ä¸€ã€‚ é‡Œæ°ä»£æ¢åŸåˆ™ä¸­è¯´ï¼Œä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚LSP æ˜¯ç»§æ‰¿å¤ç”¨çš„åŸºçŸ³ï¼Œåªæœ‰å½“æ´¾ç”Ÿç±»å¯ä»¥æ›¿æ¢æ‰åŸºç±»ï¼Œä¸”è½¯ä»¶å•ä½çš„åŠŸèƒ½ä¸å—åˆ°å½±å“æ—¶ï¼ŒåŸºç±»æ‰èƒ½çœŸæ­£è¢«å¤ç”¨ï¼Œè€Œæ´¾ç”Ÿç±»ä¹Ÿèƒ½å¤Ÿåœ¨åŸºç±»çš„åŸºç¡€ä¸Šå¢åŠ æ–°çš„è¡Œä¸ºã€‚é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹å¼€é—­åŸåˆ™çš„è¡¥å……ã€‚å®ç°å¼€é—­åŸåˆ™çš„å…³é”®æ­¥éª¤å°±æ˜¯æŠ½è±¡åŒ–ï¼Œè€ŒåŸºç±»ä¸å­ç±»çš„ç»§æ‰¿å…³ç³»å°±æ˜¯æŠ½è±¡åŒ–çš„å…·ä½“å®ç°ï¼Œæ‰€ä»¥é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹å®ç°æŠ½è±¡åŒ–çš„å…·ä½“æ­¥éª¤çš„è§„èŒƒã€‚ 3ã€ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰ è¿™ä¸ªåŸåˆ™æ˜¯å¼€é—­åŸåˆ™çš„åŸºç¡€ï¼Œå…·ä½“å†…å®¹ï¼šé’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“ã€‚ 4ã€æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰ è¿™ä¸ªåŸåˆ™çš„æ„æ€æ˜¯ï¼šä½¿ç”¨å¤šä¸ªéš”ç¦»çš„æ¥å£ï¼Œæ¯”ä½¿ç”¨å•ä¸ªæ¥å£è¦å¥½ã€‚å®ƒè¿˜æœ‰å¦å¤–ä¸€ä¸ªæ„æ€æ˜¯ï¼šé™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ã€‚ç”±æ­¤å¯è§ï¼Œå…¶å®è®¾è®¡æ¨¡å¼å°±æ˜¯ä»å¤§å‹è½¯ä»¶æ¶æ„å‡ºå‘ã€ä¾¿äºå‡çº§å’Œç»´æŠ¤çš„è½¯ä»¶è®¾è®¡æ€æƒ³ï¼Œå®ƒå¼ºè°ƒé™ä½ä¾èµ–ï¼Œé™ä½è€¦åˆã€‚ 5ã€è¿ªç±³ç‰¹æ³•åˆ™ï¼Œåˆç§°æœ€å°‘çŸ¥é“åŸåˆ™ï¼ˆDemeter Principleï¼‰ æœ€å°‘çŸ¥é“åŸåˆ™æ˜¯æŒ‡ï¼šä¸€ä¸ªå®ä½“åº”å½“å°½é‡å°‘åœ°ä¸å…¶ä»–å®ä½“ä¹‹é—´å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œä½¿å¾—ç³»ç»ŸåŠŸèƒ½æ¨¡å—ç›¸å¯¹ç‹¬ç«‹ã€‚ 6ã€åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite Reuse Principleï¼‰ åˆæˆå¤ç”¨åŸåˆ™æ˜¯æŒ‡ï¼šå°½é‡ä½¿ç”¨åˆæˆ/èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿ã€‚ è®¾è®¡æ¨¡å¼è£…é¥°æ¨¡å¼ï¼šåœ¨ä¸æ”¹å˜åŸå°è£…çš„å‰æä¸‹ï¼Œä¸ºå¯¹è±¡åŠ¨æ€æ·»åŠ æ–°åŠŸèƒ½çš„æ¨¡å¼ã€‚åœ¨ Objective-C ä¸­ï¼Œå®ƒçš„å®ç°å½¢å¼ä¸º Category å’Œ Delegationï¼›åœ¨ Swift ä¸­ï¼Œå®ƒçš„å®ç°å½¢å¼ä¸º Extension å’Œ Delegationã€‚ è§‚å¯Ÿè€…æ¨¡å¼ï¼šé€šçŸ¥ã€KVO å¤‡å¿˜å½•æ¨¡å¼ï¼šä¿å­˜å¯¹è±¡å½“å‰çš„çŠ¶æ€ï¼Œå¹¶åœ¨æ—¥åå¯ä»¥æ¢å¤çš„æ¨¡å¼ã€‚ç”¨ UserDefaults æ¥è¯»å†™ï¼ŒåŒæ—¶é…åˆæ ˆå¯ä»¥å­˜å‚¨ä¸€ç³»åˆ—çŠ¶æ€ã€‚å®ƒç»å¸¸ç”¨äºåˆå§‹åŒ–ã€é‡å¯ã€App å‰åå°çŠ¶æ€æ”¹å˜ç­‰åœºæ™¯ã€‚ å·¥å‚æ¨¡å¼ å•ä¾‹æ¨¡å¼ 2.ä»€ä¹ˆæ˜¯é˜Ÿåˆ—ï¼ŸåŒæ­¥å¼‚æ­¥æ˜¯ä»€ä¹ˆï¼ŸGCDä¸NSOperationçš„ç›¸åŒä¸ä¸åŒï¼Œä½¿ç”¨åœºæ™¯ã€‚GCDçš„é˜Ÿåˆ—å¯ä»¥åˆ†ä¸º2å¤§ç±»å‹å¹¶å‘é˜Ÿåˆ—ï¼ˆConcurrent Dispatch Queueï¼‰ å¯ä»¥è®©å¤šä¸ªä»»åŠ¡å¹¶å‘ï¼ˆåŒæ—¶ï¼‰æ‰§è¡Œï¼ˆè‡ªåŠ¨å¼€å¯å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œä»»åŠ¡ï¼‰ å¹¶å‘åŠŸèƒ½åªæœ‰åœ¨å¼‚æ­¥ï¼ˆdispatch_asyncï¼‰å‡½æ•°ä¸‹æ‰æœ‰æ•ˆ ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial Dispatch Queueï¼‰ è®©ä»»åŠ¡ä¸€ä¸ªæ¥ç€ä¸€ä¸ªåœ°æ‰§è¡Œï¼ˆä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼‰ åŒæ­¥å’Œå¼‚æ­¥ä¸»è¦å½±å“ï¼šèƒ½ä¸èƒ½å¼€å¯æ–°çš„çº¿ç¨‹ åŒæ­¥ï¼šåœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œä¸å…·å¤‡å¼€å¯æ–°çº¿ç¨‹çš„èƒ½åŠ› å¼‚æ­¥ï¼šåœ¨æ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œå…·å¤‡å¼€å¯æ–°çº¿ç¨‹çš„èƒ½åŠ› å¹¶å‘å’Œä¸²è¡Œä¸»è¦å½±å“ï¼šä»»åŠ¡çš„æ‰§è¡Œæ–¹å¼ å¹¶å‘ï¼šå¤šä¸ªä»»åŠ¡å¹¶å‘ï¼ˆåŒæ—¶ï¼‰æ‰§è¡Œ ä¸²è¡Œï¼šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ å¹¶å‘é˜Ÿåˆ— æ‰‹åŠ¨åˆ›å»ºçš„ä¸²è¡Œé˜Ÿåˆ— ä¸»é˜Ÿåˆ— åŒæ­¥ï¼ˆsyncï¼‰ æ²¡æœ‰å¼€å¯æ–°çº¿ç¨‹ï¼Œä¸²è¡Œæ‰§è¡Œä»»åŠ¡ æ²¡æœ‰å¼€å¯æ–°çº¿ç¨‹ï¼Œä¸²è¡Œæ‰§è¡Œä»»åŠ¡ æ²¡æœ‰å¼€å¯æ–°çº¿ç¨‹ï¼Œä¸²è¡Œæ‰§è¡Œä»»åŠ¡ å¼‚æ­¥ï¼ˆasyncï¼‰ æœ‰å¼€å¯æ–°çº¿ç¨‹ï¼Œå¹¶å‘æ‰§è¡Œä»»åŠ¡ æœ‰å¼€å¯æ–°çº¿ç¨‹ï¼Œä¸²è¡Œæ‰§è¡Œä»»åŠ¡ æ²¡æœ‰å¼€å¯æ–°çº¿ç¨‹ï¼Œä¸²è¡Œæ‰§è¡Œä»»åŠ¡ ä½¿ç”¨syncå‡½æ•°å¾€å½“å‰ä¸²è¡Œé˜Ÿåˆ—ä¸­æ·»åŠ ä»»åŠ¡ï¼Œä¼šå¡ä½å½“å‰çš„ä¸²è¡Œé˜Ÿåˆ—ï¼ˆäº§ç”Ÿæ­»é”ï¼‰ 3.Blockï¼Œæœ¬è´¨ï¼ŒæŒ‡é’ˆå¼•ç”¨ï¼Œå€¼å¼•ç”¨ï¼Œå˜é‡æ•è·ï¼ˆstaticå’Œautoï¼‰ï¼Œ__weak __block12345NSMutableArray *array = nil;void(^Block)(void) = ^{ array = [NSMutableArray array];};Block(); æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿå±€éƒ¨å˜é‡æ˜¯å€¼æ•è·ï¼Œä¸èƒ½åœ¨blockå†…éƒ¨ä¿®æ”¹ã€‚ 12345NSMutableArray *array = [NSMutableArray array];void(^Block)(void) = ^{ [array addObject:\"1\"];};Block(); æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿæ²¡é—®é¢˜ï¼Œå¯ä»¥æ·»åŠ å…ƒç´  4.äº¤å‰é“¾è¡¨æ‰¾äº¤ç‚¹123456789101112function FindFirstCommonNode(pHead1, pHead2){ if (pHead1 == null || pHead2 == null) { return null; } let p1 = pHead1, p2 = pHead2; while (p1 != p2) { p1 = p1 == null ? pHead2 : p1.next; p2 = p2 == null ? pHead1 : p2.next; } return p1;} 5.æ€§èƒ½ä¼˜åŒ–ï¼Œå¯åŠ¨ä¼˜åŒ–æ€§èƒ½ä¼˜åŒ– cellå¤ç”¨ï¼Œheaderã€footerå¤ç”¨ã€‚ å°½é‡æŠŠviewè®¾ç½®ä¸é€æ˜ã€‚ å‡å°‘è§†å›¾çš„å±‚çº§ã€‚ å°½é‡é¿å…è°ƒæ•´è§†å›¾å±‚æ¬¡ã€æ·»åŠ å’Œç§»é™¤è§†å›¾ã€‚ åˆç†é€‰æ‹©åŠ è½½å›¾ç‰‡çš„æ–¹å¼ï¼ŒUIImage imageNamed: ImageAssets ç”¨äºå¤šä¸ªåœ°æ–¹é‡å¤ä½¿ç”¨ï¼ŒUIImage imageWithContentsOfFile ä¸€èˆ¬ç”¨åœ¨å›¾ç‰‡æ•°æ®å¾ˆå¤§ï¼Œä¸€èˆ¬ä¸éœ€è¦å¤šæ¬¡ä½¿ç”¨çš„æƒ…å†µã€‚ å›¾ç‰‡å¤§å°æœ€å¥½å’ŒUIImageViewçš„å¤§å°ç›¸åŒã€‚ ä¸è¦é˜»å¡ä¸»çº¿ç¨‹ï¼Œè€—æ—¶æ“ä½œæ”¾åœ¨å­çº¿ç¨‹è¿›è¡Œã€‚ æ‡’åŠ è½½ã€‚ ç¼“å­˜ï¼Œç¼“å­˜å›¾ç‰‡SDWebImageï¼Œç¼“å­˜è¡Œé«˜ï¼ŒNSCacheç¼“å­˜ã€‚ å¤ç”¨é«˜å¼€é”€å¯¹è±¡NSDateFormatterå’ŒNSCalendarã€‚ å‡å°‘ç¦»å±æ¸²æŸ“ï¼Œä¼˜åŒ–åœ†è§’ã€é˜´å½±ã€‚ ä½¿ç”¨æ­£ç¡®çš„æ•°æ®å­˜å‚¨ã€‚ å¯åŠ¨ä¼˜åŒ– å°†ä¸€äº›è€—æ—¶æ“ä½œå»¶è¿Ÿæ‰§è¡Œã€‚æ¯”å¦‚SDKçš„åˆå§‹åŒ–ï¼Œç•Œé¢çš„åˆ›å»ºã€‚ ä¸èƒ½å»¶è¿Ÿæ‰§è¡Œçš„ï¼Œå°½é‡æ”¾åˆ°åå°æ‰§è¡Œã€‚æ¯”å¦‚æ•°æ®è¯»å–ï¼ŒåŸå§‹ JSON æ•°æ®è½¬å¯¹è±¡ï¼Œæ—¥å¿—å‘é€ã€‚ å‡å°‘åŠ¨æ€åº“ã€åˆå¹¶åŠ¨æ€åº“ï¼Œå®šæœŸæ¸…ç†ä¸å¿…è¦çš„åŠ¨æ€åº“ã€‚ å‡å°‘ç±»ã€åˆ†ç±»çš„æ•°é‡ï¼Œåˆå¹¶Categoryå’ŒåŠŸèƒ½ç±»ä¼¼çš„ç±»ã€‚åˆ é™¤ä¸å¿…è¦çš„æ–¹æ³•å’Œç±»ã€åˆ†ç±»ã€‚ å°†ä¸å¿…é¡»åœ¨+loadä¸­åšçš„äº‹å»¶æ—¶åˆ°+initializeä¸­ã€‚ 6.è°ˆè°ˆhttps ä¸€ä¸ªHTTPSè¯·æ±‚å®é™…ä¸ŠåŒ…å«äº†ä¸¤æ¬¡HTTPä¼ è¾“ï¼š 1ï¼‰å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªhttpè¯·æ±‚ï¼Œè¿æ¥åˆ°æœåŠ¡å™¨çš„443ç«¯å£ã€‚ 2ï¼‰æœåŠ¡ç«¯æŠŠè‡ªå·±çš„ä¿¡æ¯ä»¥æ•°å­—è¯ä¹¦çš„å½¢å¼è¿”å›ç»™å®¢æˆ·ç«¯ï¼ˆè¯ä¹¦å†…å®¹æœ‰å¯†é’¥å…¬é’¥ï¼Œç½‘ç«™åœ°å€ï¼Œè¯ä¹¦é¢å‘æœºæ„ï¼Œå¤±æ•ˆæ—¥æœŸç­‰ï¼‰ã€‚è¯ä¹¦ä¸­æœ‰ä¸€ä¸ªå…¬é’¥æ¥åŠ å¯†ä¿¡æ¯ï¼Œç§é’¥ç”±æœåŠ¡å™¨æŒæœ‰ã€‚ 3ï¼‰éªŒè¯è¯ä¹¦çš„åˆæ³•æ€§ å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„å“åº”åä¼šå…ˆéªŒè¯è¯ä¹¦çš„åˆæ³•æ€§ï¼ˆè¯ä¹¦ä¸­åŒ…å«çš„åœ°å€ä¸æ­£åœ¨è®¿é—®çš„åœ°å€æ˜¯å¦ä¸€è‡´ï¼Œè¯ä¹¦æ˜¯å¦è¿‡æœŸï¼‰ã€‚ 4ï¼‰ç”Ÿæˆéšæœºå¯†ç ï¼ˆRSAç­¾åï¼‰ å¦‚æœéªŒè¯é€šè¿‡ï¼Œæˆ–ç”¨æˆ·æ¥å—äº†ä¸å—ä¿¡ä»»çš„è¯ä¹¦ï¼Œæµè§ˆå™¨å°±ä¼šç”Ÿæˆä¸€ä¸ªéšæœºçš„å¯¹ç§°å¯†é’¥ï¼ˆsession keyï¼‰å¹¶ç”¨å…¬é’¥åŠ å¯†ï¼Œè®©æœåŠ¡ç«¯ç”¨ç§é’¥è§£å¯†ï¼Œè§£å¯†åå°±ç”¨è¿™ä¸ªå¯¹ç§°å¯†é’¥è¿›è¡Œä¼ è¾“äº†ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¯´æ˜æœåŠ¡ç«¯ç¡®å®æ˜¯ç§é’¥çš„æŒæœ‰è€…ã€‚ 5ï¼‰ç”Ÿæˆå¯¹ç§°åŠ å¯†ç®—æ³• éªŒè¯å®ŒæœåŠ¡ç«¯èº«ä»½åï¼Œå®¢æˆ·ç«¯ç”Ÿæˆä¸€ä¸ªå¯¹ç§°åŠ å¯†çš„ç®—æ³•å’Œå¯¹åº”å¯†é’¥ï¼Œä»¥å…¬é’¥åŠ å¯†ä¹‹åå‘é€ç»™æœåŠ¡ç«¯ã€‚æ­¤æ—¶è¢«é»‘å®¢æˆªè·ä¹Ÿæ²¡ç”¨ï¼Œå› ä¸ºåªæœ‰æœåŠ¡ç«¯çš„ç§é’¥æ‰å¯ä»¥å¯¹å…¶è¿›è¡Œè§£å¯†ã€‚ä¹‹åå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å¯ä»¥ç”¨è¿™ä¸ªå¯¹ç§°åŠ å¯†ç®—æ³•æ¥åŠ å¯†å’Œè§£å¯†é€šä¿¡å†…å®¹äº†ã€‚ 6ï¼‰å®¢æˆ·ç«¯ä¼šå‘èµ·HTTPSä¸­çš„ç¬¬äºŒä¸ªHTTPè¯·æ±‚ï¼Œå°†åŠ å¯†ä¹‹åçš„å®¢æˆ·ç«¯å¯†é’¥å‘é€ç»™æœåŠ¡å™¨ã€‚ 7ï¼‰æœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„å¯†æ–‡ä¹‹åï¼Œä¼šç”¨è‡ªå·±çš„ç§é’¥å¯¹å…¶è¿›è¡Œéå¯¹ç§°è§£å¯†ï¼Œè§£å¯†ä¹‹åçš„æ˜æ–‡å°±æ˜¯å®¢æˆ·ç«¯å¯†é’¥ï¼Œç„¶åç”¨å®¢æˆ·ç«¯å¯†é’¥å¯¹æ•°æ®è¿›è¡Œå¯¹ç§°åŠ å¯†ï¼Œè¿™æ ·æ•°æ®å°±å˜æˆäº†å¯†æ–‡ã€‚ 8ï¼‰ç„¶åæœåŠ¡å™¨å°†åŠ å¯†åçš„å¯†æ–‡å‘é€ç»™å®¢æˆ·ç«¯ã€‚ 9ï¼‰å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å‘é€æ¥çš„å¯†æ–‡ï¼Œç”¨å®¢æˆ·ç«¯å¯†é’¥å¯¹å…¶è¿›è¡Œå¯¹ç§°è§£å¯†ï¼Œå¾—åˆ°æœåŠ¡å™¨å‘é€çš„æ•°æ®ã€‚è¿™æ ·HTTPSä¸­çš„ç¬¬äºŒä¸ªHTTPè¯·æ±‚ç»“æŸï¼Œæ•´ä¸ªHTTPSä¼ è¾“å®Œæˆã€‚ 7.è¯´è¯´å“åº”é“¾èƒ½å¤Ÿå“åº”è§¦æ‘¸äº‹ä»¶çš„ä¾‹å¦‚UIViewï¼ŒUIButtonï¼ŒUIViewControllerï¼ŒUIApplicationï¼ŒAppdelegateç­‰éƒ½ç»§æ‰¿è‡ªUIResponderç±»ï¼Œä¸€ä¸ªé¡µé¢ä¸Šé€šå¸¸ä¼šæœ‰è®¸è®¸å¤šå¤šä¸ªè¿™ç§ç±»å‹çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥å¯¹ç‚¹å‡»äº‹ä»¶ä½œå‡ºå“åº”ã€‚ä¸ºäº†é¿å…å†²çªï¼Œè¿™å°±éœ€è¦æœ‰ä¸€ä¸ªå…ˆåé¡ºåºï¼Œä¹Ÿå°±æ˜¯å“åº”çš„ä¼˜å…ˆçº§ã€‚Hit-Testingçš„ç›®çš„å°±æ˜¯æ‰¾åˆ°å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„å“åº”å¯¹è±¡ã€‚å¯»æ‰¾çš„å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š UIApplicationé¦–å…ˆå°†äº‹ä»¶é˜Ÿåˆ—ä¸­çš„äº‹ä»¶å–å‡ºï¼Œä¼ é€’ç»™çª—å£å¯¹è±¡ã€‚å¦‚æœæœ‰å¤šä¸ªçª—å£ï¼Œåˆ™ä¼˜å…ˆè¯¢é—®windowsæ•°ç»„çš„æœ€åä¸€ä¸ªçª—å£ã€‚ å¦‚æœçª—å£ä¸èƒ½å“åº”äº‹ä»¶ï¼Œåˆ™å°†äº‹ä»¶ä¼ é€’ç»™å€’æ•°ç¬¬äºŒä¸ªçª—å£ï¼Œä»¥æ­¤ç±»æ¨ã€‚å¦‚æœçª—å£èƒ½å¤Ÿå“åº”äº‹ä»¶ï¼Œåˆ™å†ä¾æ¬¡è¯¢é—®è¯¥çª—å£çš„å­è§†å›¾ã€‚ é‡å¤æ­¥éª¤2ã€‚ è‹¥è§†å›¾çš„æ‰€æœ‰å­è§†å›¾å‡ä¸æ˜¯æœ€ä½³å“åº”è€…ï¼Œåˆ™è‡ªèº«å°±æ˜¯æœ€åˆé€‚çš„å“åº”è€…ã€‚å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸‹å‡ ç§çŠ¶æ€çš„è§†å›¾æ— æ³•å“åº”äº‹ä»¶ï¼š ä¸å…è®¸äº¤äº’çš„è§†å›¾ï¼šuserInteractionEnabled = NO éšè—çš„è§†å›¾ï¼šhidden = YES é€æ˜åº¦alpha&lt;0.01çš„è§†å›¾ æ€ä¹ˆæ ·éªŒè¯ä¸€ä¸‹ä¸Šé¢æ‰€è¯´çš„Hit-Testingçš„é¡ºåºå‘¢ï¼Œçœ‹ä¸€ä¸‹UIViewçš„APIï¼Œé‡Œé¢ä¼šæœ‰ä¸€ä¸ªhitTestï¼šwithEventï¼šæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ä½œç”¨å°±æ˜¯æŸ¥è¯¢å¹¶è¿”å›äº‹ä»¶åœ¨å½“å‰è§†å›¾ä¸­çš„å“åº”è€…ï¼Œæ¯ä¸ªè¢«è¯¢é—®åˆ°çš„è§†å›¾å¯¹è±¡éƒ½ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥è¿”å›å½“å‰è§†å›¾å±‚çš„å“åº”è€…ã€‚ å¦‚æœå½“å‰è§†å›¾æ— æ³•å“åº”äº‹ä»¶ï¼Œåˆ™è¿”å›nilã€‚ å¦‚æœå½“å‰è§†å›¾å¯ä»¥å“åº”äº‹ä»¶ï¼Œä½†å­è§†å›¾ä¸èƒ½å“åº”äº‹ä»¶ï¼Œåˆ™è¿”å›è‡ªèº«ä½œä¸ºå½“å‰è§†å›¾çš„å“åº”è€…ã€‚ å¦‚æœå½“å‰è§†å›¾å¯ä»¥å“åº”äº‹ä»¶ï¼ŒåŒæ—¶æœ‰å­è§†å›¾å¯ä»¥å“åº”äº‹ä»¶ï¼Œåˆ™è¿”å›è¯¥å­è§†å›¾ä½œä¸ºå½“å‰è§†å›¾çš„å“åº”è€…ã€‚ 8.ä½ çŸ¥é“å“ªäº›é”ï¼Ÿï¼ˆè‡ªæ—‹é”ï¼Œäº’æ–¥é”ï¼‰ä½¿ç”¨åœºæ™¯éƒ½æœ‰å“ªäº›ï¼Ÿos_unfair_lockOSSpinLockdispatch_semaphorepthread_mutexNSLockNSConditionpthread_mutex(recursive)NSRecursiveLockNSConditionLock@synchronized çº¿ç¨‹åŒæ­¥","link":"/å°ç±³é¢è¯•é¢˜/"},{"title":"åº¦å°æ»¡","text":"åº¦å°æ»¡ ä¸€é¢ï¼š 1.å†…å­˜ç®¡ç†ï¼Œå†…å­˜æ³„æ¼ï¼Œç›‘æµ‹æ–¹æ³•ï¼Œè§£å†³åŠæ³• 2.Appå¯åŠ¨æµç¨‹ï¼Œä¼˜åŒ–æ–¹æ³•ï¼ŒæŸ¥çœ‹æ¯ä¸ªé˜¶æ®µè€—æ—¶çš„æ–¹æ³• Categoryå’ŒExtensionåŒºåˆ«ï¼Œä½¿ç”¨åœºæ™¯ Categoryå¯ä»¥æ·»åŠ å±æ€§å—ï¼Ÿ 3.webViewå’ŒåŸç”Ÿäº¤äº’ï¼Œæ€ä¹ˆæå‡webViewåŠ è½½é€Ÿåº¦ï¼ŸH5æ€ä¹ˆåŠ è½½æœ¬åœ°çš„JSå’Œå›¾ç‰‡èµ„æºï¼Ÿ 4.HTTPå’ŒHTTPSçš„åŒºåˆ«ï¼ŒHTTPSæ€ä¹ˆä¿è¯å®‰å…¨ï¼ŸGETå’ŒPOSTåŒºåˆ«ï¼Ÿè¯·æ±‚å¤´é‡Œä¸€èˆ¬æœ‰ä»€ä¹ˆï¼Ÿ 5.MVCã€MVPã€MVVMåŒºåˆ«ï¼Œä½¿ç”¨åœºæ™¯ 6.ç”¨OCå®ç°ä¸€ä¸ªæ ˆï¼Œpush pop isEmptyæ–¹æ³•ï¼Œæ ˆå’Œé˜Ÿåˆ—çš„åŒºåˆ«ï¼Œä½¿ç”¨åœºæ™¯ 7.äº†è§£é¸¿è’™å— äºŒé¢ï¼š 1.äº†è§£æå‡ç ”å‘æ•ˆç‡çš„æ–¹æ³•ï¼Œè·¨å¹³å°æ¡†æ¶ï¼Ÿ 2.Flutterå’ŒåŸç”Ÿäº¤äº’æ–¹æ³• 3.å°ç¨‹åºçš„å®ç°åŸç†ï¼ŒSNçš„å®ç°åŸç† 3.è®¾è®¡å›¾ç‰‡ä¸‹è½½æ¡†æ¶ï¼ŒåŒ…æ‹¬å†…å­˜ï¼Œç¼“å­˜ï¼Œè§£ç ç­‰ï¼›ç¼“å­˜çš„æŠ€æœ¯æŒ‡æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ(å‘½ä¸­ç‡) åœ¨ç¼“å­˜å³å°†è¾¾åˆ°æœ€å¤§å®¹é‡æ—¶ï¼ŒåŒæ—¶æœ‰å¤§é‡å†™å…¥ç¼“å­˜çš„æ“ä½œï¼Œæ€ä¹ˆä¼˜åŒ–ï¼Ÿ 4.ä¸‹è½½é™åˆ¶å¹¶å‘æ•°é‡ï¼Œä¸‹è½½æ–­ç‚¹ç»­ä¼  httpè¯·æ±‚ç æ˜¯å¤šå°‘ 5.åŒå±‚æ¸²æŸ“æ€ä¹ˆå®ç° 6.webViewåŠ è½½é€Ÿåº¦ä¼˜åŒ– 7.çº¿ä¸Šå¡é¡¿ç›‘æ§ï¼Œå¡é¡¿ä¼˜åŒ– 8.çº¿ä¸Šå†…å­˜ç›‘æ§ 9.å£è¿°å¿«é€Ÿæ’åºï¼Œå¿«é€Ÿæ’åºç”¨è¿­ä»£å®ç° 10.HTTPSçš„æµç¨‹ï¼Œå®¢æˆ·ç«¯æ ¡éªŒè¯ä¹¦çš„è¿‡ç¨‹ï¼Œé“¾å¼éªŒè¯ ä¸‰é¢ï¼š 1.ç›‘æ§ 2.åŸç”Ÿä¸H5äº¤äº’ï¼Œæ³¨å…¥å’Œpost messageæ€ä¹ˆé€‰å‹çš„ï¼Ÿ 3.æœ‰æ²¡æœ‰å…³æ³¨è¿‡ä¸šåŠ¡æŒ‡æ ‡ï¼ŒæŠ€æœ¯æ‰‹æ®µæå‡ä¸šåŠ¡æŒ‡æ ‡çš„æƒ…å†µï¼Ÿæ”¶é“¶å°æ”¯ä»˜æˆåŠŸç‡ï¼Ÿ 4.å…¶ä»–ï¼šå¹´é¾„ã€çœ‹æœºä¼šåŸå› ï¼Œæœ‰æ²¡æœ‰åˆ«çš„offer å‚è€ƒç­”æ¡ˆ1.å†…å­˜ç®¡ç†ï¼Œå†…å­˜æ³„æ¼ï¼Œå¡é¡¿ç›‘æµ‹æ–¹æ³•ï¼Œè§£å†³åŠæ³• 2.Appå¯åŠ¨æµç¨‹ï¼Œä¼˜åŒ–æ–¹æ³•ï¼ŒæŸ¥çœ‹æ¯ä¸ªé˜¶æ®µè€—æ—¶çš„æ–¹æ³• 3.webViewå’ŒåŸç”Ÿäº¤äº’ï¼Œæ€ä¹ˆæå‡webViewåŠ è½½é€Ÿåº¦ï¼ŸH5æ€ä¹ˆåŠ è½½æœ¬åœ°çš„JSå’Œå›¾ç‰‡èµ„æºï¼Ÿ 4.HTTPå’ŒHTTPSçš„åŒºåˆ«ï¼ŒHTTPSæ€ä¹ˆä¿è¯å®‰å…¨ï¼ŸGETå’ŒPOSTåŒºåˆ«ï¼Ÿè¯·æ±‚å¤´é‡Œä¸€èˆ¬æœ‰ä»€ä¹ˆï¼Ÿ HTTPï¼ˆHyperText Transfer Protocolï¼‰å’ŒHTTPSï¼ˆHyperText Transfer Protocol Secureï¼‰æ˜¯ç”¨äºåœ¨ç½‘ç»œä¸Šä¼ è¾“æ•°æ®çš„ä¸¤ç§åè®®ã€‚å®ƒä»¬æœ‰ä»¥ä¸‹ä¸»è¦åŒºåˆ«ï¼š å®‰å…¨æ€§ï¼š HTTPï¼šæ•°æ®ä»¥çº¯æ–‡æœ¬å½¢å¼ä¼ è¾“ï¼Œä¸åŠ å¯†ã€‚å› æ­¤ï¼Œæ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å®¹æ˜“è¢«æˆªè·å’Œç¯¡æ”¹ã€‚ HTTPSï¼šåœ¨HTTPçš„åŸºç¡€ä¸Šå¢åŠ äº†SSL/TLSåŠ å¯†å±‚ã€‚æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¼šè¢«åŠ å¯†ï¼Œæä¾›äº†æ•°æ®çš„ä¿å¯†æ€§å’Œå®Œæ•´æ€§ï¼Œé˜²æ­¢è¢«çªƒå¬å’Œç¯¡æ”¹ã€‚ ç«¯å£ï¼š HTTPï¼šé»˜è®¤ä½¿ç”¨80ç«¯å£ã€‚ HTTPSï¼šé»˜è®¤ä½¿ç”¨443ç«¯å£ã€‚ è¯ä¹¦ï¼š HTTPï¼šä¸éœ€è¦è¯ä¹¦ã€‚ HTTPSï¼šéœ€è¦SSL/TLSè¯ä¹¦ï¼Œç”¨äºåŠ å¯†é€šä¿¡å’ŒéªŒè¯æœåŠ¡å™¨èº«ä»½ã€‚è¯ä¹¦ç”±å—ä¿¡ä»»çš„è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰ç­¾å‘ã€‚ æ€§èƒ½ï¼š HTTPï¼šå› ä¸ºæ²¡æœ‰åŠ å¯†å’Œè§£å¯†çš„è¿‡ç¨‹ï¼Œé€Ÿåº¦ç›¸å¯¹è¾ƒå¿«ã€‚ HTTPSï¼šç”±äºéœ€è¦è¿›è¡ŒåŠ å¯†å’Œè§£å¯†æ“ä½œï¼Œæ€§èƒ½ä¼šæœ‰æ‰€ä¸‹é™ï¼Œä½†ç°ä»£ç¡¬ä»¶å’Œä¼˜åŒ–æŠ€æœ¯å·²ç»æå¤§åœ°å‡å°‘äº†è¿™ç§å½±å“ã€‚ GETå’ŒPOSTåŒºåˆ« GETï¼šä¸»è¦ç”¨äºè·å–æ•°æ®ï¼Œå‚æ•°åœ¨URLä¸­ï¼Œé€‚åˆä¼ è¾“è¾ƒå°‘ã€éæ•æ„Ÿæ•°æ®ï¼Œå¹‚ç­‰ä¸”å¯ç¼“å­˜ã€‚ POSTï¼šä¸»è¦ç”¨äºæäº¤æ•°æ®ï¼Œå‚æ•°åœ¨è¯·æ±‚ä½“ä¸­ï¼Œé€‚åˆä¼ è¾“å¤§é‡ã€æ•æ„Ÿæ•°æ®ï¼Œéå¹‚ç­‰ä¸”é€šå¸¸ä¸ç¼“å­˜ã€‚ ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„HTTPè¯·æ±‚å¤´å­—æ®µåŠå…¶ä½œç”¨ï¼š 1. é€šç”¨è¯·æ±‚å¤´å­—æ®µ Hostï¼šæŒ‡å®šè¯·æ±‚çš„ç›®æ ‡ä¸»æœºå’Œç«¯å£ï¼Œä¾‹å¦‚ï¼šHost: www.example.comã€‚è¿™æ˜¯HTTP/1.1ä¸­å¿…é¡»åŒ…å«çš„å¤´å­—æ®µã€‚ User-Agentï¼šæ ‡è¯†å‘å‡ºè¯·æ±‚çš„å®¢æˆ·ç«¯è½¯ä»¶ä¿¡æ¯ï¼Œä¾‹å¦‚æµè§ˆå™¨ç±»å‹å’Œç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿç­‰ï¼Œä¾‹å¦‚ï¼šUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.3ã€‚ Acceptï¼šæŒ‡å®šå®¢æˆ·ç«¯èƒ½å¤Ÿå¤„ç†çš„å†…å®¹ç±»å‹ï¼Œä¾‹å¦‚ï¼šAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8ã€‚ Accept-Languageï¼šæŒ‡å®šå®¢æˆ·ç«¯é¦–é€‰çš„è¯­è¨€å’Œåœ°åŒºï¼Œä¾‹å¦‚ï¼šAccept-Language: en-US,en;q=0.5ã€‚ Accept-Encodingï¼šæŒ‡å®šå®¢æˆ·ç«¯æ”¯æŒçš„å†…å®¹ç¼–ç ç±»å‹ï¼Œä¾‹å¦‚ï¼šAccept-Encoding: gzip, deflate, brã€‚ Connectionï¼šæ§åˆ¶è¿æ¥çš„ç®¡ç†ï¼Œä¾‹å¦‚ï¼šConnection: keep-aliveæˆ–Connection: closeã€‚ 2. è¯·æ±‚å¤´å­—æ®µï¼ˆè¯·æ±‚ç‰¹æœ‰ï¼‰ Refererï¼šæŒ‡ç¤ºè¯·æ±‚çš„æ¥æºé¡µé¢çš„URLï¼Œä¾‹å¦‚ï¼šReferer: https://www.example.com/previous-pageã€‚ Cookieï¼šå‘é€å­˜å‚¨åœ¨å®¢æˆ·ç«¯çš„Cookieæ•°æ®ï¼Œä¾‹å¦‚ï¼šCookie: sessionId=abc123; theme=lightã€‚ Authorizationï¼šç”¨äºä¼ é€’èº«ä»½éªŒè¯å‡­æ®ï¼Œä¾‹å¦‚ï¼šAuthorization: Bearer token123æˆ–Authorization: Basic base64credentialsã€‚ Content-Typeï¼šæŒ‡å®šè¯·æ±‚ä½“çš„åª’ä½“ç±»å‹ï¼Œå¸¸ç”¨äºPOSTå’ŒPUTè¯·æ±‚ï¼Œä¾‹å¦‚ï¼šContent-Type: application/jsonæˆ–Content-Type: application/x-www-form-urlencodedã€‚ Content-Lengthï¼šè¡¨ç¤ºè¯·æ±‚ä½“çš„å­—èŠ‚é•¿åº¦ï¼Œä¾‹å¦‚ï¼šContent-Length: 348ã€‚ Originï¼šè¡¨æ˜è¯·æ±‚çš„æ¥æºï¼Œç”¨äºè·¨åŸŸè¯·æ±‚ï¼Œä¾‹å¦‚ï¼šOrigin: https://www.example.comã€‚ If-Modified-Sinceï¼šç”¨äºæ¡ä»¶è¯·æ±‚ï¼Œåªåœ¨æŒ‡å®šæ—¥æœŸä¹‹åèµ„æºè¢«ä¿®æ”¹æ—¶æ‰è¿”å›ï¼Œä¾‹å¦‚ï¼šIf-Modified-Since: Wed, 21 Oct 2015 07:28:00 GMTã€‚ If-None-Matchï¼šç”¨äºæ¡ä»¶è¯·æ±‚ï¼Œå½“ETagä¸åŒ¹é…æ—¶æ‰è¿”å›ï¼Œä¾‹å¦‚ï¼šIf-None-Match: &quot;abc123&quot;ã€‚ Rangeï¼šè¯·æ±‚éƒ¨åˆ†èµ„æºå†…å®¹ï¼Œä¾‹å¦‚ï¼šRange: bytes=500-999ã€‚ 3. è‡ªå®šä¹‰è¯·æ±‚å¤´å­—æ®µ X-Requested-Withï¼šé€šå¸¸ç”¨äºæ ‡è¯†Ajaxè¯·æ±‚ï¼Œä¾‹å¦‚ï¼šX-Requested-With: XMLHttpRequestã€‚ X-CSRF-Tokenï¼šç”¨äºä¼ é€’CSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰ä»¤ç‰Œï¼Œä»¥é˜²æ­¢CSRFæ”»å‡»ã€‚ X-Forwarded-Forï¼šè®°å½•åŸå§‹å®¢æˆ·ç«¯IPåœ°å€ï¼Œå¸¸ç”¨äºä»£ç†æœåŠ¡å™¨ï¼Œä¾‹å¦‚ï¼šX-Forwarded-For: 203.0.113.195ã€‚ 4. HTTP/2 ç‰¹æœ‰å¤´å­—æ®µ :methodï¼šè¡¨ç¤ºHTTPæ–¹æ³•ï¼Œä¾‹å¦‚ï¼š:method: GETã€‚ :schemeï¼šè¡¨ç¤ºè¯·æ±‚çš„åè®®ï¼ˆhttpæˆ–httpsï¼‰ï¼Œä¾‹å¦‚ï¼š:scheme: httpsã€‚ :pathï¼šè¡¨ç¤ºè¯·æ±‚çš„è·¯å¾„å’ŒæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š:path: /index.htmlã€‚ :authorityï¼šè¡¨ç¤ºæœåŠ¡å™¨çš„ä¸»æœºåå’Œç«¯å£ï¼Œç±»ä¼¼äºHTTP/1.1çš„Hostå¤´å­—æ®µï¼Œä¾‹å¦‚ï¼š:authority: www.example.comã€‚ ç¤ºä¾‹è¯·æ±‚å¤´12345678910GET /index.html HTTP/1.1Host: www.example.comUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.3Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8Accept-Language: en-US,en;q=0.5Accept-Encoding: gzip, deflate, brConnection: keep-aliveReferer: https://www.example.com/previous-pageCookie: sessionId=abc123; theme=lightAuthorization: Bearer token123 è¿™äº›è¯·æ±‚å¤´å­—æ®µåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’æ—¶ï¼Œæä¾›äº†å…³äºè¯·æ±‚å’Œå®¢æˆ·ç«¯ç¯å¢ƒçš„ä¸°å¯Œä¿¡æ¯ï¼Œä½¿å¾—æœåŠ¡å™¨èƒ½å¤Ÿç†è§£å’Œå¤„ç†è¯·æ±‚ï¼Œå¹¶è¿”å›é€‚å½“çš„å“åº”ã€‚ 5.MVCã€MVPã€MVVMåŒºåˆ«ï¼Œä½¿ç”¨åœºæ™¯ 6.ç”¨OCå®ç°ä¸€ä¸ªæ ˆï¼Œpush pop isEmptyæ–¹æ³•ï¼Œæ ˆå’Œé˜Ÿåˆ—çš„åŒºåˆ«ï¼Œä½¿ç”¨åœºæ™¯ 7.äº†è§£é¸¿è’™å— äºŒé¢ï¼š 1.äº†è§£æå‡ç ”å‘æ•ˆç‡çš„æ–¹æ³•ï¼Œè·¨å¹³å°æ¡†æ¶ï¼Ÿ 2.Flutterå’ŒåŸç”Ÿäº¤äº’æ–¹æ³• 3.å°ç¨‹åºçš„å®ç°åŸç†ï¼ŒSNçš„å®ç°åŸç† 3.è®¾è®¡å›¾ç‰‡ä¸‹è½½æ¡†æ¶ï¼ŒåŒ…æ‹¬å†…å­˜ï¼Œç¼“å­˜ï¼Œè§£ç ç­‰ï¼›ç¼“å­˜çš„æŠ€æœ¯æŒ‡æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ(å‘½ä¸­ç‡) åœ¨ç¼“å­˜å³å°†è¾¾åˆ°æœ€å¤§å®¹é‡æ—¶ï¼ŒåŒæ—¶æœ‰å¤§é‡å†™å…¥ç¼“å­˜çš„æ“ä½œï¼Œæ€ä¹ˆä¼˜åŒ–ï¼Ÿ 4.ä¸‹è½½é™åˆ¶å¹¶å‘æ•°é‡ï¼Œä¸‹è½½æ–­ç‚¹ç»­ä¼  httpè¯·æ±‚ç æ˜¯å¤šå°‘ 5.åŒå±‚æ¸²æŸ“æ€ä¹ˆå®ç° å°ç¨‹åºåŒå±‚æ¸²æŸ“åŸç†å‰–æ å°ç¨‹åºåœ¨åŒå±‚æ¸²æŸ“ä¸Šçš„æ¢ç´¢ 6.webViewåŠ è½½é€Ÿåº¦ä¼˜åŒ– 7.çº¿ä¸Šå¡é¡¿ç›‘æ§ï¼Œå¡é¡¿ä¼˜åŒ– 8.çº¿ä¸Šå†…å­˜ç›‘æ§ iOSå¾®ä¿¡å†…å­˜ç›‘æ§ 9.å£è¿°å¿«é€Ÿæ’åºï¼Œå¿«é€Ÿæ’åºç”¨è¿­ä»£å®ç° 10.HTTPSçš„æµç¨‹ï¼Œå®¢æˆ·ç«¯æ ¡éªŒè¯ä¹¦çš„è¿‡ç¨‹ï¼Œé“¾å¼éªŒè¯ ç¬¬ä¸€æ­¥æ˜¯æ£€æŸ¥è¯ä¹¦çš„é“¾å¼éªŒè¯ã€‚å®¢æˆ·ç«¯ä¼šä½¿ç”¨å·²ä¿¡ä»»çš„æ ¹è¯ä¹¦ï¼ˆRoot Certificate Authorityï¼‰å»éªŒè¯æœåŠ¡å™¨è¯ä¹¦çš„æœ‰æ•ˆæ€§ã€‚æ ¹è¯ä¹¦æ˜¯æƒå¨æœºæ„é¢å‘çš„ï¼Œè¢«å¹¿æ³›ä¿¡ä»»çš„è¯ä¹¦ï¼Œç”¨äºè¯æ˜å…¶å®ƒè¯ä¹¦çš„åˆæ³•æ€§ã€‚å®¢æˆ·ç«¯ä¼šæ£€æŸ¥æœåŠ¡å™¨è¯ä¹¦ä¸­çš„é¢å‘è€…ï¼Œç„¶åé€’å½’åœ°æ£€æŸ¥é¢å‘è€…çš„è¯ä¹¦ï¼Œç›´åˆ°æ£€æŸ¥åˆ°æ ¹è¯ä¹¦æˆ–è€…æ‰¾ä¸åˆ°ä¿¡ä»»çš„æ ¹è¯ä¹¦ä¸ºæ­¢ã€‚ ç¬¬äºŒæ­¥æ˜¯æ£€æŸ¥è¯ä¹¦çš„æœ‰æ•ˆæœŸã€‚å®¢æˆ·ç«¯ä¼šæ£€æŸ¥è¯ä¹¦çš„æœ‰æ•ˆèµ·å§‹æ—¥æœŸå’Œæœ‰æ•ˆæˆªæ­¢æ—¥æœŸï¼Œç¡®ä¿è¯ä¹¦åœ¨æœ‰æ•ˆæœŸå†…ã€‚å¦‚æœè¯ä¹¦è¿‡æœŸï¼Œå®¢æˆ·ç«¯å°†æ‹’ç»è¿æ¥ã€‚ ç¬¬ä¸‰æ­¥æ˜¯æ£€æŸ¥è¯ä¹¦çš„å…¬é’¥ã€‚å®¢æˆ·ç«¯ä¼šéªŒè¯æœåŠ¡å™¨è¯ä¹¦ä¸­çš„å…¬é’¥å’ŒåŸŸåæ˜¯å¦åŒ¹é…ã€‚å®¢æˆ·ç«¯ä¼šä»è¯ä¹¦ä¸­æå–æœåŠ¡å™¨çš„å…¬é’¥ï¼Œå¹¶ä¸æœåŠ¡å™¨è¿›è¡Œæ¡æ‰‹åè®®ï¼ŒéªŒè¯è¯ä¹¦ä¸­çš„å…¬é’¥æ˜¯å¦ä¸æœåŠ¡å™¨çš„å…¬é’¥åŒ¹é…ã€‚å¦‚æœä¸åŒ¹é…ï¼Œå®¢æˆ·ç«¯å°†æ‹’ç»è¿æ¥ã€‚ é™¤äº†ä¸Šè¿°åŸºæœ¬çš„æ ¡éªŒæ­¥éª¤ï¼Œå®¢æˆ·ç«¯è¿˜å¯ä»¥è¿›è¡Œæ›´åŠ ä¸¥æ ¼çš„æ ¡éªŒï¼Œä»¥æé«˜å®‰å…¨æ€§ã€‚ä¾‹å¦‚ï¼Œå®¢æˆ·ç«¯å¯ä»¥æ£€æŸ¥è¯ä¹¦ä¸­æ˜¯å¦åŒ…å«æŒ‡çº¹ä¿¡æ¯ï¼ˆFingerprintï¼‰ï¼Œä»è€Œç¡®ä¿è¯ä¹¦çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ã€‚å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥æ£€æŸ¥è¯ä¹¦ä¸­çš„æ‰©å±•å­—æ®µï¼ŒæŸ¥çœ‹æ˜¯å¦å­˜åœ¨å…¶ä»–å®‰å…¨ç›¸å…³çš„ä¿¡æ¯ã€‚ æ€»ç»“æ¥è¯´ï¼Œå®¢æˆ·ç«¯æ ¡éªŒè¯ä¹¦çš„è¿‡ç¨‹åŒ…æ‹¬é“¾å¼éªŒè¯ã€æœ‰æ•ˆæœŸéªŒè¯å’Œå…¬é’¥åŒ¹é…éªŒè¯ã€‚é€šè¿‡è¿™äº›éªŒè¯æ­¥éª¤ï¼Œå®¢æˆ·ç«¯èƒ½å¤Ÿç¡®ä¿æ‰€è¿æ¥çš„æœåŠ¡å™¨æ˜¯åˆæ³•ä¸”å¯ä¿¡èµ–çš„ï¼Œä»è€Œä¿éšœé€šä¿¡çš„å®‰å…¨æ€§ã€‚ ä¸‰é¢ï¼š 1.ç›‘æ§ 2.åŸç”Ÿä¸H5äº¤äº’ï¼Œæ³¨å…¥å’Œpost messageæ€ä¹ˆé€‰å‹çš„ï¼Ÿ åœ¨ç§»åŠ¨å¼€å‘ä¸­ï¼ŒåŸç”Ÿä¸H5ï¼ˆHTML5ï¼‰äº¤äº’æ˜¯ä¸€ä¸ªå¸¸è§çš„éœ€æ±‚ã€‚ä¸ºäº†å®ç°è¿™ç§äº¤äº’ï¼Œé€šå¸¸æœ‰ä¸¤ç§ä¸»è¦çš„æ–¹æ³•ï¼šæ³¨å…¥ï¼ˆInjectionï¼‰å’Œ postMessageã€‚å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œé€‰æ‹©å“ªç§æ–¹æ³•å–å†³äºå…·ä½“çš„åº”ç”¨åœºæ™¯å’Œéœ€æ±‚ã€‚ä¸‹é¢å¯¹è¿™ä¸¤ç§æ–¹æ³•è¿›è¡Œè¯¦ç»†æ¯”è¾ƒå’Œå»ºè®®ï¼š æ³¨å…¥ï¼ˆInjectionï¼‰ä¼˜ç‚¹ï¼š çµæ´»æ€§é«˜ï¼šå¯ä»¥ç›´æ¥åœ¨H5é¡µé¢ä¸­æ³¨å…¥åŸç”Ÿä»£ç ï¼Œçµæ´»æ€§è¾ƒé«˜ã€‚ å¼ºå¤§çš„æ§åˆ¶åŠ›ï¼šåŸç”Ÿä»£ç å¯ä»¥ç›´æ¥æ“ä½œH5é¡µé¢çš„DOMå’ŒJavaScriptï¼Œæ§åˆ¶åŠ›å¼ºã€‚ æ— éœ€ç‰¹å®šAPIæ”¯æŒï¼šä¸éœ€è¦ä¾èµ–ç‰¹å®šçš„APIæˆ–è€…æ›´æ–°H5é¡µé¢çš„ä»£ç ã€‚ ç¼ºç‚¹ï¼š å®‰å…¨æ€§é—®é¢˜ï¼šæ³¨å…¥ä»£ç å¯èƒ½ä¼šå¸¦æ¥å®‰å…¨é£é™©ï¼Œå®¹æ˜“è¢«æ¶æ„ä»£ç åˆ©ç”¨ã€‚ ç»´æŠ¤å¤æ‚ï¼šä»£ç ç»´æŠ¤å¤æ‚ï¼Œå°¤å…¶æ˜¯åŸç”Ÿä»£ç å’ŒH5é¡µé¢é¢‘ç¹å˜åŠ¨æ—¶ã€‚ æµè§ˆå™¨å…¼å®¹æ€§ï¼šä¸åŒæµè§ˆå™¨å¯¹æ³¨å…¥ä»£ç çš„æ”¯æŒå¯èƒ½æœ‰æ‰€ä¸åŒã€‚ postMessageä¼˜ç‚¹ï¼š å®‰å…¨æ€§é«˜ï¼šé€šè¿‡æ¶ˆæ¯ä¼ é€’çš„æ–¹å¼è¿›è¡Œäº¤äº’ï¼Œå®‰å…¨æ€§è¾ƒé«˜ï¼Œä¸å®¹æ˜“è¢«æ¶æ„ä»£ç åˆ©ç”¨ã€‚ æ ‡å‡†åŒ–ï¼špostMessageæ˜¯HTML5æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œå…·æœ‰è¾ƒå¥½çš„è·¨æµè§ˆå™¨å…¼å®¹æ€§ã€‚ æ˜“äºè°ƒè¯•å’Œç»´æŠ¤ï¼šæ¶ˆæ¯ä¼ é€’æ–¹å¼ä½¿å¾—ä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°ï¼Œæ˜“äºè°ƒè¯•å’Œç»´æŠ¤ã€‚ ç¼ºç‚¹ï¼š æ€§èƒ½å½±å“ï¼šåœ¨é«˜é¢‘ç‡æ¶ˆæ¯ä¼ é€’çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šæœ‰æ€§èƒ½å½±å“ã€‚ ä¾èµ–APIï¼šéœ€è¦H5é¡µé¢å’ŒåŸç”Ÿä»£ç éƒ½æ”¯æŒpostMessage APIã€‚ æœ‰é™çš„æ§åˆ¶åŠ›ï¼šç›¸æ¯”ç›´æ¥æ³¨å…¥ä»£ç ï¼Œæ§åˆ¶åŠ›ç¨å¼±ï¼Œåªèƒ½é€šè¿‡æ¶ˆæ¯è¿›è¡Œäº¤äº’ã€‚ å¦‚ä½•é€‰æ‹©ï¼Ÿé€‰æ‹©å“ªç§æ–¹æ³•å–å†³äºå…·ä½“çš„åº”ç”¨åœºæ™¯å’Œéœ€æ±‚ï¼š å®‰å…¨æ€§ä¼˜å…ˆï¼šå¦‚æœå®‰å…¨æ€§æ˜¯é¦–è¦è€ƒè™‘å› ç´ ï¼Œå»ºè®®ä½¿ç”¨postMessageï¼Œå› ä¸ºè¿™ç§æ–¹æ³•æ›´å®‰å…¨ï¼Œä¸å®¹æ˜“è¢«æ¶æ„ä»£ç åˆ©ç”¨ã€‚ é«˜é¢‘äº¤äº’ï¼šå¦‚æœéœ€è¦é«˜é¢‘ç‡çš„äº¤äº’ï¼Œä¸”å¯¹æ€§èƒ½è¦æ±‚è¾ƒé«˜ï¼Œå¯ä»¥è€ƒè™‘æ³¨å…¥æ–¹å¼ï¼Œä½†è¦ç‰¹åˆ«æ³¨æ„ä»£ç çš„å®‰å…¨æ€§å’Œæµè§ˆå™¨å…¼å®¹æ€§ã€‚ è·¨æµè§ˆå™¨å…¼å®¹ï¼šå¦‚æœéœ€è¦åœ¨å¤šä¸ªæµè§ˆå™¨ä¸­è¿è¡Œï¼Œå¹¶ä¸”å¸Œæœ›ä»£ç æ˜“äºç»´æŠ¤å’Œè°ƒè¯•ï¼ŒpostMessageæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ å¿«é€Ÿå¼€å‘ï¼šå¦‚æœéœ€è¦å¿«é€Ÿå®ç°åŠŸèƒ½ï¼Œä¸”ä¸è€ƒè™‘é•¿è¿œçš„ç»´æŠ¤å’Œå®‰å…¨æ€§é—®é¢˜ï¼Œæ³¨å…¥æ–¹å¼å¯èƒ½ä¼šæ›´å¿«æ·ã€‚ ç»“è®ºç»¼åˆæ¥çœ‹ï¼ŒpostMessageåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯æ›´ä¼˜çš„é€‰æ‹©ï¼Œç‰¹åˆ«æ˜¯åœ¨è€ƒè™‘å®‰å…¨æ€§ã€æ ‡å‡†åŒ–å’Œæ˜“äºç»´æŠ¤çš„æƒ…å†µä¸‹ã€‚ä½†åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œæ¯”å¦‚éœ€è¦é«˜é¢‘ç‡çš„äº¤äº’æˆ–è€…å¯¹H5é¡µé¢è¿›è¡Œå¼ºæ§åˆ¶æ—¶ï¼Œæ³¨å…¥æ–¹å¼ä¹Ÿä¸å¤±ä¸ºä¸€ä¸ªå¯é€‰æ–¹æ¡ˆã€‚æœ€ç»ˆçš„é€‰æ‹©åº”æ ¹æ®å…·ä½“çš„é¡¹ç›®éœ€æ±‚å’Œå¼€å‘ç¯å¢ƒæ¥å†³å®šã€‚ 3.æœ‰æ²¡æœ‰å…³æ³¨è¿‡ä¸šåŠ¡æŒ‡æ ‡ï¼ŒæŠ€æœ¯æ‰‹æ®µæå‡ä¸šåŠ¡æŒ‡æ ‡çš„æƒ…å†µï¼Ÿæ”¶é“¶å°æ”¯ä»˜æˆåŠŸç‡ï¼Ÿ","link":"/åº¦å°æ»¡/"},{"title":"æ–°æµªå¾®åš","text":"æ–°æµªå¾®åš 1.æ‰“å°ç»“æœ123456- (void)test { dispatch_sync(dispatch_get_main_queue(), ^{ NSLog(@\"ä»»åŠ¡1\"); }); NSLog(@\"ä»»åŠ¡2\");} 2.æ‰“å°ç»“æœ 123456789101112131415161718dispatch_semaphore_t sem = dispatch_semaphore_create(1);dispatch_time_t timeout = dispatch_time(DISPATCH_TIME_NOW, 3 * NSEC_PER_SEC);dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ dispatch_semaphore_wait(sem, timeout); NSLog(@\"å¼€å§‹æ‰§è¡Œä»»åŠ¡1\"); sleep(2); NSLog(@\"ä»»åŠ¡1æ‰§è¡Œç»“æŸ\"); dispatch_semaphore_signal(sem);});dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ sleep(1); NSLog(@\"å¼€å§‹æ‰§è¡Œä»»åŠ¡2\"); dispatch_semaphore_wait(sem, timeout); NSLog(@\"ä»»åŠ¡2æ‰§è¡Œç»“æŸ\"); dispatch_semaphore_signal(sem);}); 3.ä»¥ä¸‹å…³äº CALayer çš„æè¿°ï¼Œå“ªé¡¹æ˜¯æ­£ç¡®çš„ï¼Ÿ A. CALayer åªèƒ½å¤„ç†åŸºæœ¬çš„è§¦æ‘¸äº‹ä»¶B. CALayer çš„ç»˜åˆ¶ä¸»è¦åœ¨ CPU ç«¯å®Œæˆï¼Œè€Œ CAAnimation çš„åŠ¨ç”»æ‰§è¡Œåœ¨ GPU ä¸ŠåŠ é€ŸC. CALayer.contents åªèƒ½è®¾ç½®ä¸º CGImageRefD. CALayer ä¸èƒ½æœ‰å±‚çº§ç»“æ„ï¼Œè€Œ UIView å¯ä»¥ 4.è®¾è®¡ service å±‚ï¼Œæ’­æ”¾ gif æˆ–è§†é¢‘ï¼Œservice è¢«è°æŒæœ‰ï¼Ÿåªæ˜¯ç±»æ–¹æ³•ä½œä¸ºå·¥å…·æ–¹æ³•çš„è¯æ„ä¹‰ä¸å¤§ 5.ä»æŸä¸€ä¸ªå…¥å£è¿›å…¥åˆ°é¡µé¢ï¼Œåœ¨ viewWillAppear é‡Œæ‰“æ—¥å¿—ï¼Œå¯èƒ½æ˜¯ä¸åŒçš„é¡µé¢ï¼Œå…¥å£æ˜¯åç«¯ä¸‹å‘çš„ï¼Œä¸ç”¨ baseVCï¼Œå¦‚ä½•å®ç°ï¼Ÿ é¢è¯•å‰éœ€è¦å®Œæˆçš„AIç¼–ç¨‹é¢˜è§æœ€åã€‚ å‚è€ƒç­”æ¡ˆ1.æ‰“å°ç»“æœ 123456- (void)test { dispatch_sync(dispatch_get_main_queue(), ^{ NSLog(@\"ä»»åŠ¡1\"); }); NSLog(@\"ä»»åŠ¡2\");} æ­»é”ï¼Œæ²¡æœ‰ä»»ä½•è¾“å‡º è‹¥æ”¹ä¸º dispatch_asyncï¼Œè¾“å…¥é¡ºåºæ˜¯ï¼šä»»åŠ¡2 ä»»åŠ¡1 2.æ‰“å°ç»“æœ 123456789101112131415161718dispatch_semaphore_t sem = dispatch_semaphore_create(1);dispatch_time_t timeout = dispatch_time(DISPATCH_TIME_NOW, 3 * NSEC_PER_SEC);dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ dispatch_semaphore_wait(sem, timeout); NSLog(@\"å¼€å§‹æ‰§è¡Œä»»åŠ¡1\"); sleep(2); NSLog(@\"ä»»åŠ¡1æ‰§è¡Œç»“æŸ\"); dispatch_semaphore_signal(sem);});dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ sleep(1); NSLog(@\"å¼€å§‹æ‰§è¡Œä»»åŠ¡2\"); dispatch_semaphore_wait(sem, timeout); NSLog(@\"ä»»åŠ¡2æ‰§è¡Œç»“æŸ\"); dispatch_semaphore_signal(sem);}); æ‰§è¡Œè¿‡ç¨‹åˆ†æ åˆ›å»ºä¿¡å·é‡ semï¼Œåˆå§‹å€¼ä¸º 1ã€‚ ä¿¡å·é‡åˆå§‹ä¸º 1ï¼Œè¡¨ç¤ºå…è®¸ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºã€‚ ä»»åŠ¡ 1 ç«‹å³å¼€å§‹æ‰§è¡Œï¼ˆå› ä¸ºæ˜¯å¼‚æ­¥æäº¤ï¼‰ã€‚ dispatch_semaphore_wait(sem, timeout) æ—¶ï¼Œsem çš„å€¼ä¸º 1 â†’ å‡ä¸º 0 â†’ ç«‹å³é€šè¿‡ã€‚ æ‰“å°ï¼šå¼€å§‹æ‰§è¡Œä»»åŠ¡1 ç„¶å sleep(2)ï¼Œæ„å‘³ç€ä»»åŠ¡ 1 å ç”¨ä¿¡å·é‡çº¦ 2 ç§’ã€‚ ä»»åŠ¡ 2 å»¶è¿Ÿ 1 ç§’åæ‰å¼€å§‹ï¼ˆå› ä¸º sleep(1)ï¼‰ã€‚ æ‰“å°ï¼šå¼€å§‹æ‰§è¡Œä»»åŠ¡2 æ­¤æ—¶ï¼ˆç¬¬ 1 ç§’æ—¶ï¼‰ï¼Œä»»åŠ¡ 1 è¿˜åœ¨æ‰§è¡Œï¼ˆsleep(2)ï¼‰ï¼Œsem = 0ã€‚ æ‰€ä»¥ dispatch_semaphore_wait(sem, timeout) ä¼šé˜»å¡ç­‰å¾…ä¿¡å·é‡å˜ä¸º 1ã€‚ è¶…æ—¶åˆ¤æ–­ ä»»åŠ¡ 2 æœ€å¤šç­‰å¾… 3 ç§’ã€‚ ä»»åŠ¡ 1 åœ¨ç¬¬ 2 ç§’æ—¶æ‰§è¡Œå®Œæ¯•ï¼Œæ‰“å°ï¼šä»»åŠ¡1æ‰§è¡Œç»“æŸ å¹¶ dispatch_semaphore_signal(sem)ï¼Œä½¿ sem = 1ã€‚ æ­¤æ—¶ä»»åŠ¡ 2 ç­‰å¾…æ—¶é—´ä»…çº¦ 1 ç§’ï¼ˆæ²¡è¶…æ—¶ï¼‰ï¼Œäºæ˜¯ç«‹å³é€šè¿‡ã€‚ ç»§ç»­æ‰“å°ï¼šä»»åŠ¡2æ‰§è¡Œç»“æŸ æœ€ç»ˆæ‰“å°é¡ºåº 1234å¼€å§‹æ‰§è¡Œä»»åŠ¡1å¼€å§‹æ‰§è¡Œä»»åŠ¡2ä»»åŠ¡1æ‰§è¡Œç»“æŸä»»åŠ¡2æ‰§è¡Œç»“æŸ å»¶ä¼¸æ€è€ƒ å¦‚æœæŠŠä»»åŠ¡ 1 çš„ sleep(2) æ”¹æˆ sleep(5)ï¼Œåˆ™ä»»åŠ¡ 2 ç­‰å¾…ä¿¡å·é‡ä¼šè¶…æ—¶ 3 ç§’åç›´æ¥è¿”å›ã€‚æ­¤æ—¶ dispatch_semaphore_wait è¿”å›é 0ï¼ˆè¶…æ—¶ï¼‰ï¼Œä»»åŠ¡ 2 ä¼šç»§ç»­æ‰§è¡Œåç»­ä»£ç ï¼Œæ‰“å°é¡ºåºä¼šå˜ä¸ºï¼š 1234å¼€å§‹æ‰§è¡Œä»»åŠ¡1å¼€å§‹æ‰§è¡Œä»»åŠ¡2ä»»åŠ¡2æ‰§è¡Œç»“æŸ â† è¶…æ—¶å…ˆæ‰§è¡Œä»»åŠ¡1æ‰§è¡Œç»“æŸ 3.ä»¥ä¸‹å…³äº CALayer çš„æè¿°ï¼Œå“ªé¡¹æ˜¯æ­£ç¡®çš„ï¼Ÿ A. CALayer åªèƒ½å¤„ç†åŸºæœ¬çš„è§¦æ‘¸äº‹ä»¶B. CALayer çš„ç»˜åˆ¶ä¸»è¦åœ¨ CPU ç«¯å®Œæˆï¼Œè€Œ CAAnimation çš„åŠ¨ç”»æ‰§è¡Œåœ¨ GPU ä¸ŠåŠ é€ŸC. CALayer.contents åªèƒ½è®¾ç½®ä¸º CGImageRefD. CALayer ä¸èƒ½æœ‰å±‚çº§ç»“æ„ï¼Œè€Œ UIView å¯ä»¥ è§£æï¼š A.é”™è¯¯ CALayer ä¸å¤„ç†ä»»ä½•è§¦æ‘¸äº‹ä»¶ï¼Œè§¦æ‘¸äº‹ä»¶å®Œå…¨ç”± UIViewï¼ˆæˆ–æ›´ä¸Šå±‚çš„ UIResponderï¼‰å¤„ç†ã€‚ B.æ­£ç¡® è§£é‡Šï¼š CALayer çš„å†…å®¹ç»˜åˆ¶ï¼ˆdrawInContext:ï¼‰é€šå¸¸åœ¨ CPU ä¸Šè¿›è¡Œï¼› ç»˜åˆ¶å®Œæˆåï¼ŒCore Animation å°†ä½å›¾æ•°æ®æäº¤åˆ° GPUï¼› å½“åº”ç”¨ CAAnimationï¼ˆæ¯”å¦‚ positionã€opacityã€transformï¼‰æ—¶ï¼ŒåŠ¨ç”»ç”± Render Server + GPU æ‰§è¡Œï¼› å› æ­¤åŠ¨ç”»å¯ä»¥åœ¨ä¸»çº¿ç¨‹å¤–å¹³æ»‘è¿è¡Œï¼Œä¸ä¼šè¢« CPU å¡é¡¿ç›´æ¥é˜»å¡ã€‚ C.é”™è¯¯ CALayer çš„ contents æ˜¯ id ç±»å‹ï¼Œé€šå¸¸ç”¨æ¥æ˜¾ç¤º CGImageRefï¼ˆUIImage çš„åº•å±‚å›¾åƒï¼‰ ä½†ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå…¶ä»–ç±»å‹ï¼ˆå¦‚ CIImageã€NSImageï¼Œåº•å±‚ä»ä¼šè½¬æˆ CGImageRefï¼‰ã€‚ D.é”™è¯¯ CALayer åŒæ ·æœ‰å±‚çº§ç»“æ„ 1[parentLayer addSublayer:childLayer]; 4.è®¾è®¡ Service å±‚ï¼Œæ’­æ”¾ GIF æˆ–è§†é¢‘ï¼Œservice è¢«è°æŒæœ‰ï¼Ÿåªæ˜¯ç±»æ–¹æ³•ä½œä¸ºå·¥å…·æ–¹æ³•çš„è¯æ„ä¹‰ä¸å¤§ è®¾è®¡ä¸€ä¸ª Service å±‚ï¼ˆæ’­æ”¾æœåŠ¡ï¼‰ï¼Œæ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š æ”¯æŒ GIF å’Œè§†é¢‘ æ’­æ”¾ã€‚ å¯¹å¤–æä¾›ç»Ÿä¸€æ¥å£ï¼ˆä¸å…³å¿ƒå†…éƒ¨æ˜¯è§†é¢‘è¿˜æ˜¯ GIFï¼‰ã€‚ æ”¯æŒæ§åˆ¶æ’­æ”¾ã€æš‚åœã€åœæ­¢ã€‚ å¯æ‰©å±•ï¼ˆæœªæ¥å¯èƒ½æ”¯æŒ Live Photoã€åŠ¨ç”»åºåˆ—å¸§ç­‰ï¼‰ã€‚ æˆ‘ä»¬ç”¨ ç­–ç•¥æ¨¡å¼ + ç®€å•å·¥å‚ æ¥å®ç°ã€‚ æ’­æ”¾åè®®ï¼ˆç»Ÿä¸€æ¥å£ï¼‰ 12345678910111213141516171819// LJRPPlayable.h@protocol LJRPPlayable &lt;NSObject&gt;/// å‡†å¤‡æ’­æ”¾èµ„æº- (void)prepareWithURL:(NSURL *)url inView:(UIView *)containerView;/// å¼€å§‹æ’­æ”¾- (void)play;/// æš‚åœ- (void)pause;/// åœæ­¢å¹¶é‡Šæ”¾èµ„æº- (void)stop;/// å½“å‰æ˜¯å¦åœ¨æ’­æ”¾- (BOOL)isPlaying;@end GIF æ’­æ”¾å™¨å®ç° ä½ å¯ä»¥ç”¨ FLAnimatedImageView æˆ– SDAnimatedImageView æ¥æ’­æ”¾ GIFã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647// LJRPGifPlayer.h#import \"LJRPPlayable.h\"#import &lt;SDWebImage/SDAnimatedImageView.h&gt;@interface LJRPGifPlayer : NSObject &lt;LJRPPlayable&gt;@end// LJRPGifPlayer.m#import \"LJRPGifPlayer.h\"@interface LJRPGifPlayer ()@property (nonatomic, strong) SDAnimatedImageView *imageView;@property (nonatomic, assign) BOOL isPlaying;@end@implementation LJRPGifPlayer- (void)prepareWithURL:(NSURL *)url inView:(UIView *)containerView { self.imageView = [[SDAnimatedImageView alloc] initWithFrame:containerView.bounds]; self.imageView.contentMode = UIViewContentModeScaleAspectFit; [containerView addSubview:self.imageView]; [self.imageView sd_setImageWithURL:url];}- (void)play { [self.imageView startAnimating]; self.isPlaying = YES;}- (void)pause { [self.imageView stopAnimating]; self.isPlaying = NO;}- (void)stop { [self.imageView stopAnimating]; [self.imageView removeFromSuperview]; self.imageView = nil; self.isPlaying = NO;}- (BOOL)isPlaying { return self.isPlaying;}@end è§†é¢‘æ’­æ”¾å™¨å®ç° ä½¿ç”¨ AVPlayerï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647// LJRPVideoPlayer.h#import \"LJRPPlayable.h\"#import &lt;AVFoundation/AVFoundation.h&gt;@interface LJRPVideoPlayer : NSObject &lt;LJRPPlayable&gt;@end// LJRPVideoPlayer.m#import \"LJRPVideoPlayer.h\"@interface LJRPVideoPlayer ()@property (nonatomic, strong) AVPlayer *player;@property (nonatomic, strong) AVPlayerLayer *playerLayer;@end@implementation LJRPVideoPlayer- (void)prepareWithURL:(NSURL *)url inView:(UIView *)containerView { AVPlayerItem *item = [AVPlayerItem playerItemWithURL:url]; self.player = [AVPlayer playerWithPlayerItem:item]; self.playerLayer = [AVPlayerLayer playerLayerWithPlayer:self.player]; self.playerLayer.frame = containerView.bounds; self.playerLayer.videoGravity = AVLayerVideoGravityResizeAspect; [containerView.layer addSublayer:self.playerLayer];}- (void)play { [self.player play];}- (void)pause { [self.player pause];}- (void)stop { [self.player pause]; [self.playerLayer removeFromSuperlayer]; self.player = nil; self.playerLayer = nil;}- (BOOL)isPlaying { return self.player.rate != 0;}@end Service å±‚ï¼šç»Ÿä¸€è°ƒåº¦å…¥å£ 12345678910111213141516// LJRPPlayService.h#import &lt;Foundation/Foundation.h&gt;#import \"LJRPPlayable.h\"typedef NS_ENUM(NSUInteger, LJRPPlayType) { LJRPPlayTypeGif, LJRPPlayTypeVideo};@interface LJRPPlayService : NSObject+ (instancetype)sharedService;- (id&lt;LJRPPlayable&gt;)createPlayerWithType:(LJRPPlayType)type;@end 12345678910111213141516171819202122232425262728// LJRPPlayService.m#import \"LJRPPlayService.h\"#import \"LJRPGifPlayer.h\"#import \"LJRPVideoPlayer.h\"@implementation LJRPPlayService+ (instancetype)sharedService { static LJRPPlayService *instance; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ instance = [[self alloc] init]; }); return instance;}- (id&lt;LJRPPlayable&gt;)createPlayerWithType:(LJRPPlayType)type { switch (type) { case LJRPPlayTypeGif: return [[LJRPGifPlayer alloc] init]; case LJRPPlayTypeVideo: return [[LJRPVideoPlayer alloc] init]; default: return nil; }}@end ä½¿ç”¨ç¤ºä¾‹ 123456NSURL *url = [NSURL URLWithString:@\"https://example.com/demo.mp4\"];UIView *container = self.view; // æ’­æ”¾å®¹å™¨id&lt;LJRPPlayable&gt; player = [[LJRPPlayService sharedService] createPlayerWithType:LJRPPlayTypeVideo];[player prepareWithURL:url inView:container];[player play]; åŒæ ·åœ°ï¼Œå¦‚æœæ˜¯ GIFï¼š 123id&lt;LJRPPlayable&gt; player = [[LJRPPlayService sharedService] createPlayerWithType:LJRPPlayTypeGif];[player prepareWithURL:[NSURL URLWithString:@\"https://example.com/demo.gif\"] inView:container];[player play]; ä¼˜ç‚¹æ€»ç»“ï¼š é«˜æ‰©å±•æ€§ï¼šæœªæ¥æ–°å¢ LJRPLivePhotoPlayer åªéœ€å®ç° LJRPPlayableã€‚ ä½è€¦åˆï¼šä¸Šå±‚åªä¾èµ– Service å’Œ Protocolã€‚ æ¸…æ™°èŒè´£ï¼šæ’­æ”¾é€»è¾‘ä¸‹æ²‰åˆ° Service å±‚ï¼ŒUI å±‚åªè´Ÿè´£å±•ç¤ºã€‚ 5.ä»æŸä¸€ä¸ªå…¥å£è¿›å…¥åˆ°é¡µé¢ï¼Œåœ¨ viewWillAppear é‡Œæ‰“æ—¥å¿—ï¼Œå¯èƒ½æ˜¯ä¸åŒçš„é¡µé¢ï¼Œå…¥å£æ˜¯åç«¯ä¸‹å‘çš„ï¼Œä¸ç”¨ baseVCï¼Œå¦‚ä½•å®ç°ï¼Ÿ é¡µé¢å¯èƒ½æ˜¯ä¸åŒçš„ VCï¼Œä¸å…±ç”¨ BaseViewControllerï¼› é¡µé¢å…¥å£æ˜¯åç«¯ä¸‹å‘çš„è·¯ç”±è·³è½¬ï¼› æƒ³åœ¨é¡µé¢çš„ viewWillAppear é‡Œæ‰“æ—¥å¿—ï¼ˆæ¯”å¦‚ç»Ÿè®¡ä»å“ªä¸ªå…¥å£è¿›å…¥äº†å“ªä¸ªé¡µé¢ï¼‰ï¼› å¸Œæœ›ä¸ç”¨æ”¹æ¯ä¸ª VC çš„ä»£ç ï¼ˆæˆ–è€…å°½é‡å°‘æ”¹ï¼‰ã€‚ åœ¨å…¨å±€å¯¹ UIViewController çš„ viewWillAppear: åšä¸€æ¬¡ Method Swizzlingï¼Œè‡ªåŠ¨æ’å…¥æ—¥å¿—é€»è¾‘ã€‚ æ— éœ€ä¿®æ”¹æ¯ä¸ªé¡µé¢ï¼Œåªéœ€åœ¨å·¥ç¨‹åˆå§‹åŒ–æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚ 1234567891011121314151617181920212223242526272829303132333435// UIViewController+LogAppear.m#import \"UIViewController+LogAppear.h\"#import &lt;objc/runtime.h&gt;@implementation UIViewController (LogAppear)+ (void)load { static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ Method originalMethod = class_getInstanceMethod(self, @selector(viewWillAppear:)); Method swizzledMethod = class_getInstanceMethod(self, @selector(ljrp_viewWillAppear:)); method_exchangeImplementations(originalMethod, swizzledMethod); });}- (void)ljrp_viewWillAppear:(BOOL)animated { [self ljrp_viewWillAppear:animated]; // è°ƒç”¨åŸå®ç° // è¿‡æ»¤ç³»ç»ŸVCï¼ˆå¦‚ UINavigationController / UIInputWindowControllerï¼‰ NSString *className = NSStringFromClass([self class]); if (![className hasPrefix:@\"UI\"]) { NSLog(@\"[RouteLog] %@ will appear via route: %@\", className, [self ljrp_routeEntry]); }}// å¯é€‰ï¼šä¿å­˜å…¥å£ä¿¡æ¯- (void)setLjrp_routeEntry:(NSString *)entry { objc_setAssociatedObject(self, @selector(ljrp_routeEntry), entry, OBJC_ASSOCIATION_COPY_NONATOMIC);}- (NSString *)ljrp_routeEntry { return objc_getAssociatedObject(self, _cmd);}@end é™„ï¼šé¢è¯•å‰éœ€è¦å®Œæˆçš„AIç¼–ç¨‹é¢˜ AIç¼–ç¨‹é¢è¯•é¢˜ç­”é¢˜è¯´æ˜ è¯·ä½¿ç”¨å¦‚é€šä¹‰çµç ã€Traeã€CursoråŠWindsurfç­‰é¢†å…ˆçš„å›½å†…å¤–AIè¾…åŠ©å¼€å‘å·¥å…·æ¥æå‡æ‚¨çš„ç¼–ç¨‹æ•ˆç‡ é¢˜ç›®ä¸­å¦‚æœ‰éœ€è¦è°ƒç”¨å¤§æ¨¡å‹çš„åœºæ™¯ï¼Œè¯·è‡ªè¡Œæ³¨å†Œé˜¿é‡Œäº‘å¤§æ¨¡å‹ã€deepseekã€ç«å±±å¼•æ“ç­‰å¤§æ¨¡å‹æœåŠ¡çš„API Keyåè¿›è¡Œè°ƒç”¨ï¼Œæˆ–è€…å…¶ä»–ä»»ä½•é€‚åˆè°ƒç”¨å¤§æ¨¡å‹çš„æ–¹æ³•å‡å¯ä½¿ç”¨ é¢˜ç›®è€ƒæ ¸çš„é‡ç‚¹æ˜¯å¯¹AIç¼–ç¨‹æŠ€æœ¯çš„ç†è§£ä¸åº”ç”¨èƒ½åŠ›ï¼Œè€Œéä¸¥æ ¼çš„é™åˆ¶æ€§è¦æ±‚ã€‚åœ¨æ»¡è¶³åŸºæœ¬è¦æ±‚çš„åŸºç¡€ä¸Šï¼Œæ‚¨å¯ä»¥è‡ªç”±å‘æŒ¥åˆ›æ„ï¼Œè®¾è®¡ç‹¬ç‰¹çš„ç”¨æˆ·ç•Œé¢ï¼Œå¹¶çµæ´»é€‰æ‹©åˆé€‚çš„æ¡†æ¶å’Œç¼–ç¨‹è¯­è¨€ã€‚ é¢è¯•å‰è¯·å°†ä»£ç æ•´ç†å¹¶æ‰“åŒ…å‘é€ç»™é¢è¯•å®˜ã€‚å»ºè®®é¢è¯•æ—¶æºå¸¦ç­”é¢˜æ‰€ç”¨çš„ç”µè„‘ï¼Œä»¥ä¾¿ç°åœºæ¼”ç¤ºå®ç°æ•ˆæœ ä»¥ä¸‹é¢˜ç›®ï¼Œä»»é€‰ä¸€ä¸ªä½œç­”å³å¯ä¸€ã€é¢˜ç›®ï¼šç”¨æˆ·æ³¨å†Œç™»å½•ç³»ç»Ÿå¼€å‘ä¸€ä¸ªç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¸ªäººä¿¡æ¯è®¤è¯ç³»ç»Ÿã€‚ ä»»åŠ¡éœ€æ±‚ï¼š è¯­è¨€ã€å¼€å‘æ¡†æ¶ä¸é™ ç³»ç»ŸåŒ…å«Webå‰ç«¯ç•Œé¢å’Œåç«¯æœåŠ¡ï¼Œæ”¯æŒç”¨æˆ·å’Œç®¡ç†å‘˜ç™»å½• ç•Œé¢å¸ƒå±€è‡ªè¡Œè®¾è®¡ ç”¨æˆ·é€šè¿‡æ‰‹æœºå·ç æ³¨å†Œï¼ˆä¸éœ€è¦å‘é€éªŒè¯ç ï¼Œä»…æŠŠæ‰‹æœºå·å½“è´¦å·åï¼‰ é€šè¿‡è´¦å·å¯†ç ç™»å½• ç™»å½•åï¼Œæ”¯æŒè´¦å·é€€å‡ºç™»å½• ç”¨æˆ·ç™»å½•åï¼Œå¯æŸ¥çœ‹ä¸ªäººæ³¨å†Œä¿¡æ¯ï¼Œå¹¶æ˜¾ç¤ºå®ååˆ¶è®¤è¯çŠ¶æ€ ç”¨æˆ·ç™»å½•åï¼Œä¸Šä¼ èº«ä»½è¯æ­£åé¢ç…§ç‰‡ã€å§“åã€èº«ä»½è¯å·ä¿¡æ¯åˆ°åç«¯æœåŠ¡ï¼Œè¿›è¡Œå®åè®¤è¯ ä»¥ç®¡ç†å‘˜èº«ä»½ç™»å½•ï¼ŒæŸ¥çœ‹ç…§ç‰‡ã€å§“åã€èº«ä»½è¯å·ç­‰ç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶è®¾ç½®ç”¨æˆ·å®åä¿¡æ¯æ˜¯å¦éªŒè¯é€šè¿‡ äºŒã€é¢˜ç›®ï¼šæ–°é—»è¯„è®ºç”Ÿæˆå™¨å¼€å‘ä¸€ä¸ªå…¨æ ˆå¼æ–°é—»è¯„è®ºç”Ÿæˆç³»ç»Ÿï¼Œç”¨æˆ·è¾“å…¥æ–°é—»é“¾æ¥åï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆæ–°é—»æ‘˜è¦å¹¶åˆ›å»ºå¤šæ¡å¤šæ ·åŒ–çš„è¯„è®ºï¼Œæ”¯æŒä¸åŒè¯­è¨€é£æ ¼å’Œè§‚ç‚¹å€¾å‘ã€‚ ä»»åŠ¡éœ€æ±‚ï¼š è¯­è¨€ã€å¼€å‘æ¡†æ¶ä¸é™ ç³»ç»ŸåŒ…å«Webå‰ç«¯ç•Œé¢å’Œåç«¯æœåŠ¡ ç•Œé¢å¸ƒå±€è‡ªè¡Œè®¾è®¡ æ”¯æŒè¾“å…¥ä¸€ä¸ªç½‘é¡µurlé“¾æ¥ï¼Œå¹¶ä»ç½‘é¡µä¸­è·å–æ–°é—»ï¼Œå»é™¤å¹¿å‘Šã€å¯¼èˆªç­‰æ— å…³å†…å®¹ ä½¿ç”¨å¤§æ¨¡å‹ï¼Œæ ¹æ®æ–°é—»å†…å®¹ç”Ÿæˆæ‘˜è¦ï¼Œè¦æ±‚ç®€æ´ï¼ŒåŒ…å«æ ‡é¢˜ï¼Œä¸»è¦äº‹ä»¶å’Œå…³é”®ä¿¡æ¯ ä½¿ç”¨å¤§æ¨¡å‹ï¼Œä¸ºæ–°é—»ç”Ÿæˆå¤šæ¡ä¸åŒè¯­è¨€é£æ ¼ã€è§‚ç‚¹çš„è¯„è®ºï¼Œæ”¯æŒæŒ‰ç…§è®¾å®šçš„é£æ ¼å’Œè§‚ç‚¹æ¯”ä¾‹ç”Ÿæˆ æ”¯æŒä»¥CSVæ ¼å¼å¯¼å‡ºå…¨éƒ¨è¯„è®º æ”¯æŒå†å²è®°å½•å±•ç¤º","link":"/æ–°æµªå¾®åš/"},{"title":"æ·¡è“ç½‘","text":"æ·¡è“ç½‘ 1.SDKä½“ç§¯ä¼˜åŒ–ï¼Œæ— ç”¨ä»£ç æ£€æµ‹æ€ä¹ˆåšçš„ï¼Ÿ 2.åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼Œæ€ä¹ˆå‘ç°çš„å¤šæ¬¡åˆ·æ–°ï¼Ÿ 3.é«˜è€ƒé¡¹ç›® 4.å¾ªç¯å¼•ç”¨æ€ä¹ˆè§£å†³ï¼ŸNSTimer ä¸ºä»€ä¹ˆç”¨ weak ä¸èƒ½è§£å†³å¾ªç¯å¼•ç”¨ 5.Swift ä¸­ weak å’Œ unowned çš„åŒºåˆ«ï¼Ÿä»€ä¹ˆåœºæ™¯ä¸‹ç”¨ unownedï¼Ÿæˆ–è€…è¯´ unowned æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ 6.ä»€ä¹ˆåœºæ™¯ä¸‹ç”¨åˆ†ç±»ï¼ŸCategory èƒ½æ·»åŠ å±æ€§å—ï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½æ·»åŠ æˆå‘˜å˜é‡ï¼Ÿè‹¹æœä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ 7.ä¸ºä»€ä¹ˆè¦è®¾è®¡å…ƒç±»ï¼Ÿ 8.SDKä¸­æœ‰ä¸ªç±»æœ‰ç§æœ‰æˆå‘˜å˜é‡ï¼Œæ€ä¹ˆæ”¹å®ƒçš„å€¼ï¼Ÿ 9.æ•°ç»„çš„æ–¹æ³•è¢« hook äº†ï¼Œæ€ä¹ˆè®©æœ‰äº›æ•°ç»„ä¸ç”Ÿæ•ˆï¼Œä½¿ç”¨ç³»ç»Ÿçš„é»˜è®¤æ–¹æ³• å‚è€ƒç­”æ¡ˆ1.SDKä½“ç§¯ä¼˜åŒ–ï¼Œæ— ç”¨ä»£ç æ£€æµ‹æ€ä¹ˆåšçš„ï¼Ÿ é€šè¿‡ä½¿ç”¨otoolå·¥å…·å¯¹ç¼–è¯‘äº§ç”Ÿçš„Mach-Oæ–‡ä»¶ï¼Œç»“åˆé¡¹ç›®æºç è¿›è¡Œåˆ†æã€‚ ç¬¬ä¸€æ­¥ï¼š æ‰¾åˆ°é¡¹ç›®ä¸­æ‰€æœ‰çš„protocolä¸­çš„æ–¹æ³•&lt;åŒ…æ‹¬ç³»ç»Ÿ&lt;UITabaleViewDelegate&gt;çš„å’Œé¡¹ç›®çš„&gt; ç¬¬äºŒæ­¥ï¼š é€šè¿‡Mach-Oï¼Œæ‰¾åˆ°é¡¹ç›®ä¸­æ‰€æœ‰è¢«å¼•ç”¨çš„æ–¹æ³• ç¬¬ä¸‰æ­¥ï¼š é€šè¿‡Mach-Oï¼Œæ‰¾åˆ°é¡¹ç›®ä¸­æ‰€æœ‰çš„æ–¹æ³• ç¬¬å››æ­¥ï¼š éå†ç¬¬ä¸‰æ­¥æŸ¥å‡ºçš„æ‰€æœ‰æ–¹æ³•ï¼Œå¦‚æœå½“å‰æ–¹æ³•ä¸åœ¨ä»£ç†æ–¹æ³•é›†åˆï¼Œä¹Ÿä¸åœ¨å¼•ç”¨æ–¹æ³•é›†åˆä¸­ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºæ˜¯æ²¡æœ‰ç”¨åˆ°çš„æ–¹æ³•ã€‚ å‚è€ƒé“¾æ¥ï¼šç®€ä¹¦-iOS è„šæœ¬æŸ¥çœ‹é¡¹ç›®æœªä½¿ç”¨åˆ°çš„æ–¹æ³• 2.åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼Œæ€ä¹ˆå‘ç°çš„å¤šæ¬¡åˆ·æ–° 3.é«˜è€ƒé¡¹ç›® 4.å¾ªç¯å¼•ç”¨æ€ä¹ˆè§£å†³ï¼ŸNSTimerä¸ºä»€ä¹ˆç”¨weakä¸èƒ½è§£å†³å¾ªç¯å¼•ç”¨ è§£å†³å¾ªç¯å¼•ç”¨çš„æ–¹æ³•1. ä½¿ç”¨ weak ä¿®é¥°ç¬¦åœ¨ä½¿ç”¨é—­åŒ…æ—¶ï¼Œå¯ä»¥ä½¿ç”¨weakæˆ–unownedå…³é”®å­—æ¥è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚ 1234__weak typeof(self) weakSelf = self;self.someBlock = ^{ [weakSelf doSomething];}; åœ¨Swiftä¸­ï¼š 1234weak var weakSelf = selfself.someBlock = { [weak weakSelf] in weakSelf?.doSomething()} 2. ä½¿ç”¨ delegate å’Œ weak ä¿®é¥°ç¬¦åœ¨ä½¿ç”¨å§”æ‰˜æ¨¡å¼æ—¶ï¼Œå¯ä»¥å°†å§”æ‰˜å£°æ˜ä¸ºweakã€‚ 1@property (nonatomic, weak) id&lt;MyDelegate&gt; delegate; åœ¨Swiftä¸­ï¼š 1weak var delegate: MyDelegate? 3. ä½¿ç”¨ __block ä¿®é¥°ç¬¦åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨__blockä¿®é¥°ç¬¦æ¥è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚ 12345__block typeof(self) blockSelf = self;self.someBlock = ^{ [blockSelf doSomething]; blockSelf = nil; // è§£é™¤å¾ªç¯å¼•ç”¨}; ä¸ºä»€ä¹ˆ NSTimer ä½¿ç”¨ weak ä¸èƒ½è§£å†³å¾ªç¯å¼•ç”¨NSTimer æ˜¯ä¸€ä¸ªå¸¸è§çš„å¯¼è‡´å¾ªç¯å¼•ç”¨çš„æºå¤´ï¼Œå› ä¸ºå®ƒä¼šå¼ºå¼•ç”¨å…¶ç›®æ ‡å¯¹è±¡ã€‚å³ä½¿ä½ åœ¨ç›®æ ‡å¯¹è±¡ä¸­ä½¿ç”¨weakä¿®é¥°ç¬¦ï¼ŒNSTimerä»ç„¶ä¼šå¼ºå¼•ç”¨ç›®æ ‡å¯¹è±¡ï¼Œå¯¼è‡´å¾ªç¯å¼•ç”¨ã€‚ ä½¿ç”¨ NSTimer çš„æ­£ç¡®æ–¹æ³• ä½¿ç”¨ä¸­ä»‹å¯¹è±¡ ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸­ä»‹å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸ä¼šå¼ºå¼•ç”¨ç›®æ ‡å¯¹è±¡ï¼Œä»è€Œæ‰“ç ´å¾ªç¯å¼•ç”¨ã€‚ 12345678910111213141516171819202122232425@interface TimerProxy : NSObject@property (nonatomic, weak) id target;@property (nonatomic, assign) SEL selector;@end@implementation TimerProxy- (void)timerDidFire:(NSTimer *)timer { if (self.target) { [self.target performSelector:self.selector withObject:timer]; } else { [timer invalidate]; }}@end// ä½¿ç”¨ä¸­ä»‹å¯¹è±¡TimerProxy *proxy = [TimerProxy new];proxy.target = self;proxy.selector = @selector(timerDidFire:);NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:proxy selector:@selector(timerDidFire:) userInfo:nil repeats:YES]; ä½¿ç”¨ GCD å®šæ—¶å™¨ GCD æä¾›äº†ä¸€ç§æ— éœ€æ‰‹åŠ¨ç®¡ç†å¾ªç¯å¼•ç”¨çš„å®šæ—¶å™¨ã€‚ 1234567891011dispatch_queue_t queue = dispatch_get_main_queue();self.timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, queue);dispatch_source_set_timer(self.timer, dispatch_time(DISPATCH_TIME_NOW, 0), 1.0 * NSEC_PER_SEC, (1ull * NSEC_PER_SEC) / 10);__weak typeof(self) weakSelf = self;dispatch_source_set_event_handler(self.timer, ^{ [weakSelf timerDidFire];});dispatch_resume(self.timer); åœ¨Swiftä¸­ï¼š 1234567891011let queue = DispatchQueue.mainlet timer = DispatchSource.makeTimerSource(queue: queue)timer.schedule(deadline: .now(), repeating: 1.0)timer.setEventHandler { [weak self] in self?.timerDidFire()}timer.resume()self.timer = timer 5.swiftä¸­weakå’Œunownedçš„åŒºåˆ«ï¼Ÿä»€ä¹ˆåœºæ™¯ä¸‹ç”¨unownedï¼Ÿæˆ–è€…è¯´unownedæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ åœ¨Swiftä¸­ï¼Œweak å’Œ unowned æ˜¯ä¸¤ç§ç”¨äºè§£å†³å¼ºå¼•ç”¨å¾ªç¯ï¼ˆretain cycleï¼‰é—®é¢˜çš„å¼•ç”¨ç±»å‹ä¿®é¥°ç¬¦ã€‚è™½ç„¶å®ƒä»¬éƒ½å¯ä»¥ç”¨æ¥æ‰“ç ´å¾ªç¯å¼•ç”¨ï¼Œä½†å®ƒä»¬çš„è¡Œä¸ºå’Œä½¿ç”¨åœºæ™¯æœ‰æ‰€ä¸åŒã€‚ weak å’Œ unowned çš„åŒºåˆ«weak å¯é€‰ç±»å‹ï¼šweak ä¿®é¥°çš„å¼•ç”¨ä¼šè¢«è‡ªåŠ¨è®¾ç½®ä¸º nil å½“å…¶å¼•ç”¨çš„å¯¹è±¡è¢«é‡Šæ”¾æ—¶ã€‚å› æ­¤ï¼Œweak å¼•ç”¨å¿…é¡»æ˜¯å¯é€‰ç±»å‹ï¼ˆOptionalï¼‰ã€‚ è‡ªåŠ¨è§£é™¤å¼•ç”¨ï¼šä½¿ç”¨ weak ä¿®é¥°ç¬¦å¯ä»¥é˜²æ­¢å¼ºå¼•ç”¨å¾ªç¯ï¼Œå› ä¸ºå½“è¢«å¼•ç”¨å¯¹è±¡è¢«é‡Šæ”¾æ—¶ï¼Œweak å¼•ç”¨ä¼šè‡ªåŠ¨å˜æˆ nilã€‚ ç”¨æ³• 1234567891011121314151617class Person { var name: String weak var spouse: Person? init(name: String) { self.name = name }}var john: Person? = Person(name: \"John\")var jane: Person? = Person(name: \"Jane\")john?.spouse = janejane?.spouse = johnjohn = nil// At this point, jane?.spouse is automatically set to nil unowned éå¯é€‰ç±»å‹ï¼šunowned ä¿®é¥°çš„å¼•ç”¨åœ¨å…¶å¼•ç”¨çš„å¯¹è±¡è¢«é‡Šæ”¾åä¸ä¼šè‡ªåŠ¨å˜æˆ nilï¼Œå¹¶ä¸”å®ƒå¿…é¡»æ˜¯éå¯é€‰ç±»å‹ï¼ˆNon-Optionalï¼‰ã€‚ æ— è‡ªåŠ¨è§£é™¤å¼•ç”¨ï¼šä½¿ç”¨ unowned ä¿®é¥°ç¬¦ä¸ä¼šè‡ªåŠ¨å˜æˆ nilï¼Œå¦‚æœä½ å°è¯•è®¿é—®ä¸€ä¸ªå·²ç»è¢«é‡Šæ”¾çš„å¯¹è±¡ï¼Œä¼šå¯¼è‡´è¿è¡Œæ—¶å´©æºƒã€‚ ç”¨æ³• 1234567891011121314151617181920212223242526class Person { var name: String var car: Car? init(name: String) { self.name = name }}class Car { var model: String unowned var owner: Person init(model: String, owner: Person) { self.model = model self.owner = owner }}var john: Person? = Person(name: \"John\")var johnsCar: Car? = Car(model: \"Tesla\", owner: john!)john?.car = johnsCarjohn = nil// At this point, accessing johnsCar?.owner will cause a runtime crash because john has been deallocated ä½¿ç”¨åœºæ™¯ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ weak å½“å¼•ç”¨çš„å¯¹è±¡å¯èƒ½åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­å˜ä¸º nil æ—¶ã€‚ å¸¸è§çš„åœºæ™¯åŒ…æ‹¬å§”æ‰˜ï¼ˆdelegatesï¼‰ã€UIå…ƒç´ çš„å¼•ç”¨ï¼ˆä¾‹å¦‚ï¼šè§†å›¾æ§åˆ¶å™¨å¯¹è§†å›¾çš„å¼•ç”¨ï¼‰ï¼Œä»¥åŠä»»ä½•ä½ é¢„è®¡ä¼šå˜ä¸º nil çš„å¼•ç”¨ã€‚ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ unowned å½“å¼•ç”¨çš„å¯¹è±¡åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­ä¸ä¼šå˜ä¸º nilï¼Œå¹¶ä¸”ä½ ç¡®å®šå¼•ç”¨çš„å¯¹è±¡ä¼šä¸€ç›´å­˜åœ¨ç›´åˆ°è¢«å¼•ç”¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç»“æŸã€‚ å¸¸è§çš„åœºæ™¯åŒ…æ‹¬ï¼šä¸¤ä¸ªå¯¹è±¡å…·æœ‰ç›¸åŒçš„ç”Ÿå‘½å‘¨æœŸï¼Œæˆ–ä¸€ä¸ªå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå®Œå…¨åŒ…å«å¦ä¸€ä¸ªå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚ ä¾‹å¦‚ï¼Œé—­åŒ…å¯¹ self çš„å¼•ç”¨å¯ä»¥ä½¿ç”¨ unowned ä¿®é¥°ç¬¦ï¼Œå› ä¸ºé—­åŒ…çš„ç”Ÿå‘½å‘¨æœŸé€šå¸¸ä¸å…¶æŒæœ‰è€…ç›¸åŒæˆ–æ›´çŸ­ã€‚ unowned çš„å¥½å¤„ æ€§èƒ½ï¼šç”±äº unowned å¼•ç”¨ä¸ä¼šè‡ªåŠ¨è®¾ç½®ä¸º nilï¼Œå®ƒçš„æ€§èƒ½ç¨å¾®ä¼˜äº weak å¼•ç”¨ï¼Œå› ä¸ºä¸éœ€è¦é¢å¤–çš„nilæ£€æŸ¥ã€‚ éå¯é€‰ç±»å‹ï¼šunowned å¼•ç”¨ä¸éœ€è¦è§£åŒ…ï¼Œå› ä¸ºå®ƒæ˜¯éå¯é€‰ç±»å‹ï¼Œè¿™å¯ä»¥ç®€åŒ–ä»£ç ã€‚ ç„¶è€Œï¼Œä½¿ç”¨ unowned å¼•ç”¨æ—¶éœ€è¦éå¸¸å°å¿ƒï¼Œå› ä¸ºå¦‚æœå¼•ç”¨çš„å¯¹è±¡è¢«é‡Šæ”¾åå†è®¿é—®è¯¥å¼•ç”¨ï¼Œä¼šå¯¼è‡´è¿è¡Œæ—¶å´©æºƒã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé™¤éä½ éå¸¸ç¡®å®šå¼•ç”¨çš„å¯¹è±¡åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­ä¸ä¼šå˜ä¸º nilï¼Œå¦åˆ™å»ºè®®ä½¿ç”¨ weak å¼•ç”¨ã€‚ 6.ä»€ä¹ˆåœºæ™¯ä¸‹ç”¨åˆ†ç±»ï¼ŸCategoryèƒ½æ·»åŠ å±æ€§å—ï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½æ·»åŠ æˆå‘˜å˜é‡ï¼Ÿè‹¹æœä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ åœ¨ Objective-C ä¸­ï¼ŒCategory æ˜¯ç”¨äºä¸ºç°æœ‰ç±»æ·»åŠ æ–¹æ³•çš„ä¸€ç§æœºåˆ¶ï¼Œä½†å®ƒä¸èƒ½ç›´æ¥æ·»åŠ æˆå‘˜å˜é‡ï¼ˆå®ä¾‹å˜é‡ï¼‰ã€‚ä¸è¿‡ï¼Œå¯ä»¥é€šè¿‡ä¸€äº›é—´æ¥æ–¹å¼ä¸º Category æ·»åŠ å±æ€§ã€‚è®©æˆ‘ä»¬æ·±å…¥æ¢è®¨ä¸€ä¸‹ä¸ºä»€ä¹ˆ Category ä¸èƒ½æ·»åŠ æˆå‘˜å˜é‡ã€è‹¹æœä¸ºä»€ä¹ˆè®¾è®¡æˆè¿™æ ·ï¼Œä»¥åŠå¦‚ä½•åœ¨ Category ä¸­æ·»åŠ å±æ€§ã€‚ ä¸ºä»€ä¹ˆ Category ä¸èƒ½æ·»åŠ æˆå‘˜å˜é‡Category ä¸»è¦è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†æ‰©å±•å·²æœ‰ç±»çš„åŠŸèƒ½ï¼Œè€Œä¸æ˜¯ä¿®æ”¹ç±»çš„å†…éƒ¨ç»“æ„ã€‚æ·»åŠ æˆå‘˜å˜é‡ä¼šæ¶‰åŠåˆ°ä¿®æ”¹ç±»çš„å†…å­˜å¸ƒå±€ï¼Œè¿™åœ¨è¿è¡Œæ—¶ä¼šå¸¦æ¥å¾ˆå¤šå¤æ‚æ€§å’Œæ½œåœ¨çš„é—®é¢˜ã€‚ å†…å­˜å¸ƒå±€é—®é¢˜ï¼šObjective-C çš„å†…å­˜å¸ƒå±€æ˜¯åœ¨ç¼–è¯‘æ—¶ç¡®å®šçš„ï¼Œè€Œæˆå‘˜å˜é‡ä¼šå½±å“å¯¹è±¡çš„å†…å­˜å¸ƒå±€ã€‚å¦‚æœå…è®¸åœ¨ Category ä¸­æ·»åŠ æˆå‘˜å˜é‡ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€å½“ä¸€ä¸ªæ–° Category è¢«åŠ è½½æ—¶ï¼Œéœ€è¦é‡æ–°è®¡ç®—å’Œè°ƒæ•´æ‰€æœ‰å®ä¾‹çš„å†…å­˜å¸ƒå±€ï¼Œè¿™åœ¨è¿è¡Œæ—¶æ˜¯éå¸¸å¤æ‚å’Œä½æ•ˆçš„ã€‚ äºŒè¿›åˆ¶å…¼å®¹æ€§ï¼šå…è®¸ Category æ·»åŠ æˆå‘˜å˜é‡ä¼šç ´åäºŒè¿›åˆ¶å…¼å®¹æ€§ã€‚å‡è®¾ä¸€ä¸ªç±»åº“åœ¨æŸä¸ªç‰ˆæœ¬ä¸­æ·»åŠ äº†ä¸€ä¸ªåŒ…å«æˆå‘˜å˜é‡çš„ Categoryï¼Œè€Œåœ¨æ—©æœŸç‰ˆæœ¬ä¸­æ²¡æœ‰è¿™ä¸ª Categoryï¼Œé‚£ä¹ˆåœ¨ä¸åŒç‰ˆæœ¬ä¹‹é—´åˆ‡æ¢æ—¶å¯èƒ½ä¼šå¯¼è‡´å´©æºƒæˆ–æœªå®šä¹‰è¡Œä¸ºã€‚ åŠ¨æ€åŠ è½½ï¼šObjective-C æ”¯æŒåŠ¨æ€åŠ è½½ç±»å’Œ Categoryã€‚å¦‚æœ Category èƒ½å¤Ÿæ·»åŠ æˆå‘˜å˜é‡ï¼Œé‚£ä¹ˆåŠ¨æ€åŠ è½½ä¸€ä¸ªæ–°çš„ Category æ—¶ï¼Œéœ€è¦é‡æ–°åˆ†é…å’Œè°ƒæ•´ç°æœ‰å¯¹è±¡çš„å†…å­˜ï¼Œè¿™åœ¨è®¾è®¡å’Œå®ç°ä¸Šæ˜¯éå¸¸å›°éš¾çš„ã€‚ è‹¹æœä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡è‹¹æœè®¾è®¡ Category çš„ç›®çš„æ˜¯ä¸ºäº†æä¾›ä¸€ç§çµæ´»ä¸”è½»é‡çº§çš„æ–¹å¼æ¥æ‰©å±•ç±»çš„åŠŸèƒ½ï¼Œè€Œä¸æ”¹å˜ç±»çš„åŸºæœ¬ç»“æ„ã€‚è¿™æ ·è®¾è®¡çš„ä¸»è¦åŸå› åŒ…æ‹¬ï¼š ç®€åŒ–å®ç°ï¼šä¸å…è®¸ Category æ·»åŠ æˆå‘˜å˜é‡ä½¿å¾—å†…å­˜ç®¡ç†å’Œå¯¹è±¡æ¨¡å‹çš„å®ç°æ›´åŠ ç®€å•å’Œå¯é ã€‚ åŠ¨æ€ç‰¹æ€§ï¼šObjective-C æ˜¯ä¸€ç§åŠ¨æ€è¯­è¨€ï¼ŒCategory æä¾›äº†åœ¨è¿è¡Œæ—¶æ‰©å±•ç±»åŠŸèƒ½çš„èƒ½åŠ›ï¼Œè€Œæ— éœ€é‡æ–°ç¼–è¯‘ç±»æ–‡ä»¶ã€‚è¿™ç§çµæ´»æ€§æ˜¯Objective-Cçš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ã€‚ ç¨³å®šæ€§å’Œå…¼å®¹æ€§ï¼šé€šè¿‡é™åˆ¶ Category çš„èƒ½åŠ›ï¼Œå¯ä»¥ç¡®ä¿ç±»çš„å†…å­˜å¸ƒå±€åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸå†…ä¿æŒç¨³å®šï¼Œä»è€Œæé«˜ç¨‹åºçš„ç¨³å®šæ€§å’Œå…¼å®¹æ€§ã€‚ å¦‚ä½•åœ¨ Category ä¸­æ·»åŠ å±æ€§è™½ç„¶ Category ä¸èƒ½ç›´æ¥æ·»åŠ æˆå‘˜å˜é‡ï¼Œä½†å¯ä»¥é€šè¿‡å…³è”å¯¹è±¡ï¼ˆAssociated Objectsï¼‰æ¥é—´æ¥å®ç°å±æ€§çš„æ·»åŠ ã€‚ 1. ä½¿ç”¨å…³è”å¯¹è±¡ä½ å¯ä»¥ä½¿ç”¨ objc_setAssociatedObject å’Œ objc_getAssociatedObject å‡½æ•°æ¥ä¸º Category æ·»åŠ å±æ€§ã€‚ 1234567891011121314151617#import &lt;objc/runtime.h&gt;@interface MyClass (CategoryName)@property (nonatomic, strong) id property;@end@implementation MyClass (CategoryName)- (void)setProperty:(id)value { objc_setAssociatedObject(self, @selector(property), value, OBJC_ASSOCIATION_RETAIN_NONATOMIC);}- (id)property { return objc_getAssociatedObject(self, @selector(property));}@end åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å…³è”å¯¹è±¡æ¥ä¸º Category æ·»åŠ å±æ€§ã€‚objc_setAssociatedObject å‡½æ•°å°†ä¸€ä¸ªå¯¹è±¡ä¸ä¸€ä¸ªé”®å…³è”èµ·æ¥ï¼Œè€Œ objc_getAssociatedObject å‡½æ•°åˆ™æ ¹æ®é”®è·å–å…³è”çš„å¯¹è±¡ã€‚ 2. å…³è”å¯¹è±¡ç­–ç•¥objc_setAssociatedObject çš„ç¬¬å››ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå…³è”ç­–ç•¥ï¼Œå¸¸è§çš„ç­–ç•¥åŒ…æ‹¬ï¼š OBJC_ASSOCIATION_ASSIGNï¼šç›¸å½“äº assign å±æ€§ã€‚ OBJC_ASSOCIATION_RETAIN_NONATOMICï¼šç›¸å½“äº strong éåŸå­å±æ€§ã€‚ OBJC_ASSOCIATION_COPY_NONATOMICï¼šç›¸å½“äº copy éåŸå­å±æ€§ã€‚ OBJC_ASSOCIATION_RETAINï¼šç›¸å½“äº strong åŸå­å±æ€§ã€‚ OBJC_ASSOCIATION_COPYï¼šç›¸å½“äº copy åŸå­å±æ€§ã€‚ ç»“è®ºè™½ç„¶ Category ä¸èƒ½ç›´æ¥æ·»åŠ æˆå‘˜å˜é‡ï¼Œä½†é€šè¿‡å…³è”å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥é—´æ¥åœ°ä¸º Category æ·»åŠ å±æ€§ã€‚è¿™ç§è®¾è®¡ä½¿å¾— Category çš„å®ç°æ›´åŠ ç®€å•å’Œç¨³å®šï¼ŒåŒæ—¶ä¿ç•™äº†æ‰©å±•ç±»åŠŸèƒ½çš„çµæ´»æ€§ã€‚è‹¹æœé€‰æ‹©ä¸å…è®¸ Category æ·»åŠ æˆå‘˜å˜é‡ï¼Œæ˜¯ä¸ºäº†ç®€åŒ–å†…å­˜ç®¡ç†ã€æé«˜è¿è¡Œæ—¶æ€§èƒ½å’Œç¡®ä¿äºŒè¿›åˆ¶å…¼å®¹æ€§ã€‚ 7.ä¸ºä»€ä¹ˆè¦è®¾è®¡å…ƒç±»ï¼Ÿ 8.SDKä¸­æœ‰ä¸ªç±»æœ‰ç§æœ‰æˆå‘˜å˜é‡ï¼Œæ€ä¹ˆæ”¹å®ƒçš„å€¼ï¼Ÿ 9.æ•°ç»„çš„æ–¹æ³•è¢«hookäº†ï¼Œæ€ä¹ˆè®©æœ‰äº›æ•°ç»„ä¸ç”Ÿæ•ˆï¼Œä½¿ç”¨ç³»ç»Ÿçš„é»˜è®¤æ–¹æ³•","link":"/æ·¡è“ç½‘/"},{"title":"æ»´æ»´å‡ºè¡Œé¢è¯•é¢˜åŠç­”æ¡ˆ","text":"æ»´æ»´å‡ºè¡Œé¢è¯•é¢˜ 1. ç¬”è¯•é¢˜0.å§“åï¼Ÿæ—¥æœŸã€‚1.Cè¯­è¨€å®ç°å­—ç¬¦ä¸²åè½¬ï¼švoid reverse(char *str, int length) {}123456789101112131415void reverse(char *str, int length) { char *start, *end, t; start = str; end = &amp;str[length - 1]; while(start &lt; end) { t = *start; *start = *end; *end = t; start++; end--; } for (int i = 0; str[i]; i++) { printf(\"%c\",str[i]); }} 2.å®ç°ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„å»é‡å‡½æ•°ã€‚123456789101112var str_arr = [\"b\",\"c\",1,\"a\", 3,\"v\", \"2\",\"e\", \"6\",\"g\", \"9\", \"arr\",9, \"hello\",\",6\", \"9\", \"1\", 2, 6, \"b\", \"c\"];function unique(arr) { var map = {}, array = []; for (var i = 0; i &lt; arr.length; i++) { var key = arr[i] + typeof arr[i]; if (map[key] == null) { map[key] = true; array.push(arr[i]); } } return array;} 3.æè¿°OCä¸­å¯¹è±¡çš„å®ç°åŸç†ã€‚12345@interface NSObject { Class isa;}@endtypedef struct objc_class *Class; NSObjectå¯¹è±¡å†…éƒ¨å­˜æ”¾äº†ä¸€ä¸ªåå«isaçš„æŒ‡é’ˆï¼ŒæŒ‡å‘äº†ä¸€ä¸ªç»“æ„ä½“struct objc_class ä¸€ä¸ªNSObjectå¯¹è±¡å ç”¨å¤šå°‘å†…å­˜ï¼Ÿ 1ï¼‰ç³»ç»Ÿåˆ†é…äº†16å­—èŠ‚ç»™NSObjectå¯¹è±¡ï¼ˆé€šè¿‡malloc_sizeå‡½æ•°å¯ä»¥è·å¾—ï¼‰ 2ï¼‰NSObjectå¯¹è±¡å†…éƒ¨åªä½¿ç”¨äº†8ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œç”¨æ¥å­˜æ”¾isaæŒ‡é’ˆå˜é‡ï¼ˆ64ä½ç³»ç»Ÿä¸‹ï¼Œå¯ä»¥é€šè¿‡class_getInstanceSizeå‡½æ•°è·å¾—ï¼‰ 4.ç¼–å†™ä»£ç ï¼Œå®ç° NSObject ä¸­æ·»åŠ ä¸€ä¸ªå±æ€§ p112345678910111213141516171819202122@interface NSObject (TestProperty)@property (nonatomic, copy) NSString *p1;@end #import &quot;NSObject+TestProperty.h&quot;#import &lt;objc/runtime.h&gt;@implementation NSObject (TestProperty)- (void)setP1:(NSString *)p1 { objc_setAssociatedObject(self, @selector(p1), p1, OBJC_ASSOCIATION_RETAIN_NONATOMIC);}- (NSString *)p1 { objc_getAssociatedObject(self, @selector(p1));}@end 5.KVO çš„å®ç°åŸç†å’Œæ³¨æ„äº‹é¡¹ã€‚1) åˆ©ç”¨RuntimeAPIåŠ¨æ€ç”Ÿæˆä¸€ä¸ªå­ç±»ï¼Œå¹¶ä¸”è®©instanceå¯¹è±¡çš„isaæŒ‡å‘è¿™ä¸ªå…¨æ–°çš„å­ç±»2) å½“ä¿®æ”¹instanceå¯¹è±¡çš„å±æ€§æ—¶ï¼Œä¼šè°ƒç”¨Foundationçš„_NSSetXXXValueAndNotifyå‡½æ•° 1234willChangeValueForKey:çˆ¶ç±»åŸæ¥çš„setterdidChangeValueForKey:å†…éƒ¨ä¼šè§¦å‘ç›‘å¬å™¨ï¼ˆOberserï¼‰çš„ç›‘å¬æ–¹æ³•( observeValueForKeyPath:ofObject:change:context:ï¼‰ æ³¨æ„äº‹é¡¹ï¼šéœ€è¦è°ƒç”¨setæ–¹æ³•è§¦å‘KVO 6.ä¸‹é¢çš„ä»£ç æœ‰å“ªäº›é—®é¢˜ï¼Ÿ123456789101112131415@interface Demo : NSObject@property (nonatomic, assign) BOOL *p1;@property (nonatomic, strong) NSString *p2;@end@implementation Demo@dynamic p1;- (void)setP2:(NSString *)p2;{ self.p1 = YES; self.p2 = p2;}@end BOOL p1ä¸åº”è¯¥å¸¦*ã€‚ self.p2 = p2; è°ƒç”¨setæ–¹æ³•æ­»å¾ªç¯ã€‚ p1æ²¡æœ‰setæ–¹æ³•ã€‚ p2æœ€å¥½ç”¨copyä¿®é¥°ã€‚ 7.JS å’Œ Native çš„é€šè®¯æ–¹å¼ã€‚æ–¹æ³•ä¸€ï¼šæ‹¦æˆªURL æ–¹æ³•äºŒï¼šæ³¨å†ŒOCä¸JSæ–¹æ³• 12345678910111213141516171819202122232425262728- ï¼ˆvoidï¼‰webViewDidFinishLoad:(UIWebView *)webView { // è·å–å½“å‰ç½‘é¡µçš„æ ‡é¢˜ NSString *titleStr = [webView stringByEvaluatingJavaScriptFromString:@&quot;document.title&quot;]; NSLog(@&quot;%@&quot;,titleStr); // è¿˜å¯ä»¥ç›´æ¥è°ƒç”¨jså®šä¹‰çš„æ–¹æ³• // æ¯”å¦‚getShareUrl()ä¸ºjsç«¯å®šä¹‰å¥½çš„æ–¹æ³•ï¼Œè¿”å›å€¼ä¸ºåˆ†äº«çš„url // æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è°ƒç”¨è¿™ä¸ªæ–¹æ³•åœ¨returnSträ¸­æ‹¿åˆ°jsè¿”å›çš„åˆ†äº«åœ°å€ NSString *returnStr = [webView stringByEvaluatingJavaScriptFromString:@&quot;getShareUrl()&quot;]; NSLog(@&quot;%@&quot;,returnStr); // è¿˜å¯ä»¥ä¸ºjsç«¯æä¾›å®Œæ•´çš„åŸç”Ÿæ–¹æ³•ä¾›å…¶è°ƒç”¨ï¼ˆè®°å¾—å¯¼å…¥#import ï¼‰ JSContext *context = [webView valueForKeyPath:@&quot;documentView.webView.mainFrame.javaScriptContext&quot;]; // å¯ä»¥å®šä¹‰ä¾›jsè°ƒç”¨çš„æ–¹æ³•, testMethodä¸ºjsè°ƒç”¨çš„æ–¹æ³•å context[@&quot;testMethod&quot;] = ^() { dispatch_async(dispatch_get_main_queue(), ^{ UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@&quot;&quot; message:@&quot;jsè°ƒç”¨æ–¹æ³•&quot; delegate:nil cancelButtonTitle:@&quot;å–æ¶ˆ&quot; otherButtonTitles:nil, nil]; [alert show]; }); }; æ–¹æ³•ä¸‰ï¼šæ¡¥æ¥æœºåˆ¶ OCå’ŒJSäº¤äº’çš„æ¡¥æ¥æœºåˆ¶ï¼Œä¸»è¦åŒ…å«3ä¸ªç±»ï¼ŒJSç«¯window.WebViewJavascriptBridgeï¼ŒOCç«¯WebViewJavascriptBridgeå’ŒWebViewJavascriptBridgeBaseã€‚ æ¡¥æ¥ç±»æ”¯æŒJSè°ƒç”¨OCæ–¹æ³•ï¼ŒOCè°ƒç”¨JSæ–¹æ³•ã€‚JSè°ƒç”¨OCé€šè¿‡é‡å®šå‘urlå¹¶å–handlerNameæ¥è°ƒç”¨ï¼ŒOCè°ƒç”¨JSé€šè¿‡stringByEvaluatingJavaScriptFromStringè°ƒç”¨ã€‚ 8.ç½‘ç»œ5å±‚æ¨¡å‹æ˜¯å“ª5å±‚ï¼Ÿåº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç‰©ç†å±‚ 9.æŠŠt1è¡¨ä¸­ name ä¸º mike çš„è®°å½•ä¸­ status å€¼æ”¹ä¸º11update t1 set status = 1 where name = mike 10.å¸¸ç”¨çš„ Linux å‘½ä»¤ã€‚cd è¿›å…¥æŒ‡å®šçš„ç›®å½• cd .. è¿”å›ä¸Šä¸€çº§ç›®å½• ls æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰çš„ç›®å½•ä¸æ–‡ä»¶å touch filename è¡¨ç¤ºåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ mkdir dirname è¡¨ç¤ºåˆ›å»ºä¸€ä¸ªç›®å½• rm filename è¡¨ç¤ºåˆ é™¤ä¸€ä¸ªæ–‡ä»¶ rm -rf dirname è¡¨ç¤ºåˆ é™¤è¯¥ç›®å½•åŠå…¶æ‰€æœ‰çš„å­çº§ç›®å½•ä¸€èµ·åˆ æ‰ ctrl+c å¼ºåˆ¶ç»ˆæ­¢ï¼Œä¸ä¼šç»ˆæ­¢è¿›ç¨‹ sudo ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œä¸Šä¸€ä¸ªå‘½ä»¤ :q é€€å‡º :q! å¼ºåˆ¶é€€å‡º :wq ä¿å­˜å¹¶é€€å‡º 11.ç”¨è¿‡çš„åŒ…/åº“ç®¡ç†å·¥å…·ã€‚CocoaPods 2. ä¸€é¢1ã€è¯´ä¸€ä¸‹ä½ è§‰å¾—é¡¹ç›®ä¸­é‡åˆ°äº†ä»€ä¹ˆå°è±¡æ·±åˆ»çš„é—®é¢˜ï¼Œä½ æ˜¯æ€ä¹ˆè§£å†³çš„ï¼Ÿ2ã€å¤§å­¦é‡Œå­¦äº†å“ªäº›è¯¾ï¼Ÿä¿¡æ¯ç®¡ç†ä¸ä¿¡æ¯ç³»ç»Ÿä¸“ä¸šæ˜¯å“ªä¸ªå­¦é™¢çš„ï¼Ÿ3ã€é¡¹ç›®é‡Œçš„ç½‘ç»œè¯·æ±‚ç”¨åˆ°äº†ç½‘ç»œ5å±‚æ¨¡å‹çš„å“ªäº›ï¼ŒTCP/IP å±äºå“ªä¸€å±‚ï¼ŸHTTP å‘¢ï¼ŸTCP/IPå±äºä¼ è¾“å±‚ HTTPå±äºåº”ç”¨å±‚ 4ã€ä½ è§‰å¾—è‡ªå·±æ˜¯ä»€ä¹ˆçº§åˆ«çš„ï¼Ÿä¼˜åŠ¿å’Œä¸è¶³ä¸»è¦æ˜¯å“ªæ–¹é¢ï¼Ÿ5ã€GCD å¹³æ—¶é¡¹ç›®é‡Œæ€ä¹ˆç”¨çš„ï¼Ÿdispatch_get_mainQueueï¼šè·å–ä¸»çº¿ç¨‹ dispatch_syncï¼šåŒæ­¥æ“ä½œ dispatch_groupï¼šçº¿ç¨‹åŒæ­¥ dispatch_barrierï¼šå¤šè¯»å•å†™ dispatch_semaphoreï¼šåŠ é”ï¼Œæ§åˆ¶å¹¶å‘æ•° dispatch_onceï¼šåªæ‰§è¡Œä¸€æ¬¡ dispatch_afterï¼šå»¶æ—¶æ‰§è¡Œ 6ã€ä¸ºä»€ä¹ˆæ“ä½œ UI éœ€è¦åœ¨ä¸»çº¿ç¨‹ï¼Ÿå› ä¸ºUIKitä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœä¸åœ¨ä¸»çº¿ç¨‹ä¸­æ“ä½œUIï¼Œå¯èƒ½ä¼šé€ æˆå¦‚ä¸‹çš„æƒ…å†µï¼šï¼ˆ1ï¼‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è®¾ç½®åŒä¸€ä¸ªèƒŒæ™¯å›¾ç‰‡ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½å› ä¸ºå½“å‰å›¾ç‰‡è¢«é‡Šæ”¾äº†ä¸¤æ¬¡è€Œå¯¼è‡´åº”ç”¨å´©æºƒã€‚ï¼ˆ2ï¼‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è®¾ç½®åŒä¸€ä¸ªUIViewçš„èƒŒæ™¯é¢œè‰²ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½æ¸²æŸ“æ˜¾ç¤ºçš„æ˜¯é¢œè‰²Aï¼Œè€Œæ­¤æ—¶åœ¨UIViewé€»è¾‘æ ‘ä¸Šçš„èƒŒæ™¯é¢œè‰²å±æ€§ä¸ºBã€‚ï¼ˆ3ï¼‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œviewçš„æ ‘å½¢ç»“æ„ï¼šåœ¨çº¿ç¨‹Aä¸­forå¾ªç¯éå†å¹¶æ“ä½œå½“å‰Viewçš„æ‰€æœ‰subViewï¼Œç„¶åæ­¤æ—¶çº¿ç¨‹Bä¸­å°†æŸä¸ªsubViewç›´æ¥åˆ é™¤ï¼Œè¿™å°±å¯¼è‡´äº†é”™ä¹±è¿˜å¯èƒ½å¯¼è‡´åº”ç”¨å´©æºƒã€‚è™½ç„¶ï¼ŒiOS4ä¹‹åè‹¹æœå°†å¤§éƒ¨åˆ†ç»˜å›¾çš„æ–¹æ³•å’Œè¯¸å¦‚ UIColor å’Œ UIFont è¿™æ ·çš„ç±»æ”¹å†™ä¸ºäº†çº¿ç¨‹å®‰å…¨å¯ç”¨ï¼Œä½†æ˜¯ä»ç„¶å¼ºçƒˆå»ºè®®å°†UIæ“ä½œä¿è¯åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œã€‚ 7ã€å“ªäº›æ˜¯ä½ ç‹¬ç«‹å¼€å‘çš„é¡¹ç›®ï¼Ÿ8ã€é—®äº†ä¸€ä¸‹ä¸Šå®¶å…¬å¸çš„æƒ…å†µ9ã€ä¹‹åæœ‰ä»€ä¹ˆæ‰“ç®—ï¼Ÿ10ã€ä¸Šå®¶è–ªèµ„å¤šå°‘ï¼Ÿä½ è¿˜æœ‰å•¥æƒ³é—®çš„å—ï¼Ÿ3. äºŒé¢1ã€è‡ªå®šä¹‰å°è£…æ§ä»¶éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆè§„èŒƒï¼Ÿ å¤´æ–‡ä»¶å°½é‡ä¸è¦è¿‡å¤šå¼•å…¥å…¶ä»–çš„ç±»,è§£è€¦åˆ å¦‚æœä½¿ç”¨äº†ç¬¬ä¸‰æ–¹æ¡†æ¶, ä¸è¦åœ¨å¤´æ–‡ä»¶å¼•å…¥æ”¹ç±» åˆ‡è®°, ä¸è¦æš´éœ²ç¬¬ä¸‰æ–¹ç»„ä»¶çš„ä»»ä½•å±æ€§,æšä¸¾ç­‰ç­‰ å®šä¹‰è¯¥ç±»çš„å¸¸é‡,æ–¹ä¾¿ä¿®æ”¹ å°½é‡ä¸è¦å¼•å…¥å…¶ä»–é¡¹ç›®ä¸­çš„ç±»,é™¤äº†ä¸€äº›å¿…è¦çš„åˆ†ç±»,ä¸šåŠ¡ç±»å°½é‡ä¸è¦å¼•å…¥ Frameå¸ƒå±€ ä½¿ç”¨åˆ†ç±» UIView+Helper å°½é‡ä¸è¦æš´éœ²æˆå‘˜å˜é‡æˆ–è€…å±æ€§,é™¤éæœ‰å¿…è¦, å…¶ä½™æƒ…å†µæœ€å¥½æä¾›æ¥å£è¿›è¡Œæ“ä½œ. æ³¨æ„å±æ€§çš„å¯è¯»ã€‚ å°è£…çš„å·¥å…·ç±» æ³¨æ„å¦‚æœæ˜¯åˆ†ç±»å¯ä»¥å®ç°çš„å°½é‡è¿ç§»åˆ°åˆ†ç±»ä¸­, å¹¶ä¸”å‘½å æœ€å¥½ä»¥dd_ å¼€å¤´, ä¾‹å¦‚-(void)dd_layoutWithDirection:(DDImageDirection)imageDirection ,ä¹‹æ‰€ä»¥è¿™æ ·æ˜¯å› ä¸º,OCæ²¡æœ‰å‘½åç©ºé—´,ååŠ è½½çš„åˆ†ç±»å¯ä»¥è¦†ç›–æ‰å‰é¢çš„åŒåæ–¹æ³•. è€Œä¸”ä¸€æ—¦å’Œç³»ç»Ÿæ–¹æ³•é‡åå°†é€ æˆå·¨å¤§çš„bug æ³¨æ„ é©¼å³°å‘½ååŸåˆ™,ç±»,åè®®,ä»£ç†å±æ€§ï¼Œå‘½åé¦–å­—æ¯å¤§å†™,æœ€å¥½æ·»åŠ DDç±»å‰ç¼€ 2ã€è¯´ä¸€ä¸‹ä½ äº†è§£çš„è®¾è®¡æ¨¡å¼ã€‚è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™1ã€å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰ å¼€é—­åŸåˆ™çš„æ„æ€æ˜¯ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚åœ¨ç¨‹åºéœ€è¦è¿›è¡Œæ‹“å±•çš„æ—¶å€™ï¼Œä¸èƒ½å»ä¿®æ”¹åŸæœ‰çš„ä»£ç ï¼Œå®ç°ä¸€ä¸ªçƒ­æ’æ‹”çš„æ•ˆæœã€‚ç®€è¨€ä¹‹ï¼Œæ˜¯ä¸ºäº†ä½¿ç¨‹åºçš„æ‰©å±•æ€§å¥½ï¼Œæ˜“äºç»´æŠ¤å’Œå‡çº§ã€‚æƒ³è¦è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¥å£å’ŒæŠ½è±¡ç±»ï¼Œåé¢çš„å…·ä½“è®¾è®¡ä¸­æˆ‘ä»¬ä¼šæåˆ°è¿™ç‚¹ã€‚ 2ã€é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰ é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯é¢å‘å¯¹è±¡è®¾è®¡çš„åŸºæœ¬åŸåˆ™ä¹‹ä¸€ã€‚ é‡Œæ°ä»£æ¢åŸåˆ™ä¸­è¯´ï¼Œä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚LSP æ˜¯ç»§æ‰¿å¤ç”¨çš„åŸºçŸ³ï¼Œåªæœ‰å½“æ´¾ç”Ÿç±»å¯ä»¥æ›¿æ¢æ‰åŸºç±»ï¼Œä¸”è½¯ä»¶å•ä½çš„åŠŸèƒ½ä¸å—åˆ°å½±å“æ—¶ï¼ŒåŸºç±»æ‰èƒ½çœŸæ­£è¢«å¤ç”¨ï¼Œè€Œæ´¾ç”Ÿç±»ä¹Ÿèƒ½å¤Ÿåœ¨åŸºç±»çš„åŸºç¡€ä¸Šå¢åŠ æ–°çš„è¡Œä¸ºã€‚é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹å¼€é—­åŸåˆ™çš„è¡¥å……ã€‚å®ç°å¼€é—­åŸåˆ™çš„å…³é”®æ­¥éª¤å°±æ˜¯æŠ½è±¡åŒ–ï¼Œè€ŒåŸºç±»ä¸å­ç±»çš„ç»§æ‰¿å…³ç³»å°±æ˜¯æŠ½è±¡åŒ–çš„å…·ä½“å®ç°ï¼Œæ‰€ä»¥é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹å®ç°æŠ½è±¡åŒ–çš„å…·ä½“æ­¥éª¤çš„è§„èŒƒã€‚ 3ã€ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰ è¿™ä¸ªåŸåˆ™æ˜¯å¼€é—­åŸåˆ™çš„åŸºç¡€ï¼Œå…·ä½“å†…å®¹ï¼šé’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“ã€‚ 4ã€æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰ è¿™ä¸ªåŸåˆ™çš„æ„æ€æ˜¯ï¼šä½¿ç”¨å¤šä¸ªéš”ç¦»çš„æ¥å£ï¼Œæ¯”ä½¿ç”¨å•ä¸ªæ¥å£è¦å¥½ã€‚å®ƒè¿˜æœ‰å¦å¤–ä¸€ä¸ªæ„æ€æ˜¯ï¼šé™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ã€‚ç”±æ­¤å¯è§ï¼Œå…¶å®è®¾è®¡æ¨¡å¼å°±æ˜¯ä»å¤§å‹è½¯ä»¶æ¶æ„å‡ºå‘ã€ä¾¿äºå‡çº§å’Œç»´æŠ¤çš„è½¯ä»¶è®¾è®¡æ€æƒ³ï¼Œå®ƒå¼ºè°ƒé™ä½ä¾èµ–ï¼Œé™ä½è€¦åˆã€‚ 5ã€è¿ªç±³ç‰¹æ³•åˆ™ï¼Œåˆç§°æœ€å°‘çŸ¥é“åŸåˆ™ï¼ˆDemeter Principleï¼‰ æœ€å°‘çŸ¥é“åŸåˆ™æ˜¯æŒ‡ï¼šä¸€ä¸ªå®ä½“åº”å½“å°½é‡å°‘åœ°ä¸å…¶ä»–å®ä½“ä¹‹é—´å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œä½¿å¾—ç³»ç»ŸåŠŸèƒ½æ¨¡å—ç›¸å¯¹ç‹¬ç«‹ã€‚ 6ã€åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite Reuse Principleï¼‰ åˆæˆå¤ç”¨åŸåˆ™æ˜¯æŒ‡ï¼šå°½é‡ä½¿ç”¨åˆæˆ/èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿ã€‚ è®¾è®¡æ¨¡å¼è£…é¥°æ¨¡å¼ã€å·¥å‚æ¨¡å¼ã€å•ä¾‹æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€‚ 3ã€æ•°æ®åº“æ€ä¹ˆä¼˜åŒ–ï¼Ÿæˆ‘è¯´æ•°æ®é‡å¤§çš„è¯åŠ ç´¢å¼•æå‡æŸ¥è¯¢æ•ˆç‡ã€‚é—®å…¶ä»–ä¼˜åŒ–å‘¢ï¼Ÿæ¯”å¦‚æ•°æ®åº“å¤§å°æœ‰æ²¡æœ‰åšè¿‡ä¼˜åŒ–ï¼Ÿï¼ˆ1ï¼‰æ ¹æ®æœåŠ¡å±‚é¢ï¼šé…ç½®mysqlæ€§èƒ½ä¼˜åŒ–å‚æ•°ï¼› ï¼ˆ2ï¼‰ä»ç³»ç»Ÿå±‚é¢å¢å¼ºmysqlçš„æ€§èƒ½ï¼šä¼˜åŒ–æ•°æ®è¡¨ç»“æ„ã€å­—æ®µç±»å‹ã€å­—æ®µç´¢å¼•ã€åˆ†è¡¨ï¼Œåˆ†åº“ã€è¯»å†™åˆ†ç¦»ç­‰ç­‰ã€‚ ï¼ˆ3ï¼‰ä»æ•°æ®åº“å±‚é¢å¢å¼ºæ€§èƒ½ï¼šä¼˜åŒ–SQLè¯­å¥ï¼Œåˆç†ä½¿ç”¨å­—æ®µç´¢å¼•ã€‚ ï¼ˆ4ï¼‰ä»ä»£ç å±‚é¢å¢å¼ºæ€§èƒ½ï¼šä½¿ç”¨ç¼“å­˜å’ŒNoSQLæ•°æ®åº“æ–¹å¼å­˜å‚¨ï¼Œå¦‚MongoDB/Memcached/Redisæ¥ç¼“è§£é«˜å¹¶å‘ä¸‹æ•°æ®åº“æŸ¥è¯¢çš„å‹åŠ›ã€‚ ï¼ˆ5ï¼‰å‡å°‘æ•°æ®åº“æ“ä½œæ¬¡æ•°ï¼Œå°½é‡ä½¿ç”¨æ•°æ®åº“è®¿é—®é©±åŠ¨çš„æ‰¹å¤„ç†æ–¹æ³•ã€‚ ï¼ˆ6ï¼‰ä¸å¸¸ä½¿ç”¨çš„æ•°æ®è¿ç§»å¤‡ä»½ï¼Œé¿å…æ¯æ¬¡éƒ½åœ¨æµ·é‡æ•°æ®ä¸­å»æ£€ç´¢ã€‚ ï¼ˆ7ï¼‰æå‡æ•°æ®åº“æœåŠ¡å™¨ç¡¬ä»¶é…ç½®ï¼Œæˆ–è€…æ­å»ºæ•°æ®åº“é›†ç¾¤ã€‚ ï¼ˆ8ï¼‰ç¼–ç¨‹æ‰‹æ®µé˜²æ­¢SQLæ³¨å…¥ï¼šä½¿ç”¨JDBC PreparedStatementæŒ‰ä½æ’å…¥æˆ–æŸ¥è¯¢ï¼›æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤ï¼ˆéæ³•å­—ç¬¦ä¸²è¿‡æ»¤ï¼‰ï¼› 4ã€å†…å­˜ä¼˜åŒ–æ˜¯æ€ä¹ˆåšçš„ï¼Ÿä»€ä¹ˆæƒ…å†µä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ï¼Ÿ å‡å°‘å†…å­˜æ³„æ¼ã€‚ é™ä½å†…å­˜ä½¿ç”¨å³°å€¼ã€‚ æ‡’åŠ è½½ã€‚ çµæ´»è¿ç”¨å›¾ç‰‡å’Œæ–‡ä»¶åŠ è½½ã€‚ æ‹‰é•¿æ–‡ä»¶å¤„ç†æœºåˆ¶ï¼Œé€æ­¥å¤„ç†æ–‡ä»¶ã€‚ 5ã€App å¯åŠ¨æ—¶é—´ä¼˜åŒ–ï¼Ÿ å°†ä¸€äº›è€—æ—¶æ“ä½œå»¶è¿Ÿæ‰§è¡Œã€‚æ¯”å¦‚SDKçš„åˆå§‹åŒ–ï¼Œç•Œé¢çš„åˆ›å»ºã€‚ ä¸èƒ½å»¶è¿Ÿæ‰§è¡Œçš„ï¼Œå°½é‡æ”¾åˆ°åå°æ‰§è¡Œã€‚æ¯”å¦‚æ•°æ®è¯»å–ï¼ŒåŸå§‹ JSON æ•°æ®è½¬å¯¹è±¡ï¼Œæ—¥å¿—å‘é€ã€‚ å‡å°‘åŠ¨æ€åº“ã€åˆå¹¶åŠ¨æ€åº“ï¼Œå®šæœŸæ¸…ç†ä¸å¿…è¦çš„åŠ¨æ€åº“ã€‚ å‡å°‘ç±»ã€åˆ†ç±»çš„æ•°é‡ï¼Œåˆå¹¶Categoryå’ŒåŠŸèƒ½ç±»ä¼¼çš„ç±»ã€‚åˆ é™¤ä¸å¿…è¦çš„æ–¹æ³•å’Œç±»ã€åˆ†ç±»ã€‚ å°†ä¸å¿…é¡»åœ¨+loadä¸­åšçš„äº‹å»¶æ—¶åˆ°+initializeä¸­ã€‚ 6ã€è§†å›¾åšè¿‡å“ªäº›ä¼˜åŒ–ï¼Œæˆ‘æäº† TableViewã€‚é‚£å°±ä»¥ TableView è¯´ä¸€ä¸‹ä¼˜åŒ–äº†å“ªäº›æ–¹é¢ï¼Ÿ cellå¤ç”¨ï¼Œheaderã€footerå¤ç”¨ã€‚ å°½é‡æŠŠviewè®¾ç½®ä¸é€æ˜ã€‚ å‡å°‘è§†å›¾çš„å±‚çº§ã€‚ å°½é‡é¿å…è°ƒæ•´è§†å›¾å±‚æ¬¡ã€æ·»åŠ å’Œç§»é™¤è§†å›¾ã€‚ åˆç†é€‰æ‹©åŠ è½½å›¾ç‰‡çš„æ–¹å¼ï¼ŒUIImage imageNamed: ImageAssets ç”¨äºå¤šä¸ªåœ°æ–¹é‡å¤ä½¿ç”¨ï¼ŒUIImage imageWithContentsOfFile ä¸€èˆ¬ç”¨åœ¨å›¾ç‰‡æ•°æ®å¾ˆå¤§ï¼Œä¸€èˆ¬ä¸éœ€è¦å¤šæ¬¡ä½¿ç”¨çš„æƒ…å†µã€‚ å›¾ç‰‡å¤§å°æœ€å¥½å’ŒUIImageViewçš„å¤§å°ç›¸åŒã€‚ ä¸è¦é˜»å¡ä¸»çº¿ç¨‹ï¼Œè€—æ—¶æ“ä½œæ”¾åœ¨å­çº¿ç¨‹è¿›è¡Œã€‚ æ‡’åŠ è½½ã€‚ ç¼“å­˜ï¼Œç¼“å­˜å›¾ç‰‡SDWebImageï¼Œç¼“å­˜è¡Œé«˜ï¼ŒNSCacheç¼“å­˜ã€‚ å¤ç”¨é«˜å¼€é”€å¯¹è±¡NSDateFormatterå’ŒNSCalendarã€‚ å‡å°‘ç¦»å±æ¸²æŸ“ï¼Œä¼˜åŒ–åœ†è§’ã€é˜´å½±ã€‚ ä½¿ç”¨æ­£ç¡®çš„æ•°æ®å­˜å‚¨ã€‚ 7ã€AFNetworking å†…éƒ¨æ˜¯æ€ä¹ˆæ ·çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Ÿ8ã€ä½ è¿˜æœ‰ä»€ä¹ˆæƒ³é—®æˆ‘çš„ï¼Ÿ","link":"/æ»´æ»´å‡ºè¡Œé¢è¯•é¢˜åŠç­”æ¡ˆ/"},{"title":"çŒ¿è¾…å¯¼é¢è¯•é¢˜","text":"çŒ¿è¾…å¯¼é¢è¯•é¢˜ 1.@[]; åŠ å…¥ nil ä¼šé—ªé€€å—ä¼šé—ªé€€ï¼ŒæŠ¥é”™ï¼š 1-[__NSPlaceholderArray initWithObjects:count:]: attempt to insert nil object from objects[4] 2.array[i] ä¼šä¸ä¼šèµ° objectAtIndexä¼šèµ°ã€‚ array[i] å¦‚æœæ•°ç»„è¶Šç•Œï¼Œä¼šå´©æºƒæŠ¥é”™ï¼š 1[__NSArrayI objectAtIndexedSubscript:]: index 6 beyond bounds [0 .. 4]' 3.ä¿¡å·é‡ 3 ä¸ªç½‘ç»œæ¥å£è¿”å›æ‰§è¡Œ 4æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é˜»å¡å‘é€è¯·æ±‚çš„çº¿ç¨‹ï¼Œæ¯”å¦‚åœ¨å¤šä¸ªè¯·æ±‚å›è°ƒåç»Ÿä¸€æ“ä½œçš„éœ€æ±‚ï¼Œè€Œè¿™äº›è¯·æ±‚ä¹‹é—´å¹¶æ²¡æœ‰é¡ºåºå…³ç³»ï¼Œä¸”è¿™äº›æ¥å£éƒ½ä¼šå¦å¼€çº¿ç¨‹è¿›è¡Œç½‘ç»œè¯·æ±‚çš„ã€‚ä¸€èˆ¬åœ°ï¼Œè¿™ç§å¤šçº¿ç¨‹å®Œæˆåè¿›è¡Œç»Ÿä¸€æ“ä½œçš„éœ€æ±‚éƒ½ä¼šä½¿ç”¨é˜Ÿåˆ—ç»„(dispatch_group_t)æ¥å®Œæˆï¼Œä½†æ˜¯ç”±äºæ˜¯å¼‚æ­¥è¯·æ±‚ï¼Œæ²¡ç­‰å…¶å¼‚æ­¥å›è°ƒä¹‹åï¼Œè¯·æ±‚çš„çº¿ç¨‹å°±ç»“æŸäº†ï¼Œä¸ºæ­¤ï¼Œå°±éœ€è¦ä½¿ç”¨ä¿¡å·é‡æ¥é˜»å¡ä½å‘è¯·æ±‚çš„çº¿ç¨‹ã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š 12345678dispatch_async(queue, 0), ^{ dispatch_semaphore_t sema = dispatch_semaphore_create(0); [ç½‘ç»œè¯·æ±‚:^{ //è¯·æ±‚å›è°ƒ dispatch_semaphore_signal(sema); }]; dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);}); è¿™æ ·ï¼Œè¯·æ±‚çš„çº¿ç¨‹å°±å¯ä»¥ç­‰åˆ°å›è°ƒç»“æŸåå†ç»“æŸäº†ï¼Œå†é…åˆé˜Ÿåˆ—ç»„å°±èƒ½å®Œæˆä¸Šè¿°çš„éœ€æ±‚ã€‚è¿™ç§æŠ€å·§å¯ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š å¤šä¸ªè¯·æ±‚ç»“æŸåç»Ÿä¸€æ“ä½œ å¤šä¸ªè¯·æ±‚é¡ºåºæ‰§è¡Œ 4.hook delelgate æ–¹æ³•å‚è€ƒé“¾æ¥ï¼šiOS hook delegate 5.äº¤æ¢æ–¹æ³•ä¼ å…¥å‚æ•° ä¸ºä»€ä¹ˆéœ€è¦å…ˆ addMethod12345678910111213141516171819+ (void)exchangeInstanceMethodWithSelfClass:(Class)selfClass originalSelector:(SEL)originalSelector swizzledSelector:(SEL)swizzledSelector { Method originalMethod = class_getInstanceMethod(selfClass, originalSelector); Method swizzledMethod = class_getInstanceMethod(selfClass, swizzledSelector); BOOL didAddMethod = class_addMethod(selfClass, originalSelector, method_getImplementation(swizzledMethod), method_getTypeEncoding(swizzledMethod)); if (didAddMethod) { class_replaceMethod(selfClass, swizzledSelector, method_getImplementation(originalMethod), method_getTypeEncoding(originalMethod)); } else { method_exchangeImplementations(originalMethod, swizzledMethod); }} é˜²æ­¢å½±å“çˆ¶ç±»çš„æ–¹æ³•ã€‚ init æ–¹æ³•å¹¶ä¸æ˜¯ Person ç±»æœ¬èº«çš„å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰æ–¹æ³•ï¼Œè€Œæ˜¯çˆ¶ç±» NSObject çš„æ–¹æ³•ã€‚ç”±äº Person æœ¬èº«æ²¡æœ‰è¯¥æ–¹æ³•ï¼Œæ‰€ä»¥ class_getInstanceMethod è·å–åˆ°çš„æ–¹æ³•æ˜¯é€šè¿‡ Person çš„ superclass æŒ‡é’ˆä» NSObject ç±»ä¸­è·å–åˆ°äº† init è¿™ä¸ªæ–¹æ³•ã€‚ method_exchangeImplementations æ“ä½œå°† NSObject çš„ init æ–¹æ³•çš„å®ç°ä¸ Person ç±»çš„ yxc_init æ–¹æ³•çš„å®ç°è¿›è¡Œäº’æ¢äº†ï¼Œè¿™æ—¶å€™è°ƒç”¨ init æ–¹æ³•å®é™…ä¸Šæ˜¯è°ƒç”¨äº† yxc_init æ–¹æ³•ã€‚ åˆ›å»ºä¸€ä¸ª Person å¯¹è±¡æ—¶ï¼Œè°ƒç”¨ init æ–¹æ³•ï¼Œè¿è¡Œæ—¶ä¼šå»æŸ¥æ‰¾ yxc_init çš„å®ç°ï¼Œå› ä¸º yxc_init æ–¹æ³•æ˜¯ Person è‡ªèº«çš„æ–¹æ³•ï¼Œæ‰€ä»¥æŸ¥æ‰¾åˆ°äº†ç›´æ¥è°ƒç”¨ã€‚ï¼ˆæ¶ˆæ¯å‘é€æœºåˆ¶ï¼‰ è€Œåˆ›å»ºä¸€ä¸ª NSObject å¯¹è±¡æ—¶ï¼Œè°ƒç”¨ init æ–¹æ³•ï¼Œè¿è¡Œæ—¶å»æŸ¥æ‰¾ yxc_init æ–¹æ³•çš„æ—¶å€™ï¼ŒNSObject æ˜¯æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å­˜åœ¨äº Person ç±»ä¸­ï¼Œæ‰€ä»¥æŸ¥æ‰¾å®Œæ¯•ï¼Œè¿˜æ˜¯æ‰¾ä¸åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œå°±æŠ›å¼‚å¸¸äº†ã€‚ æ­£ç¡®çš„ hook åšæ³•æ˜¯ï¼Œå…ˆå°† init æ–¹æ³•æ·»åŠ åˆ° Person ç±»ä¸­ï¼Œå¦‚æœè¿™ä¸ªç±»å½“å‰æœ‰è¿™ä¸ªæ–¹æ³•ï¼ˆè€Œä¸æ˜¯çˆ¶ç±»ï¼‰ï¼Œåˆ™ä¸æ·»åŠ ï¼Œç›´æ¥ exchangeï¼Œå¦åˆ™æ·»åŠ äº† init æ–¹æ³•ï¼Œç„¶åå†å°† yxc_init æ–¹æ³•çš„å®ç°è®¾ç½®æˆ init æ–¹æ³•çš„å®ç°ã€‚ å‚è€ƒé“¾æ¥ï¼šiOS Runtime é»‘é­”æ³•æ–¹æ³•äº¤æ¢(Method swizzling) 6.å…³è”å¯¹è±¡æœ‰å‡ ç§ç­–ç•¥ï¼Œå¦‚ä½•å®ç° weakåœ¨å…³è”å¯¹è±¡é‡Šæ”¾çš„æ—¶å€™ï¼Œè°ƒç”¨objc_setAssociatedObject(object, key, nil, OBJC_ASSOCIATION_ASSIGN)è¿™æ ·å°±æŠŠå®¿ä¸»å¯¹è±¡çš„è¯¥ key çš„å…³è”å¯¹è±¡æ¸…é™¤äº†ï¼Œå¤–éƒ¨è¯»è¿™ä¸ª key çš„å…³è”å¯¹è±¡å°±æ˜¯ nil 1234567891011extern void objc_setWeakAssociatedObject(id _Nonnull object, const void * _Nonnull key, id _Nullable value);void objc_setWeakAssociatedObject(id _Nonnull object, const void * _Nonnull key, id _Nullable value) { if (value) { //__weak typeof(object) weakObj = object; [value hc_doSthWhenDeallocWithBlock:^(NSObject *__unsafe_unretained _Nonnull target) { objc_setAssociatedObject(object, key, nil, OBJC_ASSOCIATION_ASSIGN); // clear association }]; } objc_setAssociatedObject(object, key, value, OBJC_ASSOCIATION_ASSIGN); // call system imp} å‚è€ƒé“¾æ¥ï¼šOC-AssociatedObjectåŸç†åŠweakå…³è”å¯¹è±¡çš„å®ç° 7.å“åº”è€…é“¾ button è¶…å‡ºçˆ¶è§†å›¾ä¸€åŠèƒ½å¦å“åº”ç‚¹å‡»äº‹ä»¶è¶…å‡ºçˆ¶è§†å›¾çš„éƒ¨åˆ†ä¸èƒ½å“åº”ï¼Œåœ¨çˆ¶è§†å›¾å†…çš„éƒ¨åˆ†å¯ä»¥å“åº”ã€‚ å¦‚ä½•æ‰©å¤§æŒ‰é’®çš„ç‚¹å‡»èŒƒå›´ï¼Ÿ å¯ä»¥é‡å†™ button çš„ pointInside: æ–¹æ³• 12345678- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event { // å½“å‰btnçš„å¤§å° CGRect btnBounds = self.bounds; // æ‰©å¤§æŒ‰é’®çš„ç‚¹å‡»èŒƒå›´ï¼Œæ”¹ä¸ºè´Ÿå€¼ btnBounds = CGRectInset(btnBounds, -15, -15); // è‹¥ç‚¹å‡»çš„ç‚¹åœ¨æ–°çš„boundsé‡Œï¼Œå°±è¿”å›YES return CGRectContainsPoint(btnBounds, point);} 8.ç¦»å±æ¸²æŸ“ï¼Œä¸ºä»€ä¹ˆä¼šè§¦å‘å‚è€ƒé“¾æ¥ï¼šçŸ¥ä¹-å…³äºiOSç¦»å±æ¸²æŸ“çš„æ·±å…¥ç ”ç©¶ ç®€ä¹¦-iOSç¦»å±æ¸²æŸ“äº§ç”Ÿçš„åŸå›  9.åˆ¤æ–­å½“å‰ä»»åŠ¡åœ¨å“ªä¸ª queue ä¸­dispatch_queue_get_label å‚è€ƒé“¾æ¥ï¼šåˆ¤æ–­ä»£ç åœ¨å“ªä¸ªé˜Ÿåˆ—ä¸­è¿è¡Œ 10.SDWebImage å†…å­˜ç¼“å­˜æ€ä¹ˆå®ç°çš„å‚è€ƒé“¾æ¥ï¼šiOS-SDWebImageç¼“å­˜æœºåˆ¶ 11.json è½¬ modelï¼ŒRuntime èƒ½å¦è·å–åˆ°è‡ªå®šä¹‰å±æ€§çš„ç±»å‹class_copyPropertyListå¯ä»¥è·å–åˆ°å±æ€§åˆ—è¡¨ property_getNameå¯ä»¥è·å–åˆ°å±æ€§å property_getAttributeså¯ä»¥è·å–åˆ°æˆå‘˜ç±»å‹ 12.tableView å¿«é€Ÿæ»‘åŠ¨ å¡é¡¿å‘ç”Ÿå¯èƒ½åŸå› 1.æå‰è®¡ç®—å¹¶ç¼“å­˜å¥½é«˜åº¦ï¼Œå› ä¸º heightForRow æœ€é¢‘ç¹çš„è°ƒç”¨ã€‚ - (UITableViewCell)tableView:(UITableView)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath; 2.å¼‚æ­¥ç»˜åˆ¶ï¼Œé‡åˆ°å¤æ‚ç•Œé¢ï¼Œæ€§èƒ½ç“¶é¢ˆæ—¶ï¼Œå¯èƒ½æ˜¯çªç ´å£ã€‚ 3.æ»‘åŠ¨æ—¶æŒ‰éœ€åŠ è½½ï¼Œè¿™ä¸ªåœ¨å¤§é‡å›¾ç‰‡å±•ç¤ºï¼Œç½‘ç»œåŠ è½½æ—¶ï¼Œå¾ˆç®¡ç”¨ã€‚ï¼ˆSDWebImage å·²ç»å®ç°å¼‚æ­¥åŠ è½½ï¼‰ã€‚ 4.é‡ç”¨ cellsã€‚ 5.å¦‚æœ cell å†…æ˜¾ç¤ºå¾—å†…å®¹æ¥è‡ª webï¼Œä½¿ç”¨å¼‚æ­¥åŠ è½½ï¼Œç¼“å­˜ç»“æœè¯·æ±‚ã€‚å½“ cell ä¸­çš„éƒ¨åˆ† View æ˜¯éå¸¸ç‹¬ç«‹çš„ï¼Œå¹¶ä¸”ä¸ä¾¿äºé‡ç”¨çš„ï¼Œè€Œä¸”â€œä½“ç§¯â€éå¸¸å°ï¼Œåœ¨å†…å­˜å¯æ§çš„å‰æä¸‹ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å°†è¿™äº› view ç¼“å­˜èµ·æ¥ã€‚å½“ç„¶ä¹Ÿæ˜¯ç¼“å­˜åœ¨æ¨¡å‹ä¸­ã€‚ 6.å°‘ç”¨æˆ–ä¸ç”¨é€æ˜å›¾å±‚ï¼Œä½¿ç”¨ä¸é€æ˜è§†å›¾ã€‚å¯¹äºä¸é€æ˜çš„ Viewï¼Œè®¾ç½® opaque ä¸º YESï¼Œè¿™æ ·åœ¨ç»˜åˆ¶è¯¥ View æ—¶ï¼Œå°±ä¸éœ€è¦è€ƒè™‘è¢« View è¦†ç›–çš„å…¶ä»–å†…å®¹ï¼ˆå°½é‡è®¾ç½® Cell çš„ view ä¸º opaqueï¼Œé¿å… GPU å¯¹ Cell ä¸‹é¢çš„å†…å®¹ä¹Ÿè¿›è¡Œç»˜åˆ¶ï¼‰ 7.å‡å°‘ subViewsã€‚åˆ†æ Cell ç»“æ„ï¼Œå°½å¯èƒ½çš„å°† ç›¸åŒå†…å®¹çš„æŠ½å–åˆ°ä¸€ç§æ ·å¼ Cell ä¸­ï¼Œå‰é¢å·²ç»æåˆ°äº† Cell çš„é‡ç”¨æœºåˆ¶ï¼Œè¿™æ ·å°±èƒ½ä¿è¯ UITbaleView è¦æ˜¾ç¤ºå¤šå°‘å†…å®¹ï¼ŒçœŸæ­£åˆ›å»ºå‡ºçš„ Cell å¯èƒ½åªæ¯”å±å¹•æ˜¾ç¤ºçš„ Cell å¤šä¸€ç‚¹ã€‚è™½ç„¶ Cell çš„â€™ä½“ç§¯â€™å¯èƒ½ä¼šå¤§ç‚¹ï¼Œä½†æ˜¯å› ä¸º Cell çš„æ•°é‡ä¸ä¼šå¾ˆå¤šï¼Œå®Œå…¨å¯ä»¥æ¥å—çš„ 8.å°‘ç”¨ addView ç»™ cell åŠ¨æ€æ·»åŠ  viewï¼Œå¯ä»¥åˆå§‹åŒ–çš„æ—¶å€™å°±æ·»åŠ ï¼Œç„¶åé€šè¿‡ hide æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºã€‚ 13.æ‹¬å·ç®—æ³•LeetCode é¢˜ç›®é“¾æ¥ï¼šæ‹¬å·ç”Ÿæˆ 14.CocoaPods ç¼“å­˜å­˜åœ¨å“ªé‡Œï¼Œpod install æ‰§è¡Œ~/Library/Caches/Cocoapods","link":"/çŒ¿è¾…å¯¼é¢è¯•é¢˜/"},{"title":"ç™¾åº¦çŸ¥é“é¢è¯•é¢˜","text":"ç™¾åº¦çŸ¥é“é¢è¯•é¢˜ ä¸€é¢1.å±æ€§å…³é”®å­—ï¼Œåœ¨ ARCã€MRCä¸‹åˆ†åˆ«ç”¨ä»€ä¹ˆå…³é”®å­—ï¼Œcopy ä¿®é¥° NSStringï¼Œå¯å˜å­—ç¬¦ä¸²ç”¨ä»€ä¹ˆä¿®é¥°ï¼Ÿblock ç”¨ä»€ä¹ˆä¿®é¥°ï¼Ÿèƒ½ä¸èƒ½ç”¨ strong ä¿®é¥°ï¼Ÿassign èƒ½ä¿®é¥°å¯¹è±¡å—ï¼Ÿunsafe_unretain æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ 2.blockï¼Œæœ‰å‡ ç§ blockï¼Œ__weak __blockï¼Œ__block ä¿®æ”¹å±€éƒ¨å˜é‡çš„å€¼åŸç†ï¼ŒåªæŠŠå±€éƒ¨å˜é‡å˜æˆç»“æ„ä½“å°±å¯ä»¥äº†å—ï¼Ÿ 3.å¤šçº¿ç¨‹éƒ½ç”¨è¿‡å“ªäº›ï¼ŸNSOperation äº†è§£å—ï¼ŸGCD æ€ä¹ˆå¼€ä¸€ä¸ªçº¿ç¨‹ 4.ä»€ä¹ˆæ˜¯æ­»é”ï¼Œä¸¾ä¾‹è¯´æ˜ä¸ºä»€ä¹ˆä¼šæ­»é” 5.å†…å­˜éƒ½æœ‰å“ªäº›åŒºåŸŸï¼Ÿå“ªäº›æ˜¯åœ¨æ ˆä¸Šï¼Œå“ªäº›æ˜¯åœ¨å †ä¸Šï¼Ÿå±€éƒ¨å˜é‡å­˜åœ¨å“ªé‡Œï¼Ÿ 6.+load çˆ¶ç±»ã€å­ç±»è°ƒç”¨é¡ºåºï¼Ÿåˆ†ç±»çš„ +load ä¼šè°ƒç”¨å—ï¼Ÿé¡¹ç›®é‡Œæœ‰ç”¨åˆ° +load å—ï¼Ÿinitialize 7.Category å®ç°äº†æœ¬ç±»çš„åŒåæ–¹æ³•ï¼Œæœ‰æ²¡æœ‰åŠæ³•æ¥è°ƒç”¨æœ¬ç±»çš„æ–¹æ³•ï¼Ÿ 8.å•é“¾è¡¨æ˜¯å¦æœ‰ç¯ 9.ä¸¤ä¸ªé“¾è¡¨æ˜¯å¦ç›¸äº¤ï¼ˆæ€ä¹ˆåˆ¤æ–­æ˜¯å¦ç›¸äº¤ï¼Ÿæ€ä¹ˆæ‰¾äº¤ç‚¹ï¼‰ 10.ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿ç›¸åŒå­ä¸²çš„é•¿åº¦ äºŒé¢1.è¾ƒéš¾å®šä½çš„ Crash æ€ä¹ˆå®šä½ï¼Ÿæ€ä¹ˆåˆ¤æ–­æ˜¯ OOM å¯¼è‡´çš„ Crash è¿˜æ˜¯å…¶ä»–å¯¼è‡´çš„ Crachï¼Ÿ 2.Jenkins+Fastlane å®ç° CIï¼Œè‡ªåŠ¨åŒ–çš„æµç¨‹é™¤äº†æ‰“åŒ…è¿˜èƒ½åšä»€ä¹ˆï¼Ÿ 3.Flutter å’ŒåŸç”Ÿå¼€å‘ä½ è§‰å¾—æœ‰ä»€ä¹ˆå·®å¼‚ 4.HTTPDNSï¼Œä½¿ç”¨å’Œä¸ä½¿ç”¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ 5.é€šçŸ¥æ˜¯åŒæ­¥çš„è¿˜æ˜¯å¼‚æ­¥çš„ï¼Œå¼‚æ­¥çš„é€šçŸ¥ä»€ä¹ˆæ—¶å€™ä¼šå‘å‡ºå»ï¼Œé€šçŸ¥çš„åŸç†ï¼Œé€šçŸ¥å¦‚ä½•å­˜å‚¨ï¼Œå¤šæ¬¡æ·»åŠ é€šçŸ¥ï¼Œå¤šæ¬¡ç§»é™¤é€šçŸ¥ä¼šæœ‰é—®é¢˜å—ï¼Ÿ 6.å±å¹•æ˜¾ç¤ºçš„æµç¨‹ï¼ŒCPU/GPUï¼Œç¦»å±æ¸²æŸ“æ˜¯ä»€ä¹ˆï¼Ÿå…‰æ …åŒ–çš„è¿‡ç¨‹ 7.å®‰è£…åŒ…å¤§å°ä¼˜åŒ–åšäº†å“ªäº›ï¼Ÿæ®µè¿ç§»äº†è§£å—ï¼Ÿ 8.App å¯åŠ¨ç³»ç»Ÿåšäº†å“ªäº›äº‹æƒ…ï¼Œæ€ä¹ˆä¼˜åŒ–å¯åŠ¨é€Ÿåº¦ 9.tableView æ»‘åŠ¨æµç•…æ€§ä¼˜åŒ– 10.ä»ç‚¹å‡»å±å¹•åˆ°å“åº”äº‹ä»¶çš„æµç¨‹ 11.UIView å’Œ CALayer çš„å…³ç³»ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡ 12.autoreleasePool çš„åŸç†ï¼Œè®¾è®¡æˆåŒå‘é“¾è¡¨æœ‰ä»€ä¹ˆå¥½å¤„ 13.æœ€æœ‰æˆå°±æ„Ÿçš„é¡¹ç›®ï¼Œç»„ä»¶åŒ–çš„å¥½å¤„ 14.å¦‚æœ Code Reviewï¼Œä½ ä¼šå…³æ³¨å“ªäº›ä¸œè¥¿ï¼Ÿ 15.ç›¸å¯¹å…¶ä»–å›¢é˜Ÿæˆå‘˜çš„ä¼˜åŠ¿ 16.åˆ†äº«ä¼šæ€ä¹ˆåšï¼Œå¦‚æœå¬ä¼—æœ‰ PM/æµ‹è¯•ï¼Œä¼šæ€ä¹ˆåˆ†äº« 17.å›¢é˜Ÿé‡Œæœ‰æˆå‘˜ä¸æ˜¯ç‰¹åˆ«ä¼˜ç§€ï¼Œæ€ä¹ˆæŠŠæ§è¿›åº¦ 18.äº†è§£ç™¾åº¦çš„æŠ€æœ¯èŒçº§å—ï¼Ÿä½ è§‰å¾—è‡ªå·±æ˜¯Tå‡ ï¼Ÿ ä¸‰é¢ç»ç† é¡¹ç›®ä¸­é‡åˆ°çš„æœ‰æŒ‘æˆ˜çš„é—®é¢˜ å››é¢HR äº”é¢1.é€šè¿‡ä»€ä¹ˆé€”å¾„å­¦çš„åŒ…æ‹¬ Vue çš„å…¶ä»–çŸ¥è¯†ï¼Ÿä¸ºä»€ä¹ˆä¼šæœ‰å‰ç«¯çš„éœ€æ±‚ï¼Ÿ 2.IM çš„æ°”æ³¡ï¼Œç‚¹ä¹å›¾æœ‰æ²¡æœ‰ä½¿ç”¨ç±»åº“ï¼Œæœ‰æ²¡æœ‰å…¼å®¹æ€§é—®é¢˜ï¼Œé¡¹ç›®é€‚é…çš„æœ€ä½ç³»ç»Ÿç‰ˆæœ¬æ˜¯å¤šå°‘ï¼Ÿ 3.IM æ–‡æœ¬é«˜åº¦è®¡ç®—ï¼Œå›¾æ–‡æ··æ’æ€ä¹ˆè®¡ç®—é«˜åº¦ï¼Œé«˜åº¦è®¡ç®—æœ‰æ²¡æœ‰é‡åˆ°ä»€ä¹ˆé—®é¢˜ 4.æ•´ä¸ª IM é¡µé¢çš„å¸ƒå±€ï¼Œæœ€å¤æ‚çš„ cell å¸ƒå±€ 5.æ”¶åˆ°æ–°æ¶ˆæ¯çš„å¤„ç†ï¼Œæ€ä¹ˆå¤„ç†èƒ½å¤Ÿä¸æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨ 6.å¤§é‡å›¾ç‰‡åˆ—è¡¨æ»‘åŠ¨åˆ°æŒ‡å®šä½ç½®ï¼Œæ€ä¹ˆé¿å…å‡ºç°å†…å­˜å¯¼è‡´çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰è½åœ° 7.ç»„ä»¶åŒ–ï¼Œä»€ä¹ˆèƒ½æ‹†æˆç»„ä»¶ï¼Œä½ è®¤ä¸ºç»„ä»¶åŒ–åšçš„è¶³å¤Ÿå¥½å—ï¼Ÿæ›´å¥½çš„ç»„ä»¶åŒ–æ€ä¹ˆå»åšï¼Ÿ 8.ä½ è®¤ä¸º iOS å’Œå…¶ä»–ç«¯æœ‰ä»€ä¹ˆä¸ä¸€æ ·ï¼Œæœ‰ä»€ä¹ˆç»éªŒå¯ä»¥å…±ç”¨ï¼Ÿ 9.æœªæ¥è§„åˆ’ å‚è€ƒç­”æ¡ˆä¸€é¢ 1.å±æ€§å…³é”®å­—ï¼Œåœ¨ ARCã€MRCä¸‹åˆ†åˆ«ç”¨ä»€ä¹ˆå…³é”®å­—ï¼Œcopy ä¿®é¥° NSStringï¼Œå¯å˜å­—ç¬¦ä¸²ç”¨ä»€ä¹ˆä¿®é¥°ï¼Ÿblock ç”¨ä»€ä¹ˆä¿®é¥°ï¼Ÿèƒ½ä¸èƒ½ç”¨ strong ä¿®é¥°ï¼Ÿassign èƒ½ä¿®é¥°å¯¹è±¡å—ï¼Ÿunsafe_unretain æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ nonatomic, readwrite, strong/copy/weak/asign å¯å˜å­—ç¬¦ä¸²ç”¨strongä¿®é¥°ï¼Œç”¨copyä¿®é¥°åå°±å˜æˆäº†ä¸å¯å˜å­—ç¬¦ä¸²ï¼Œè°ƒç”¨å¯å˜å­—ç¬¦ä¸²çš„æ–¹æ³•ä¼šæŠ¥æ‰¾ä¸åˆ°æ–¹æ³•é”™è¯¯ blockç”¨copyä¿®é¥°ï¼Œä¹Ÿå¯ä»¥ç”¨strong assignä¸èƒ½ä¿®é¥°å¯¹è±¡ï¼Œä¿®é¥°å¯¹è±¡ä¼šå¼•ç”¨è®¡æ•°ä¸å¢åŠ ï¼Œåœ¨å¯¹è±¡é‡Šæ”¾åï¼Œå±æ€§ä»ç„¶ä¿å­˜ä¹‹å‰çš„åœ°å€ï¼Œè®¿é—®ä¼šå˜æˆé‡æŒ‡é’ˆï¼Œå¯¼è‡´EXC_BAD_ACCESSï¼Œå¯¹è±¡ç”¨strongæˆ–weakä¿®é¥° unsafe_unretain ä¸å¢åŠ å¼•ç”¨è®¡æ•°ï¼Œä¸è‡ªåŠ¨ç½®nilï¼Œæ¯”assignæ›´æ˜ç¡®ç”¨äºå¯¹è±¡ï¼Œä½†æ¯”weakå±é™©ã€‚ 2.blockï¼Œæœ‰å‡ ç§ blockï¼Œ__weak __blockï¼Œ__block ä¿®æ”¹å±€éƒ¨å˜é‡çš„å€¼åŸç†ï¼ŒåªæŠŠå±€éƒ¨å˜é‡å˜æˆç»“æ„ä½“å°±å¯ä»¥äº†å—ï¼Ÿ GlobleBlock å…¨å±€block StackBlock æ ˆblock MallocBlock å †block __weak ç”¨äºé¿å…å¾ªç¯å¼•ç”¨ï¼Œblockå¼ºå¼•ç”¨å¯¹è±¡æ—¶ï¼Œä½¿ç”¨__weakå¼±å¼•ç”¨æ‰“æ–­å¾ªç¯ï¼›å®‰å…¨è®¿é—®ï¼šå¯¹è±¡è¢«é‡Šæ”¾åï¼Œå¼±å¼•ç”¨ä¼šè‡ªåŠ¨ç½®ä¸ºnilï¼Œé¿å…é‡æŒ‡é’ˆã€‚ __blockç”¨äºåœ¨blockå†…éƒ¨ä¿®æ”¹å±€éƒ¨å˜é‡çš„å€¼ï¼Œæ™®é€šå±€éƒ¨å˜é‡åœ¨blockå†…éƒ¨æ˜¯ä¸å¯å˜å‰¯æœ¬ï¼Œæ•è·çš„æ˜¯å˜é‡çš„å€¼ï¼Œç”¨__blockä¿®é¥°åï¼Œblockæ•è·çš„æ˜¯å¯¹å˜é‡çš„å¼•ç”¨ã€‚ __blockçš„å†…éƒ¨å®ç°ç±»ä¼¼ï¼š 123456__Block_byref_count_struct { void *isa; __strong id obj; // å¯¹è±¡å˜é‡ int flags; void *forwarding; // æŒ‡å‘è‡ªå·±ï¼Œä¿è¯ block å†…å¤–è®¿é—®åŒä¸€ä¸ªåœ°å€} 3.å¤šçº¿ç¨‹éƒ½ç”¨è¿‡å“ªäº›ï¼ŸNSOperation äº†è§£å—ï¼ŸGCD æ€ä¹ˆå¼€ä¸€ä¸ªçº¿ç¨‹ [NSThread currentThread] GCD dispatch_group_enter dispatch_group_leave dispatch_notify dispatch_semaphore waitä¿¡å·é‡-1 signalä¿¡å·é‡+1 ï¼ˆ1ï¼‰å¯ä»¥æ§åˆ¶å¹¶å‘æ•°é‡ åˆå§‹è®¾ç½®ä¸ºæœ€å¤§å¹¶å‘æ•°ï¼Œå¼€å§‹ä»»åŠ¡wait -1ï¼›ä»»åŠ¡å®Œæˆsignal+1 ï¼ˆ2ï¼‰å®ç°çº¿ç¨‹åŒæ­¥ åˆå§‹è®¾ç½®ä¸º0ï¼Œå¼‚æ­¥ä»»åŠ¡é‡ŒåŠ 1ï¼Œwaitç­‰å¾…å­çº¿ç¨‹å®Œæˆ NSOperationæ˜¯å¯¹GCDçš„å°è£…ï¼Œå¯ä»¥è®¾ç½®ä¼˜å…ˆçº§ï¼Œå¹¶å‘æ•°ï¼Œä¾èµ–å…³ç³»ï¼Œå–æ¶ˆ GCDå¼‚æ­¥asyncæœ‰å¼€çº¿ç¨‹çš„èƒ½åŠ› 4.ä»€ä¹ˆæ˜¯æ­»é”ï¼Œä¸¾ä¾‹è¯´æ˜ä¸ºä»€ä¹ˆä¼šæ­»é” æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºæˆ–è€…ç”±äºå½¼æ­¤é€šä¿¡è€Œé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚æ­¤æ—¶ç§°ç³»ç»Ÿå¤„äºæ­»é”çŠ¶æ€æˆ–ç³»ç»Ÿäº§ç”Ÿäº†æ­»é”ï¼Œè¿™äº›æ°¸è¿œåœ¨äº’ç›¸ç­‰å¾…çš„è¿›ç¨‹ç§°ä¸ºæ­»é”è¿›ç¨‹ã€‚ å››ä¸ªå¿…è¦æ¡ä»¶ äº’æ–¥æ¡ä»¶ï¼šæŒ‡è¿›ç¨‹å¯¹æ‰€åˆ†é…åˆ°çš„èµ„æºè¿›è¡Œæ’å®ƒæ€§ä½¿ç”¨ï¼Œå³åœ¨ä¸€æ®µæ—¶é—´å†…æŸèµ„æºåªç”±ä¸€ä¸ªè¿›ç¨‹å ç”¨ã€‚å¦‚æœæ­¤æ—¶è¿˜æœ‰å…¶å®ƒè¿›ç¨‹è¯·æ±‚èµ„æºï¼Œåˆ™è¯·æ±‚è€…åªèƒ½ç­‰å¾…ï¼Œç›´è‡³å æœ‰èµ„æºçš„è¿›ç¨‹ç”¨æ¯•é‡Šæ”¾ã€‚ è¯·æ±‚å’Œä¿æŒæ¡ä»¶ï¼šæŒ‡è¿›ç¨‹å·²ç»ä¿æŒè‡³å°‘ä¸€ä¸ªèµ„æºï¼Œä½†åˆæå‡ºäº†æ–°çš„èµ„æºè¯·æ±‚ï¼Œè€Œè¯¥èµ„æºå·²è¢«å…¶å®ƒè¿›ç¨‹å æœ‰ï¼Œæ­¤æ—¶è¯·æ±‚è¿›ç¨‹é˜»å¡ï¼Œä½†åˆå¯¹è‡ªå·±å·²è·å¾—çš„å…¶å®ƒèµ„æºä¿æŒä¸æ”¾ã€‚ ä¸å‰¥å¤ºæ¡ä»¶ï¼šæŒ‡è¿›ç¨‹å·²è·å¾—çš„èµ„æºï¼Œåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½è¢«å‰¥å¤ºï¼Œåªèƒ½åœ¨ä½¿ç”¨å®Œæ—¶ç”±è‡ªå·±é‡Šæ”¾ã€‚ ç¯è·¯ç­‰å¾…æ¡ä»¶ï¼šæŒ‡åœ¨å‘ç”Ÿæ­»é”æ—¶ï¼Œå¿…ç„¶å­˜åœ¨ä¸€ä¸ªè¿›ç¨‹â€”â€”èµ„æºçš„ç¯å½¢é“¾ï¼Œå³è¿›ç¨‹é›†åˆ{P0ï¼ŒP1ï¼ŒP2ï¼ŒÂ·Â·Â·ï¼ŒPn}ä¸­çš„P0æ­£åœ¨ç­‰å¾…ä¸€ä¸ªP1å ç”¨çš„èµ„æºï¼›P1æ­£åœ¨ç­‰å¾…P2å ç”¨çš„èµ„æºï¼Œâ€¦â€¦ï¼ŒPnæ­£åœ¨ç­‰å¾…å·²è¢«P0å ç”¨çš„èµ„æºã€‚ ä¸¾ä¾‹ï¼š 123456- (void)viewDidLoad { [super viewDidLoad]; dispatch_sync(dispatch_get_main_queue(), ^{ NSLog(@\"1\"); });} dispatch_sync åŒæ­¥ï¼Œé˜»å¡å½“å‰çº¿ç¨‹ï¼Œå³é˜»å¡ä¸»çº¿ç¨‹ã€‚block åˆåœ¨ç­‰ä¸»çº¿ç¨‹é‡Œçš„ viewDidLoad æ‰§è¡Œå®Œï¼Œä»è€Œå½¢æˆäº†ä¸»çº¿ç¨‹ç­‰å¾…ä¸»çº¿ç¨‹ï¼Œé€ æˆæ­»é”ã€‚ å‚è€ƒé“¾æ¥ï¼šç™¾åº¦ç™¾ç§‘-æ­»é” 5.å†…å­˜éƒ½æœ‰å“ªäº›åŒºåŸŸï¼Ÿå“ªäº›æ˜¯åœ¨æ ˆä¸Šï¼Œå“ªäº›æ˜¯åœ¨å †ä¸Šï¼Ÿå±€éƒ¨å˜é‡å­˜åœ¨å“ªé‡Œï¼Ÿ ä»£ç æ®µï¼ˆ__TEXTï¼‰ã€æ•°æ®æ®µ(__DATA)ã€å †åŒºã€æ ˆåŒºã€å†…æ ¸åŒºï¼› ä»£ç æ®µï¼šç¼–è¯‘åçš„ä»£ç ã€‚ æ•°æ®æ®µï¼šå­—ç¬¦ä¸²å¸¸é‡ã€å…¨å±€å˜é‡ã€é™æ€å˜é‡ã€‚ æ ˆï¼šå±€éƒ¨å˜é‡ï¼ˆåŸºæœ¬æ•°æ®ç±»å‹ï¼‰å’Œå®å‚ å †ï¼šé€šè¿‡allocã€mallocã€callocåŠ¨æ€åˆ†é…çš„ç©ºé—´ã€‚ å±€éƒ¨å˜é‡æŒ‡é’ˆæœ¬èº«å­˜åœ¨æ ˆä¸Šï¼ŒåŠ¨æ€åˆ†é…çš„å¯¹è±¡/å†…å­˜åœ¨å †ä¸Š å†…å­˜åŒºåŸŸ æ ˆ / å † å†…å®¹ æ ˆï¼ˆStackï¼‰ æ ˆ å±€éƒ¨å˜é‡ã€å‡½æ•°å‚æ•°ã€è¿”å›åœ°å€ å †ï¼ˆHeapï¼‰ å † å¯¹è±¡å®ä¾‹ã€åŠ¨æ€åˆ†é…å†…å­˜ å…¨å±€/é™æ€åŒº â€” å…¨å±€å˜é‡ã€é™æ€å˜é‡ å¸¸é‡åŒº â€” å­—ç¬¦ä¸²å¸¸é‡ã€å­—é¢é‡å¯¹è±¡ æ–¹æ³•åŒºï¼ˆTextï¼‰ â€” ç¨‹åºä»£ç ã€ç±»å®šä¹‰ã€æ–¹æ³•å®ç° 6.+load çˆ¶ç±»ã€å­ç±»è°ƒç”¨é¡ºåºï¼Ÿåˆ†ç±»çš„ +load ä¼šè°ƒç”¨å—ï¼Ÿé¡¹ç›®é‡Œæœ‰ç”¨åˆ° +load å—ï¼Ÿinitialize +load çˆ¶ç±»å…ˆäºå­ç±»ï¼Œç±»å…ˆäºåˆ†ç±»ã€‚ +load è°ƒç”¨é¡ºåº 1.å…ˆè°ƒç”¨ç±»çš„ +load æŒ‰ç…§ç¼–è¯‘å…ˆåé¡ºåºè°ƒç”¨ï¼ˆå…ˆç¼–è¯‘ï¼Œå…ˆè°ƒç”¨ï¼‰ è°ƒç”¨å­ç±»çš„ +load ä¹‹å‰ä¼šå…ˆè°ƒç”¨çˆ¶ç±»çš„ +load 2.å†è°ƒç”¨åˆ†ç±»çš„ +load æŒ‰ç…§ç¼–è¯‘å…ˆåé¡ºåºè°ƒç”¨ï¼ˆå…ˆç¼–è¯‘ï¼Œå…ˆè°ƒç”¨ï¼‰ +initializeæ–¹æ³•ä¼šåœ¨ç±»ç¬¬ä¸€æ¬¡æ¥æ”¶åˆ°æ¶ˆæ¯æ—¶è°ƒç”¨ã€‚+initialize è°ƒç”¨é¡ºåºï¼š å…ˆè°ƒç”¨çˆ¶ç±»çš„+initializeï¼Œå†è°ƒç”¨å­ç±»çš„+initialize (å…ˆåˆå§‹åŒ–çˆ¶ç±»ï¼Œå†åˆå§‹åŒ–å­ç±»ï¼Œæ¯ä¸ªç±»åªä¼šåˆå§‹åŒ–1æ¬¡) 7.Category å®ç°äº†æœ¬ç±»çš„åŒåæ–¹æ³•ï¼Œæœ‰æ²¡æœ‰åŠæ³•æ¥è°ƒç”¨æœ¬ç±»çš„æ–¹æ³•ï¼Ÿ åœ¨Categoryçš„+loadæ–¹æ³•ä¸­æŠŠåŸç±»çš„å®ç°ä¿å­˜èµ·æ¥ï¼Œåœ¨éœ€è¦ä½¿ç”¨æ—¶ç›´æ¥è°ƒç”¨ã€‚ 12345678910111213141516171819202122#import &lt;objc/runtime.h&gt;@implementation MyClass (Category)static IMP originalIMP = nil;+ (void)load { Method method = class_getInstanceMethod([self class], @selector(testMethod)); originalIMP = method_getImplementation(method);}- (void)testMethod { NSLog(@\"Category æ–¹æ³•\"); if (originalIMP) { // è°ƒç”¨åŸæ–¹æ³• typedef void (*Func)(id, SEL); ((Func)originalIMP)(self, @selector(testMethod)); }}@end 8.å•é“¾è¡¨æ˜¯å¦æœ‰ç¯ 123456789101112131415function hasCycle( head ) { if (head == null) { return false; } let slow = head; let fast = head; while (fast.next &amp;&amp; fast.next.next) { slow = slow.next; fast = fast.next.next; if (slow == fast) { return true; } } return false;} 9.ä¸¤ä¸ªé“¾è¡¨æ˜¯å¦ç›¸äº¤ï¼ˆæ€ä¹ˆåˆ¤æ–­æ˜¯å¦ç›¸äº¤ï¼Ÿæ€ä¹ˆæ‰¾äº¤ç‚¹ï¼‰ 1234567891011121314151617function FindFirstCommonNode(pHead1, pHead2){ let mySet = new Set(); let p1 = pHead1; while (p1) { mySet.add(p1); p1 = p1.next; } let p2 = pHead2; while (p2) { if (mySet.has(p2)) { return p2; } p2 = p2.next; } return null;} 10.ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿ç›¸åŒå­ä¸²çš„é•¿åº¦ é¢˜ç›®é“¾æ¥ï¼šNC127 æœ€é•¿å…¬å…±å­ä¸² 123456789101112131415function LCS( str1 , str2 ) { if (str1.length &gt; str2.length) { [str1, str2] = [str2, str1]; } let res = \"\"; let len = 0; for (let i = 0; i &lt; str1.length; i++) { let temp = str1.slice(i-len,i+1); if (str2.indexOf(temp) !== -1) { res = temp; len++; } } return res;} äºŒé¢ï¼š 1.è¾ƒéš¾å®šä½çš„ Crash æ€ä¹ˆå®šä½ï¼Ÿæ€ä¹ˆåˆ¤æ–­æ˜¯ OOM å¯¼è‡´çš„ Crash è¿˜æ˜¯å…¶ä»–å¯¼è‡´çš„ Crachï¼Ÿ 2.Jenkins+Fastlane å®ç° CIï¼Œè‡ªåŠ¨åŒ–çš„æµç¨‹é™¤äº†æ‰“åŒ…è¿˜èƒ½åšä»€ä¹ˆï¼Ÿ 3.Flutter å’ŒåŸç”Ÿå¼€å‘ä½ è§‰å¾—æœ‰ä»€ä¹ˆå·®å¼‚ 4.HTTPDNSï¼Œä½¿ç”¨å’Œä¸ä½¿ç”¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ ä¼ ç»ŸDNS: åŸŸå -&gt; DNS æœåŠ¡å™¨ -&gt; è¿”å›IP HTTPDNS: åŸŸå -&gt; HTTPè¯·æ±‚ -&gt; HTTPDNSæœåŠ¡ -&gt; è¿”å›IP ç§»åŠ¨ç«¯ç›´æ¥é€šè¿‡ HTTPS è¯·æ±‚è¿è¥å•†æˆ–ç¬¬ä¸‰æ–¹æä¾›çš„ HTTPDNS æœåŠ¡è·å–çœŸå® IPã€‚ é¿å…ä¾èµ–ç³»ç»Ÿ DNSï¼Œæœ‰åŠ©äºè§£å†³ DNS æ±¡æŸ“ã€ç¼“å­˜ä¸å‡†ç¡®ã€è§£ææ…¢çš„é—®é¢˜ã€‚ å¯¹æ¯”ç»´åº¦ ä½¿ç”¨ä¼ ç»Ÿ DNS ä½¿ç”¨ HTTPDNS è§£æè·¯å¾„ ç³»ç»Ÿæˆ–è¿è¥å•† DNS è§£æ é€šè¿‡ HTTP è¯·æ±‚ HTTPDNS æœåŠ¡è§£æ å®‰å…¨æ€§ æ˜“å— DNS æ±¡æŸ“ã€åŠ«æŒ é¿å…æ±¡æŸ“ã€åŠ«æŒï¼Œè¿”å›çœŸå® IP ç¨³å®šæ€§ è§£æå¯èƒ½å¤±è´¥æˆ–è¿”å›é”™è¯¯ IP é«˜å¯ç”¨ã€å‡†ç¡® è§£æé€Ÿåº¦ ä¾èµ–è¿è¥å•† DNSï¼Œå¯èƒ½æ…¢ é€šè¿‡ CDN/é«˜é€Ÿ HTTP æœåŠ¡ï¼Œå»¶è¿Ÿä½ ç§»åŠ¨ç½‘ç»œä½“éªŒ ä¸åŒè¿è¥å•†å¯èƒ½è§£æä¸åŒ IP å¯æ ¹æ®å®¢æˆ·ç«¯åœ°åŸŸã€è¿è¥å•†ç²¾å‡†è¿”å›æœ€ä¼˜ IP é¢å¤–å·¥ä½œ æ— éœ€é¢å¤–ä»£ç  éœ€è¦åœ¨è¯·æ±‚å±‚æˆ– SDK é›†æˆ HTTPDNSï¼Œå¹¶å¯èƒ½å®ç° IP â†’ Host å›å¡«ï¼ˆHost å¤´ï¼‰ ï¼ˆ1ï¼‰é˜²æ­¢DNSæ±¡æŸ“æˆ–åŠ«æŒï¼ˆ2ï¼‰æå‡è®¿é—®é€Ÿåº¦ 5.é€šçŸ¥æ˜¯åŒæ­¥çš„è¿˜æ˜¯å¼‚æ­¥çš„ï¼Œå¼‚æ­¥çš„é€šçŸ¥ä»€ä¹ˆæ—¶å€™ä¼šå‘å‡ºå»ï¼Œé€šçŸ¥çš„åŸç†ï¼Œé€šçŸ¥å¦‚ä½•å­˜å‚¨ï¼Œå¤šæ¬¡æ·»åŠ é€šçŸ¥ï¼Œå¤šæ¬¡ç§»é™¤é€šçŸ¥ä¼šæœ‰é—®é¢˜å—ï¼Ÿ é€šçŸ¥æ˜¯åŒæ­¥çš„ æ‰€æœ‰æ³¨å†Œäº†è¿™ä¸ªé€šçŸ¥çš„è§‚å¯Ÿè€…æ–¹æ³•ä¼šç«‹å³è¢«è°ƒç”¨ï¼Œè°ƒç”¨é¡ºåºæ˜¯æŒ‰æ·»åŠ è§‚å¯Ÿè€…çš„é¡ºåºæ‰§è¡Œçš„ã€‚ å½“å‰çº¿ç¨‹ä¼šé˜»å¡ï¼Œç›´åˆ°æ‰€æœ‰è§‚å¯Ÿè€…å®Œæˆå¤„ç†ã€‚ æ³¨æ„ï¼šå¦‚æœä½ åœ¨é€šçŸ¥å¤„ç†æ–¹æ³•ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œï¼Œä¼šé˜»å¡å‘é€é€šçŸ¥çš„çº¿ç¨‹ã€‚ é€šçŸ¥çš„åŸç†ï¼š iOS çš„é€šçŸ¥ä¸­å¿ƒ (NSNotificationCenter) æ˜¯ä¸€ä¸ª è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰çš„å®ç°ã€‚ å†…éƒ¨æœºåˆ¶ï¼š NSNotificationCenter ç»´æŠ¤ä¸€ä¸ª å­—å…¸ï¼Œkey æ˜¯é€šçŸ¥å (NSNotificationName) æˆ–è€…å¯¹è±¡ (object)ï¼Œvalue æ˜¯è§‚å¯Ÿè€…åˆ—è¡¨ã€‚ æ¯ä¸ªè§‚å¯Ÿè€…å­˜å‚¨äº†ï¼š è§‚å¯Ÿè€…å¯¹è±¡ï¼ˆweak å¼•ç”¨ï¼Œé¿å…å¾ªç¯å¼•ç”¨ï¼‰ é€‰æ‹©å™¨ (selector) å¯¹åº”é€šçŸ¥åå’Œå¯¹è±¡è¿‡æ»¤æ¡ä»¶ å½“å‘é€é€šçŸ¥æ—¶ï¼Œä¸­å¿ƒéå†æ³¨å†Œè¡¨ï¼Œæ‰¾åˆ°æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„è§‚å¯Ÿè€…å¹¶è°ƒç”¨å…¶æ–¹æ³•ã€‚ å¤šæ¬¡æ·»åŠ ï¼Œå‘ä¸€æ¬¡é€šçŸ¥ï¼Œä¼šè°ƒç”¨æ–¹æ³•ä¸¤æ¬¡ã€‚å¤šæ¬¡ç§»é™¤åŒä¸€ä¸ªé€šçŸ¥æ²¡å…³ç³»ã€‚ç»„åˆé—®é¢˜ï¼Œæ·»åŠ å‡ æ¬¡å°±éœ€è¦ç§»é™¤å‡ æ¬¡ï¼Œå¦åˆ™è¿˜ä¼šæ”¶åˆ°é€šçŸ¥ã€‚ å‚è€ƒé“¾æ¥ï¼šiOS-é€šçŸ¥ä¸­å¿ƒåŸç† 6.å±å¹•æ˜¾ç¤ºçš„æµç¨‹ï¼ŒCPU/GPUï¼Œç¦»å±æ¸²æŸ“æ˜¯ä»€ä¹ˆï¼Ÿå…‰æ …åŒ–çš„è¿‡ç¨‹ 7.å®‰è£…åŒ…å¤§å°ä¼˜åŒ–åšäº†å“ªäº›ï¼Ÿæ®µè¿ç§»äº†è§£å—ï¼Ÿ 8.App å¯åŠ¨ç³»ç»Ÿåšäº†å“ªäº›äº‹æƒ…ï¼Œæ€ä¹ˆä¼˜åŒ–å¯åŠ¨é€Ÿåº¦ 9.tableView æ»‘åŠ¨æµç•…æ€§ä¼˜åŒ– 10.ä»ç‚¹å‡»å±å¹•åˆ°å“åº”äº‹ä»¶çš„æµç¨‹ 11.UIView å’Œ CALayer çš„å…³ç³»ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡ 12.autoreleasePool çš„åŸç†ï¼Œè®¾è®¡æˆåŒå‘é“¾è¡¨æœ‰ä»€ä¹ˆå¥½å¤„ 13.æœ€æœ‰æˆå°±æ„Ÿçš„é¡¹ç›®ï¼Œç»„ä»¶åŒ–çš„å¥½å¤„ 14.å¦‚æœ Code Reviewï¼Œä½ ä¼šå…³æ³¨å“ªäº›ä¸œè¥¿ï¼Ÿ 15.ç›¸å¯¹å…¶ä»–å›¢é˜Ÿæˆå‘˜çš„ä¼˜åŠ¿ 16.åˆ†äº«ä¼šæ€ä¹ˆåšï¼Œå¦‚æœå¬ä¼—æœ‰ PM/æµ‹è¯•ï¼Œä¼šæ€ä¹ˆåˆ†äº« 17.å›¢é˜Ÿé‡Œæœ‰æˆå‘˜ä¸æ˜¯ç‰¹åˆ«ä¼˜ç§€ï¼Œæ€ä¹ˆæŠŠæ§è¿›åº¦ 18.äº†è§£ç™¾åº¦çš„æŠ€æœ¯èŒçº§å—ï¼Ÿä½ è§‰å¾—è‡ªå·±æ˜¯Tå‡ ï¼Ÿ","link":"/ç™¾åº¦çŸ¥é“é¢è¯•é¢˜/"},{"title":"ç™¾å·æ™ºèƒ½","text":"ç™¾å·æ™ºèƒ½ ä¸€é¢ï¼š 1.SDKä½“ç§¯ä¼˜åŒ– 2.webViewç™½å± 3.çº¿ä¸Šé—ªé€€å¤„ç†æµç¨‹ 4.Runtimeã€Runloopåº”ç”¨ï¼Œç»“åˆé¡¹ç›®ï¼›ä¸ºä»€ä¹ˆå¼€å¯runloop 5.MVC MVVM é¡¹ç›®é‡Œå…·ä½“çš„ç”¨æ³• ç®—æ³•ï¼š 1.å•é“¾è¡¨ä¸­æ˜¯å¦å­˜åœ¨ç¯ï¼Ÿå¦‚æœå­˜åœ¨ï¼Œè¿”å›ç¯çš„èµ·å§‹èŠ‚ç‚¹ã€‚è§£é‡Šå¿«æ…¢æŒ‡é’ˆåŸç†ã€‚ 2.ä¸€ç™¾ç›ç¯æ’æˆä¸€è¡Œ,ä»å·¦åˆ°å³ç¼–å·1-100,æ¯ç›ç¯éƒ½æœ‰ä¸€æ ¹å¼€å…³,ä¸€å¼€å§‹å…¨æ˜¯ç­çš„,å¦å¤–æœ‰100å°å­©,ç¬¬ä¸€ä¸ªæŠŠ1çš„å€æ•°çš„å¼€å…³æ‹‰ä¸€ä¸‹,ç¬¬äºŒä¸ªæŠŠå‡¡æ˜¯2çš„å€æ•°å¼€å…³æ‹‰ä¸€ä¸‹,è¿™æ ·ä¸‹å»åˆ°æœ€åä¸€ç›ç¯,æœ‰å“ªäº›æ˜¯äº®çš„ï¼Ÿï¼ˆå£è¿°æ€è·¯ï¼‰ äºŒé¢ï¼š 1.å†™ä¸€ä¸ªå·¥å…·æ–¹æ³•ï¼šç”¨ OC æˆ– Swift å®ç°ï¼ŒæŸ¥æ‰¾æ•°ç»„çš„ç¬¬ k ä¸ªå¤§çš„å…ƒç´  è¦æ±‚èƒ½åœ¨é¡¹ç›®é‡Œå®é™…ä½¿ç”¨ï¼Œå¯ä»¥ç”¨ä¸‰æ–¹åº“ã€‚æ³¨æ„è¾¹ç•Œæ¡ä»¶ã€‚ 2.å¡ç‰‡åŠ¨æ€åŒ–ï¼Œæ€ä¹ˆé¿å…å› ä¸ºå¡ç‰‡æ ·å¼ç­‰æ¥éœ€æ±‚ 3.IMåˆ—è¡¨æ•°æ®è¿‡å¤§çš„é—®é¢˜ 4.åˆ é™¤æ¶ˆæ¯æ€ä¹ˆä¿è¯å¤šç«¯ä¸€è‡´æ€§ 5.æ€ä¹ˆè§£å†³ViewModelè¿‡å¤§çš„é—®é¢˜ï¼ŒMVVMå’ŒMVCçš„æ ¸å¿ƒåŒºåˆ«æ˜¯åŒå‘ç»‘å®šå—ï¼Ÿ 6.ä¸ºä»€ä¹ˆé€‰æ‹©SSE 7.ç¦»çº¿åŒ… 8.webView cookie ä¸¢å¤±é—®é¢˜ 9.RNé•¿åˆ—è¡¨æ€§èƒ½é—®é¢˜ å‚è€ƒç­”æ¡ˆ(GPT) 1.SDKä½“ç§¯ä¼˜åŒ– 2.webViewç™½å± 3.çº¿ä¸Šé—ªé€€å¤„ç†æµç¨‹ 4.Runtimeã€Runloopåº”ç”¨ï¼Œç»“åˆé¡¹ç›® ç®—æ³•ï¼š 1.å•é“¾è¡¨ä¸­æ˜¯å¦å­˜åœ¨ç¯ï¼Ÿå¦‚æœå­˜åœ¨ï¼Œè¿”å›ç¯çš„èµ·å§‹èŠ‚ç‚¹ã€‚è§£é‡Šå¿«æ…¢æŒ‡é’ˆåŸç†ã€‚ 2.ä¸€ç™¾ç›ç¯æ’æˆä¸€è¡Œ,ä»å·¦åˆ°å³ç¼–å·1-100,æ¯ç›ç¯éƒ½æœ‰ä¸€æ ¹å¼€å…³,ä¸€å¼€å§‹å…¨æ˜¯ç­çš„,å¦å¤–æœ‰100å°å­©,ç¬¬ä¸€ä¸ªæŠŠ1çš„å€æ•°çš„å¼€å…³æ‹‰ä¸€ä¸‹,ç¬¬äºŒä¸ªæŠŠå‡¡æ˜¯2çš„å€æ•°å¼€å…³æ‹‰ä¸€ä¸‹,è¿™æ ·ä¸‹å»åˆ°æœ€åä¸€ç›ç¯,æœ‰å“ªäº›æ˜¯äº®çš„ï¼Ÿï¼ˆå£è¿°æ€è·¯ï¼‰ è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡åˆ†æå¼€å…³æ“ä½œçš„è§„å¾‹æ¥è§£å†³ã€‚æˆ‘ä»¬æ¥è¯¦ç»†æ¢è®¨ä¸€ä¸‹æ¯ç›ç¯çš„çŠ¶æ€ã€‚ é—®é¢˜åˆ†æ ä¸€å¼€å§‹ï¼Œæ¯ç›ç¯éƒ½æ˜¯ç­çš„ã€‚ æ¯ä¸ªå°å­©æ“ä½œçš„æ˜¯ä¸ä»–ä»¬ç¼–å·ç›¸åŒçš„å€æ•°çš„å¼€å…³ã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªå°å­©æ“ä½œçš„æ˜¯1ã€2ã€3ã€4ã€â€¦ã€100å·å¼€å…³ï¼›ç¬¬äºŒä¸ªå°å­©æ“ä½œçš„æ˜¯2ã€4ã€6ã€8ã€â€¦ã€100å·å¼€å…³ï¼Œä¾æ­¤ç±»æ¨ã€‚ è§‚å¯Ÿç¯çš„çŠ¶æ€æ¯ç›ç¯çš„çŠ¶æ€å–å†³äºè¢«å¤šå°‘ä¸ªå°å­©æ“ä½œã€‚ä¸€ä¸ªç¯çš„çŠ¶æ€ä¼šåœ¨æ“ä½œæ¬¡æ•°ï¼ˆå¼€å…³æ¬¡æ•°ï¼‰ä¸ºå¥‡æ•°æ—¶å˜ä¸ºäº®ï¼Œä¸ºå¶æ•°æ—¶ä¿æŒç­ã€‚ æˆ‘ä»¬å¯ä»¥å‘ç°ï¼š å¦‚æœç¯çš„ç¼–å·æ˜¯ ( n )ï¼Œé‚£ä¹ˆå®ƒä¼šè¢«æ‰€æœ‰ ( n ) çš„å› å­çš„å°å­©æ“ä½œã€‚æ¯”å¦‚ï¼Œç¯ç¼–å·ä¸º12çš„ç¯ä¼šè¢«1ã€2ã€3ã€4ã€6ã€12å·å°å­©æ“ä½œã€‚ å› æ­¤ï¼Œæ¯ç›ç¯çš„çŠ¶æ€ç”±å®ƒçš„å› å­æ•°é‡å†³å®šã€‚å¦‚æœå› å­æ•°é‡æ˜¯å¥‡æ•°ï¼Œåˆ™ç¯æ˜¯äº®çš„ã€‚å¦‚æœå› å­æ•°é‡æ˜¯å¶æ•°ï¼Œåˆ™ç¯æ˜¯ç­çš„ã€‚ å› å­æ•°é‡çš„åˆ†ææ¯ä¸ªæ­£æ•´æ•° ( n ) çš„å› å­æ•°é‡é€šå¸¸æ˜¯å¶æ•°ï¼Œå› ä¸ºå› å­é€šå¸¸æˆå¯¹å‡ºç°ï¼ˆæ¯”å¦‚ ( 1 ) å’Œ ( n ), ( 2 ) å’Œ ( n/2 ) ç­‰ï¼‰ã€‚ç„¶è€Œï¼Œå®Œå…¨å¹³æ–¹æ•°ï¼ˆå¦‚1, 4, 9, 16, â€¦ï¼‰çš„å› å­æ•°é‡æ˜¯å¥‡æ•°ï¼Œå› ä¸ºä¸€ä¸ªå› å­å¯¹ï¼ˆå¦‚ ( \\sqrt{n} )ï¼‰ä¼šè¢«é‡å¤è®¡ç®—ä¸€æ¬¡ã€‚ ç»“è®º åªæœ‰å®Œå…¨å¹³æ–¹æ•°çš„å› å­æ•°é‡æ˜¯å¥‡æ•°ï¼Œå› æ­¤åªæœ‰é‚£äº›ç¯ç¼–å·æ˜¯å®Œå…¨å¹³æ–¹æ•°çš„ç¯ä¼šåœ¨æœ€åäº®ç€ã€‚ åˆ—å‡ºå®Œå…¨å¹³æ–¹æ•° ( 1^2 = 1 ) ( 2^2 = 4 ) ( 3^2 = 9 ) ( 4^2 = 16 ) ( 5^2 = 25 ) ( 6^2 = 36 ) ( 7^2 = 49 ) ( 8^2 = 64 ) ( 9^2 = 81 ) ( 10^2 = 100 ) æ‰€ä»¥ï¼Œæœ€åäº®ç€çš„ç¯çš„ç¼–å·æ˜¯ï¼š1, 4, 9, 16, 25, 36, 49, 64, 81, 100ã€‚ äºŒé¢ï¼š 1.å†™ä¸€ä¸ªå·¥å…·æ–¹æ³•ï¼šç”¨ OC æˆ– Swift å®ç°ï¼ŒæŸ¥æ‰¾æ•°ç»„çš„ç¬¬ k ä¸ªå¤§çš„å…ƒç´  è¦æ±‚èƒ½åœ¨é¡¹ç›®é‡Œå®é™…ä½¿ç”¨ï¼Œå¯ä»¥ç”¨ä¸‰æ–¹åº“ã€‚æ³¨æ„è¾¹ç•Œæ¡ä»¶ã€‚ 2.å¡ç‰‡åŠ¨æ€åŒ–ï¼Œæ€ä¹ˆé¿å…å› ä¸ºå¡ç‰‡æ ·å¼ç­‰æ¥éœ€æ±‚ 3.IMåˆ—è¡¨æ•°æ®è¿‡å¤§çš„é—®é¢˜ 4.åˆ é™¤æ¶ˆæ¯æ€ä¹ˆä¿è¯å¤šç«¯ä¸€è‡´æ€§ 5.æ€ä¹ˆè§£å†³ViewModelè¿‡å¤§çš„é—®é¢˜ï¼ŒMVVMå’ŒMVCçš„æ ¸å¿ƒåŒºåˆ«æ˜¯åŒå‘ç»‘å®šå—ï¼Ÿ 6.ä¸ºä»€ä¹ˆé€‰æ‹©SSE ç›¸è¾ƒäºå…¶ä»–æµå¼æ•°æ®ä¼ è¾“æ–¹å¼ï¼ŒSSE çš„ä¼˜ç‚¹åŒ…æ‹¬ï¼š ç®€å•å®ç°ï¼šSSE ä½¿ç”¨æ ‡å‡†çš„ HTTP åè®®ï¼Œæ˜“äºå®ç°å’Œè°ƒè¯•ï¼Œå°¤å…¶æ˜¯å¯¹äºåŸºæœ¬çš„å®æ—¶æ¨é€éœ€æ±‚ã€‚ è‡ªåŠ¨é‡è¿ï¼šSSE æ”¯æŒè‡ªåŠ¨é‡è¿æœºåˆ¶ï¼Œè¿æ¥ä¸¢å¤±åä¼šè‡ªåŠ¨å°è¯•é‡æ–°å»ºç«‹è¿æ¥ï¼Œç¡®ä¿æ•°æ®ä¼ è¾“çš„å¯é æ€§ã€‚ å•å‘é€šä¿¡ï¼šé€‚ç”¨äºåªéœ€è¦ä»æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„å•å‘æ•°æ®æµçš„åœºæ™¯ï¼Œä¾‹å¦‚æ–°é—»æ¨é€æˆ–å®æ—¶æ›´æ–°ã€‚ è½»é‡çº§ï¼šSSE ä¸éœ€è¦é¢å¤–çš„æ¡æ‰‹æˆ–å¤æ‚çš„åè®®æ ˆï¼Œç›¸æ¯” WebSocketï¼ŒSSE çš„å®ç°å’Œç»´æŠ¤æˆæœ¬è¾ƒä½ã€‚ æ–‡æœ¬æ•°æ®ï¼šSSE ä»¥ UTF-8 ç¼–ç çš„æ–‡æœ¬æ ¼å¼ä¼ è¾“æ•°æ®ï¼Œè§£æèµ·æ¥è¾ƒä¸ºç®€å•ã€‚ è¿™äº›ä¼˜ç‚¹ä½¿ SSE åœ¨éœ€è¦ç®€å•ã€å¯é çš„å®æ—¶æ•°æ®æ¨é€æ—¶æˆä¸ºä¸€ä¸ªåˆé€‚çš„é€‰æ‹©ã€‚ æµå¼æ•°æ®å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼è¿›è¡Œä¼ è¾“ï¼Œå…·ä½“é€‰æ‹©å–å†³äºåº”ç”¨åœºæ™¯ã€æ€§èƒ½éœ€æ±‚å’ŒæŠ€æœ¯æ ˆã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„æµå¼æ•°æ®ä¼ è¾“æ–¹æ³•ï¼š 1. WebSocket æè¿°ï¼šWebSocket æ˜¯ä¸€ç§åœ¨å•ä¸ª TCP è¿æ¥ä¸Šè¿›è¡Œå…¨åŒå·¥é€šä¿¡çš„åè®®ã€‚ä¸ HTTP ä¸åŒï¼Œå®ƒå…è®¸åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡ŒåŒå‘å®æ—¶æ•°æ®äº¤æ¢ã€‚ é€‚ç”¨åœºæ™¯ï¼šéœ€è¦åŒå‘å®æ—¶é€šä¿¡çš„åº”ç”¨ï¼Œä¾‹å¦‚åœ¨çº¿æ¸¸æˆã€å®æ—¶èŠå¤©ã€åä½œå·¥å…·ã€‚ ä¼˜ç‚¹ï¼šä½å»¶è¿Ÿã€åŒå‘é€šä¿¡ã€æŒä¹…è¿æ¥ã€‚ 2. Server-Sent Events (SSE) æè¿°ï¼šSSE å…è®¸æœåŠ¡å™¨é€šè¿‡å•å‘çš„æŒä¹…è¿æ¥å‘å®¢æˆ·ç«¯æ¨é€å®æ—¶äº‹ä»¶ã€‚å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ EventSource API æ¥æ”¶è¿™äº›äº‹ä»¶ã€‚ é€‚ç”¨åœºæ™¯ï¼šéœ€è¦ä»æœåŠ¡å™¨å‘å®¢æˆ·ç«¯æ¨é€å®æ—¶æ•°æ®çš„åº”ç”¨ï¼Œä¾‹å¦‚å®æ—¶æ›´æ–°çš„æ–°é—»æ¨é€ã€ç›‘æ§ç³»ç»Ÿã€‚ ä¼˜ç‚¹ï¼šç®€å•æ˜“ç”¨ã€è‡ªåŠ¨é‡è¿ã€æ”¯æŒæ–‡æœ¬æ•°æ®ã€‚ 3. HTTP/2 æè¿°ï¼šHTTP/2 æ˜¯ HTTP åè®®çš„å‡çº§ç‰ˆï¼Œæ”¯æŒå¤šè·¯å¤ç”¨ï¼ˆmultiplexingï¼‰ï¼Œå…è®¸åœ¨å•ä¸ª TCP è¿æ¥ä¸Šå¹¶å‘ä¼ è¾“å¤šä¸ªè¯·æ±‚å’Œå“åº”ã€‚ é€‚ç”¨åœºæ™¯ï¼šéœ€è¦é«˜æ•ˆå’Œå¿«é€ŸåŠ è½½çš„ç½‘é¡µåº”ç”¨ã€å®æ—¶æ›´æ–°çš„å†…å®¹ã€‚ ä¼˜ç‚¹ï¼šå‡å°‘å»¶è¿Ÿã€æé«˜ä¼ è¾“æ•ˆç‡ã€æ”¯æŒæµå¼æ•°æ®ä¼ è¾“ã€‚ 4. gRPC æè¿°ï¼šgRPC æ˜¯ Google å¼€å‘çš„å¼€æºé«˜æ€§èƒ½ RPC æ¡†æ¶ï¼Œæ”¯æŒåŒå‘æµå¼é€šä¿¡ã€‚åŸºäº HTTP/2ï¼Œæä¾›äº†é«˜æ•ˆçš„é€šä¿¡æœºåˆ¶ã€‚ é€‚ç”¨åœºæ™¯ï¼šå¾®æœåŠ¡æ¶æ„ã€éœ€è¦é«˜æ•ˆä¼ è¾“å’Œå¤„ç†å¤§è§„æ¨¡æ•°æ®çš„ç³»ç»Ÿã€‚ ä¼˜ç‚¹ï¼šå¼ºç±»å‹ã€å®‰å…¨ã€é«˜æ€§èƒ½ã€æ”¯æŒåŒå‘æµã€‚ 5. MQTT (Message Queuing Telemetry Transport) æè¿°ï¼šMQTT æ˜¯ä¸€ç§è½»é‡çº§çš„æ¶ˆæ¯ä¼ è¾“åè®®ï¼Œè®¾è®¡ç”¨äºä½å¸¦å®½ã€ä¸ç¨³å®šçš„ç½‘ç»œç¯å¢ƒã€‚æ”¯æŒå‘å¸ƒ/è®¢é˜…æ¨¡å‹ã€‚ é€‚ç”¨åœºæ™¯ï¼šç‰©è”ç½‘ï¼ˆIoTï¼‰è®¾å¤‡é€šä¿¡ã€ä½å¸¦å®½ç½‘ç»œä¸­çš„æ¶ˆæ¯ä¼ è¾“ã€‚ ä¼˜ç‚¹ï¼šè½»é‡ã€å¯é ã€é€‚åˆä½å¸¦å®½å’Œé«˜å»¶è¿Ÿçš„ç¯å¢ƒã€‚ 6. Apache Kafka æè¿°ï¼šApache Kafka æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æµåª’ä½“å¹³å°ï¼Œç”¨äºæ„å»ºå®æ—¶æ•°æ®æµåº”ç”¨å’Œæ•°æ®ç®¡é“ã€‚æ”¯æŒé«˜ååé‡çš„æ•°æ®ä¼ è¾“ã€‚ é€‚ç”¨åœºæ™¯ï¼šéœ€è¦å¤„ç†å¤§é‡å®æ—¶æ•°æ®çš„åº”ç”¨ã€æ•°æ®ç®¡é“ã€æ—¥å¿—èšåˆã€‚ ä¼˜ç‚¹ï¼šé«˜ååé‡ã€å¯æ‰©å±•ã€æŒä¹…æ€§ã€é«˜å¯é æ€§ã€‚ 7. Redis Streams æè¿°ï¼šRedis Streams æ˜¯ Redis çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºå¤„ç†æµæ•°æ®ã€‚æ”¯æŒæŒä¹…åŒ–ã€é«˜æ•ˆçš„æµæ•°æ®å­˜å‚¨å’Œå¤„ç†ã€‚ é€‚ç”¨åœºæ™¯ï¼šéœ€è¦é«˜æ•ˆå¤„ç†æµæ•°æ®çš„åº”ç”¨ï¼Œä¾‹å¦‚å®æ—¶æ•°æ®åˆ†æã€æ—¥å¿—å¤„ç†ã€‚ ä¼˜ç‚¹ï¼šé«˜æ€§èƒ½ã€ç®€å•æ˜“ç”¨ã€æ”¯æŒæŒä¹…åŒ–å’Œæ•°æ®æ¢å¤ã€‚ 8. WebRTC æè¿°ï¼šWebRTC æ˜¯ä¸€ç§æ”¯æŒæµè§ˆå™¨ä¹‹é—´ç›´æ¥è¿›è¡Œå®æ—¶é€šä¿¡çš„æŠ€æœ¯ï¼Œæ”¯æŒè§†é¢‘ã€éŸ³é¢‘å’Œæ•°æ®æµã€‚ é€‚ç”¨åœºæ™¯ï¼šè§†é¢‘ä¼šè®®ã€å®æ—¶æ•°æ®ä¼ è¾“ã€ç‚¹å¯¹ç‚¹é€šä¿¡ã€‚ ä¼˜ç‚¹ï¼šä½å»¶è¿Ÿã€ç‚¹å¯¹ç‚¹é€šä¿¡ã€æ”¯æŒå¤šç§æ•°æ®ç±»å‹ã€‚ 9. Chunked Transfer Encoding æè¿°ï¼šè¿™æ˜¯ HTTP/1.1 ä¸­çš„ä¸€ç§ä¼ è¾“ç¼–ç æ–¹å¼ï¼Œå…è®¸æœåŠ¡å™¨åˆ†å—ä¼ è¾“æ•°æ®ï¼Œå®¢æˆ·ç«¯å¯ä»¥åœ¨æ¥æ”¶æ•°æ®æ—¶å¼€å§‹å¤„ç†ã€‚ é€‚ç”¨åœºæ™¯ï¼šéœ€è¦é€æ­¥ä¼ è¾“å¤§æ•°æ®çš„åœºæ™¯ã€‚ ä¼˜ç‚¹ï¼šæ”¯æŒåŠ¨æ€ç”Ÿæˆå’Œä¼ è¾“æ•°æ®ï¼Œå‡å°‘äº†å»¶è¿Ÿã€‚ 10. Data Streams (File Streams) æè¿°ï¼šé€šè¿‡æ–‡ä»¶æµä¼ è¾“æ•°æ®ï¼Œé€šå¸¸ç”¨äºå¤§æ–‡ä»¶çš„é€æ­¥ä¼ è¾“å’Œå¤„ç†ã€‚ é€‚ç”¨åœºæ™¯ï¼šå¤§æ–‡ä»¶ä¼ è¾“ã€æµå¼å¤„ç†æ•°æ®ã€‚ ä¼˜ç‚¹ï¼šæ”¯æŒå¤§æ•°æ®æ–‡ä»¶çš„é€æ­¥ä¼ è¾“ã€å¤„ç†ã€‚ é€‰æ‹©åˆé€‚çš„æµå¼æ•°æ®ä¼ è¾“æ–¹å¼éœ€è¦è€ƒè™‘å…·ä½“çš„åº”ç”¨éœ€æ±‚ã€æ•°æ®é‡ã€å®æ—¶æ€§è¦æ±‚ã€ç½‘ç»œæ¡ä»¶ç­‰å› ç´ ã€‚æ¯ç§æŠ€æœ¯éƒ½æœ‰å…¶ç‰¹å®šçš„ä¼˜ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚ 7.ç¦»çº¿åŒ… 8.webView cookie ä¸¢å¤±é—®é¢˜ iOS WebView ä¸­çš„ Cookie ä¸¢å¤±é€šå¸¸å¯ä»¥ç”±ä»¥ä¸‹å‡ ä¸ªåŸå› å¼•èµ·ï¼š App é‡æ–°å¯åŠ¨ï¼šWebView çš„ Cookie å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå½“åº”ç”¨è¢«ç»ˆæ­¢æˆ–é‡å¯æ—¶ï¼Œè¿™äº› Cookie å¯èƒ½ä¼šä¸¢å¤±ã€‚ Cookies è®¾ç½®ï¼šiOS çš„ WebView å¯èƒ½ä¼šå—åˆ°åº”ç”¨çš„ Cookie è®¾ç½®æˆ–éšç§ç­–ç•¥çš„å½±å“ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨ WKWebView æ—¶ï¼Œå®ƒçš„ Cookie å­˜å‚¨å¯èƒ½ä¸ UIWebView ä¸åŒã€‚ å…±äº« Cookieï¼šWKWebView å’Œ UIWebView ä½¿ç”¨ä¸åŒçš„ Cookie å­˜å‚¨æœºåˆ¶ï¼Œå®ƒä»¬ä¹‹é—´çš„ Cookie å¯èƒ½æ— æ³•å…±äº«ã€‚ åŸŸåé—®é¢˜ï¼šç¡®ä¿è®¾ç½®å’Œè¯»å– Cookie çš„åŸŸåä¸€è‡´ï¼Œè·¨åŸŸè¯·æ±‚å¯èƒ½å¯¼è‡´ Cookie ä¸¢å¤±ã€‚ è§£å†³æ–¹æ¡ˆï¼š ä½¿ç”¨ WKWebView çš„ WKWebsiteDataStoreï¼š 123let webView = WKWebView(frame: .zero, configuration: WKWebViewConfiguration())let dataStore = WKWebsiteDataStore.default()webView.configuration.websiteDataStore = dataStore æŒä¹…åŒ– Cookieï¼š ä½ å¯ä»¥æ‰‹åŠ¨æŒä¹…åŒ–å’Œæ¢å¤ Cookieã€‚ä¾‹å¦‚ï¼Œé€šè¿‡ HTTPCookieStorage ä¿å­˜ Cookieï¼Œç„¶ååœ¨åº”ç”¨å¯åŠ¨æ—¶æ¢å¤ï¼š 12345678910// Save cookiesif let cookies = HTTPCookieStorage.shared.cookies { UserDefaults.standard.set(cookies.map { NSKeyedArchiver.archivedData(withRootObject: \\$0) }, forKey: \"savedCookies\")}// Load cookiesif let cookieData = UserDefaults.standard.array(forKey: \"savedCookies\") as? [Data] { let cookies = cookieData.compactMap { NSKeyedUnarchiver.unarchiveObject(with: \\$0) as? HTTPCookie } cookies.forEach { HTTPCookieStorage.shared.setCookie(\\$0) }} ç¡®ä¿ WebView é…ç½®æ­£ç¡®ï¼šç¡®ä¿ WebView ä½¿ç”¨çš„æ˜¯é€‚å½“çš„ WKWebViewConfigurationï¼Œå¹¶ä¸” Cookie è®¾ç½®æ²¡æœ‰è¢«éšç§è®¾ç½®æˆ–å…¶ä»–é…ç½®æ‰€å¹²æ‰°ã€‚ è¿™äº›æ–¹æ³•å¯ä»¥å¸®åŠ©ç®¡ç†å’Œè§£å†³ iOS WebView ä¸­çš„ Cookie ä¸¢å¤±é—®é¢˜ã€‚ https://www.jianshu.com/p/8636ccd3674b 9.RNé•¿åˆ—è¡¨æ€§èƒ½é—®é¢˜","link":"/ç™¾å·æ™ºèƒ½/"},{"title":"ç¾å›¢ä¼˜é€‰é¢è¯•é¢˜åŠç­”æ¡ˆ","text":"ç¾å›¢ä¼˜é€‰é¢è¯•é¢˜ æŠ€æœ¯æ ˆæ˜¯æ€ä¹ˆé€‰æ‹©çš„ï¼Ÿä¸ºä»€ä¹ˆé€‰æ‹©Flutterï¼Œæ²¡æœ‰é€‰æ‹©RN Flutter ä¸ React Native çš„å¯¹æ¯”åˆ†æ 1.é“¾è¡¨ç¯çš„å…¥å£ç»“ç‚¹ï¼ˆé™åˆ¶15åˆ†é’Ÿï¼‰ç®—æ³•1ï¼šéå†é“¾è¡¨ï¼Œä½¿ç”¨Setå»å­˜ä¸€ä¸‹ 1234567891011function detectCycle( head ) { const visited = new Set(); while (head != null) { if (visited.has(head)) { return head; } visited.add(head); head = head.next; } return null;} ç®—æ³•2ï¼šå¿«æ…¢æŒ‡é’ˆ 1234567891011121314151617function detectCycle( head ) { if (!head) return null; let slow = head, fast = head; while(fast.next &amp;&amp; fast.next.next) { fast = fast.next.next slow = slow.next if (slow == fast) { var a = head; while (slow != a) { a = a.next slow = slow.next } return a; } } return null;} 2.é¦–é¡µçš„è½®æ’­å›¾ï¼Œæ»‘åŠ¨ä¸»åŒºåŸŸ timerä¼šä¸ä¼šåœæ­¢ï¼ŸTimerä¼šåœæ­¢ã€‚å› ä¸ºæ»‘åŠ¨æ—¶Runloopçš„modeç”±åŸæ¥çš„DefaultModeåˆ‡æ¢åˆ°äº†UITrackingRunLoopModeã€‚åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ç§modeã€‚ è§£å†³æ–¹æ³•å…¶ä¸€æ˜¯å°†timeråŠ å…¥åˆ°NSRunloopCommonModesä¸­ã€‚å…¶äºŒæ˜¯å°†timeræ”¾åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œç„¶åå¼€å¯å¦ä¸€ä¸ªçº¿ç¨‹çš„runloopï¼Œè¿™æ ·å¯ä»¥ä¿è¯ä¸ä¸»çº¿ç¨‹äº’ä¸å¹²æ‰°ï¼Œè€Œç°åœ¨ä¸»çº¿ç¨‹æ­£åœ¨å¤„ç†é¡µé¢æ»‘åŠ¨ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567// æ–¹æ³•1[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes];// æ–¹æ³•2dispatch_async(dispatch_get_global_queue(0, 0), ^{timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(repeat:) userInfo:nil repeats:true];[[NSRunLoop currentRunLoop] run];}); 3.æ»‘åŠ¨å±å¹•ï¼Œä»å“åº”è€…çš„è§’åº¦å’Œæ‰‹åŠ¿çš„è§’åº¦æ¥åˆ†æç³»ç»Ÿåšäº†ä»€ä¹ˆäº‹æƒ…ä»æ‰‹æŒ‡è§¦æ‘¸å±å¹•ï¼Œè§¦æ‘¸äº‹ä»¶çš„ä¼ é€’å¤§æ¦‚ç»å†äº†3ä¸ªé˜¶æ®µï¼Œç³»ç»Ÿå“åº”é˜¶æ®µâ€“&gt;SpringBoard.appå¤„ç†é˜¶æ®µâ€“&gt;å‰å°Appå¤„ç†é˜¶æ®µï¼Œå¤§è‡´çš„æµç¨‹å¦‚ä¸‹å›¾ï¼š èµ·å§‹é˜¶æ®µ cpuå¤„äºç¡çœ é˜¶æ®µï¼Œç­‰å¾…äº‹ä»¶å‘ç”Ÿ æ‰‹æŒ‡è§¦æ‘¸å±å¹• ç³»ç»Ÿå“åº”é˜¶æ®µ å±å¹•æ„Ÿåº”åˆ°è§¦æ‘¸äº‹ä»¶ï¼Œå¹¶å°†æ„Ÿåº”åˆ°çš„äº‹ä»¶ä¼ é€’ç»™IOKit(ç”¨æ¥æ“ä½œç¡¬ä»¶å’Œé©±åŠ¨çš„æ¡†æ¶) IOKit.frameworkå°è£…æ•´ä¸ªè§¦æ‘¸äº‹ä»¶ä¸ºIOHIDEventå¯¹è±¡ï¼Œç›´æ¥é€šè¿‡mach port(Machå±äºç¡¬ä»¶å±‚ï¼Œä»…æä¾›äº†è¯¸å¦‚å¤„ç†å™¨è°ƒåº¦ã€IPCè¿›ç¨‹é€šä¿¡ç­‰éå¸¸å°‘é‡çš„åŸºç¡€æœåŠ¡ã€‚)è½¬å‘ç»™SpringBoard.appã€‚ SpringBoard.appå¤„ç†é˜¶æ®µ SpringBoard.appçš„ä¸»çº¿ç¨‹Runloopæ”¶åˆ°IOKit.frameworkè½¬å‘æ¥çš„æ¶ˆæ¯è‹é†’ï¼Œå¹¶è§¦å‘å¯¹åº”mach portçš„Source1å›è°ƒ__IOHIDEventSystemClientQueueCallback()ã€‚ å¦‚æœSpringBoard.appç›‘æµ‹åˆ°æœ‰Appåœ¨å‰å°(è®°ä¸ºxxx.app)ï¼ŒSpringBoard.appå†é€šè¿‡mach portè½¬å‘ç»™xxx.appï¼Œå¦‚æœSpringBoard.appç›‘æµ‹åˆ°å‰å°æ²¡æœ‰Appè¿è¡Œï¼Œåˆ™SpringBoard.appè¿›å…¥Appå†…éƒ¨å“åº”é˜¶æ®µï¼Œè§¦å‘è‡ªèº«ä¸»çº¿ç¨‹runloopçš„Source0æ—¶é—´æºçš„å›è°ƒã€‚ SpringBoard.appæ˜¯ä¸€ä¸ªç³»ç»Ÿè¿›ç¨‹ï¼Œå¯ä»¥ç†è§£ä¸ºæ¡Œé¢ç³»ç»Ÿï¼Œå¯ä»¥ç»Ÿä¸€ç®¡ç†å’Œåˆ†å‘ç³»ç»Ÿæ¥æ”¶åˆ°çš„è§¦æ‘¸äº‹ä»¶ã€‚ Appå†…éƒ¨å“åº”é˜¶æ®µ å‰å°Appä¸»çº¿ç¨‹Runloopæ”¶åˆ°SpringBoard.appè½¬å‘æ¥çš„æ¶ˆæ¯è€Œè‹é†’ï¼Œå¹¶è§¦å‘å¯¹åº”mach portçš„Source1å›è°ƒ__IOHIDEventSystemClientQueueCallback()ã€‚ Source1å›è°ƒå†…éƒ¨ï¼Œè§¦å‘Source0å›è°ƒ__UIApplicationHandleEventQueue() Source0å›è°ƒå†…éƒ¨ï¼Œå°è£…IOHIDEventä¸ºUIEventã€‚ Source0å›è°ƒå†…éƒ¨ï¼Œè°ƒç”¨UIApplicationçš„sendEvent:æ–¹æ³•ï¼Œå°†UIEventä¼ ç»™UIWindowï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¯»æ‰¾æœ€ä½³å“åº”è€…çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯å‘½ä¸­æµ‹è¯•hit-testingã€‚ å¯»æ‰¾åˆ°æœ€ä½³å“åº”è€…åï¼Œæ¥ä¸‹æ¥å°±æ˜¯äº‹ä»¶åœ¨å“åº”é“¾ä¸­çš„ä¼ é€’å’Œå“åº”äº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œäº‹ä»¶é™¤äº†å¯ä»¥è¢«å“åº”è€…å¤„ç†ä¹‹å¤–ï¼Œè¿˜æœ‰å¯èƒ½è¢«æ‰‹åŠ¿è¯†åˆ«å™¨æˆ–è€…target-actionæ•æ‰å¹¶å¤„ç†ï¼Œè¿™æ¶‰åŠåˆ°ä¸€ä¸ªä¼˜å…ˆçº§çš„é—®é¢˜ã€‚å¦‚æœè§¦æ‘¸äº‹ä»¶åœ¨å“åº”é“¾ä¸­æ²¡æœ‰æ‰¾åˆ°èƒ½å¤Ÿå“åº”è¯¥äº‹ä»¶çš„å¯¹è±¡ï¼Œæœ€ç»ˆå°†è¢«é‡Šæ”¾ã€‚ äº‹ä»¶è¢«å¤„ç†æˆ–è€…é‡Šæ”¾ä¹‹åï¼Œrunloopå¦‚æœæ²¡æœ‰å…¶ä»–äº‹ä»¶è¿›è¡Œå¤„ç†ï¼Œå°†ä¼šå†æ¬¡è¿›å…¥ä¼‘çœ çŠ¶æ€ã€‚ å¯»æ‰¾äº‹ä»¶çš„æœ€ä½³å“åº”è€…(Hit-Testing)èƒ½å¤Ÿå“åº”è§¦æ‘¸äº‹ä»¶çš„ä¾‹å¦‚UIViewï¼ŒUIButtonï¼ŒUIViewControllerï¼ŒUIApplicationï¼ŒAppdelegateç­‰éƒ½ç»§æ‰¿è‡ªUIResponderç±»ï¼Œä¸€ä¸ªé¡µé¢ä¸Šé€šå¸¸ä¼šæœ‰è®¸è®¸å¤šå¤šä¸ªè¿™ç§ç±»å‹çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥å¯¹ç‚¹å‡»äº‹ä»¶ä½œå‡ºå“åº”ã€‚ä¸ºäº†é¿å…å†²çªï¼Œè¿™å°±éœ€è¦æœ‰ä¸€ä¸ªå…ˆåé¡ºåºï¼Œä¹Ÿå°±æ˜¯å“åº”çš„ä¼˜å…ˆçº§ã€‚Hit-Testingçš„ç›®çš„å°±æ˜¯æ‰¾åˆ°å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„å“åº”å¯¹è±¡ã€‚å¯»æ‰¾çš„å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š UIApplicationé¦–å…ˆå°†äº‹ä»¶é˜Ÿåˆ—ä¸­çš„äº‹ä»¶å–å‡ºï¼Œä¼ é€’ç»™çª—å£å¯¹è±¡ã€‚å¦‚æœæœ‰å¤šä¸ªçª—å£ï¼Œåˆ™ä¼˜å…ˆè¯¢é—®windowsæ•°ç»„çš„æœ€åä¸€ä¸ªçª—å£ã€‚ å¦‚æœçª—å£ä¸èƒ½å“åº”äº‹ä»¶ï¼Œåˆ™å°†äº‹ä»¶ä¼ é€’ç»™å€’æ•°ç¬¬äºŒä¸ªçª—å£ï¼Œä»¥æ­¤ç±»æ¨ã€‚å¦‚æœçª—å£èƒ½å¤Ÿå“åº”äº‹ä»¶ï¼Œåˆ™å†ä¾æ¬¡è¯¢é—®è¯¥çª—å£çš„å­è§†å›¾ã€‚ é‡å¤æ­¥éª¤2ã€‚ è‹¥è§†å›¾çš„æ‰€æœ‰å­è§†å›¾å‡ä¸æ˜¯æœ€ä½³å“åº”è€…ï¼Œåˆ™è‡ªèº«å°±æ˜¯æœ€åˆé€‚çš„å“åº”è€…ã€‚å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸‹å‡ ç§çŠ¶æ€çš„è§†å›¾æ— æ³•å“åº”äº‹ä»¶ï¼š ä¸å…è®¸äº¤äº’çš„è§†å›¾ï¼šuserInteractionEnabled = NO éšè—çš„è§†å›¾ï¼šhidden = YES é€æ˜åº¦alpha&lt;0.01çš„è§†å›¾ æ€ä¹ˆæ ·éªŒè¯ä¸€ä¸‹ä¸Šé¢æ‰€è¯´çš„Hit-Testingçš„é¡ºåºå‘¢ï¼Œçœ‹ä¸€ä¸‹UIViewçš„APIï¼Œé‡Œé¢ä¼šæœ‰ä¸€ä¸ªhitTestï¼šwithEventï¼šæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ä½œç”¨å°±æ˜¯æŸ¥è¯¢å¹¶è¿”å›äº‹ä»¶åœ¨å½“å‰è§†å›¾ä¸­çš„å“åº”è€…ï¼Œæ¯ä¸ªè¢«è¯¢é—®åˆ°çš„è§†å›¾å¯¹è±¡éƒ½ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥è¿”å›å½“å‰è§†å›¾å±‚çš„å“åº”è€…ã€‚ å¦‚æœå½“å‰è§†å›¾æ— æ³•å“åº”äº‹ä»¶ï¼Œåˆ™è¿”å›nilã€‚ å¦‚æœå½“å‰è§†å›¾å¯ä»¥å“åº”äº‹ä»¶ï¼Œä½†å­è§†å›¾ä¸èƒ½å“åº”äº‹ä»¶ï¼Œåˆ™è¿”å›è‡ªèº«ä½œä¸ºå½“å‰è§†å›¾çš„å“åº”è€…ã€‚ å¦‚æœå½“å‰è§†å›¾å¯ä»¥å“åº”äº‹ä»¶ï¼ŒåŒæ—¶æœ‰å­è§†å›¾å¯ä»¥å“åº”äº‹ä»¶ï¼Œåˆ™è¿”å›è¯¥å­è§†å›¾ä½œä¸ºå½“å‰è§†å›¾çš„å“åº”è€…ã€‚ å‚è€ƒé“¾æ¥ï¼šiOSè§¦æ‘¸äº‹ä»¶å¤„ç† æ‰©å±•é˜…è¯»ï¼šUIButtonåœ¨æ‰§è¡ŒåŠ¨ç”»çš„æ—¶å€™,ç‚¹å‡»äº‹ä»¶ä¸å“åº”çš„è§£å†³åŠæ³• 4.ç½‘ç»œè¯·æ±‚å›æ¥åï¼Œå›åˆ°ä¸»çº¿ç¨‹åˆ·æ–°UIï¼Œä¸ºä»€ä¹ˆæœ‰æ—¶å€™ä¼šå»¶è¿Ÿï¼Ÿä¸»çº¿ç¨‹çš„RunLoopå¯èƒ½å½“æ—¶åœ¨å¤„ç†çš„ä»»åŠ¡æ¯”è¾ƒé‡ï¼Œéœ€è¦æ‰§è¡Œå®Œåå†æ‰§è¡Œåˆ·æ–°UIæ“ä½œã€‚ 5.performSelectoräº†è§£å—ï¼ŸperformSelector:afterDelay:æ€ä¹ˆç¡®ä¿æ‰§è¡Œçš„çº¿ç¨‹ä¸è¢«é”€æ¯ã€‚[self performSelector:@selector(test) withObject:nil afterDelay:.0]å®é™…åœ¨runloopé‡Œé¢ï¼Œæ˜¯ä¸€ä¸ªå®šæ—¶å™¨ï¼Œä½†æ˜¯å› ä¸ºåœ¨å­çº¿ç¨‹ï¼Œrunloopæ˜¯é»˜è®¤æ²¡æœ‰å¼€å¯çš„ã€‚ performSelector:afterDelay:ä¹‹åå¼€å¯runloopï¼Œå³[[NSRunLoop currentRunLoop] run];ã€‚ portçš„ç”Ÿå‘½å‘¨æœŸç»“æŸï¼Œrunloopä¹Ÿæ²¡äº†ï¼Œé‚£æ€ä¹ˆä¿è¯runloopæ²¡é”€æ¯ï¼Ÿ åœ¨å­çº¿ç¨‹è°ƒç”¨æ–¹æ³•å‰å»å¼€å¯Runloopã€‚ 6.è°ˆè°ˆautoreleaseå’Œautoreleasepoolautoreleaseçš„åŸºæœ¬ç”¨æ³• 1) ä¼šå°†å¯¹è±¡æ”¾åˆ°ä¸€ä¸ªè‡ªåŠ¨é‡Šæ”¾æ± ä¸­ 2) å½“è‡ªåŠ¨é‡Šæ”¾æ± è¢«é”€æ¯æ—¶ï¼Œä¼šå¯¹æ± å­é‡Œé¢çš„æ‰€æœ‰å¯¹è±¡åšä¸€æ¬¡releaseæ“ä½œ 3) ä¼šè¿”å›å¯¹è±¡æœ¬èº« 4) è°ƒç”¨å®Œautoreleaseæ–¹æ³•åï¼Œå¯¹è±¡çš„è®¡æ•°å™¨ä¸å˜ autoreleaseçš„å…·ä½“ä½¿ç”¨æ–¹æ³• ç”Ÿæˆå¹¶æŒæœ‰NSAutoreleasePoolå¯¹è±¡ è°ƒç”¨å·²åˆ†é…å¯¹è±¡çš„autoreleaseå®ä¾‹æ–¹æ³• é”€æ¯NSAutoreleasePoolå¯¹è±¡ NSAutoreleasePoolå¯¹è±¡ç”Ÿå­˜å‘¨æœŸç›¸å½“äºCè¯­è¨€çš„å±€éƒ¨å˜é‡ä½œç”¨åŸŸï¼Œå¯¹æ‰€æœ‰è°ƒç”¨è¿‡autoreleaseçš„å®ä¾‹æ–¹æ³•çš„å¯¹è±¡ï¼Œåœ¨é”€æ¯NSAutoreleasePoolå¯¹è±¡æ—¶ï¼Œéƒ½å°†è°ƒç”¨releaseå®ä¾‹æ–¹æ³•ï¼Œå³å®ä¾‹å¯¹è±¡è°ƒç”¨releaseæ–¹æ³•ã€‚ å½“å¯¹è±¡è°ƒç”¨äº†autoreleaseæ–¹æ³•æ˜¯å®ç°å®é™…å¤§è‡´å¯ä»¥ç†è§£ä¸ºæ˜¯è°ƒç”¨çš„NSAutoreleasePoolè°ƒç”¨äº†ç±»æ–¹æ³•addObject 1234- (void)autorelease { [NSAutoreleasePool addObject: self];} AutoreleasePoolAppå¯åŠ¨åï¼Œè‹¹æœåœ¨ä¸»çº¿ç¨‹ RunLoop é‡Œæ³¨å†Œäº†ä¸¤ä¸ª Observerï¼Œå…¶å›è°ƒéƒ½æ˜¯_wrapRunLoopWithAutoreleasePoolHandler()ã€‚ ç¬¬ä¸€ä¸ª Observer ç›‘è§†çš„äº‹ä»¶æ˜¯ Entry(å³å°†è¿›å…¥Loop)ï¼Œå…¶å›è°ƒå†…ä¼šè°ƒç”¨ _objc_autoreleasePoolPush() åˆ›å»ºè‡ªåŠ¨é‡Šæ”¾æ± ã€‚å…¶ order æ˜¯-2147483647ï¼Œä¼˜å…ˆçº§æœ€é«˜ï¼Œä¿è¯åˆ›å»ºé‡Šæ”¾æ± å‘ç”Ÿåœ¨å…¶ä»–æ‰€æœ‰å›è°ƒä¹‹å‰ã€‚ ç¬¬äºŒä¸ª Observer ç›‘è§†äº†ä¸¤ä¸ªäº‹ä»¶ï¼š BeforeWaiting(å‡†å¤‡è¿›å…¥ä¼‘çœ ) æ—¶è°ƒç”¨_objc_autoreleasePoolPop() å’Œ _objc_autoreleasePoolPush()é‡Šæ”¾æ—§çš„æ± å¹¶åˆ›å»ºæ–°æ± ï¼› Exit(å³å°†é€€å‡ºLoop) æ—¶è°ƒç”¨ _objc_autoreleasePoolPop() æ¥é‡Šæ”¾è‡ªåŠ¨é‡Šæ”¾æ± ã€‚ 7.studentç±»åœ¨è¯»ä¹¦æ–¹æ³•é‡ŒåŠ ä»£ç ï¼Œä¸æ”¹å˜åŸæ–¹æ³•å¯ä»¥ä½¿ç”¨ Runtime æˆ–è€…å­ç±»ã€‚ iOSç³»ç»Ÿä¸­æœ‰æ²¡æœ‰ç”¨ç±»ä¼¼çš„æ–¹æ³•å®ç°ï¼ŸKVO 8.KVOå®ç°åŸç†ï¼ŒKVOæ‰“å°å®ä¾‹å¯¹è±¡çš„classä¸ºä»€ä¹ˆèƒ½å¤Ÿåšåˆ°è¿˜æ˜¯åŸæœ¬ç±»ã€‚1) åˆ©ç”¨RuntimeAPIåŠ¨æ€ç”Ÿæˆä¸€ä¸ªå­ç±»ï¼Œå¹¶ä¸”è®©instanceå¯¹è±¡çš„isaæŒ‡å‘è¿™ä¸ªå…¨æ–°çš„å­ç±»2) å½“ä¿®æ”¹instanceå¯¹è±¡çš„å±æ€§æ—¶ï¼Œä¼šè°ƒç”¨Foundationçš„_NSSetXXXValueAndNotifyå‡½æ•° 1234willChangeValueForKey:çˆ¶ç±»åŸæ¥çš„setterdidChangeValueForKey:å†…éƒ¨ä¼šè§¦å‘ç›‘å¬å™¨ï¼ˆOberserï¼‰çš„ç›‘å¬æ–¹æ³•( observeValueForKeyPath:ofObject:change:context:ï¼‰ æ³¨æ„äº‹é¡¹ï¼šéœ€è¦è°ƒç”¨setæ–¹æ³•è§¦å‘KVO å®ç°äº†classæ–¹æ³•ï¼Œè¿”å›äº†çˆ¶ç±»ã€‚ 9.http getå’ŒpoståŒºåˆ«Getæ˜¯å®‰å…¨çš„ã€å¹‚ç­‰çš„ã€å¯ç¼“å­˜çš„ã€Getå‚æ•°ä¸€èˆ¬æ‹¼æ¥åœ¨urlçš„queryå‚æ•°é‡Œï¼Œæœ‰é•¿åº¦é™åˆ¶ã€‚ Postæ˜¯ä¸å®‰å…¨çš„ã€éå¹‚ç­‰çš„ã€ä¸å¯ç¼“å­˜çš„ï¼ŒPostçš„å‚æ•°ä¸€èˆ¬æ”¾åœ¨è¯·æ±‚ä½“é‡Œï¼Œç›¸å¯¹å®‰å…¨ã€‚ httpsçš„è¿‡ç¨‹ï¼Ÿ ä¸€ä¸ªHTTPSè¯·æ±‚å®é™…ä¸ŠåŒ…å«äº†ä¸¤æ¬¡HTTPä¼ è¾“ï¼š 1ï¼‰å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªhttpè¯·æ±‚ï¼Œè¿æ¥åˆ°æœåŠ¡å™¨çš„443ç«¯å£ã€‚ 2ï¼‰æœåŠ¡ç«¯æŠŠè‡ªå·±çš„ä¿¡æ¯ä»¥æ•°å­—è¯ä¹¦çš„å½¢å¼è¿”å›ç»™å®¢æˆ·ç«¯ï¼ˆè¯ä¹¦å†…å®¹æœ‰å¯†é’¥å…¬é’¥ï¼Œç½‘ç«™åœ°å€ï¼Œè¯ä¹¦é¢å‘æœºæ„ï¼Œå¤±æ•ˆæ—¥æœŸç­‰ï¼‰ã€‚è¯ä¹¦ä¸­æœ‰ä¸€ä¸ªå…¬é’¥æ¥åŠ å¯†ä¿¡æ¯ï¼Œç§é’¥ç”±æœåŠ¡å™¨æŒæœ‰ã€‚ 3ï¼‰éªŒè¯è¯ä¹¦çš„åˆæ³•æ€§ å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„å“åº”åä¼šå…ˆéªŒè¯è¯ä¹¦çš„åˆæ³•æ€§ï¼ˆè¯ä¹¦ä¸­åŒ…å«çš„åœ°å€ä¸æ­£åœ¨è®¿é—®çš„åœ°å€æ˜¯å¦ä¸€è‡´ï¼Œè¯ä¹¦æ˜¯å¦è¿‡æœŸï¼‰ã€‚ 4ï¼‰ç”Ÿæˆéšæœºå¯†ç ï¼ˆRSAç­¾åï¼‰ å¦‚æœéªŒè¯é€šè¿‡ï¼Œæˆ–ç”¨æˆ·æ¥å—äº†ä¸å—ä¿¡ä»»çš„è¯ä¹¦ï¼Œæµè§ˆå™¨å°±ä¼šç”Ÿæˆä¸€ä¸ªéšæœºçš„å¯¹ç§°å¯†é’¥ï¼ˆsession keyï¼‰å¹¶ç”¨å…¬é’¥åŠ å¯†ï¼Œè®©æœåŠ¡ç«¯ç”¨ç§é’¥è§£å¯†ï¼Œè§£å¯†åå°±ç”¨è¿™ä¸ªå¯¹ç§°å¯†é’¥è¿›è¡Œä¼ è¾“äº†ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¯´æ˜æœåŠ¡ç«¯ç¡®å®æ˜¯ç§é’¥çš„æŒæœ‰è€…ã€‚ 5ï¼‰ç”Ÿæˆå¯¹ç§°åŠ å¯†ç®—æ³• éªŒè¯å®ŒæœåŠ¡ç«¯èº«ä»½åï¼Œå®¢æˆ·ç«¯ç”Ÿæˆä¸€ä¸ªå¯¹ç§°åŠ å¯†çš„ç®—æ³•å’Œå¯¹åº”å¯†é’¥ï¼Œä»¥å…¬é’¥åŠ å¯†ä¹‹åå‘é€ç»™æœåŠ¡ç«¯ã€‚æ­¤æ—¶è¢«é»‘å®¢æˆªè·ä¹Ÿæ²¡ç”¨ï¼Œå› ä¸ºåªæœ‰æœåŠ¡ç«¯çš„ç§é’¥æ‰å¯ä»¥å¯¹å…¶è¿›è¡Œè§£å¯†ã€‚ä¹‹åå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å¯ä»¥ç”¨è¿™ä¸ªå¯¹ç§°åŠ å¯†ç®—æ³•æ¥åŠ å¯†å’Œè§£å¯†é€šä¿¡å†…å®¹äº†ã€‚ 6ï¼‰å®¢æˆ·ç«¯ä¼šå‘èµ·HTTPSä¸­çš„ç¬¬äºŒä¸ªHTTPè¯·æ±‚ï¼Œå°†åŠ å¯†ä¹‹åçš„å®¢æˆ·ç«¯å¯†é’¥å‘é€ç»™æœåŠ¡å™¨ã€‚ 7ï¼‰æœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„å¯†æ–‡ä¹‹åï¼Œä¼šç”¨è‡ªå·±çš„ç§é’¥å¯¹å…¶è¿›è¡Œéå¯¹ç§°è§£å¯†ï¼Œè§£å¯†ä¹‹åçš„æ˜æ–‡å°±æ˜¯å®¢æˆ·ç«¯å¯†é’¥ï¼Œç„¶åç”¨å®¢æˆ·ç«¯å¯†é’¥å¯¹æ•°æ®è¿›è¡Œå¯¹ç§°åŠ å¯†ï¼Œè¿™æ ·æ•°æ®å°±å˜æˆäº†å¯†æ–‡ã€‚ 8ï¼‰ç„¶åæœåŠ¡å™¨å°†åŠ å¯†åçš„å¯†æ–‡å‘é€ç»™å®¢æˆ·ç«¯ã€‚ 9ï¼‰å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å‘é€æ¥çš„å¯†æ–‡ï¼Œç”¨å®¢æˆ·ç«¯å¯†é’¥å¯¹å…¶è¿›è¡Œå¯¹ç§°è§£å¯†ï¼Œå¾—åˆ°æœåŠ¡å™¨å‘é€çš„æ•°æ®ã€‚è¿™æ ·HTTPSä¸­çš„ç¬¬äºŒä¸ªHTTPè¯·æ±‚ç»“æŸï¼Œæ•´ä¸ªHTTPSä¼ è¾“å®Œæˆã€‚ httpsæ˜¯ç»å¯¹çš„å®‰å…¨å—ï¼Ÿæ€ä¹ˆä¿è¯å®‰å…¨æ€§ï¼Ÿä¸æ˜¯ï¼Œå¯ä»¥è¢«æŠ“åŒ…ã€‚ æŠ“åŒ…çš„åŸç†ï¼ŸCharlesä½œç”¨å…¶å®ç›¸å½“äºæ‹¦æˆªå™¨ï¼Œå½“å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šä¿¡æ—¶ï¼ŒCharleså…¶å®ä¼šå…ˆæ¥æ”¶åˆ°æœåŠ¡å™¨çš„è¯ä¹¦ï¼Œä½†æ˜¯å®ƒä¼šè‡ªå·±ç”Ÿæˆä¸€ä¸ªè¯ä¹¦å‘é€ç»™å®¢æˆ·ç«¯(ä¸ç®¡æ˜¯Webç«¯æˆ–Appåº”ç”¨)ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¸ä»…ä»…æ˜¯æ‹¦æˆªï¼Œç”šè‡³è¿˜å¯ä»¥ä¿®æ”¹ã€‚ ç”±äºCharlesæ›´æ”¹äº†è¯ä¹¦ï¼Œæ‰€ä»¥å¦‚æœä½ æ˜¯ä½¿ç”¨çš„Webæµè§ˆå™¨ï¼Œéœ€è¦å¯¼å…¥ç›¸åº”çš„Charlesè¯ä¹¦ï¼Œå¦åˆ™æ ¡éªŒä¸é€šè¿‡ä¼šç»™å‡ºå®‰å…¨è­¦å‘Šï¼Œå¿…é¡»å®‰è£…Charlesçš„è¯ä¹¦åæ‰èƒ½è¿›è¡Œæ­£å¸¸è®¿é—®ã€‚ 1) Charlesæ‹¦æˆªå®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚ 2) æœåŠ¡å™¨å‘â€œå®¢æˆ·ç«¯â€ï¼ˆå®é™…ä¸Šæ˜¯Charlesï¼‰è¿”å›æœåŠ¡å™¨çš„CAè¯ä¹¦ 3) Charlesæ‹¦æˆªæœåŠ¡å™¨çš„å“åº”ï¼Œè·å–æœåŠ¡å™¨è¯ä¹¦å…¬é’¥ï¼Œç„¶åè‡ªå·±åˆ¶ä½œä¸€å¼ è¯ä¹¦ï¼Œå°†æœåŠ¡å™¨è¯ä¹¦æ›¿æ¢åå‘é€ç»™å®¢æˆ·ç«¯ã€‚ï¼ˆè¿™ä¸€æ­¥ï¼ŒCharlesæ‹¿åˆ°äº†æœåŠ¡å™¨è¯ä¹¦çš„å…¬é’¥ï¼‰ 4) å®¢æˆ·ç«¯æ¥æ”¶åˆ°â€œæœåŠ¡å™¨â€ï¼ˆå®é™…ä¸Šæ˜¯Charlesï¼‰çš„è¯ä¹¦åï¼Œç”Ÿæˆä¸€ä¸ªå¯¹ç§°å¯†é’¥ï¼Œç”¨Charlesçš„å…¬é’¥åŠ å¯†ï¼Œå‘é€ç»™â€œæœåŠ¡å™¨â€ï¼ˆCharlesï¼‰ 5) Charlesæ‹¦æˆªå®¢æˆ·ç«¯çš„å“åº”ï¼Œç”¨è‡ªå·±çš„ç§é’¥è§£å¯†å¯¹ç§°å¯†é’¥ï¼Œç„¶åç”¨æœåŠ¡å™¨è¯ä¹¦å…¬é’¥åŠ å¯†ï¼Œå‘é€ç»™æœåŠ¡å™¨ã€‚ï¼ˆè¿™ä¸€æ­¥ï¼ŒCharlesæ‹¿åˆ°äº†å¯¹ç§°å¯†é’¥ï¼‰ 6) æœåŠ¡å™¨ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†å¯¹ç§°å¯†é’¥ï¼Œå‘â€œå®¢æˆ·ç«¯â€ï¼ˆCharlesï¼‰å‘é€å“åº” 7) Charlesæ‹¦æˆªæœåŠ¡å™¨çš„å“åº”ï¼Œæ›¿æ¢æˆè‡ªå·±çš„è¯ä¹¦åå‘é€ç»™å®¢æˆ·ç«¯ è‡³æ­¤ï¼Œè¿æ¥å»ºç«‹ï¼ŒCharlesæ‹¿åˆ°äº†æœåŠ¡å™¨è¯ä¹¦çš„å…¬é’¥å’Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨åå•†çš„å¯¹ç§°å¯†é’¥ï¼Œä¹‹åå°±å¯ä»¥è§£å¯†æˆ–è€…ä¿®æ”¹åŠ å¯†çš„æŠ¥æ–‡äº†ã€‚ Charlesä½œä¸ºâ€œä¸­é—´äººä»£ç†â€ï¼Œæ‹¿åˆ°äº†æœåŠ¡å™¨è¯ä¹¦å…¬é’¥å’Œ HTTPS è¿æ¥çš„å¯¹ç§°å¯†é’¥ï¼Œå‰ææ˜¯å®¢æˆ·ç«¯é€‰æ‹©ä¿¡ä»»å¹¶å®‰è£…Charlesçš„CAè¯ä¹¦ï¼Œå¦åˆ™å®¢æˆ·ç«¯å°±ä¼šâ€œæŠ¥è­¦â€å¹¶ä¸­æ­¢è¿æ¥ã€‚è¿™æ ·çœ‹æ¥ï¼ŒHTTPSè¿˜æ˜¯å¾ˆå®‰å…¨çš„ã€‚ æ€ä¹ˆé¿å…è¢«æŠ“åŒ…ï¼Ÿåˆ¤æ–­æ˜¯å¦æœ‰ä»£ç†ï¼Œå¦‚æœæœ‰ï¼Œ 1ï¼‰å¯ä»¥å–æ¶ˆæœ¬æ¬¡çš„ç½‘ç»œè¯·æ±‚ã€‚ 2ï¼‰å¯ä»¥å–æ¶ˆæ‰ä»£ç†ï¼Œç›´è¿æœåŠ¡ç«¯ã€‚ æ ¡éªŒè¯ä¹¦ã€ä¸ä½¿ç”¨httpï¼Œä½¿ç”¨æ›´åº•å±‚çš„åè®®ã€‚","link":"/ç¾å›¢ä¼˜é€‰é¢è¯•é¢˜åŠç­”æ¡ˆ/"},{"title":"è±†ç“£é¢è¯•é¢˜","text":"è±†ç“£é¢è¯•é¢˜ 1.æ˜¯åœ¨å¤§å­¦é‡Œå­¦çš„ iOS å—ï¼Ÿæ€ä¹ˆå­¦çš„ iOSï¼Ÿ2.åˆ¤æ–­2ä¸ªå•é“¾è¡¨æ˜¯å¦äº¤å‰,å®ç°ä»£ç ,å¦‚æœæœ‰äº¤å‰æ‰¾å‡ºäº¤å‰ç‚¹ã€‚æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨æ³• éå†é“¾è¡¨ A å¹¶å°†æ¯ä¸ªç»“ç‚¹çš„åœ°å€/å¼•ç”¨å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­ã€‚ç„¶åæ£€æŸ¥é“¾è¡¨ B ä¸­çš„æ¯ä¸€ä¸ªç»“ç‚¹ biæ˜¯å¦åœ¨å“ˆå¸Œè¡¨ä¸­ã€‚è‹¥åœ¨ï¼Œåˆ™ biä¸ºç›¸äº¤ç»“ç‚¹ã€‚ 12345678910111213141516var getIntersectionNode = function(headA, headB) { let mySet = new Set(); let curr = headA; while (curr != null) { mySet.add(curr); curr = curr.next; } curr = headB; while (curr != null) { if (mySet.has(curr)) { return curr; } curr = curr.next; } return null;}; æ–¹æ³•äºŒï¼šåŒæŒ‡é’ˆæ³• 1234567891011var getIntersectionNode = function(headA, headB) { if (headA == null || headB == null) { return null; } let pA = headA, pB = headB; while (pA != pB) { pA = pA == null ? headB : pA.next; pB = pB == null ? headA : pB.next; } return pA;}; 3.è¯´ä¸€ä¸‹ @property å±æ€§ä¿®é¥°ç¬¦ï¼Œblock ä¸ºä»€ä¹ˆç”¨ copy ï¼Ÿweak çš„å®ç°åŸç†ï¼Ÿatomic æ€ä¹ˆä¿è¯å®‰å…¨ï¼Ÿæ€ä¹ˆè§£å†³è¯»å†™å®‰å…¨ï¼Ÿ@property ä»€ä¹ˆéƒ½ä¸å†™ åŸºæœ¬æ•°æ®ç±»å‹é»˜è®¤ä¿®é¥°ç¬¦æ˜¯ atomic, readWrite, assign å¯¹è±¡ç±»å‹é»˜è®¤ä¿®é¥°ç¬¦æ˜¯ atomic, readWrite, strong block ä¸ºä»€ä¹ˆç”¨ copyï¼Ÿ å¦‚æœæ˜¯å…¨å±€é™æ€ block çš„è¯ï¼Œå®ƒç›´åˆ°ç¨‹åºç»“æŸçš„æ—¶å€™ï¼Œæ‰ä¼šè¢«è¢«é‡Šæ”¾ã€‚ä½†æ˜¯æˆ‘ä»¬å®é™…æ“ä½œä¸­åŸºæœ¬ä¸Šä¸ä¼šä½¿ç”¨åˆ°ä¸è®¿é—®å¤–éƒ¨å˜é‡çš„ blockã€‚ å¦‚æœæ˜¯ä¿å­˜åœ¨æ ˆä¸­çš„ blockï¼Œå®ƒä¼šéšç€å‡½æ•°è°ƒç”¨ç»“æŸè¢«é”€æ¯ã€‚ä»è€Œå¯¼è‡´æˆ‘ä»¬åœ¨æ‰§è¡Œä¸€ä¸ªåŒ…å« block çš„å‡½æ•°ä¹‹åï¼Œå°±æ— æ³•å†è®¿é—®è¿™ä¸ª blockã€‚å› ä¸ºï¼ˆå‡½æ•°ç»“æŸï¼Œå‡½æ•°æ ˆå°±é”€æ¯äº†ï¼Œå­˜åœ¨å‡½æ•°é‡Œé¢çš„ block ä¹Ÿå°±æ²¡æœ‰äº†ï¼‰ï¼Œæˆ‘ä»¬å†ä½¿ç”¨ block æ—¶ï¼Œå°±ä¼šäº§ç”Ÿç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚ å¦‚æœæ˜¯å †ä¸­çš„ blockï¼Œä¹Ÿå°±æ˜¯ copy ä¿®é¥°çš„ blockã€‚ä»–çš„ç”Ÿå‘½å‘¨æœŸå°±æ˜¯éšç€å¯¹è±¡çš„é”€æ¯è€Œç»“æŸçš„ã€‚åªè¦å¯¹è±¡ä¸é”€æ¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨çš„åˆ°åœ¨å †ä¸­çš„ blockã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ç”¨ copy æ¥ä¿®é¥° blockã€‚å› ä¸ºä¸ç”¨ copy ä¿®é¥°çš„è®¿é—®å¤–éƒ¨å˜é‡çš„ blockï¼Œåªåœ¨ä»–æ‰€åœ¨çš„å‡½æ•°è¢«è°ƒç”¨çš„é‚£ä¸€ç¬é—´å¯ä»¥ä½¿ç”¨ã€‚ä¹‹åå°±æ¶ˆå¤±äº†ã€‚ weak çš„å®ç°åŸç† å‚è€ƒé“¾æ¥ï¼šiOS åº•å±‚è§£æweakçš„å®ç°åŸç† atomic æ€ä¹ˆä¿è¯å®‰å…¨ï¼Ÿ å±æ€§å£°æ˜ä¸ºatomicæ—¶ï¼Œåœ¨è¯¥å±æ€§åœ¨è°ƒç”¨getterå’Œsetteræ–¹æ³•æ—¶ï¼Œä¼šåŠ ä¸ŠåŒæ­¥é”ï¼Œå³åœ¨å±æ€§åœ¨è°ƒç”¨getterå’Œsetteræ–¹æ³•æ—¶ï¼Œä¿è¯åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨å±æ€§çš„è¯»/å†™æ–¹æ³•ã€‚ä¿è¯äº†è¯»å’Œå†™çš„è¿‡ç¨‹æ˜¯å¯é çš„ã€‚ä½†å¹¶ä¸èƒ½ä¿è¯æ•°æ®ä¸€å®šæ˜¯å¯é çš„ã€‚ æ€ä¹ˆè§£å†³è¯»å†™å®‰å…¨ï¼Ÿ dispatch_barrier_async pthread_rwlockï¼šè¯»å†™é” 4.OSSPinLock ä¸ºä»€ä¹ˆä¸ç”¨äº†ï¼Ÿç³»ç»Ÿç»´æŠ¤äº† 5 ä¸ªä¸åŒçš„çº¿ç¨‹ä¼˜å…ˆçº§/QoS: backgroundï¼Œutilityï¼Œdefaultï¼Œuser-initiatedï¼Œuser-interactiveã€‚é«˜ä¼˜å…ˆçº§çº¿ç¨‹å§‹ç»ˆä¼šåœ¨ä½ä¼˜å…ˆçº§çº¿ç¨‹å‰æ‰§è¡Œï¼Œä¸€ä¸ªçº¿ç¨‹ä¸ä¼šå—åˆ°æ¯”å®ƒæ›´ä½ä¼˜å…ˆçº§çº¿ç¨‹çš„å¹²æ‰°ã€‚è¿™ç§çº¿ç¨‹è°ƒåº¦ç®—æ³•ä¼šäº§ç”Ÿæ½œåœ¨çš„ä¼˜å…ˆçº§åè½¬é—®é¢˜ï¼Œä»è€Œç ´åäº† spin lockã€‚ å…·ä½“æ¥è¯´ï¼Œå¦‚æœä¸€ä¸ªä½ä¼˜å…ˆçº§çš„çº¿ç¨‹è·å¾—é”å¹¶è®¿é—®å…±äº«èµ„æºï¼Œè¿™æ—¶ä¸€ä¸ªé«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹ä¹Ÿå°è¯•è·å¾—è¿™ä¸ªé”ï¼Œå®ƒä¼šå¤„äº spin lock çš„å¿™ç­‰çŠ¶æ€ä»è€Œå ç”¨å¤§é‡ CPUã€‚æ­¤æ—¶ä½ä¼˜å…ˆçº§çº¿ç¨‹æ— æ³•ä¸é«˜ä¼˜å…ˆçº§çº¿ç¨‹äº‰å¤º CPU æ—¶é—´ï¼Œä»è€Œå¯¼è‡´ä»»åŠ¡è¿Ÿè¿Ÿå®Œä¸æˆã€æ— æ³•é‡Šæ”¾ lockã€‚è¿™å¹¶ä¸åªæ˜¯ç†è®ºä¸Šçš„é—®é¢˜ï¼Œlibobjc å·²ç»é‡åˆ°äº†å¾ˆå¤šæ¬¡è¿™ä¸ªé—®é¢˜äº†ï¼Œäºæ˜¯è‹¹æœçš„å·¥ç¨‹å¸ˆåœç”¨äº† OSSpinLockã€‚ å‚è€ƒé“¾æ¥ï¼šä¸å†å®‰å…¨çš„ OSSpinLock 5.åŒæ—¶è¯·æ±‚ä¸¤å¼ å›¾ç‰‡ï¼Œä¹‹ååˆæˆä¸€å¼ å›¾ dispatch_group é…åˆ dispatch_semaphore dispatch_group dispatch_enter dispatch_leave dispatch_barrier è¿˜æœ‰å…¶ä»–çš„æ–¹å¼å—ï¼Ÿåªä½¿ç”¨ dispatch_semphore å’Œ dispatch_async æ€ä¹ˆå®ç°ï¼Ÿ 6.Runloop æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ æ§åˆ¶çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸï¼Œå®ç°å¸¸é©»çº¿ç¨‹ã€‚ TableView å»¶è¿ŸåŠ è½½å›¾ç‰‡ã€‚æ»‘åŠ¨æ—¶ä¸è°ƒç”¨èµ‹å€¼å›¾ç‰‡çš„æ–¹æ³•ï¼Œç­‰æ»‘åŠ¨å®Œæ¯•åˆ‡æ¢åˆ° NSDefaultRunLoopMode æ—¶æ‰è°ƒç”¨ã€‚ 1[self.img performSelector:@selector(setImage:) withObject:image afterDelay:0 inModes:[NSDefaultRunLoopMode]]; è§£å†³ NSTimer åœ¨æ»‘åŠ¨æ—¶åœæ­¢çš„é—®é¢˜ã€‚ ç›‘æµ‹ RunLoop çš„çŠ¶æ€ç›‘æµ‹åº”ç”¨å¡é¡¿ã€‚ 7.å­çº¿ç¨‹æ€ä¹ˆé”€æ¯ï¼Ÿæ¢ä¸€ç§é—®æ³•ï¼Œå¸¸é©»çº¿ç¨‹æ€ä¹ˆé”€æ¯ï¼ŸNSPort çš„ç”Ÿå‘½å‘¨æœŸæ€ä¹ˆæ§åˆ¶ï¼Ÿ12345678- (void)_stopThread { self.isRun = NO; // åœæ­¢å½“å‰çº¿ç¨‹çš„Runloop CFRunLoopStop(CFRunLoopGetCurrent()); self.innerThread = nil;} å‚è€ƒé“¾æ¥ï¼šiOS RunLoop å¸¸é©»çº¿ç¨‹ç®€åŒ–å®ç° 8.è¯´ä¸€ä¸‹å“åº”è€…é“¾ã€‚æœ‰ä¸‰ä¸ªè§†å›¾ Aã€Bã€C ä¾æ¬¡è¢«æ·»åŠ åˆ° self.view ä¸Šï¼Œframe ç›¸åŒï¼Œå¤å†™ C çš„ pointInSide æ–¹æ³•ç¼©å°èŒƒå›´ï¼Œç‚¹å‡» C çš„è¾¹ç¼˜ C ä¼šå“åº”å—ï¼ŸC ä¸å“åº”çš„è¯ï¼ŒB ä¼šå“åº”å—ï¼Ÿç‚¹å‡» C çš„è¾¹ç¼˜ C ä¸ä¼šå“åº”ï¼ŒB ä¼šå“åº”ã€‚ 9.ç»„ä»¶æ˜¯æ€ä¹ˆæ‹†åˆ†çš„ï¼Ÿç»„ä»¶åŒ–æ˜¯æ€ä¹ˆä¼ å€¼çš„ï¼Ÿç»„ä»¶çš„æ³¨å†Œæ˜¯å†™åœ¨å“ªé‡Œçš„ï¼Ÿå†™åœ¨ +load ä¼šä¸ä¼šæœ‰æ€§èƒ½é—®é¢˜ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿå‚è€ƒé“¾æ¥ï¼šiOSç»„ä»¶åŒ–æ–¹æ¡ˆ 10.äº†è§£ HTTPDNS å—ï¼Ÿè¯¢é—®çš„æ“ä½œæ˜¯è°å»é—®ï¼Ÿæœ¬å±‚-&gt;ä¸Šå±‚-&gt;ä¸Šä¸Šå±‚ ä½¿ç”¨HTTPï¼ˆHTTPSï¼‰åè®®ç»•è¿‡è¿è¥å•†çš„ Local DNSï¼Œé¿å…åŸŸååŠ«æŒï¼Œä¹Ÿæ›´å‡†ç¡®åœ°åˆ¤æ–­å®¢æˆ·ç«¯åœ°åŒºå’Œè¿è¥å•†ï¼Œå¾—åˆ°æ›´ç²¾å‡†çš„è§£æç»“æœï¼› HTTPDNS èƒ½å¤Ÿç›´æ¥å¾—åˆ°å®¢æˆ·ç«¯çš„å‡ºå£ç½‘å…³ IPï¼Œä»è€Œæ›´å‡†ç¡®åœ°åˆ¤æ–­å®¢æˆ·ç«¯åœ°åŒºå’Œè¿è¥å•†ï¼Œå¾—åˆ°æ›´ç²¾å‡†çš„è§£æç»“æœï¼› å‚è€ƒé“¾æ¥ï¼šHTTPDNS 11.æ€§èƒ½ä¼˜åŒ–ï¼ŒtableView æ€ä¹ˆç¼“å­˜è¡Œé«˜ï¼Ÿé«˜åº¦å­˜åœ¨å“ªå„¿ï¼Ÿkey æ˜¯ä»€ä¹ˆï¼Ÿæ¨ªç«–å±æ€ä¹ˆç¼“å­˜è¡Œé«˜ï¼Ÿä¸€ä¸ªé¡µé¢å¤§æ¦‚ç‡ä¸ä¼šæ¨ªå±ï¼Œç¼“å­˜æ¨ªç«–å±ä¸¤ä»½è¡Œé«˜æ˜¯ä¸æ˜¯æœ‰äº›æµªè´¹ï¼Œæ€ä¹ˆå»å¤„ç†è¡Œé«˜ï¼ŸtableView æ€ä¹ˆæ§åˆ¶ç¼“å­˜æ•°é‡ï¼Œæ¯”å¦‚æœ€å¤§1000æ¡æ•°æ®çš„ç¼“å­˜é‡ã€‚æå‰è®¡ç®—å¥½cellçš„é«˜åº¦,ç¼“å­˜åœ¨ç›¸åº”çš„æ•°æ®æºæ¨¡å‹ä¸­ã€‚cellHeight 12.åŠ è½½å¤§å›¾ï¼Œåœ°å›¾è¿™ç§å¤§å›¾æ€ä¹ˆåŠ è½½ä¼˜åŒ–ï¼Ÿç³»ç»Ÿ API çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ åˆ†ç‰‡æ¯”ä¾‹è£å‰ªæ–¹å¼ã€‚å‚è€ƒè‹¹æœç»™å‡ºçš„ demo,åˆ©ç”¨ CGImageCreateWithImageInRect æˆªå–åŸå›¾å¯¹åº”ä½ç½®çš„å†…å®¹,å†é€šè¿‡ CGContextDrawImage æ¸²æŸ“åˆ°æŒ‡å®šä½ç½®; åˆ©ç”¨ CATiledLayer å±‚çº§çš„API,è‡ªåŠ¨è¿›è¡Œç»˜åˆ¶; å‚è€ƒé“¾æ¥ï¼šiOS å¤§å›¾æ˜¾ç¤ºè§£å†³åŠæ³• 13.é¡¹ç›®æ€ä¹ˆåˆ†å·¥çš„ï¼Ÿä½ è´Ÿè´£ä»€ä¹ˆï¼Ÿæœ‰æ²¡æœ‰ä»€ä¹ˆå€¼å¾—è¯´çš„ç‚¹ï¼ŸH5 ä¸åŸç”Ÿäº¤äº’æœ‰ä»€ä¹ˆç»éªŒåˆ†äº«å—ï¼Ÿæ€ä¹ˆç»™ webView åŠ è½½çš„é¡µé¢å‘çš„ç½‘ç»œè¯·æ±‚ç»Ÿä¸€åŠ ä¸Š headerï¼Ÿ14.AFN æ—©æœŸç‰ˆæœ¬ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¸¸é©»çº¿ç¨‹ï¼Ÿæ€ä¹ˆç»Ÿä¸€è®¾ç½® headerï¼Ÿ1[requestSerializer setValue:value forHTTPHeaderField:httpHeaderField]; 15.RN å’Œ Flutter çš„åº•å±‚å®ç°æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿåœ¨ Android å’Œ iOS ä¸Šï¼Œé»˜è®¤æƒ…å†µä¸‹ Flutter å’Œ React Native éƒ½éœ€è¦ä¸€ä¸ªåŸç”Ÿå¹³å°çš„ Activity / ViewController æ”¯æŒï¼Œä¸”åœ¨åŸç”Ÿå±‚é¢å±äºä¸€ä¸ªâ€œå•é¡µé¢åº”ç”¨â€ï¼Œè€Œå®ƒä»¬ä¹‹é—´æœ€å¤§çš„ä¸åŒç‚¹å…¶å®åœ¨äº UI æ„å»º ï¼š React Native ï¼š React Native æ˜¯ä¸€å¥— UI æ¡†æ¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ React Native ä¼šåœ¨ Activity ä¸‹åŠ è½½ JS æ–‡ä»¶ï¼Œç„¶åè¿è¡Œåœ¨ JavaScriptCore ä¸­è§£æ Bundle æ–‡ä»¶å¸ƒå±€ï¼Œæœ€ç»ˆå †å å‡ºä¸€ç³»åˆ—çš„åŸç”Ÿæ§ä»¶è¿›è¡Œæ¸²æŸ“ã€‚ ç®€å•æ¥è¯´å°±æ˜¯ é€šè¿‡å†™ JS ä»£ç é…ç½®é¡µé¢å¸ƒå±€ï¼Œç„¶å React Native æœ€ç»ˆä¼šè§£ææ¸²æŸ“æˆåŸç”Ÿæ§ä»¶ï¼Œå¦‚ &lt;View&gt; æ ‡ç­¾å¯¹åº” ViewGroup/UIView ï¼Œ&lt;ScrollView&gt; æ ‡ç­¾å¯¹åº” ScrollView/UIScrollView ï¼Œ&lt;Image&gt; æ ‡ç­¾å¯¹åº” ImageView/UIImageView ç­‰ã€‚ Flutter ï¼š å¦‚æœè¯´ React Native æ˜¯ä¸ºå¼€å‘è€…åšäº†å¹³å°å…¼å®¹ï¼Œé‚£ Flutter åˆ™æ›´åƒæ˜¯ä¸ºå¼€å‘è€…å±è”½å¹³å°çš„æ¦‚å¿µã€‚ Flutter ä¸­ç»å¤§éƒ¨åˆ†çš„ Widget éƒ½ä¸å¹³å°æ— å…³ï¼Œ å¼€å‘è€…åŸºäº Framework å¼€å‘ App ï¼Œè€Œ Framework è¿è¡Œåœ¨ Engine ä¹‹ä¸Šï¼Œç”± Engine è¿›è¡Œé€‚é…å’Œè·¨å¹³å°æ”¯æŒã€‚è¿™ä¸ªè·¨å¹³å°çš„æ”¯æŒè¿‡ç¨‹ï¼Œå…¶å®å°±æ˜¯å°† Flutter UI ä¸­çš„ Widget â€œæ•°æ®åŒ–â€ ï¼Œç„¶åé€šè¿‡ Engine ä¸Šçš„ Skia ç›´æ¥ç»˜åˆ¶åˆ°å±å¹•ä¸Š ã€‚ å‚è€ƒé“¾æ¥ï¼šFlutter ä¸ React Native çš„å¯¹æ¯”åˆ†æ 16.å¹³æ—¶æ€ä¹ˆå­¦ä¹  iOSï¼Ÿä¸Šå®¶å…¬å¸çš„ç¦»èŒåŸå› ï¼Œæœªæ¥è§„åˆ’ï¼Œæœ‰æ²¡æœ‰è¦é—®æˆ‘çš„ï¼Ÿ","link":"/è±†ç“£é¢è¯•é¢˜/"},{"title":"è´å£³","text":"è´å£³ä¸€é¢ï¼š 1.SDKä½“ç§¯ä¼˜åŒ–ï¼Œä»å¤šå¤§ä¼˜åŒ–åˆ°äº†å¤šå¤§ï¼Œä¸ºä»€ä¹ˆå‡å°‘Masonyçš„ä½¿ç”¨ä¼šå‡å°‘åŒ…å¤§å° 2.åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼Œä¸¤å¥—ç½‘ç»œè¯·æ±‚çš„é—®é¢˜ 3.ä¸Šä¼ è§†é¢‘éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿè§†é¢‘å¾ˆå¤§ï¼Œåˆ†ç‰‡ï¼Œå†…å­˜å ç”¨ 4.è‡ªåŠ¨é‡Šæ”¾æ± ï¼Œä»€ä¹ˆæ—¶å€™ä¼šåŠ  autoreleaseï¼Œä¸€ä¸ªæ–¹æ³•é‡Œï¼Œallocä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŠ äº†autoreleaseå—ï¼Ÿå¦‚æœè¿™ä¸ªæ–¹æ³•è¿”å›äº†è¿™ä¸ªå¯¹è±¡å‘¢ï¼Ÿè‡ªåŠ¨é‡Šæ”¾æ± èƒ½åµŒå¥—å—ï¼Ÿ 5.å¾ªç¯å¼•ç”¨ï¼Œblockä»€ä¹ˆæ—¶å€™å¾ªç¯å¼•ç”¨ï¼Œblockç”¨åˆ°äº†_xxxæˆå‘˜å˜é‡ï¼Œä¼šå¾ªç¯å¼•ç”¨å—ï¼Ÿæˆå‘˜å˜é‡ä¼šç¼–è¯‘æˆä»€ä¹ˆ self -&gt; 6.NSTimerçš„å¾ªç¯å¼•ç”¨ï¼Œä¸ºä»€ä¹ˆï¼Ÿ 7.å¤šçº¿ç¨‹ï¼šA/B/Cå¹¶å‘ï¼Œè¯·æ±‚å®Œæˆåæ‰§è¡Œå…¶ä»–ä»»åŠ¡ äºŒé¢ï¼š 1.é€šç”¨åŒ–æŠ€æœ¯æå‡è¿­ä»£æ•ˆç‡æŒ‡çš„ä»€ä¹ˆï¼Ÿå¡ç‰‡ç­‰æ˜¯ä»€ä¹ˆå®ç°çš„ 2.å¤šçº¿ç¨‹ï¼šA -&gt; B C -&gt; D Bä¾èµ–Aã€Dä¾èµ–Cï¼Œéƒ½å®Œæˆåæ‰§è¡ŒE 3.ä»£ç†å’Œblockæ€ä¹ˆé€‰å‹ï¼Ÿ 4.é¡µé¢ä¼ å€¼ä¸€å¯¹å¤šæ€ä¹ˆå®ç°ï¼Ÿå¯¹è±¡åŠ åˆ°æ•°ç»„é‡Œï¼Œè¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å¢åŠ äº†å—ï¼Ÿweakå‘¢ï¼Ÿ 5.SDWebImageåŸç†ï¼Œè§£ç æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™åšçš„ï¼Ÿä¸€å¼ å›¾ç‰‡åŠ è½½åˆ°ç•Œé¢çš„è¿‡ç¨‹ï¼Œå¤§å›¾åŠ è½½ 6.è®¾è®¡ï¼šå¤šä¸ªå¼¹çª—ä¾æ¬¡å¼¹å‡ºï¼Œæœ‰ä¼˜å…ˆçº§ ä¸‰é¢ï¼š 1.iOSä¸­é‡åˆ°è¿‡çš„ä¸æ˜“è§£å†³çš„é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³çš„ï¼Ÿ 2.A -&gt; B -&gt; C ç”¨è·¯ç”±çš„æ–¹å¼åå‘ä¼ å€¼ï¼Œä»€ä¹ˆæ˜¯è·¯ç”±ï¼Ÿä»€ä¹ˆæ—¶å€™æ³¨å†Œï¼Ÿå‚æ•°æ˜¯ä»€ä¹ˆç±»å‹ï¼Ÿ 3.autoreleasePoolå’ŒRunloopçš„å…³ç³» 4.mach-oäº†è§£å—ï¼Ÿ å‚è€ƒç­”æ¡ˆ ä¸€é¢ï¼š 1.SDKä½“ç§¯ä¼˜åŒ–ï¼Œä»å¤šå¤§ä¼˜åŒ–åˆ°äº†å¤šå¤§ï¼Œä¸ºä»€ä¹ˆå‡å°‘Masonyçš„ä½¿ç”¨ä¼šå‡å°‘åŒ…å¤§å° 2.åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼Œä¸¤å¥—ç½‘ç»œè¯·æ±‚çš„é—®é¢˜ 3.ä¸Šä¼ è§†é¢‘éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿè§†é¢‘å¾ˆå¤§ï¼Œåˆ†ç‰‡ï¼Œå†…å­˜å ç”¨ åœ¨iOSå¼€å‘ä¸­ï¼Œç½‘ç»œè¯·æ±‚ä¸Šä¼ è§†é¢‘æ˜¯ä¸€ä¸ªå¸¸è§çš„éœ€æ±‚ï¼Œå°¤å…¶æ˜¯å½“è§†é¢‘æ–‡ä»¶è¾ƒå¤§æ—¶ï¼Œæ›´éœ€è¦æ³¨æ„ä¸€ç³»åˆ—çš„æŠ€æœ¯ç»†èŠ‚å’Œä¼˜åŒ–æ‰‹æ®µä»¥ç¡®ä¿ä¸Šä¼ è¿‡ç¨‹çš„ç¨³å®šæ€§ã€æ•ˆç‡å’Œç”¨æˆ·ä½“éªŒã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®çš„æ³¨æ„äº‹é¡¹å’Œä¼˜åŒ–æ‰‹æ®µï¼š æ³¨æ„äº‹é¡¹ æ–‡ä»¶å¤§å°æ£€æµ‹ï¼š åœ¨ä¸Šä¼ å‰ï¼Œå…ˆæ£€æŸ¥è§†é¢‘æ–‡ä»¶çš„å¤§å°ï¼Œé¿å…ä¸Šä¼ è¿‡å¤§çš„æ–‡ä»¶å¯¼è‡´å†…å­˜æº¢å‡ºæˆ–ä¸Šä¼ æ—¶é—´è¿‡é•¿ã€‚ ç½‘ç»œçŠ¶æ€æ£€æµ‹ï¼š æ£€æµ‹ç”¨æˆ·çš„ç½‘ç»œçŠ¶æ€ï¼ˆå¦‚Wi-Fiã€4G/5Gç­‰ï¼‰ï¼Œæ ¹æ®ç½‘ç»œçŠ¶å†µè°ƒæ•´ä¸Šä¼ ç­–ç•¥ï¼Œå¦‚åœ¨ç½‘ç»œè¾ƒå·®æ—¶æš‚åœä¸Šä¼ æˆ–æç¤ºç”¨æˆ·ã€‚ ç”¨æˆ·åé¦ˆï¼š æä¾›æ¸…æ™°çš„ä¸Šä¼ è¿›åº¦åé¦ˆï¼Œè®©ç”¨æˆ·äº†è§£ä¸Šä¼ çš„å½“å‰çŠ¶æ€å’Œé¢„è®¡å‰©ä½™æ—¶é—´ã€‚ æƒé™æ£€æŸ¥ï¼š ç¡®ä¿åº”ç”¨å·²è·å–å¿…è¦çš„æƒé™ï¼Œå¦‚è®¿é—®ç›¸å†Œæˆ–ç›¸æœºæƒé™ï¼Œä»¥ä¾¿è¯»å–è§†é¢‘æ–‡ä»¶ã€‚ ä¼˜åŒ–æ‰‹æ®µ è§†é¢‘å‹ç¼©ï¼š åœ¨ä¸Šä¼ å‰å¯¹è§†é¢‘è¿›è¡Œå‹ç¼©ï¼Œå‡å°æ–‡ä»¶å¤§å°ï¼Œä»è€Œå‡å°‘ä¸Šä¼ æ—¶é—´å’Œå ç”¨çš„ç½‘ç»œå¸¦å®½ã€‚å¯ä»¥ä½¿ç”¨å¦‚FFmpegç­‰åº“è¿›è¡Œè§†é¢‘è½¬ç å’Œå‹ç¼©ã€‚ åˆ†ç‰‡ä¸Šä¼ ï¼š å°†å¤§è§†é¢‘æ–‡ä»¶åˆ†å‰²æˆå¤šä¸ªè¾ƒå°çš„ç‰‡æ®µï¼Œå¹¶è¡Œä¸Šä¼ è¿™äº›ç‰‡æ®µã€‚è¿™æ ·å¯ä»¥æ˜¾è‘—æé«˜ä¸Šä¼ é€Ÿåº¦ï¼Œå¹¶é™ä½å› ç½‘ç»œé—®é¢˜å¯¼è‡´ä¸Šä¼ å¤±è´¥çš„é£é™©ã€‚å½“æ‰€æœ‰ç‰‡æ®µéƒ½ä¸Šä¼ å®Œæˆåï¼ŒæœåŠ¡å™¨ç«¯å¯ä»¥å°†è¿™äº›ç‰‡æ®µåˆå¹¶æˆå®Œæ•´çš„è§†é¢‘ã€‚ æ–­ç‚¹ç»­ä¼ ï¼š æ”¯æŒæ–­ç‚¹ç»­ä¼ åŠŸèƒ½ï¼Œå³åœ¨ç½‘ç»œä¸­æ–­æˆ–åº”ç”¨é€€å‡ºç­‰æƒ…å†µä¸‹ï¼Œèƒ½åœ¨ä¸‹æ¬¡ä¸Šä¼ æ—¶ä»ä¸Šæ¬¡ä¸­æ–­çš„åœ°æ–¹ç»§ç»­ä¸Šä¼ ï¼Œè€Œä¸æ˜¯é‡æ–°å¼€å§‹ä¸Šä¼ æ•´ä¸ªè§†é¢‘ã€‚ é€‚å½“è®¾ç½®HTTPå¤´éƒ¨ï¼š è®¾ç½®åˆé€‚çš„Content-Typeï¼Œå¹¶ç¡®ä¿HTTPå¤´éƒ¨ä¸­çš„å…¶ä»–å­—æ®µï¼ˆå¦‚Content-Lengthï¼‰æ­£ç¡®æ— è¯¯ã€‚å¯¹äºåˆ†ç‰‡ä¸Šä¼ ï¼Œæ¯ä¸ªç‰‡æ®µè¯·æ±‚éƒ½åº”æœ‰å¯¹åº”çš„å¤´éƒ¨ä¿¡æ¯ã€‚ ä½¿ç”¨åˆé€‚çš„ç½‘ç»œåº“ï¼š åˆ©ç”¨æˆç†Ÿçš„ç½‘ç»œåº“ï¼ˆå¦‚AFNetworkingã€URLSessionç­‰ï¼‰æ¥ç®€åŒ–ç½‘ç»œè¯·æ±‚çš„ä»£ç é‡ï¼Œå¹¶åˆ©ç”¨è¿™äº›åº“æä¾›çš„ä¼˜åŒ–åŠŸèƒ½æ¥æé«˜ä¸Šä¼ æ•ˆç‡ã€‚ ç¼“å­˜ç­–ç•¥ï¼š å¯¹äºå·²ä¸Šä¼ çš„è§†é¢‘æˆ–ç‰‡æ®µï¼Œå¯ä»¥åœ¨æœ¬åœ°ç¼“å­˜å…¶çŠ¶æ€å’Œä¿¡æ¯ï¼Œä»¥ä¾¿åœ¨ç½‘ç»œæ¢å¤æˆ–åº”ç”¨é‡å¯æ—¶å¿«é€Ÿæ¢å¤ä¸Šä¼ çŠ¶æ€ã€‚ åå°ä¸Šä¼ ï¼š åˆ©ç”¨iOSçš„åå°ä»»åŠ¡åŠŸèƒ½ï¼Œåœ¨åº”ç”¨è¿›å…¥åå°æ—¶ç»§ç»­ä¸Šä¼ è§†é¢‘ï¼Œä¸å½±å“ç”¨æˆ·çš„å…¶ä»–æ“ä½œã€‚ é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶ï¼š å®ç°å®Œå–„çš„é”™è¯¯å¤„ç†é€»è¾‘ï¼Œå½“ä¸Šä¼ å¤±è´¥æ—¶ï¼Œæ ¹æ®é”™è¯¯ç±»å‹è¿›è¡Œé‡è¯•æˆ–æç¤ºç”¨æˆ·ã€‚å¯ä»¥è®¾ç½®åˆç†çš„é‡è¯•æ¬¡æ•°å’Œé‡è¯•é—´éš”ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼ŒiOSç½‘ç»œè¯·æ±‚ä¸Šä¼ è§†é¢‘æ—¶éœ€è¦æ³¨æ„å¤šä¸ªæ–¹é¢ï¼Œå¹¶é€šè¿‡ä¸€ç³»åˆ—ä¼˜åŒ–æ‰‹æ®µæ¥æé«˜ä¸Šä¼ çš„æ•ˆç‡å’Œç¨³å®šæ€§ã€‚è¿™äº›ä¼˜åŒ–æ‰‹æ®µä¸ä»…æœ‰åŠ©äºæå‡ç”¨æˆ·ä½“éªŒï¼Œè¿˜èƒ½é™ä½å› ç½‘ç»œé—®é¢˜å¯¼è‡´çš„æ•°æ®ä¸¢å¤±é£é™©ã€‚ 4.è‡ªåŠ¨é‡Šæ”¾æ± ï¼Œä»€ä¹ˆæ—¶å€™ä¼šåŠ  autoreleaseï¼Œä¸€ä¸ªæ–¹æ³•é‡Œï¼Œallocä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŠ äº†autoreleaseå—ï¼Ÿå¦‚æœè¿™ä¸ªæ–¹æ³•è¿”å›äº†è¿™ä¸ªå¯¹è±¡å‘¢ï¼Ÿè‡ªåŠ¨é‡Šæ”¾æ± èƒ½åµŒå¥—å—ï¼Ÿ 5.å¾ªç¯å¼•ç”¨ï¼Œblockä»€ä¹ˆæ—¶å€™å¾ªç¯å¼•ç”¨ï¼Œblockç”¨åˆ°äº†_xxxæˆå‘˜å˜é‡ï¼Œä¼šå¾ªç¯å¼•ç”¨å—ï¼Ÿæˆå‘˜å˜é‡ä¼šç¼–è¯‘æˆä»€ä¹ˆ self -&gt; 6.NSTimerçš„å¾ªç¯å¼•ç”¨ï¼Œä¸ºä»€ä¹ˆï¼Ÿ 7.å¤šçº¿ç¨‹ï¼šA/B/Cå¹¶å‘ï¼Œè¯·æ±‚å®Œæˆåæ‰§è¡Œå…¶ä»–ä»»åŠ¡ äºŒé¢ï¼š 1.é€šç”¨åŒ–æŠ€æœ¯æå‡è¿­ä»£æ•ˆç‡æŒ‡çš„ä»€ä¹ˆï¼Ÿå¡ç‰‡ç­‰æ˜¯ä»€ä¹ˆå®ç°çš„ 2.å¤šçº¿ç¨‹ï¼šA -&gt; B C -&gt; D Bä¾èµ–Aã€Dä¾èµ–Cï¼Œéƒ½å®Œæˆåæ‰§è¡ŒE 3.ä»£ç†å’Œblockæ€ä¹ˆé€‰å‹ï¼Ÿ 4.é¡µé¢ä¼ å€¼ä¸€å¯¹å¤šæ€ä¹ˆå®ç°ï¼Ÿå¯¹è±¡åŠ åˆ°æ•°ç»„é‡Œï¼Œè¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å¢åŠ äº†å—ï¼Ÿweakå‘¢ï¼Ÿ 5.SDWebImageåŸç†ï¼Œè§£ç æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™åšçš„ï¼Ÿä¸€å¼ å›¾ç‰‡åŠ è½½åˆ°ç•Œé¢çš„è¿‡ç¨‹ï¼Œå¤§å›¾åŠ è½½ 6.è®¾è®¡ï¼šå¤šä¸ªå¼¹çª—ä¾æ¬¡å¼¹å‡ºï¼Œæœ‰ä¼˜å…ˆçº§ ä¸‰é¢ï¼š 1.iOSä¸­é‡åˆ°è¿‡çš„ä¸æ˜“è§£å†³çš„é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³çš„ï¼Ÿ 2.A -&gt; B -&gt; C ç”¨è·¯ç”±çš„æ–¹å¼åå‘ä¼ å€¼ï¼Œä»€ä¹ˆæ˜¯è·¯ç”±ï¼Ÿä»€ä¹ˆæ—¶å€™æ³¨å†Œï¼Ÿå‚æ•°æ˜¯ä»€ä¹ˆç±»å‹ï¼Ÿ åœ¨iOSåº”ç”¨ä¸­é€šè¿‡è·¯ç”±æœºåˆ¶è¿›è¡Œé¡µé¢å¯¼èˆªå’Œæ•°æ®ä¼ é€’æ—¶ï¼Œæœ‰æ—¶éœ€è¦å°†æ•°æ®ä»ä¸€ä¸ªé¡µé¢ä¼ é€’å›åˆ°ä¹‹å‰çš„é¡µé¢ã€‚å¯ä»¥é€šè¿‡é—­åŒ…ï¼ˆBlockï¼‰æ¥å®ç°è¿™ç§åå‘ä¼ å€¼ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè¯¦ç»†çš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•é€šè¿‡è·¯ç”±æœºåˆ¶è¿›è¡Œåå‘ä¼ å€¼ã€‚ ç¤ºä¾‹ï¼šé€šè¿‡è·¯ç”±è¿›è¡Œåå‘ä¼ å€¼å‡è®¾æˆ‘ä»¬æœ‰ä¸‰ä¸ªé¡µé¢ï¼šA -&gt; B -&gt; Cï¼Œå¹¶å¸Œæœ›åœ¨Cé¡µé¢å®ŒæˆæŸäº›æ“ä½œåå°†æ•°æ®ä¼ å›Aé¡µé¢ã€‚ 1. å®šä¹‰è·¯ç”±ç®¡ç†å™¨é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè·¯ç”±ç®¡ç†å™¨æ¥ç®¡ç†å¯¼èˆªå’Œæ•°æ®ä¼ é€’ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªå•ä¾‹ç±»Routeræ¥å®ç°ã€‚ 1234567891011121314// Router.h#import &lt;Foundation/Foundation.h&gt;#import &lt;UIKit/UIKit.h&gt;typedef void (^CompletionHandler)(id data);@interface Router : NSObject+ (instancetype)sharedInstance;- (void)registerPath:(NSString *)path forClass:(Class)className;- (void)openPath:(NSString *)path withParams:(NSDictionary *)params completionHandler:(CompletionHandler)completionHandler;@end 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647// Router.m#import \"Router.h\"@interface Router ()@property (nonatomic, strong) NSMutableDictionary *routeMap;@end@implementation Router+ (instancetype)sharedInstance { static Router *instance; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ instance = [[Router alloc] init]; }); return instance;}- (instancetype)init { self = [super init]; if (self) { _routeMap = [NSMutableDictionary dictionary]; } return self;}- (void)registerPath:(NSString *)path forClass:(Class)className { self.routeMap[path] = className;}- (void)openPath:(NSString *)path withParams:(NSDictionary *)params completionHandler:(CompletionHandler)completionHandler { Class className = self.routeMap[path]; if (className) { UIViewController *viewController = [[className alloc] init]; if ([viewController isKindOfClass:[UIViewController class]]) { if (completionHandler) { [viewController setValue:completionHandler forKey:@\"completionHandler\"]; } [viewController setValuesForKeysWithDictionary:params]; [[UIApplication sharedApplication].keyWindow.rootViewController presentViewController:viewController animated:YES completion:nil]; } } else { NSLog(@\"No route found for path: %@\", path); }}@end 2. å®šä¹‰é¡µé¢Cåœ¨Cé¡µé¢ä¸­å®šä¹‰ä¸€ä¸ªå›è°ƒBlockï¼Œç”¨äºä¼ é€’æ•°æ®ã€‚ 123456// CViewController.h#import &lt;UIKit/UIKit.h&gt;@interface CViewController : UIViewController@property (nonatomic, copy) void (^completionHandler)(id data);@end åœ¨Cé¡µé¢å®Œæˆæ“ä½œæ—¶è°ƒç”¨å›è°ƒBlockã€‚ 12345678910111213141516171819202122232425// CViewController.m#import \"CViewController.h\"@implementation CViewController- (void)viewDidLoad { [super viewDidLoad]; self.view.backgroundColor = [UIColor whiteColor]; UIButton *button = [UIButton buttonWithType:UIButtonTypeSystem]; button.frame = CGRectMake(100, 100, 100, 50); [button setTitle:@\"Send Data\" forState:UIControlStateNormal]; [button addTarget:self action:@selector(sendData) forControlEvents:UIControlEventTouchUpInside]; [self.view addSubview:button];}- (void)sendData { NSString *data = @\"Some data from C\"; if (self.completionHandler) { self.completionHandler(data); } [self dismissViewControllerAnimated:YES completion:nil];}@end 3. æ³¨å†Œè·¯ç”±åœ¨AppDelegateä¸­æ³¨å†Œè·¯ç”±ã€‚ 123456789101112131415161718// AppDelegate.m#import \"AppDelegate.h\"#import \"Router.h\"#import \"AViewController.h\"#import \"BViewController.h\"#import \"CViewController.h\"- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { [[Router sharedInstance] registerPath:@\"a\" forClass:[AViewController class]]; [[Router sharedInstance] registerPath:@\"b\" forClass:[BViewController class]]; [[Router sharedInstance] registerPath:@\"c\" forClass:[CViewController class]]; self.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds]; self.window.rootViewController = [[AViewController alloc] init]; [self.window makeKeyAndVisible]; return YES;} 4. ä½¿ç”¨è·¯ç”±åœ¨Aé¡µé¢ä¸­å¯¼èˆªåˆ°Cé¡µé¢å¹¶å¤„ç†å›è°ƒã€‚ 12345678910111213141516171819202122232425// AViewController.m#import \"AViewController.h\"#import \"Router.h\"@implementation AViewController- (void)viewDidLoad { [super viewDidLoad]; self.view.backgroundColor = [UIColor whiteColor]; UIButton *button = [UIButton buttonWithType:UIButtonTypeSystem]; button.frame = CGRectMake(100, 100, 100, 50); [button setTitle:@\"Go to C\" forState:UIControlStateNormal]; [button addTarget:self action:@selector(openCViewController) forControlEvents:UIControlEventTouchUpInside]; [self.view addSubview:button];}- (void)openCViewController { [[Router sharedInstance] openPath:@\"c\" withParams:@{} completionHandler:^(id data) { NSLog(@\"Received data: %@\", data); // å¤„ç†æ¥æ”¶åˆ°çš„æ•°æ® }];}@end æ€»ç»“é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ å¯ä»¥å®ç°é¡µé¢é—´çš„æ•°æ®ä¼ é€’å’Œåå‘ä¼ å€¼ã€‚è·¯ç”±ç®¡ç†å™¨è´Ÿè´£ç®¡ç†é¡µé¢çš„å¯¼èˆªå’Œæ•°æ®ä¼ é€’ï¼Œé¡µé¢Cé€šè¿‡å›è°ƒBlockå°†æ•°æ®ä¼ å›Aé¡µé¢ã€‚è¿™ç§æ–¹æ³•ä¸ä»…ç®€åŒ–äº†é¡µé¢é—´çš„æ•°æ®ä¼ é€’ï¼Œè¿˜ä¿æŒäº†ä»£ç çš„æ¸…æ™°å’Œå¯ç»´æŠ¤æ€§ã€‚ 3.autoreleasePoolå’ŒRunloopçš„å…³ç³» 4.mach-oäº†è§£å—ï¼Ÿ","link":"/è´å£³/"},{"title":"å»å“ªå„¿ç½‘","text":"å»å“ªå„¿ç½‘1.é¡¹ç›® é™ä½ä¸‰æ–¹ App æ¥å…¥æˆæœ¬æ€ä¹ˆåšçš„ï¼Ÿ åŠ è½½é€Ÿåº¦ä¼˜åŒ–æ€ä¹ˆåšçš„ï¼Ÿä¸»è¦æ˜¯ä»ä¸šåŠ¡é€»è¾‘çº¬åº¦å¤„ç†çš„ï¼Ÿ å¼‚å¸¸ç›‘æ§æ€ä¹ˆåšçš„ï¼Ÿ åŠ¨æ€åº“ç‰ˆå¼ç¼©æ”¾æ€ä¹ˆå®ç°çš„ï¼Ÿ 2.çº¿ä¸Šé—ªé€€æ•è·æ€ä¹ˆåšçš„ï¼Ÿæœ‰æ²¡æœ‰æ•è·ä¸åˆ°çš„å¼‚å¸¸ï¼Œwatchdog èƒ½æ•è·å—ï¼ŸAPM æ€§èƒ½ç›‘æ§ 3.RN æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿè·¨ç«¯è¿˜äº†è§£å“ªäº›ï¼ŸFlutteræ˜¯æ€ä¹ˆå®ç°çš„ï¼Œä¸ºä»€ä¹ˆè¯´ Flutter çš„æ€§èƒ½æ¯” RN å¥½ï¼Ÿ 4.H5 å’ŒåŸç”Ÿé€šä¿¡æœ‰å“ªäº›æ–¹æ³•ï¼Ÿ 5.æ€ä¹ˆæå‡ webView çš„åŠ è½½é€Ÿåº¦ï¼Œä½¿å…¶æ¥è¿‘åŸç”Ÿï¼Ÿå¤§çš„å›¾ç‰‡ã€JS ç­‰ç«¯ä¸Šä¸‹è½½åï¼Œæ€ä¹ˆäº¤ç»™H5ä½¿ç”¨ 6.å°ç¨‹åºæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ 7.å‰ç«¯ JS çš„å¼‚æ­¥æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ 8.é¡¹ç›®äº®ç‚¹ å‚è€ƒç­”æ¡ˆ(GPT) 1.é¡¹ç›® é™ä½ä¸‰æ–¹ App æ¥å…¥æˆæœ¬æ€ä¹ˆåšçš„ï¼Ÿ åŠ è½½é€Ÿåº¦ä¼˜åŒ–æ€ä¹ˆåšçš„ï¼Ÿä¸»è¦æ˜¯ä»ä¸šåŠ¡é€»è¾‘çº¬åº¦å¤„ç†çš„ï¼Ÿ å¼‚å¸¸ç›‘æ§æ€ä¹ˆåšçš„ï¼Ÿ åŠ¨æ€åº“ç‰ˆå¼ç¼©æ”¾æ€ä¹ˆå®ç°çš„ï¼Ÿ 2.çº¿ä¸Šé—ªé€€æ•è·æ€ä¹ˆåšçš„ï¼Ÿæœ‰æ²¡æœ‰æ•è·ä¸åˆ°çš„å¼‚å¸¸ï¼Œwatchdogèƒ½æ•è·å—ï¼ŸAPM æ€§èƒ½ç›‘æ§ç§»åŠ¨ç«¯ç›‘æ§ä½“ç³»ä¹‹æŠ€æœ¯åŸç†å‰–æ iOS Crash æ•è·åŠå †æ ˆç¬¦å·åŒ–æ€è·¯å‰–æ çŸ¥ä¹-iOSäº‘éŸ³ä¹APMæ€§èƒ½ç›‘æ§å®è·µ 3.RN æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿè·¨ç«¯è¿˜äº†è§£å“ªäº›ï¼ŸFlutter æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œä¸ºä»€ä¹ˆè¯´ Flutter çš„æ€§èƒ½æ¯” RN å¥½ï¼ŸReact Native é€šè¿‡ JavaScript å’ŒåŸç”Ÿä»£ç ä¹‹é—´çš„æ¡¥æ¥ï¼Œå®ç°äº†è·¨å¹³å°çš„ç§»åŠ¨åº”ç”¨å¼€å‘ã€‚å…¶æ ¸å¿ƒæ˜¯é€šè¿‡ Bridge åœ¨ JavaScript å’ŒåŸç”Ÿçº¿ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡ï¼Œä½¿ç”¨ React æ„å»ºç”¨æˆ·ç•Œé¢ï¼Œå¹¶é€šè¿‡ Yoga å¼•æ“å¤„ç†å¸ƒå±€ã€‚è¿™æ ·ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨ç†Ÿæ‚‰çš„ JavaScript å’Œ React æŠ€æœ¯æ ˆæ¥æ„å»ºé«˜æ€§èƒ½çš„ç§»åŠ¨åº”ç”¨ï¼ŒåŒæ—¶äº«å—åŸç”Ÿæ€§èƒ½å’Œä½“éªŒã€‚ Flutter é€šè¿‡ä½¿ç”¨ Dart è¯­è¨€ã€Skia å›¾å½¢å¼•æ“å’Œè‡ªå®šä¹‰çš„æ¸²æŸ“å¼•æ“ï¼Œå®ç°äº†è·¨å¹³å°çš„é«˜æ€§èƒ½åº”ç”¨å¼€å‘ã€‚å…¶æ ¸å¿ƒæ˜¯å®Œå…¨è‡ªè¡Œç»˜åˆ¶ç•Œé¢ï¼Œä¸ä¾èµ–äºå¹³å°çš„åŸç”Ÿæ§ä»¶ï¼Œæä¾›äº†ä¸€ç§ä¸€è‡´çš„å¼€å‘ä½“éªŒå’Œç”¨æˆ·ä½“éªŒã€‚Flutter çš„ Widget ç³»ç»Ÿã€æ¸²æŸ“æ ‘ã€çŠ¶æ€ç®¡ç†å’Œå¹³å°é€šé“ç­‰æœºåˆ¶ï¼Œä½¿å…¶èƒ½å¤Ÿé«˜æ•ˆåœ°æ„å»ºå¤æ‚çš„è·¨å¹³å°åº”ç”¨ã€‚ Flutter å’Œ React Nativeï¼ˆRNï¼‰æ˜¯ä¸¤ç§æµè¡Œçš„è·¨å¹³å°ç§»åŠ¨åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œå„æœ‰å…¶ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚æ€§èƒ½æ˜¯è¯„ä¼°è¿™ä¸¤ç§æ¡†æ¶çš„ä¸€ä¸ªé‡è¦æ–¹é¢ã€‚ä»¥ä¸‹æ˜¯ä»å¤šä¸ªè§’åº¦å¯¹ Flutter å’Œ React Native æ€§èƒ½çš„æ¯”è¾ƒï¼š 1. å¯åŠ¨æ—¶é—´ Flutter: Flutter åº”ç”¨çš„å¯åŠ¨æ—¶é—´é€šå¸¸è¾ƒå¿«ï¼Œå› ä¸º Flutter ä½¿ç”¨äº† AOTï¼ˆAhead-of-Timeï¼‰ç¼–è¯‘ï¼Œå°† Dart ä»£ç ç¼–è¯‘æˆäº†åŸç”Ÿ ARM ä»£ç ã€‚åœ¨å¯åŠ¨æ—¶ï¼Œæ— éœ€è¿›è¡Œé¢å¤–çš„è§£é‡Šæˆ–ç¼–è¯‘æ­¥éª¤ã€‚ React Native: React Native åº”ç”¨çš„å¯åŠ¨æ—¶é—´å¯èƒ½ç¨æ…¢ä¸€äº›ï¼Œå› ä¸ºå®ƒä¾èµ–äº JavaScriptCoreï¼ˆiOSï¼‰æˆ– Hermes å¼•æ“ï¼ˆAndroidï¼‰æ¥è§£é‡Šå’Œæ‰§è¡Œ JavaScript ä»£ç ã€‚å°½ç®¡ Hermes å¼•æ“åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥å‡å°‘å¯åŠ¨æ—¶é—´ï¼Œä½†å®ƒä»ç„¶éœ€è¦ä¸€äº›åˆå§‹åŒ–æ­¥éª¤ã€‚ 2. UI æ¸²æŸ“æ€§èƒ½ Flutter: Flutter ä½¿ç”¨ Skia å›¾å½¢å¼•æ“ç›´æ¥ç»˜åˆ¶åˆ°å±å¹•ä¸Šï¼Œè¿™ä½¿å¾— Flutter å¯ä»¥æä¾›éå¸¸æµç•…çš„ UI æ¸²æŸ“æ€§èƒ½ã€‚Flutter çš„æ¸²æŸ“æ˜¯é€å¸§è¿›è¡Œçš„ï¼Œé€šå¸¸å¯ä»¥è¾¾åˆ° 60fps æˆ– 120fpsã€‚ React Native: React Native ä¾èµ–äºåŸç”Ÿå¹³å°çš„æ§ä»¶å’Œç»„ä»¶è¿›è¡Œæ¸²æŸ“ï¼Œé€šè¿‡ Bridge è¿›è¡Œ JavaScript å’ŒåŸç”Ÿä»£ç çš„é€šä¿¡ã€‚è¿™ç§æ¡¥æ¥æœºåˆ¶å¯èƒ½ä¼šå¯¼è‡´ä¸€å®šçš„æ€§èƒ½ç“¶é¢ˆï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤æ‚åŠ¨ç”»å’Œå¤§é‡ UI æ›´æ–°æ—¶ã€‚ 3. åŠ¨ç”»æ€§èƒ½ Flutter: Flutter çš„åŠ¨ç”»æ€§èƒ½é€šå¸¸éå¸¸å‡ºè‰²ï¼Œå› ä¸ºåŠ¨ç”»æ˜¯åœ¨ Flutter çš„æ¸²æŸ“å¼•æ“ä¸­ç›´æ¥å¤„ç†çš„ï¼Œæ²¡æœ‰é¢å¤–çš„é€šä¿¡å¼€é”€ã€‚Flutter æä¾›äº†ä¸°å¯Œçš„åŠ¨ç”»åº“å’Œå·¥å…·ï¼Œä½¿å¼€å‘è€…å¯ä»¥è½»æ¾åˆ›å»ºå¤æ‚å’Œæµç•…çš„åŠ¨ç”»ã€‚ React Native: React Native çš„åŠ¨ç”»æ€§èƒ½åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¸å¦‚ Flutterï¼Œå› ä¸ºåŠ¨ç”»éœ€è¦é€šè¿‡ Bridge è¿›è¡Œé€šä¿¡ã€‚è™½ç„¶ React Native æä¾›äº† Animated API å’Œ Reanimated åº“æ¥ä¼˜åŒ–åŠ¨ç”»æ€§èƒ½ï¼Œä½†åœ¨å¤„ç†éå¸¸å¤æ‚çš„åŠ¨ç”»æ—¶ï¼Œå¯èƒ½ä»ç„¶ä¼šé‡åˆ°æ€§èƒ½é—®é¢˜ã€‚ 4. å†…å­˜ä½¿ç”¨ Flutter: Flutter çš„å†…å­˜ä½¿ç”¨é€šå¸¸è¾ƒä¸ºé«˜æ•ˆï¼Œä½†ç”±äºå®ƒå°†æ•´ä¸ª UI æ ‘éƒ½ä¿æŒåœ¨å†…å­˜ä¸­ï¼Œå†…å­˜å ç”¨å¯èƒ½ä¼šéšç€åº”ç”¨å¤æ‚åº¦çš„å¢åŠ è€Œå¢åŠ ã€‚ React Native: React Native çš„å†…å­˜ä½¿ç”¨ä¹Ÿæ¯”è¾ƒé«˜æ•ˆï¼Œä¸è¿‡ç”±äº JavaScript è¿è¡Œæ—¶å’Œ Bridge çš„å­˜åœ¨ï¼Œå¯èƒ½ä¼šå¼•å…¥é¢å¤–çš„å†…å­˜å¼€é”€ã€‚ 5. å¼€å‘ä½“éªŒ Flutter: Flutter æä¾›äº†çƒ­é‡è½½ï¼ˆHot Reloadï¼‰åŠŸèƒ½ï¼Œä½¿å¼€å‘è€…å¯ä»¥å¿«é€Ÿçœ‹åˆ°ä»£ç ä¿®æ”¹çš„æ•ˆæœï¼Œæå¤§åœ°æé«˜äº†å¼€å‘æ•ˆç‡ã€‚Flutter çš„çƒ­é‡è½½é€šå¸¸é€Ÿåº¦éå¸¸å¿«ï¼Œä½“éªŒæµç•…ã€‚ React Native: React Native ä¹Ÿæä¾›äº†çƒ­é‡è½½å’Œå¿«é€Ÿåˆ·æ–°ï¼ˆFast Refreshï¼‰åŠŸèƒ½ï¼Œä¸è¿‡åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œçƒ­é‡è½½çš„é€Ÿåº¦å¯èƒ½ä¸å¦‚ Flutter å¿«ã€‚ 6. è·¨å¹³å°ä¸€è‡´æ€§ Flutter: ç”±äº Flutter ä½¿ç”¨äº†è‡ªå®šä¹‰çš„ç»˜å›¾å¼•æ“ï¼Œå®ƒåœ¨ä¸åŒå¹³å°ä¸Šçš„å¤–è§‚å’Œè¡Œä¸ºéå¸¸ä¸€è‡´ï¼Œå¼€å‘è€…å¯ä»¥æ›´åŠ ç²¾ç¡®åœ°æ§åˆ¶ UI çš„ç»†èŠ‚ã€‚ React Native: React Native ä½¿ç”¨çš„æ˜¯å¹³å°åŸç”Ÿæ§ä»¶ï¼Œè™½ç„¶è¿™æ„å‘³ç€å®ƒåœ¨ä¸åŒå¹³å°ä¸Šèƒ½æä¾›æ›´åŸç”Ÿçš„ä½“éªŒï¼Œä½†ä¹Ÿå¯èƒ½å¯¼è‡´ä¸åŒå¹³å°ä¹‹é—´çš„å¤–è§‚å’Œè¡Œä¸ºä¸ä¸€è‡´ã€‚ æ€»ç»“ Flutter åœ¨ UI æ¸²æŸ“æ€§èƒ½ã€åŠ¨ç”»æ€§èƒ½å’Œè·¨å¹³å°ä¸€è‡´æ€§æ–¹é¢é€šå¸¸ä¼˜äº React Nativeã€‚å…¶é«˜æ•ˆçš„æ¸²æŸ“å¼•æ“å’Œ AOT ç¼–è¯‘ä½¿å¾— Flutter åº”ç”¨çš„å¯åŠ¨æ—¶é—´å’Œè¿è¡Œæ€§èƒ½éƒ½éå¸¸å‡ºè‰²ã€‚ React Native åœ¨ä½¿ç”¨åŸç”Ÿæ§ä»¶å’Œè®¿é—®åŸç”Ÿå¹³å°åŠŸèƒ½æ–¹é¢æœ‰ä¼˜åŠ¿ï¼Œå¯ä»¥æä¾›æ›´åŸç”Ÿçš„ç”¨æˆ·ä½“éªŒã€‚ä¸è¿‡ï¼Œç”±äº JavaScript å’ŒåŸç”Ÿä»£ç ä¹‹é—´çš„æ¡¥æ¥æœºåˆ¶ï¼Œå¯èƒ½ä¼šåœ¨æŸäº›åœºæ™¯ä¸‹é‡åˆ°æ€§èƒ½ç“¶é¢ˆã€‚ æœ€ç»ˆé€‰æ‹©å“ªä¸ªæ¡†æ¶ï¼Œå–å†³äºå…·ä½“é¡¹ç›®çš„éœ€æ±‚å’Œå¼€å‘å›¢é˜Ÿçš„æŠ€æœ¯æ ˆã€‚å¦‚æœéœ€è¦éå¸¸é«˜æ€§èƒ½ã€æµç•…çš„åŠ¨ç”»å’Œä¸€è‡´çš„è·¨å¹³å°ä½“éªŒï¼ŒFlutter å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚å¦‚æœéœ€è¦æ›´åŸç”Ÿçš„å¤–è§‚å’Œæ„Ÿè§‰ï¼Œæˆ–è€…å¼€å‘å›¢é˜Ÿå·²ç»ç†Ÿæ‚‰ JavaScript å’Œ React ç”Ÿæ€ç³»ç»Ÿï¼ŒReact Native å¯èƒ½æ›´é€‚åˆã€‚ 4.H5 å’ŒåŸç”Ÿé€šä¿¡æœ‰å“ªäº›æ–¹æ³•ï¼Ÿ1. é€šè¿‡ URL SchemesURL Schemes æ˜¯ä¸€ç§é€šè¿‡ç‰¹å®š URL æ ¼å¼è§¦å‘åŸç”Ÿä»£ç çš„æ–¹æ³•ã€‚ 2. é€šè¿‡ WKScriptMessageHandlerWKScriptMessageHandler æ˜¯ WKWebView æä¾›çš„ç”¨äºæ¥æ”¶æ¥è‡ª JavaScript æ¶ˆæ¯çš„å¤„ç†å™¨ã€‚ H5 ä»£ç 1window.webkit.messageHandlers.myHandler.postMessage({key: 'value'}); iOS ä»£ç åœ¨ WKWebView çš„é…ç½®ä¸­æ·»åŠ ä¸€ä¸ªè„šæœ¬æ¶ˆæ¯å¤„ç†å™¨ï¼š 123456789101112131415161718192021222324252627import WebKitclass ViewController: UIViewController, WKScriptMessageHandler { var webView: WKWebView! override func viewDidLoad() { super.viewDidLoad() let config = WKWebViewConfiguration() config.userContentController.add(self, name: \"myHandler\") webView = WKWebView(frame: self.view.frame, configuration: config) self.view.addSubview(webView) if let url = URL(string: \"https://yourwebsite.com\") { webView.load(URLRequest(url: url)) } } func userContentController(_ userContentController: WKUserContentController, didReceive message: WKScriptMessage) { if message.name == \"myHandler\" { if let body = message.body as? [String: Any] { print(\"Message from H5: \\(body)\") } } }} 3. é€šè¿‡ evaluateJavaScriptiOS å¯ä»¥é€šè¿‡ evaluateJavaScript æ–¹æ³•æ‰§è¡Œ H5 é¡µé¢ä¸Šçš„ JavaScript ä»£ç ã€‚ iOS ä»£ç 1234567webView.evaluateJavaScript(\"javascriptFunctionName('argument')\") { (result, error) in if let error = error { print(\"JavaScript evaluation error: \\(error)\") } else { print(\"JavaScript evaluation result: \\(String(describing: result))\") }} 4. é€šè¿‡ WebView çš„ loadHTMLString æˆ– load æ–¹æ³•ä½ å¯ä»¥é€šè¿‡ loadHTMLString æˆ– load æ–¹æ³•å°† HTML å†…å®¹ç›´æ¥åŠ è½½åˆ° WebView ä¸­ï¼Œå¹¶åœ¨ HTML ä¸­åµŒå…¥ JavaScript ä»£ç ä¸åŸç”Ÿä»£ç è¿›è¡Œé€šä¿¡ã€‚ 5.æ€ä¹ˆæå‡ webView çš„åŠ è½½é€Ÿåº¦ï¼Œä½¿å…¶æ¥è¿‘åŸç”Ÿï¼Ÿå¤§çš„å›¾ç‰‡ã€jsç­‰ç«¯ä¸Šä¸‹è½½åï¼Œæ€ä¹ˆäº¤ç»™H5ä½¿ç”¨1. é¢„åŠ è½½ï¼ˆPreloadingï¼‰ æå‰åŠ è½½ WebViewï¼šåœ¨ç”¨æˆ·è®¿é—®é¡µé¢ä¹‹å‰ï¼Œæå‰åˆå§‹åŒ–å’ŒåŠ è½½ WebViewã€‚è¿™æ ·ç”¨æˆ·ç‚¹å‡»æ—¶ï¼Œå†…å®¹å·²ç»éƒ¨åˆ†æˆ–å…¨éƒ¨åŠ è½½å®Œæ¯•ã€‚ ä½¿ç”¨ç¼“å­˜ï¼šåˆ©ç”¨ç¼“å­˜æœºåˆ¶æ¥å­˜å‚¨å¸¸ç”¨èµ„æºï¼Œå‡å°‘é‡å¤åŠ è½½ã€‚ 2. ä¼˜åŒ–èµ„æº å‡å°‘è¯·æ±‚æ•°é‡ï¼šåˆå¹¶ CSSã€JavaScript æ–‡ä»¶ï¼Œå‡å°‘ HTTP è¯·æ±‚æ¬¡æ•°ã€‚ å‹ç¼©èµ„æºï¼šä½¿ç”¨ gzip æˆ– brotli å‹ç¼© HTMLã€CSS å’Œ JavaScript æ–‡ä»¶ã€‚ å›¾ç‰‡ä¼˜åŒ–ï¼šå‹ç¼©å›¾ç‰‡ï¼Œä½¿ç”¨é€‚å½“çš„å›¾ç‰‡æ ¼å¼ï¼ˆå¦‚ WebPï¼‰ï¼Œå¹¶è€ƒè™‘ä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼ˆlazy loadingï¼‰ã€‚ 3. ä½¿ç”¨ WKWebView é€‰æ‹© WKWebViewï¼šç›¸æ¯” UIWebViewï¼ŒWKWebView æä¾›äº†æ›´å¥½çš„æ€§èƒ½å’Œæ›´ä½çš„å†…å­˜å ç”¨ã€‚ç¡®ä¿ä½ çš„åº”ç”¨ä½¿ç”¨çš„æ˜¯ WKWebViewã€‚ 4. åŠ è½½ç­–ç•¥ æ‡’åŠ è½½ï¼šå¯¹äºä¸åœ¨è§†å£å†…çš„å†…å®¹ï¼Œä½¿ç”¨æ‡’åŠ è½½æŠ€æœ¯ï¼Œåªåœ¨éœ€è¦æ—¶æ‰åŠ è½½è¿™äº›èµ„æºã€‚ å¼‚æ­¥åŠ è½½ï¼šå°† JavaScript è„šæœ¬æ”¾åœ¨é¡µé¢åº•éƒ¨æˆ–è€…ä½¿ç”¨ defer å’Œ async å±æ€§å¼‚æ­¥åŠ è½½è„šæœ¬ï¼Œé¿å…é˜»å¡é¡µé¢æ¸²æŸ“ã€‚ 5. ä¼˜åŒ–ä»£ç  å‡å°‘ DOM æ“ä½œï¼šè¿‡å¤šæˆ–å¤æ‚çš„ DOM æ“ä½œä¼šé™ä½æ¸²æŸ“é€Ÿåº¦ï¼Œä¼˜åŒ–å‰ç«¯ä»£ç ï¼Œå‡å°‘ä¸å¿…è¦çš„ DOM æ“ä½œã€‚ é¿å…é‡æ’ï¼ˆReflowï¼‰å’Œé‡ç»˜ï¼ˆRepaintï¼‰ï¼šå°½é‡å‡å°‘å’Œä¼˜åŒ–éœ€è¦é‡æ’å’Œé‡ç»˜çš„æ“ä½œã€‚ 6. ä½¿ç”¨æœ¬åœ°èµ„æº æœ¬åœ°åŒ–èµ„æºï¼šå°†å¸¸ç”¨çš„ CSS å’Œ JavaScript æ–‡ä»¶å†…åµŒåˆ°åº”ç”¨ä¸­ï¼Œé¿å…ä»è¿œç¨‹æœåŠ¡å™¨åŠ è½½ã€‚ Service Workerï¼šè™½ç„¶ iOS å¯¹ Service Worker çš„æ”¯æŒä¸å¦‚ Androidï¼Œä½†å¯ä»¥åˆ©ç”¨å®ƒåœ¨æ”¯æŒçš„åœºæ™¯ä¸‹ç¼“å­˜èµ„æºï¼Œæé«˜åŠ è½½é€Ÿåº¦ã€‚ 7. ç½‘ç»œä¼˜åŒ– CDNï¼šä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œï¼ˆCDNï¼‰æ¥åŠ é€Ÿèµ„æºåŠ è½½ã€‚ HTTP/2ï¼šä½¿ç”¨ HTTP/2 åè®®æ¥é™ä½å»¶è¿Ÿå’Œæå‡åŠ è½½é€Ÿåº¦ã€‚ 8. ç¡®ä¿è®¾å¤‡æ€§èƒ½ å†…å­˜ä¼˜åŒ–ï¼šç¡®ä¿ WebView ä¸ä¼šæ¶ˆè€—è¿‡å¤šå†…å­˜ï¼Œé¿å…åœ¨ä½å†…å­˜è®¾å¤‡ä¸Šå´©æºƒæˆ–å˜æ…¢ã€‚ æ€§èƒ½ç›‘æ§ï¼šå®šæœŸç›‘æ§åº”ç”¨çš„æ€§èƒ½ï¼Œå¹¶æ ¹æ®å®é™…æ•°æ®è¿›è¡Œä¼˜åŒ–ã€‚ 9. ä½¿ç”¨ SPA (Single Page Application) å•é¡µåº”ç”¨ï¼šå¦‚æœä½ çš„åº”ç”¨é€»è¾‘å…è®¸ï¼Œè€ƒè™‘å°† Web åº”ç”¨æ”¹ä¸ºå•é¡µåº”ç”¨ï¼ˆSPAï¼‰ï¼Œå‡å°‘é¡µé¢è·³è½¬æ—¶é—´ï¼Œå¹¶é€šè¿‡å‰ç«¯è·¯ç”±ç®¡ç†é¡µé¢çŠ¶æ€ã€‚ 10. å…¶ä»–ä¼˜åŒ– Lazy Loadï¼šå¯¹å›¾ç‰‡å’Œå…¶ä»–èµ„æºä½¿ç”¨æ‡’åŠ è½½æŠ€æœ¯ã€‚ å‡å°‘åŠ¨ç”»å’Œç‰¹æ•ˆï¼šè¿‡å¤šçš„åŠ¨ç”»å’Œç‰¹æ•ˆä¼šå¢åŠ  CPU å’Œ GPU çš„è´Ÿæ‹…ï¼Œå°½é‡å‡å°‘æˆ–ä¼˜åŒ–è¿™äº›æ•ˆæœã€‚ é€šè¿‡ç»¼åˆä»¥ä¸Šæ–¹æ³•ï¼Œé€æ­¥ä¼˜åŒ– WebView çš„åŠ è½½é€Ÿåº¦ï¼Œå¯ä»¥æ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒï¼Œä½¿å…¶æ¥è¿‘åŸç”Ÿåº”ç”¨çš„æ€§èƒ½ã€‚ 1. é¢„åŠ è½½å¹¶æ³¨å…¥èµ„æºåœ¨ WKWebView åˆå§‹åŒ–æ—¶ï¼Œå¯ä»¥é¢„å…ˆåŠ è½½æœ¬åœ°ä¸‹è½½çš„èµ„æºï¼Œå¹¶é€šè¿‡ JavaScript æ³¨å…¥åˆ°ç½‘é¡µä¸­ã€‚ ç¤ºä¾‹ä»£ç ï¼š1234567891011121314151617181920212223242526import WebKitclass ViewController: UIViewController, WKNavigationDelegate { var webView: WKWebView! override func viewDidLoad() { super.viewDidLoad() let webConfiguration = WKWebViewConfiguration() webView = WKWebView(frame: .zero, configuration: webConfiguration) webView.navigationDelegate = self view.addSubview(webView) // åŠ è½½æœ¬åœ° HTML æ–‡ä»¶ if let localHTMLUrl = Bundle.main.url(forResource: \"index\", withExtension: \"html\") { webView.loadFileURL(localHTMLUrl, allowingReadAccessTo: localHTMLUrl.deletingLastPathComponent()) } // æ³¨å…¥æœ¬åœ° JavaScript æ–‡ä»¶ if let localJSUrl = Bundle.main.url(forResource: \"script\", withExtension: \"js\"), let localJSContent = try? String(contentsOf: localJSUrl) { let userScript = WKUserScript(source: localJSContent, injectionTime: .atDocumentStart, forMainFrameOnly: true) webView.configuration.userContentController.addUserScript(userScript) } }} 2. ä½¿ç”¨è‡ªå®šä¹‰ URL Schemeé€šè¿‡è‡ªå®šä¹‰ URL Schemeï¼Œå°†æœ¬åœ°èµ„æºæä¾›ç»™ WebViewã€‚ ç¤ºä¾‹ä»£ç ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647import WebKitclass ViewController: UIViewController, WKNavigationDelegate { var webView: WKWebView! override func viewDidLoad() { super.viewDidLoad() let webConfiguration = WKWebViewConfiguration() webView = WKWebView(frame: .zero, configuration: webConfiguration) webView.navigationDelegate = self webView.uiDelegate = self view.addSubview(webView) if let localHTMLUrl = Bundle.main.url(forResource: \"index\", withExtension: \"html\") { webView.loadFileURL(localHTMLUrl, allowingReadAccessTo: localHTMLUrl.deletingLastPathComponent()) } let schemeHandler = LocalSchemeHandler() webConfiguration.setURLSchemeHandler(schemeHandler, forURLScheme: \"myapp\") if let url = URL(string: \"myapp://localResource/script.js\") { webView.load(URLRequest(url: url)) } }}class LocalSchemeHandler: NSObject, WKURLSchemeHandler { func webView(_ webView: WKWebView, start urlSchemeTask: WKURLSchemeTask) { if let url = urlSchemeTask.request.url, url.scheme == \"myapp\" { if url.path == \"/localResource/script.js\", let filePath = Bundle.main.path(forResource: \"script\", ofType: \"js\") { let data = try? Data(contentsOf: URL(fileURLWithPath: filePath)) let response = URLResponse(url: url, mimeType: \"application/javascript\", expectedContentLength: data?.count ?? 0, textEncodingName: nil) urlSchemeTask.didReceive(response) if let data = data { urlSchemeTask.didReceive(data) } urlSchemeTask.didFinish() } } } func webView(_ webView: WKWebView, stop urlSchemeTask: WKURLSchemeTask) { // Handle task stopping if needed }} 3. ä½¿ç”¨ Base64 ç¼–ç å°†æœ¬åœ°èµ„æºè½¬æ¢æˆ Base64 ç¼–ç ï¼Œç„¶åé€šè¿‡ JavaScript å°†å…¶æ³¨å…¥åˆ°ç½‘é¡µä¸­ã€‚ ç¤ºä¾‹ä»£ç ï¼š12345678910111213141516171819202122232425262728import WebKitclass ViewController: UIViewController { var webView: WKWebView! override func viewDidLoad() { super.viewDidLoad() webView = WKWebView(frame: self.view.frame) self.view.addSubview(webView) if let localHTMLUrl = Bundle.main.url(forResource: \"index\", withExtension: \"html\") { webView.loadFileURL(localHTMLUrl, allowingReadAccessTo: localHTMLUrl.deletingLastPathComponent()) } if let imagePath = Bundle.main.path(forResource: \"image\", ofType: \"png\"), let imageData = try? Data(contentsOf: URL(fileURLWithPath: imagePath)) { let base64String = imageData.base64EncodedString() let jsCode = \"\"\" var img = document.createElement('img'); img.src = 'data:image/png;base64,\\(base64String)'; document.body.appendChild(img); \"\"\" webView.evaluateJavaScript(jsCode, completionHandler: nil) } }} 4. ä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨åœ¨åº”ç”¨å†…å¯åŠ¨ä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨ï¼ˆå¦‚ GCDWebServerï¼‰ï¼Œç„¶åé€šè¿‡ HTTP è¯·æ±‚è·å–æœ¬åœ°èµ„æºã€‚ ç¤ºä¾‹ä»£ç ï¼š1234567891011121314151617181920212223242526import WebKitimport GCDWebServerclass ViewController: UIViewController { var webView: WKWebView! var webServer: GCDWebServer! override func viewDidLoad() { super.viewDidLoad() webServer = GCDWebServer() // æ·»åŠ å¤„ç†å™¨æ¥æä¾›æœ¬åœ°èµ„æº webServer.addGETHandler(forBasePath: \"/\", directoryPath: Bundle.main.resourcePath!, indexFilename: nil, cacheAge: 3600, allowRangeRequests: true) // å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ webServer.start(withPort: 8080, bonjourName: \"GCD Web Server\") webView = WKWebView(frame: self.view.frame) self.view.addSubview(webView) if let url = URL(string: \"http://localhost:8080/index.html\") { webView.load(URLRequest(url: url)) } }} é€šè¿‡ä¸Šè¿°æ–¹æ³•ï¼Œå¯ä»¥å°†æœ¬åœ°ä¸‹è½½çš„èµ„æºäº¤ç»™ H5 ä½¿ç”¨ï¼Œä»¥æå‡ WebView çš„åŠ è½½é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒã€‚é€‰æ‹©å…·ä½“æ–¹æ¡ˆæ—¶ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚ã€é¡¹ç›®å¤æ‚åº¦å’Œç»´æŠ¤æˆæœ¬è¿›è¡Œæƒè¡¡ã€‚ 6.å°ç¨‹åºæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ7.å‰ç«¯ JS çš„å¼‚æ­¥æ˜¯æ€ä¹ˆå®ç°çš„ï¼ŸJavaScript çš„å¼‚æ­¥æ˜¯é€šè¿‡äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰ã€å›è°ƒå‡½æ•°ã€ä»»åŠ¡é˜Ÿåˆ—ï¼ˆTask Queueï¼‰å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMicrotask Queueï¼‰ç­‰æœºåˆ¶å…±åŒå®ç°çš„ã€‚ä¸‹é¢æˆ‘ä»¬è¯¦ç»†è®¨è®ºè¿™äº›æ¦‚å¿µåŠå…¶å·¥ä½œåŸç†ã€‚ äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰JavaScript è¿è¡Œæ—¶ç¯å¢ƒï¼ˆå¦‚æµè§ˆå™¨æˆ– Node.jsï¼‰åŒ…å«ä¸€ä¸ªäº‹ä»¶å¾ªç¯ï¼Œå®ƒæ˜¯å¤„ç†å¼‚æ­¥æ“ä½œçš„æ ¸å¿ƒã€‚äº‹ä»¶å¾ªç¯è´Ÿè´£ç›‘æ§è°ƒç”¨æ ˆå’Œä»»åŠ¡é˜Ÿåˆ—ï¼Œå¹¶æ ¹æ®æƒ…å†µå°†ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ¨å…¥è°ƒç”¨æ ˆæ‰§è¡Œã€‚ è°ƒç”¨æ ˆï¼ˆCall Stackï¼‰è°ƒç”¨æ ˆç”¨äºè¿½è¸ªæ­£åœ¨æ‰§è¡Œçš„å‡½æ•°ï¼ŒJavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œè¿™æ„å‘³ç€å®ƒä¸€æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ã€‚è°ƒç”¨æ ˆè®°å½•äº†å‡½æ•°çš„è°ƒç”¨é¡ºåºï¼Œå¹¶åœ¨å½“å‰å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œä¾æ¬¡è¿”å›ä¸Šä¸€çº§è°ƒç”¨ã€‚ Web APIæµè§ˆå™¨æä¾›äº†ä¸€äº›å¼‚æ­¥ APIï¼Œå¦‚ setTimeoutã€setIntervalã€XMLHttpRequestã€fetch ç­‰ã€‚å½“è°ƒç”¨è¿™äº› API æ—¶ï¼Œä»»åŠ¡ä¼šè¢«ç§»äº¤ç»™æµè§ˆå™¨å¤„ç†ï¼Œè€Œä¸æ˜¯ç«‹å³åœ¨è°ƒç”¨æ ˆä¸­æ‰§è¡Œã€‚ ä»»åŠ¡é˜Ÿåˆ—ï¼ˆTask Queueï¼‰ä»»åŠ¡é˜Ÿåˆ—å­˜å‚¨äº†å·²å®Œæˆçš„å¼‚æ­¥æ“ä½œå¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œè¿™äº›å›è°ƒå‡½æ•°ç­‰å¾…äº‹ä»¶å¾ªç¯å°†å®ƒä»¬æ¨å…¥è°ƒç”¨æ ˆæ‰§è¡Œã€‚ä»»åŠ¡é˜Ÿåˆ—åŒ…æ‹¬å®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMacro Task Queueï¼‰å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMicrotask Queueï¼‰ã€‚ å®ä»»åŠ¡ï¼ˆMacro Taskï¼‰å®ä»»åŠ¡åŒ…æ‹¬ setTimeoutã€setIntervalã€I/O æ“ä½œç­‰ã€‚è¿™äº›ä»»åŠ¡ä¼šè¢«æ·»åŠ åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…äº‹ä»¶å¾ªç¯å¤„ç†ã€‚ å¾®ä»»åŠ¡ï¼ˆMicrotaskï¼‰å¾®ä»»åŠ¡åŒ…æ‹¬ Promise çš„ .then å›è°ƒã€MutationObserver ç­‰ã€‚å¾®ä»»åŠ¡ä¼šè¢«æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚å¾®ä»»åŠ¡é˜Ÿåˆ—çš„ä¼˜å…ˆçº§é«˜äºå®ä»»åŠ¡é˜Ÿåˆ—ï¼Œè¿™æ„å‘³ç€åœ¨æ¯æ¬¡å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œäº‹ä»¶å¾ªç¯ä¼šé¦–å…ˆæ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚ å·¥ä½œæµç¨‹ ä¸»çº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç ï¼šæ‰€æœ‰åŒæ­¥ä»£ç ä¼šè¢«å‹å…¥è°ƒç”¨æ ˆä¸­å¹¶æ‰§è¡Œã€‚ é‡åˆ°å¼‚æ­¥æ“ä½œï¼šå½“é‡åˆ°å¼‚æ­¥æ“ä½œï¼ˆå¦‚ setTimeoutã€fetch ç­‰ï¼‰ï¼Œç›¸åº”çš„å›è°ƒå‡½æ•°ä¼šè¢«æ³¨å†Œå¹¶ç§»äº¤ç»™æµè§ˆå™¨çš„ Web API å¤„ç†ã€‚ Web API å®Œæˆä»»åŠ¡ï¼šä¸€æ—¦å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå›è°ƒå‡½æ•°ä¼šè¢«æ”¾å…¥ç›¸åº”çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼ˆå®ä»»åŠ¡æˆ–å¾®ä»»åŠ¡ï¼‰ã€‚ äº‹ä»¶å¾ªç¯æ£€æŸ¥è°ƒç”¨æ ˆï¼šäº‹ä»¶å¾ªç¯ä¸æ–­æ£€æŸ¥è°ƒç”¨æ ˆæ˜¯å¦ä¸ºç©ºã€‚ å¤„ç†å¾®ä»»åŠ¡ï¼šå¦‚æœè°ƒç”¨æ ˆä¸ºç©ºï¼Œäº‹ä»¶å¾ªç¯ä¼šä¼˜å…ˆå¤„ç†å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ã€‚ å¤„ç†å®ä»»åŠ¡ï¼šå¦‚æœå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼Œäº‹ä»¶å¾ªç¯ä¼šå¤„ç†å®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ã€‚ ç¤ºä¾‹ä»£ç 1234567891011console.log('Start');setTimeout(() =&gt; { console.log('Timeout callback');}, 0);Promise.resolve().then(() =&gt; { console.log('Promise callback');});console.log('End'); æ‰§è¡Œé¡ºåºè§£æ console.log('Start') è¾“å‡º â€œStartâ€ã€‚ setTimeout æ³¨å†Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå¹¶å°†å…¶ç§»äº¤ç»™æµè§ˆå™¨å¤„ç†ï¼ˆå®ä»»åŠ¡ï¼‰ã€‚ Promise.resolve().then æ³¨å†Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå¹¶å°†å…¶æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚ console.log('End') è¾“å‡º â€œEndâ€ã€‚ ä¸»çº¿ç¨‹æ‰§è¡Œå®ŒåŒæ­¥ä»£ç åï¼Œè°ƒç”¨æ ˆä¸ºç©ºï¼Œäº‹ä»¶å¾ªç¯é¦–å…ˆå¤„ç†å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚ å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ Promise å›è°ƒå‡½æ•°è¢«æ‰§è¡Œï¼Œè¾“å‡º â€œPromise callbackâ€ã€‚ å¾®ä»»åŠ¡é˜Ÿåˆ—æ¸…ç©ºåï¼Œäº‹ä»¶å¾ªç¯å¤„ç†å®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ setTimeout å›è°ƒï¼Œè¾“å‡º â€œTimeout callbackâ€ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼ŒJavaScript çš„å¼‚æ­¥æœºåˆ¶é€šè¿‡äº‹ä»¶å¾ªç¯ã€è°ƒç”¨æ ˆã€ä»»åŠ¡é˜Ÿåˆ—å’Œ Web API çš„ååŒå·¥ä½œï¼Œå®ç°äº†å¼‚æ­¥æ“ä½œï¼Œä½¿å¾—ä»£ç å¯ä»¥åœ¨ç­‰å¾…é•¿æ—¶é—´æ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ï¼‰æ—¶ï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹çš„æ‰§è¡Œã€‚ 8.é¡¹ç›®äº®ç‚¹","link":"/å»å“ªå„¿ç½‘/"},{"title":"å­—èŠ‚è·³åŠ¨","text":"å­—èŠ‚è·³åŠ¨ 1.é¡¹ç›®é€‰ä¸€ç‚¹æ¥è¯´ï¼ŒæŠ€æœ¯æŒ‡æ ‡ï¼Ÿäº†è§£ä¸šåŠ¡æŒ‡æ ‡å—ï¼Ÿ 2.KVOåŸç†ï¼Œåº”ç”¨åœºæ™¯ 3.Runtimeã€åº”ç”¨ï¼ŒRuntime äº¤æ¢æ–¹æ³•éœ€è¦æ³¨æ„ä»€ä¹ˆï¼ŸRuntime çš„ hook å’Œ fish hook æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 4.Runloopã€åº”ç”¨ã€Runloop æ¥ç›‘æµ‹å¡é¡¿æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ 5.UIView å’Œ CALaye rçš„åŒºåˆ«ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ 6.æ˜¾å¼åŠ¨ç”»å’Œéšå¼åŠ¨ç”»çš„åŒºåˆ« 7.äº†è§£çš„è®¾è®¡åŸåˆ™å’Œè®¾è®¡æ¨¡å¼ï¼Œç»“åˆé¡¹ç›® 8.block çš„æœ¬è´¨ 9.ç®—æ³•ï¼šæŸ¥æ‰¾å­—ç¬¦ä¸²çš„æ— é‡å¤å­—ç¬¦å­ä¸²çš„æœ€å¤§é•¿åº¦ æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²-åŠ›æ‰£ å‚è€ƒç­”æ¡ˆ1.é¡¹ç›®é€‰ä¸€ç‚¹æ¥è¯´ï¼ŒæŠ€æœ¯æŒ‡æ ‡ï¼Ÿäº†è§£ä¸šåŠ¡æŒ‡æ ‡å—ï¼Ÿ2.KVOåŸç†ï¼Œåº”ç”¨åœºæ™¯ åŠ¨æ€ç”Ÿæˆå­ç±»ï¼šå½“ä½ è§‚å¯ŸæŸä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼ŒObjective-C Runtimeä¼šåŠ¨æ€åˆ›å»ºè¯¥å¯¹è±¡çš„ä¸€ä¸ªå­ç±»ï¼Œå¹¶é‡å†™è¢«è§‚å¯Ÿå±æ€§çš„setteræ–¹æ³•ã€‚ æ–¹æ³•é‡å†™ï¼šåœ¨é‡å†™çš„setteræ–¹æ³•ä¸­ï¼ŒKVOæœºåˆ¶ä¼šæ’å…¥ä¸€äº›ä»£ç ï¼Œç”¨äºé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…è¯¥å±æ€§çš„å˜åŒ–ã€‚ isaæŒ‡é’ˆæŒ‡å‘ï¼šåŸå§‹å¯¹è±¡çš„isaæŒ‡é’ˆä¼šè¢«ä¿®æ”¹ï¼ŒæŒ‡å‘æ–°åˆ›å»ºçš„å­ç±»ï¼Œä»¥ç¡®ä¿è°ƒç”¨setteræ–¹æ³•æ—¶å®é™…è°ƒç”¨çš„æ˜¯é‡å†™åçš„æ–¹æ³•ã€‚ é€šçŸ¥æœºåˆ¶ï¼šå±æ€§å€¼å˜åŒ–æ—¶ï¼ŒKVOæœºåˆ¶ä¼šè‡ªåŠ¨é€šçŸ¥æ‰€æœ‰æ³¨å†Œçš„è§‚å¯Ÿè€…ï¼Œè°ƒç”¨è§‚å¯Ÿè€…çš„observeValueForKeyPath:ofObject:change:context:æ–¹æ³•ã€‚ 3.Runtimeã€åº”ç”¨ï¼ŒRuntime äº¤æ¢æ–¹æ³•éœ€è¦æ³¨æ„ä»€ä¹ˆï¼ŸRuntimeçš„ hook å’Œ fish hook æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸiOS Runtime Hookä¸»è¦ç‰¹ç‚¹ Method Swizzling: è¿™æ˜¯æœ€å¸¸è§çš„Runtime HookæŠ€æœ¯ï¼Œé€šè¿‡äº¤æ¢æ–¹æ³•å®ç°å’Œè‡ªå®šä¹‰æ–¹æ³•å®ç°ï¼Œä»è€Œæ”¹å˜ç±»çš„è¡Œä¸ºã€‚ åŠ¨æ€æ€§å¼º: ç”±äºObjective-C Runtimeçš„åŠ¨æ€ç‰¹æ€§ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶å¯¹ç±»å’Œæ–¹æ³•è¿›è¡Œæ“ä½œã€‚ çµæ´»æ€§é«˜: å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸå§‹ä»£ç çš„æƒ…å†µä¸‹ï¼Œå¯¹åº”ç”¨ç¨‹åºçš„è¡Œä¸ºè¿›è¡Œä¿®æ”¹ã€‚ é€‚ç”¨èŒƒå›´å¹¿: é€‚ç”¨äºObjective-Cç¼–å†™çš„ç±»å’Œæ–¹æ³•ã€‚ ä½¿ç”¨åœºæ™¯ ä¿®æ”¹ç³»ç»Ÿæˆ–ç¬¬ä¸‰æ–¹åº“çš„è¡Œä¸ºã€‚ ç›‘æ§æ–¹æ³•è°ƒç”¨å’Œå‚æ•°ã€‚ åœ¨ä¸ç ´ååŸæœ‰ä»£ç çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ é¢å¤–çš„åŠŸèƒ½ã€‚ Fishhookæ¦‚è¿°Fishhookæ˜¯ç”±Facebookå¼€æºçš„ä¸€ä¸ªåº“ï¼Œä¸»è¦ç”¨äºåœ¨iOSåº”ç”¨ä¸­é‡ç»‘å®šç¬¦å·ï¼Œä»è€Œå®ç°å¯¹ä½å±‚æ¬¡çš„Cå‡½æ•°è¿›è¡Œhookã€‚ ä¸»è¦ç‰¹ç‚¹ åŸºäºç¬¦å·é‡ç»‘å®š: Fishhooké€šè¿‡ä¿®æ”¹ç¬¦å·è¡¨æ¥é‡æ–°ç»‘å®šå‡½æ•°æŒ‡é’ˆï¼Œä»è€Œå®ç°å¯¹å‡½æ•°çš„æ›¿æ¢ã€‚ é€‚ç”¨èŒƒå›´: ä¸»è¦ç”¨äºCè¯­è¨€å±‚é¢çš„å‡½æ•°ï¼Œå¦‚ç³»ç»Ÿè°ƒç”¨å’Œæ ‡å‡†åº“å‡½æ•°ã€‚ ä½å±‚æ¬¡: é€‚ç”¨äºä½å±‚æ¬¡çš„å‡½æ•°æ‹¦æˆªï¼Œè€Œä¸æ˜¯é¢å‘å¯¹è±¡çš„Method Swizzlingã€‚ å¼€æºåº“: Fishhookæ˜¯ä¸€ä¸ªå¼€æºåº“ï¼Œå¯ä»¥æ–¹ä¾¿åœ°é›†æˆåˆ°é¡¹ç›®ä¸­ã€‚ ä½¿ç”¨åœºæ™¯ æ›¿æ¢ç³»ç»Ÿå‡½æ•°å®ç°ï¼Œå¦‚mallocã€freeã€openç­‰ã€‚ ç›‘æ§å’Œä¿®æ”¹åº•å±‚Cå‡½æ•°çš„è¡Œä¸ºã€‚ åœ¨åŠ¨æ€åŠ è½½çš„åº“ä¸­å¯¹ç‰¹å®šå‡½æ•°è¿›è¡Œhookã€‚ æ€»ç»“ iOS Runtime Hookä¸»è¦ç”¨äºObjective-Cçš„æ–¹æ³•æ›¿æ¢ï¼Œé€šè¿‡Runtimeæœºåˆ¶å®ç°ï¼Œé€‚ç”¨äºé¢å‘å¯¹è±¡çš„ç¯å¢ƒã€‚ Fishhookä¸»è¦ç”¨äºCå‡½æ•°çš„ç¬¦å·é‡ç»‘å®šï¼Œé€šè¿‡ä¿®æ”¹ç¬¦å·è¡¨å®ç°ï¼Œé€‚ç”¨äºåº•å±‚Cå‡½æ•°çš„æ‹¦æˆªå’Œæ›¿æ¢ã€‚ 4.Runloopã€åº”ç”¨ã€Runloop æ¥ç›‘æµ‹å¡é¡¿æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿä½¿ç”¨ RunLoop æ¥ç›‘æµ‹å¡é¡¿æ˜¯ä¸€ä¸ªå¸¸è§çš„æ–¹æ³•ï¼Œä½†å®ƒä¹Ÿæœ‰ä¸€äº›å±€é™æ€§å’Œæ½œåœ¨çš„é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸»è¦é—®é¢˜ï¼š 1. ç²¾åº¦é—®é¢˜RunLoop çš„ç›‘æµ‹ç²¾åº¦æœ‰é™ã€‚RunLoop çš„æ¯ä¸€æ¬¡å¾ªç¯éƒ½æœ‰å…¶è‡ªèº«çš„å‘¨æœŸï¼Œå¦‚æœè¦ç›‘æµ‹çŸ­æš‚çš„å¡é¡¿ï¼ˆæ¯”å¦‚å‡ æ¯«ç§’ï¼‰ï¼ŒRunLoop å¯èƒ½æ— æ³•æ•æ‰åˆ°ã€‚ 2. å½±å“æ€§èƒ½é¢‘ç¹ç›‘æµ‹ RunLoop çš„çŠ¶æ€å¯èƒ½ä¼šå¯¹åº”ç”¨æ€§èƒ½äº§ç”Ÿå½±å“ã€‚å°¤å…¶åœ¨ä¸»çº¿ç¨‹ä¸Šè¿›è¡Œç›‘æµ‹æ—¶ï¼Œå¯èƒ½ä¼šå¢åŠ é¢å¤–çš„å¼€é”€ï¼Œä»è€Œå½±å“åº”ç”¨çš„å“åº”é€Ÿåº¦ã€‚ 3. è¯¯æŠ¥é—®é¢˜ä½¿ç”¨ RunLoop æ¥æ£€æµ‹å¡é¡¿æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°è¯¯æŠ¥çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œåå°ä»»åŠ¡ã€I/O æ“ä½œæˆ–è€…ç½‘ç»œè¯·æ±‚ç­‰å¯èƒ½å¯¼è‡´ RunLoop çš„é˜»å¡ï¼Œè¿™äº›æƒ…å†µæœªå¿…æ˜¯çœŸæ­£çš„ UI å¡é¡¿ã€‚ 4. æ— æ³•æ£€æµ‹å¼‚æ­¥ä»»åŠ¡RunLoop ä¸»è¦ç›‘æµ‹çš„æ˜¯åŒæ­¥ä»»åŠ¡çš„æ‰§è¡Œæƒ…å†µï¼Œå¯¹äºå¼‚æ­¥ä»»åŠ¡ï¼ˆå¦‚ GCD çš„ dispatch_async æˆ–è€… NSOperationQueueï¼‰çš„ç›‘æµ‹èƒ½åŠ›æœ‰é™ã€‚è¿™å¯èƒ½å¯¼è‡´ä¸€äº›å¡é¡¿é—®é¢˜è¢«é—æ¼ã€‚ 5. å¤æ‚çš„å®ç°é€»è¾‘ä¸ºäº†å‡†ç¡®ç›‘æµ‹å¡é¡¿ï¼Œå¯èƒ½éœ€è¦å®ç°å¤æ‚çš„é€»è¾‘æ¥å¤„ç†å„ç§è¾¹ç•Œæƒ…å†µå’Œç‰¹ä¾‹ã€‚è¿™ä¸ä»…å¢åŠ äº†ä»£ç çš„å¤æ‚æ€§ï¼Œä¹Ÿå¢åŠ äº†ç»´æŠ¤çš„éš¾åº¦ã€‚ 6. åº”ç”¨åœºæ™¯æœ‰é™RunLoop ç›‘æµ‹æ–¹æ³•ä¸»è¦åº”ç”¨äºä¸»çº¿ç¨‹çš„ UI å¡é¡¿æ£€æµ‹ï¼Œå¯¹äºå¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å¡é¡¿ç›‘æµ‹æ•ˆæœä¸ä½³ã€‚å› æ­¤ï¼Œå¦‚æœåº”ç”¨ä¸­å­˜åœ¨å¤§é‡çš„å¤šçº¿ç¨‹æ“ä½œï¼Œå•çº¯ä¾èµ– RunLoop è¿›è¡Œç›‘æµ‹å¯èƒ½æ— æ³•å…¨é¢è¦†ç›–ã€‚ å…¸å‹å®ç°æ–¹æ³•å°½ç®¡å­˜åœ¨ä¸Šè¿°é—®é¢˜ï¼ŒRunLoop ä»ç„¶æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„å¡é¡¿ç›‘æµ‹å·¥å…·ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„å®ç°æ€è·¯ï¼š è§‚å¯Ÿ RunLoop çš„çŠ¶æ€ï¼šé€šè¿‡ç›‘å¬ RunLoop çš„ kCFRunLoopBeforeSources å’Œ kCFRunLoopAfterWaiting ç­‰çŠ¶æ€ï¼Œè®°å½• RunLoop çš„æ‰§è¡Œæ—¶é—´ã€‚ è®¡ç®—æ—¶é—´å·®ï¼šåœ¨æ¯æ¬¡ RunLoop çŠ¶æ€å˜åŒ–æ—¶ï¼Œè®¡ç®—å½“å‰æ—¶é—´ä¸ä¸Šä¸€æ¬¡çŠ¶æ€å˜åŒ–çš„æ—¶é—´å·®ã€‚å¦‚æœæ—¶é—´å·®è¶…è¿‡æŸä¸ªé˜ˆå€¼ï¼ˆæ¯”å¦‚ 100 æ¯«ç§’ï¼‰ï¼Œåˆ™è®¤ä¸ºå‘ç”Ÿäº†å¡é¡¿ã€‚ è®°å½•æˆ–ä¸ŠæŠ¥å¡é¡¿ï¼šå°†å¡é¡¿ä¿¡æ¯è®°å½•åˆ°æ—¥å¿—ä¸­ï¼Œæˆ–è€…ä¸ŠæŠ¥åˆ°æœåŠ¡å™¨è¿›è¡Œåˆ†æã€‚ 1234567891011CFRunLoopObserverRef observer;CFRunLoopObserverContext context = {0, (__bridge void *)self, NULL, NULL, NULL};observer = CFRunLoopObserverCreate(kCFAllocatorDefault, kCFRunLoopAllActivities, YES, 0, &amp;runLoopObserverCallback, &amp;context);if (observer) { CFRunLoopAddObserver(CFRunLoopGetMain(), observer, kCFRunLoopCommonModes);} runLoopObserverCallback ä¸­å¯ä»¥å®ç°æ—¶é—´å·®è®¡ç®—å’Œå¡é¡¿æ£€æµ‹é€»è¾‘ã€‚ æ€»ç»“è™½ç„¶ä½¿ç”¨ RunLoop æ¥ç›‘æµ‹å¡é¡¿å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œä½†å®ƒä»ç„¶æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„å·¥å…·ï¼Œå°¤å…¶æ˜¯åœ¨ä¸»çº¿ç¨‹çš„ UI å¡é¡¿æ£€æµ‹æ–¹é¢ã€‚ä¸ºäº†æé«˜ç›‘æµ‹çš„å‡†ç¡®æ€§å’Œè¦†ç›–é¢ï¼Œå¯ä»¥ç»“åˆå…¶ä»–ç›‘æµ‹æ–¹æ³•ï¼Œå¦‚å®šæœŸé‡‡æ ·ã€å †æ ˆè¿½è¸ªç­‰ï¼Œæ¥æ›´å…¨é¢åœ°äº†è§£åº”ç”¨çš„æ€§èƒ½çŠ¶å†µã€‚ 5.UIView å’Œ CALayer çš„åŒºåˆ«ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼ŸUIView ç±»å‹: UIView æ˜¯ä¸€ä¸ªè§†å›¾ç±»ï¼Œç»§æ‰¿è‡ª UIResponderã€‚ åŠŸèƒ½ : äº‹ä»¶å¤„ç†: UIView è´Ÿè´£å¤„ç†ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼Œå¦‚è§¦æ‘¸ã€æ‰‹åŠ¿ç­‰ã€‚ è§†å›¾å±‚æ¬¡ç»“æ„: UIView ç®¡ç†è§†å›¾å±‚æ¬¡ç»“æ„ï¼Œå¯ä»¥åŒ…å«å…¶ä»–è§†å›¾ï¼ˆå­è§†å›¾ï¼‰å¹¶ä¸”å¯ä»¥è¢«å…¶ä»–è§†å›¾åŒ…å«ï¼ˆçˆ¶è§†å›¾ï¼‰ã€‚ å¸ƒå±€å’Œè‡ªåŠ¨å¸ƒå±€: UIView æ”¯æŒè‡ªåŠ¨å¸ƒå±€ï¼ˆAuto Layoutï¼‰å’Œå¸ƒå±€çº¦æŸï¼Œå¹¶ä¸”å¯ä»¥å“åº”å¸ƒå±€å˜åŒ–ã€‚ åŠ¨ç”»: UIView æä¾›äº†åŠ¨ç”»æ¥å£ï¼Œå¯ä»¥å¯¹è§†å›¾è¿›è¡ŒåŠ¨ç”»å¤„ç†ã€‚ æ¸²æŸ“: UIView æœ¬èº«å¹¶ä¸ç›´æ¥è¿›è¡Œæ¸²æŸ“æ“ä½œï¼Œè€Œæ˜¯é€šè¿‡å…¶å†…éƒ¨çš„ CALayer æ¥è¿›è¡Œæ¸²æŸ“ã€‚ CALayer ç±»å‹: CALayer æ˜¯ Core Animation æ¡†æ¶ä¸­çš„ä¸€ä¸ªç±»ï¼Œè´Ÿè´£ç®¡ç†å’Œæ¸²æŸ“å†…å®¹ã€‚ åŠŸèƒ½: å†…å®¹æ¸²æŸ“: CALayer è´Ÿè´£æ¸²æŸ“è§†å›¾çš„å†…å®¹ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥ç»˜åˆ¶å›¾å½¢ã€è®¾ç½®èƒŒæ™¯é¢œè‰²ã€è¾¹æ¡†ã€é˜´å½±ç­‰ã€‚ åŠ¨ç”»: CALayer æä¾›äº†å¼ºå¤§çš„åŠ¨ç”»åŠŸèƒ½ï¼Œæ”¯æŒéšå¼åŠ¨ç”»ï¼ˆImplicit Animationsï¼‰å’Œæ˜¾å¼åŠ¨ç”»ï¼ˆExplicit Animationsï¼‰ã€‚ å›¾å½¢æ“ä½œ: CALayer æ”¯æŒå¤æ‚çš„å›¾å½¢æ“ä½œï¼Œå¦‚å˜æ¢ï¼ˆæ—‹è½¬ã€ç¼©æ”¾ã€å¹³ç§»ï¼‰ã€é®ç½©ï¼ˆMaskingï¼‰ã€æ»¤é•œï¼ˆFiltersï¼‰ç­‰ã€‚ ä¸å¤„ç†äº‹ä»¶: CALayer ä¸å¤„ç†ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼Œè¿™æ˜¯ UIView çš„èŒè´£ã€‚ ä¸å‚ä¸è‡ªåŠ¨å¸ƒå±€: CALayer ä¸å‚ä¸ UIView çš„å¸ƒå±€ç³»ç»Ÿï¼Œå®ƒçš„å¸ƒå±€éœ€è¦æ‰‹åŠ¨è®¾ç½®ã€‚ å…³ç³» å±‚æ¬¡ç»“æ„: æ¯ä¸ª UIView éƒ½åŒ…å«ä¸€ä¸ª CALayer å®ä¾‹ä½œä¸ºå…¶ layer å±æ€§ï¼ŒUIView é€šè¿‡è¿™ä¸ª CALayer æ¥è¿›è¡Œå†…å®¹çš„å®é™…æ¸²æŸ“ã€‚ å§”æ‰˜å…³ç³»: UIView æ˜¯ CALayer çš„å§”æ‰˜ï¼ˆdelegateï¼‰ï¼ŒCALayer çš„ä¸€äº›æ“ä½œï¼ˆå¦‚ç»˜åˆ¶å†…å®¹ï¼‰å¯ä»¥å§”æ‰˜ç»™ UIView æ¥å¤„ç†ã€‚ å…¸å‹ç”¨æ³• UIView: åˆ›å»ºå’Œç®¡ç†ç•Œé¢å…ƒç´ ã€‚ å“åº”ç”¨æˆ·äº¤äº’ã€‚ å¸ƒå±€å’Œå­è§†å›¾ç®¡ç†ã€‚ CALayer: æ‰§è¡Œå¤æ‚çš„åŠ¨ç”»å’Œå›¾å½¢æ“ä½œã€‚ æä¾›ä½çº§åˆ«çš„ç»˜å›¾å’Œæ¸²æŸ“æ”¯æŒã€‚ ä½œä¸º UIView çš„åº•å±‚å®ç°ï¼Œæå‡æ¸²æŸ“æ€§èƒ½ã€‚ åœ¨ iOS å¼€å‘ä¸­ï¼ŒUIView å’Œ CALayer çš„è®¾è®¡éµå¾ªäº†ä¸€ç³»åˆ—é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™ï¼Œè¿™äº›åŸåˆ™ç¡®ä¿äº†ä»£ç çš„çµæ´»æ€§ã€å¯ç»´æŠ¤æ€§å’Œæ€§èƒ½ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®çš„è®¾è®¡åŸåˆ™ä»¥åŠå®ƒä»¬åœ¨ UIView å’Œ CALayer ä¸­çš„ä½“ç°ï¼š 1. å•ä¸€èŒè´£åŸåˆ™ï¼ˆSingle Responsibility Principle, SRPï¼‰å®šä¹‰: æ¯ä¸ªç±»åº”è¯¥åªæœ‰ä¸€ä¸ªå¼•èµ·å˜åŒ–çš„åŸå› ï¼Œå³æ¯ä¸ªç±»åº”è¯¥åªæœ‰ä¸€ä¸ªèŒè´£ã€‚ ä½“ç°: UIView ä¸»è¦è´Ÿè´£å¤„ç†ç”¨æˆ·äº¤äº’äº‹ä»¶ã€ç®¡ç†è§†å›¾å±‚æ¬¡ç»“æ„å’Œå¸ƒå±€ã€‚ CALayer ä¸“æ³¨äºå†…å®¹çš„æ¸²æŸ“å’ŒåŠ¨ç”»ã€‚ é€šè¿‡å°†è§†å›¾çš„ç®¡ç†å’Œæ¸²æŸ“èŒè´£åˆ†ç¦»ï¼Œå¯ä»¥è®©æ¯ä¸ªç±»æ›´åŠ ä¸“æ³¨äºè‡ªèº«çš„åŠŸèƒ½ï¼Œç®€åŒ–äº†ç±»çš„è®¾è®¡å’ŒèŒè´£ã€‚ 2. å¼€æ”¾-å°é—­åŸåˆ™ï¼ˆOpen/Closed Principle, OCPï¼‰å®šä¹‰: è½¯ä»¶å®ä½“ï¼ˆç±»ã€æ¨¡å—ã€å‡½æ•°ç­‰ï¼‰åº”è¯¥å¯ä»¥æ‰©å±•ï¼Œä½†ä¸å¯ä¿®æ”¹ã€‚ ä½“ç°: UIView é€šè¿‡å…¶ layer å±æ€§å§”æ‰˜æ¸²æŸ“ä»»åŠ¡ç»™ CALayerã€‚å¦‚æœéœ€è¦æ‰©å±•æ¸²æŸ“åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ CALayer è€Œä¸æ˜¯ä¿®æ”¹ UIViewã€‚ CALayer çš„åŠŸèƒ½å¯ä»¥é€šè¿‡å­ç±»åŒ–å’Œå§”æ‰˜æ¨¡å¼æ¥æ‰©å±•ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹ç°æœ‰çš„ç±»ã€‚ è¿™ç§è®¾è®¡å…è®¸åœ¨ä¸ä¿®æ”¹ç°æœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œè½»æ¾æ·»åŠ æ–°åŠŸèƒ½ã€‚ 3. é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLiskov Substitution Principle, LSPï¼‰å®šä¹‰: å­ç±»å¯¹è±¡å¿…é¡»èƒ½å¤Ÿæ›¿æ¢å…¶çˆ¶ç±»å¯¹è±¡ï¼Œå¹¶ä¸”ä¸ä¼šå¯¼è‡´ç¨‹åºè¡Œä¸ºçš„æ”¹å˜ã€‚ ä½“ç°: UIView å’Œ CALayer éƒ½å¯ä»¥è¢«å­ç±»åŒ–ï¼Œå­ç±»å¯ä»¥æ›¿æ¢çˆ¶ç±»çš„å®ä¾‹å¹¶æ­£å¸¸å·¥ä½œã€‚ UIView çš„å­ç±»å¯ä»¥æ‰©å±•ç”¨æˆ·äº¤äº’å’Œå¸ƒå±€åŠŸèƒ½ï¼Œè€Œ CALayer çš„å­ç±»å¯ä»¥æ‰©å±•æ¸²æŸ“å’ŒåŠ¨ç”»åŠŸèƒ½ã€‚ 4. ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDependency Inversion Principle, DIPï¼‰å®šä¹‰: é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡ï¼›æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ã€‚ ä½“ç°: UIView å¹¶ä¸ç›´æ¥ä¾èµ–ä½å±‚çš„æ¸²æŸ“å®ç°ï¼Œè€Œæ˜¯é€šè¿‡ CALayer è¿›è¡ŒæŠ½è±¡ã€‚ CALayer æä¾›äº†æ¸²æŸ“çš„æŠ½è±¡æ¥å£ï¼Œå…·ä½“çš„æ¸²æŸ“ç»†èŠ‚å¯ä»¥é€šè¿‡å­ç±»å’Œå§”æ‰˜æ¨¡å¼æ¥å®ç°ã€‚ 5. æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principle, ISPï¼‰å®šä¹‰: å®¢æˆ·ç«¯ä¸åº”è¯¥è¢«å¼ºè¿«ä¾èµ–å®ƒä»¬ä¸ä½¿ç”¨çš„æ–¹æ³•ï¼›ä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°æ¥å£ä¸Šã€‚ ä½“ç°: UIView å’Œ CALayer çš„æ¥å£è®¾è®¡ç›¸å¯¹ç‹¬ç«‹ï¼ŒUIView èšç„¦åœ¨ç”¨æˆ·äº¤äº’å’Œå¸ƒå±€æ¥å£ä¸Šï¼Œè€Œ CALayer èšç„¦åœ¨æ¸²æŸ“å’ŒåŠ¨ç”»æ¥å£ä¸Šã€‚ UIView çš„ç”¨æˆ·åªéœ€è¦å…³å¿ƒç”¨æˆ·äº¤äº’å’Œå¸ƒå±€ç›¸å…³çš„æ–¹æ³•ï¼Œè€Œä¸éœ€è¦äº†è§£æ¸²æŸ“å’ŒåŠ¨ç”»çš„ç»†èŠ‚ã€‚ 6. ç»„åˆä¼˜äºç»§æ‰¿ï¼ˆComposition over Inheritanceï¼‰å®šä¹‰: åº”è¯¥ä¼˜å…ˆä½¿ç”¨ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿æ¥è¾¾åˆ°ä»£ç å¤ç”¨å’Œæ‰©å±•çš„ç›®çš„ã€‚ ä½“ç°: UIView é€šè¿‡ç»„åˆ CALayer æ¥å®ç°å¤æ‚çš„åŠŸèƒ½ï¼Œè€Œä¸æ˜¯é€šè¿‡ç»§æ‰¿æ¥æ‰©å±•ä¸€ä¸ªå·¨å¤§çš„è§†å›¾ç±»ã€‚ è¿™ç§è®¾è®¡å…è®¸åœ¨ UIView å’Œ CALayer ä¹‹é—´è¿›è¡Œçµæ´»çš„ç»„åˆå’Œé…ç½®ï¼Œä»¥é€‚åº”ä¸åŒçš„éœ€æ±‚ã€‚ 7. æ€§èƒ½å’Œæ•ˆç‡å®šä¹‰: åœ¨è®¾è®¡ä¸­è€ƒè™‘æ€§èƒ½å’Œæ•ˆç‡é—®é¢˜ï¼Œç¡®ä¿åº”ç”¨ç¨‹åºè¿è¡Œé«˜æ•ˆã€‚ ä½“ç°: CALayer ç›´æ¥ä¸ Core Animation äº¤äº’ï¼Œæä¾›ç¡¬ä»¶åŠ é€Ÿçš„åŠ¨ç”»å’Œæ¸²æŸ“æ€§èƒ½ã€‚ UIView é€šè¿‡ CALayer è¿›è¡Œæ¸²æŸ“ï¼Œå¯ä»¥å‡å°‘è§†å›¾æ ‘çš„å¤æ‚åº¦å¹¶æé«˜æ¸²æŸ“æ•ˆç‡ã€‚ é€šè¿‡éµå¾ªè¿™äº›è®¾è®¡åŸåˆ™ï¼ŒUIView å’Œ CALayer å®ç°äº†èŒè´£åˆ†ç¦»ã€ä»£ç å¤ç”¨ã€çµæ´»æ‰©å±•å’Œé«˜æ•ˆæ¸²æŸ“ï¼Œå½¢æˆäº†ä¸€ä¸ªå¼ºå¤§ä¸”æ˜“äºç»´æŠ¤çš„è§†å›¾å’ŒåŠ¨ç”»ç³»ç»Ÿã€‚è¿™ç§è®¾è®¡ä¸ä»…æå‡äº†å¼€å‘ä½“éªŒï¼Œè¿˜æé«˜äº†åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚ 6.æ˜¾å¼åŠ¨ç”»å’Œéšå¼åŠ¨ç”»çš„åŒºåˆ«åœ¨ iOS å¼€å‘ä¸­ï¼ŒåŠ¨ç”»å¯ä»¥åˆ†ä¸ºæ˜¾å¼åŠ¨ç”»ï¼ˆExplicit Animationsï¼‰å’Œéšå¼åŠ¨ç”»ï¼ˆImplicit Animationsï¼‰ã€‚è¿™ä¸¤ç§åŠ¨ç”»æ–¹å¼åœ¨å®ç°ã€ä½¿ç”¨åœºæ™¯å’Œæ§åˆ¶ç²’åº¦ä¸Šæœ‰æ‰€ä¸åŒã€‚ éšå¼åŠ¨ç”»ï¼ˆImplicit Animationsï¼‰éšå¼åŠ¨ç”»æ˜¯ç”± Core Animation æ¡†æ¶è‡ªåŠ¨å¤„ç†çš„åŠ¨ç”»æ•ˆæœã€‚å®ƒä»¬ä¸éœ€è¦æ˜¾å¼åœ°åˆ›å»ºåŠ¨ç”»å¯¹è±¡ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºä½ ç”ŸæˆåŠ¨ç”»æ•ˆæœã€‚ ç‰¹ç‚¹: è‡ªåŠ¨è§¦å‘: éšå¼åŠ¨ç”»é€šå¸¸åœ¨æ›´æ”¹ CALayer çš„å¯åŠ¨ç”»å±æ€§æ—¶è‡ªåŠ¨è§¦å‘ï¼Œå¦‚ positionã€opacityã€backgroundColor ç­‰ã€‚ ç®€æ´: éšå¼åŠ¨ç”»ä¸éœ€è¦æ˜¾å¼åœ°å£°æ˜åŠ¨ç”»å¯¹è±¡ï¼Œä»£ç æ›´ç®€æ´ã€‚ é»˜è®¤æŒç»­æ—¶é—´: éšå¼åŠ¨ç”»æœ‰é»˜è®¤çš„åŠ¨ç”»æŒç»­æ—¶é—´ï¼Œé€šå¸¸ä¸º 0.25 ç§’ã€‚ å¯å®šåˆ¶: å¯ä»¥é€šè¿‡äº‹åŠ¡ï¼ˆCATransactionï¼‰æ¥å®šåˆ¶éšå¼åŠ¨ç”»çš„å±æ€§ï¼Œå¦‚æŒç»­æ—¶é—´ã€åŠ¨ç”»æ›²çº¿ç­‰ã€‚ ç¤ºä¾‹: 1234567891011121314151617181920212223import UIKitclass ViewController: UIViewController { var myLayer: CALayer! override func viewDidLoad() { super.viewDidLoad() myLayer = CALayer() myLayer.frame = CGRect(x: 50, y: 50, width: 100, height: 100) myLayer.backgroundColor = UIColor.blue.cgColor view.layer.addSublayer(myLayer) // ä½¿ç”¨éšå¼åŠ¨ç”»æ›´æ”¹å±æ€§ DispatchQueue.main.asyncAfter(deadline: .now() + 1) { CATransaction.begin() CATransaction.setAnimationDuration(2.0) self.myLayer.position = CGPoint(x: 200, y: 300) self.myLayer.backgroundColor = UIColor.red.cgColor CATransaction.commit() } }} æ˜¾å¼åŠ¨ç”»ï¼ˆExplicit Animationsï¼‰æ˜¾å¼åŠ¨ç”»æ˜¯å¼€å‘è€…æ˜ç¡®åˆ›å»ºå¹¶æ·»åŠ åˆ°å›¾å±‚ä¸Šçš„åŠ¨ç”»å¯¹è±¡ã€‚å®ƒä»¬æä¾›äº†æ›´é«˜çš„æ§åˆ¶ç²’åº¦ï¼Œå¯ä»¥å¯¹åŠ¨ç”»çš„å„ä¸ªæ–¹é¢è¿›è¡Œç²¾ç»†æ§åˆ¶ã€‚ ç‰¹ç‚¹: æ˜ç¡®å£°æ˜: æ˜¾å¼åŠ¨ç”»éœ€è¦æ˜¾å¼åœ°åˆ›å»ºåŠ¨ç”»å¯¹è±¡ï¼Œå¦‚ CABasicAnimationã€CAKeyframeAnimationã€CAAnimationGroup ç­‰ã€‚ ç²¾ç»†æ§åˆ¶: æ˜¾å¼åŠ¨ç”»å…è®¸ç²¾ç»†æ§åˆ¶åŠ¨ç”»çš„å„ä¸ªæ–¹é¢ï¼ŒåŒ…æ‹¬èµ·å§‹å€¼ã€ç»“æŸå€¼ã€æŒç»­æ—¶é—´ã€é‡å¤æ¬¡æ•°ã€åŠ¨ç”»æ›²çº¿ç­‰ã€‚ å¤åˆåŠ¨ç”»: å¯ä»¥ç»„åˆå¤šä¸ªåŠ¨ç”»ï¼Œå½¢æˆå¤æ‚çš„åŠ¨ç”»æ•ˆæœã€‚ æ›´å¤šç±»å‹: æä¾›äº†å¤šç§ç±»å‹çš„åŠ¨ç”»ï¼Œå¦‚åŸºç¡€åŠ¨ç”»ã€å…³é”®å¸§åŠ¨ç”»ã€è·¯å¾„åŠ¨ç”»ã€ç»„åŠ¨ç”»ç­‰ã€‚ ç¤ºä¾‹: 1234567891011121314151617181920212223242526272829303132333435import UIKitclass ViewController: UIViewController { var myLayer: CALayer! override func viewDidLoad() { super.viewDidLoad() myLayer = CALayer() myLayer.frame = CGRect(x: 50, y: 50, width: 100, height: 100) myLayer.backgroundColor = UIColor.blue.cgColor view.layer.addSublayer(myLayer) // åˆ›å»ºæ˜¾å¼åŠ¨ç”» DispatchQueue.main.asyncAfter(deadline: .now() + 1) { let positionAnimation = CABasicAnimation(keyPath: \"position\") positionAnimation.fromValue = self.myLayer.position positionAnimation.toValue = CGPoint(x: 200, y: 300) positionAnimation.duration = 2.0 let colorAnimation = CABasicAnimation(keyPath: \"backgroundColor\") colorAnimation.fromValue = UIColor.blue.cgColor colorAnimation.toValue = UIColor.red.cgColor colorAnimation.duration = 2.0 // æ·»åŠ åŠ¨ç”»åˆ°å›¾å±‚ self.myLayer.add(positionAnimation, forKey: \"positionAnimation\") self.myLayer.add(colorAnimation, forKey: \"colorAnimation\") // æ›´æ–°å›¾å±‚å±æ€§ self.myLayer.position = CGPoint(x: 200, y: 300) self.myLayer.backgroundColor = UIColor.red.cgColor } }} æ€»ç»“ éšå¼åŠ¨ç”»: è‡ªåŠ¨è§¦å‘ï¼Œä»£ç ç®€æ´ã€‚ é€‚ç”¨äºç®€å•çš„åŠ¨ç”»æ•ˆæœã€‚ å¯ä»¥é€šè¿‡äº‹åŠ¡ï¼ˆCATransactionï¼‰è¿›è¡Œæœ‰é™çš„å®šåˆ¶ã€‚ æ˜¾å¼åŠ¨ç”»: éœ€è¦æ˜¾å¼åœ°åˆ›å»ºåŠ¨ç”»å¯¹è±¡ã€‚ æä¾›æ›´é«˜çš„æ§åˆ¶ç²’åº¦ï¼Œé€‚ç”¨äºå¤æ‚çš„åŠ¨ç”»æ•ˆæœã€‚ æ”¯æŒå¤šç§åŠ¨ç”»ç±»å‹å’Œå¤åˆåŠ¨ç”»ã€‚ é€‰æ‹©ä½¿ç”¨éšå¼åŠ¨ç”»è¿˜æ˜¯æ˜¾å¼åŠ¨ç”»å–å†³äºå…·ä½“çš„éœ€æ±‚å’Œåœºæ™¯ã€‚å¦‚æœéœ€è¦å®ç°ç®€å•çš„åŠ¨ç”»æ•ˆæœï¼Œéšå¼åŠ¨ç”»é€šå¸¸è¶³å¤Ÿä¸”æ›´ç®€æ´ï¼›å¦‚æœéœ€è¦å¤æ‚çš„ã€å¤šæ­¥éª¤çš„åŠ¨ç”»æ•ˆæœï¼Œæ˜¾å¼åŠ¨ç”»åˆ™æä¾›äº†æ›´å¼ºå¤§çš„æ§åˆ¶èƒ½åŠ›ã€‚ 7.äº†è§£çš„è®¾è®¡åŸåˆ™å’Œè®¾è®¡æ¨¡å¼ï¼Œç»“åˆé¡¹ç›®è®¾è®¡åŸåˆ™å•ä¸€èŒè´£ï¼šä¸€ä¸ªç±»åªè´Ÿè´£ä¸€ä»¶äº‹ï¼ŒUIViewå’ŒCALayer å¼€é—­åŸåˆ™ï¼šå¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾ Cagrgory æ¥å£éš”ç¦»åŸåˆ™ï¼šä½¿ç”¨å¤šä¸ªä¸“é—¨çš„åè®®ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåºå¤§è‡ƒè‚¿çš„åè®®ï¼Œåè®®ä¸­çš„æ–¹æ³•å°½é‡å°‘ UITableView ä¾èµ–å€’ç½®åŸåˆ™ï¼šæŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºå…·ä½“å®ç°ï¼Œå…·ä½“å®ç°å¯ä»¥ä¾èµ–äºæŠ½è±¡ é‡Œæ°æ›¿æ¢åŸåˆ™ï¼šçˆ¶ç±»å¯ä»¥è¢«å­ç±»æ— ç¼æ›¿æ¢ï¼Œä¸”åŸæœ‰åŠŸèƒ½ä¸å—ä»»ä½•å½±å“ KVO è¿ªç±³ç‰¹æ³•åˆ™ï¼šä¸€ä¸ªå¯¹è±¡åº”å½“å¯¹å…¶ä»–å¯¹è±¡å°½å¯èƒ½å°‘çš„äº†è§£ï¼Œé«˜å†…èšã€ä½è€¦åˆ 8.blockçš„æœ¬è´¨9.ç®—æ³•ï¼šæŸ¥æ‰¾å­—ç¬¦ä¸²çš„æ— é‡å¤å­—ç¬¦å­ä¸²çš„æœ€å¤§é•¿åº¦æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²-åŠ›æ‰£ 123456789101112131415161718192021/** * @param {string} s * @return {number} */var lengthOfLongestSubstring = function(s) { let len = s.length; let set = new Set(); let i = 0, j = 0; let maxLenth = 0; while (i &lt; len &amp;&amp; j &lt; len) { if (!set.has(s[j])) { set.add(s[j]); j++; maxLenth = Math.max(maxLenth, j - i); } else { set.delete(s[i]); i++; } } return maxLenth;};","link":"/å­—èŠ‚è·³åŠ¨/"},{"title":"ç“´å²³ç§‘æŠ€","text":"ç“´å²³ç§‘æŠ€ 1.SDK ä½“ç§¯ä¼˜åŒ– 2.webView åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼ŒH5 æ€ä¹ˆåŠ è½½æœ¬åœ° JS/å›¾ç‰‡èµ„æº 3.çº¿ä¸Šç›‘æ§ï¼Œå¡é¡¿ã€å†…å­˜ 4.Runloop æœ‰å‡ ä¸ª modeï¼Ÿ 5.é¡¹ç›®é‡Œæœ‰ç”¨åˆ°å¸¸é©»çº¿ç¨‹å—ï¼Ÿ 6.KVO åŸç† 7.IMPã€selectorã€SEL å«ä¹‰å’ŒåŒºåˆ« 8.æ¶ˆæ¯è½¬å‘æœºåˆ¶çš„ä¼˜åŠ£ï¼Œå’Œç›´æ¥è°ƒç”¨ç›¸æ¯” 9.ç‚¹å‡»ç•Œé¢ä¸Šçš„ä¸€ä¸ªæŒ‰é’®ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ 10.SQLite3 å’Œ Realm çš„åŒºåˆ«ï¼Ÿ 11.Category å’Œ Extension çš„åŒºåˆ« 12.Block çš„æœ¬è´¨ï¼Œç»“æ„ä½“é‡Œæœ‰å“ªäº›ä¸œè¥¿ï¼Ÿå†…å­˜ç®¡ç† 13.ä¸ºä»€ä¹ˆè¦åœ¨ä¸»çº¿ç¨‹åˆ·æ–° UI 14.Swift ä¸­ Result ç±»å‹ 15.äºŒå‰æ ‘çš„ç¿»è½¬ 226. ç¿»è½¬äºŒå‰æ ‘ å‚è€ƒç­”æ¡ˆ(GPT) 1.SDKä½“ç§¯ä¼˜åŒ–ä¼˜åŒ–iOS SDKä½“ç§¯å¯¹äºæå‡åº”ç”¨æ€§èƒ½ã€å‡å°‘ä¸‹è½½æ—¶é—´ä»¥åŠèŠ‚çœç”¨æˆ·è®¾å¤‡å­˜å‚¨ç©ºé—´éƒ½éå¸¸é‡è¦ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æœ‰æ•ˆçš„æ–¹æ³•æ¥ä¼˜åŒ–iOS SDKçš„ä½“ç§¯ï¼š 1. ç§»é™¤ä¸å¿…è¦çš„æ¶æ„ åªä¿ç•™æ‰€éœ€çš„æ¶æ„ï¼šåœ¨æ„å»ºSDKæ—¶ï¼Œç§»é™¤ä¸å¿…è¦çš„æ¶æ„ï¼Œä¾‹å¦‚x86_64å’Œi386ï¼ˆæ¨¡æ‹Ÿå™¨æ¶æ„ï¼‰ï¼Œåªä¿ç•™arm64ï¼ˆå®é™…è®¾å¤‡æ¶æ„ï¼‰ã€‚ 1lipo -remove x86_64 YourSDK.framework/YourSDK -o YourSDK.framework/YourSDK 2. å‡å°‘èµ„æºæ–‡ä»¶ ç§»é™¤æœªä½¿ç”¨çš„èµ„æºï¼šç§»é™¤æœªä½¿ç”¨çš„å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰èµ„æºæ–‡ä»¶ã€‚ å‹ç¼©èµ„æºæ–‡ä»¶ï¼šä½¿ç”¨å·¥å…·ï¼ˆå¦‚ImageOptimï¼‰å‹ç¼©å›¾ç‰‡æ–‡ä»¶ï¼Œä½¿ç”¨åˆé€‚çš„ç¼–ç æ ¼å¼å‹ç¼©éŸ³é¢‘å’Œè§†é¢‘æ–‡ä»¶ã€‚ 3. ä½¿ç”¨ç¬¦å·è¡¨å‹ç¼© å‹ç¼©ç¬¦å·è¡¨ï¼šé€šè¿‡stripå·¥å…·å‹ç¼©ç¬¦å·è¡¨ä»¥å‡å°‘äºŒè¿›åˆ¶æ–‡ä»¶çš„ä½“ç§¯ã€‚ 1strip -S YourSDK.framework/YourSDK 4. ä»£ç ä¼˜åŒ– ç§»é™¤æœªä½¿ç”¨ä»£ç ï¼šé€šè¿‡ä»£ç åˆ†æå·¥å…·ï¼ˆå¦‚Xcodeçš„é™æ€åˆ†æåŠŸèƒ½ï¼‰æŸ¥æ‰¾å¹¶ç§»é™¤æœªä½¿ç”¨çš„ä»£ç ã€‚ æ¨¡å—åŒ–ï¼šå°†SDKæ‹†åˆ†æˆå¤šä¸ªæ¨¡å—ï¼Œåªåœ¨éœ€è¦æ—¶å¼•å…¥ç‰¹å®šæ¨¡å—ã€‚ 5. ä½¿ç”¨Swift Package Manager Swift Package Manager (SPM)ï¼šä½¿ç”¨SPMæ¥ç®¡ç†å’Œåˆ†å‘SDKï¼Œå¯ä»¥æ˜¾è‘—å‡å°‘SDKçš„ä½“ç§¯ï¼Œå› ä¸ºSPMåªä¼šä¸‹è½½å’Œç¼–è¯‘æ‰€éœ€çš„ä»£ç ã€‚ 6. åŠ¨æ€åº“ vs é™æ€åº“ é€‰æ‹©åˆé€‚çš„åº“ç±»å‹ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨åŠ¨æ€åº“ï¼ˆ.dylibæˆ–.frameworkï¼‰å¯ä»¥å‡å°‘æ•´ä½“åº”ç”¨çš„ä½“ç§¯ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥è¢«å¤šä¸ªåº”ç”¨å…±äº«ã€‚ 7. ç¼–è¯‘ä¼˜åŒ– ä¼˜åŒ–ç¼–è¯‘è®¾ç½®ï¼šåœ¨Xcodeä¸­ï¼Œç¡®ä¿åœ¨Releaseé…ç½®ä¸‹é€‰æ‹©ä¼˜åŒ–é€‰é¡¹ï¼ˆå¦‚-Ozï¼‰ä»¥å‡å°‘ä»£ç ä½“ç§¯ã€‚ 1Build Settings -&gt; Optimization Level -&gt; Optimize for Size [-Oz] 8. å¼•ç”¨ç¬¬ä¸‰æ–¹åº“ä¼˜åŒ– ç§»é™¤æœªä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼šç¡®ä¿åªåŒ…å«é‚£äº›åœ¨SDKä¸­å®é™…ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ã€‚ ä½¿ç”¨è½»é‡çº§çš„ç¬¬ä¸‰æ–¹åº“ï¼šé€‰æ‹©åŠŸèƒ½ç›¸åŒä½†ä½“ç§¯æ›´å°çš„ç¬¬ä¸‰æ–¹åº“ã€‚ 9. ç¬¦å·æ··æ·† ç¬¦å·æ··æ·†ï¼šä½¿ç”¨ç¬¦å·æ··æ·†å·¥å…·ï¼ˆå¦‚llvm-obfuscatorï¼‰æ··æ·†ç¬¦å·è¡¨ä»¥å‡å°‘ç¬¦å·è¡¨å¤§å°å’Œæé«˜ä»£ç å®‰å…¨æ€§ã€‚ é€šè¿‡ä»¥ä¸Šæ–¹æ³•ï¼Œæ‚¨å¯ä»¥æ˜¾è‘—å‡å°‘iOS SDKçš„ä½“ç§¯ï¼Œä»è€Œæå‡ç”¨æˆ·ä½“éªŒå’Œåº”ç”¨çš„æ•´ä½“æ€§èƒ½ã€‚ 2.webViewåŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼ŒH5æ€ä¹ˆåŠ è½½æœ¬åœ°JS/å›¾ç‰‡èµ„æºç§»åŠ¨ H5 é¦–å±ç§’å¼€ä¼˜åŒ–æ–¹æ¡ˆæ¢è®¨ WebViewæ€§èƒ½ã€ä½“éªŒåˆ†æä¸ä¼˜åŒ– 3.çº¿ä¸Šç›‘æ§ï¼Œå¡é¡¿ã€å†…å­˜4.Runloopæœ‰å‡ ä¸ªmodeï¼Ÿæœ€å¸¸ç”¨çš„æ¨¡å¼ä¸»è¦æ˜¯ä»¥ä¸‹å‡ ä¸ªï¼š NSDefaultRunLoopMode / kCFRunLoopDefaultMode UITrackingRunLoopMode NSRunLoopCommonModes / kCFRunLoopCommonModes 5.é¡¹ç›®é‡Œæœ‰ç”¨åˆ°å¸¸é©»çº¿ç¨‹å—ï¼Ÿ6.KVOåŸç†KVO åŸºæœ¬æ¦‚å¿µKVO å…è®¸å¯¹è±¡è§‚å¯Ÿå¦ä¸€ä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§ï¼Œå½“è¯¥å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§‚å¯Ÿè€…ä¼šæ”¶åˆ°é€šçŸ¥ã€‚é€šå¸¸ï¼ŒKVO çš„ä½¿ç”¨åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š æ³¨å†Œè§‚å¯Ÿè€…ï¼šä½¿ç”¨ addObserver:forKeyPath:options:context: æ–¹æ³•æ³¨å†Œè§‚å¯Ÿè€…ã€‚ å®ç°å›è°ƒæ–¹æ³•ï¼šå®ç° observeValueForKeyPath:ofObject:change:context: æ–¹æ³•æ¥å¤„ç†å±æ€§å˜åŒ–ã€‚ ç§»é™¤è§‚å¯Ÿè€…ï¼šä½¿ç”¨ removeObserver:forKeyPath: æ–¹æ³•ç§»é™¤è§‚å¯Ÿè€…ã€‚ KVO å·¥ä½œåŸç†KVO çš„å®ç°ä¸»è¦ä¾èµ–äº Objective-C çš„è¿è¡Œæ—¶æœºåˆ¶ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š åŠ¨æ€åˆ›å»ºå­ç±»å½“ä½ ä¸ºæŸä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§æ³¨å†Œè§‚å¯Ÿè€…æ—¶ï¼ŒObjective-C è¿è¡Œæ—¶ä¼šåŠ¨æ€åˆ›å»ºè¯¥å¯¹è±¡çš„ä¸€ä¸ªå­ç±»ï¼ˆé€šå¸¸ä»¥ NSKVONotifying_ ä¸ºå‰ç¼€ï¼‰ï¼Œå¹¶å°†è¯¥å¯¹è±¡çš„ç±»æŒ‡é’ˆï¼ˆisa æŒ‡é’ˆï¼‰æŒ‡å‘è¿™ä¸ªæ–°åˆ›å»ºçš„å­ç±»ã€‚ é‡å†™å±æ€§çš„ setter æ–¹æ³•åœ¨è¿™ä¸ªæ–°åˆ›å»ºçš„å­ç±»ä¸­ï¼ŒObjective-C è¿è¡Œæ—¶ä¼šé‡å†™è¢«è§‚å¯Ÿå±æ€§çš„ setter æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ è§‚å¯Ÿçš„æ˜¯ name å±æ€§ï¼ŒKVO ä¼šé‡å†™ setName: æ–¹æ³•ã€‚ é€šçŸ¥è§‚å¯Ÿè€…åœ¨é‡å†™çš„ setter æ–¹æ³•ä¸­ï¼ŒKVO ä¼šæ’å…¥ä¸€äº›é’©å­ä»£ç ï¼Œåœ¨å±æ€§å€¼å˜æ›´å‰åè°ƒç”¨ willChangeValueForKey: å’Œ didChangeValueForKey: æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•ç”¨äºé€šçŸ¥è§‚å¯Ÿè€…å±æ€§å³å°†æ”¹å˜å’Œå·²ç»æ”¹å˜ã€‚ è°ƒç”¨è§‚å¯Ÿè€…çš„å›è°ƒæ–¹æ³•didChangeValueForKey: æ–¹æ³•ä¼šè§¦å‘ KVO é€šçŸ¥æœºåˆ¶ï¼Œæœ€ç»ˆè°ƒç”¨è§‚å¯Ÿè€…çš„ observeValueForKeyPath:ofObject:change:context: æ–¹æ³•ã€‚ æ³¨æ„äº‹é¡¹ ç§»é™¤è§‚å¯Ÿè€…ï¼šåœ¨å¯¹è±¡é‡Šæ”¾ä¹‹å‰ï¼Œä¸€å®šè¦ç§»é™¤æ‰€æœ‰çš„è§‚å¯Ÿè€…ï¼Œå¦åˆ™ä¼šå¯¼è‡´å´©æºƒã€‚ çº¿ç¨‹å®‰å…¨ï¼šKVO é€šçŸ¥æ˜¯åŒæ­¥çš„ï¼Œæ„å‘³ç€å±æ€§çš„ setter æ–¹æ³•ä¼šåœ¨è§‚å¯Ÿè€…çš„å›è°ƒæ–¹æ³•å®Œæˆä¹‹åæ‰è¿”å›ã€‚ç¡®ä¿è§‚å¯Ÿè€…çš„å›è°ƒæ–¹æ³•æ˜¯çº¿ç¨‹å®‰å…¨çš„éå¸¸é‡è¦ã€‚ KVO-compliantï¼šç¡®ä¿å±æ€§éµå¾ª KVO åè®®ï¼Œå³é€šè¿‡ setter æ–¹æ³•ï¼ˆè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹å®ä¾‹å˜é‡ï¼‰æ¥æ”¹å˜å±æ€§çš„å€¼ã€‚ è‡ªåŠ¨å’Œæ‰‹åŠ¨é€šçŸ¥ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒKVO æ˜¯è‡ªåŠ¨é€šçŸ¥çš„ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡é‡å†™ automaticallyNotifiesObserversForKey: æ–¹æ³•æ¥ç¦ç”¨è‡ªåŠ¨é€šçŸ¥ï¼Œå¹¶æ‰‹åŠ¨è°ƒç”¨ willChangeValueForKey: å’Œ didChangeValueForKey:ã€‚ 7.IMPã€selectorã€SELå«ä¹‰å’ŒåŒºåˆ« SELï¼ˆselectorï¼‰ SEL æˆ– selector æ˜¯æ–¹æ³•çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚ åœ¨ç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨ä¼šå°†æ–¹æ³•åç§°æ˜ å°„ä¸ºä¸€ä¸ª SEL ç±»å‹çš„é€‰æ‹©å™¨ã€‚ é€‰æ‹©å™¨ç”¨äºåœ¨è¿è¡Œæ—¶æŸ¥æ‰¾æ–¹æ³•çš„å®ç°ã€‚ IMP IMP æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘æ–¹æ³•çš„å®é™…å®ç°ã€‚ å½“ä½ å‘é€æ¶ˆæ¯ç»™å¯¹è±¡æ—¶ï¼Œè¿è¡Œæ—¶ç³»ç»Ÿä¼šæ ¹æ® SEL æ‰¾åˆ°å¯¹åº”çš„ IMPï¼Œç„¶åè°ƒç”¨å®ƒã€‚ ç›´æ¥è°ƒç”¨ IMP å¯ä»¥ç•¥è¿‡æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼Œæé«˜æ€§èƒ½ã€‚ 8.æ¶ˆæ¯è½¬å‘æœºåˆ¶çš„ä¼˜åŠ£ï¼Œå’Œç›´æ¥è°ƒç”¨ç›¸æ¯” æ€§èƒ½ ç›´æ¥è°ƒç”¨æ–¹æ³•ï¼šæœ€å¿«ï¼Œå› ä¸ºç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å·²ç»ç¡®å®šäº†æ–¹æ³•çš„å®ç°ã€‚ æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼šç¨æ…¢ï¼Œå› ä¸ºéœ€è¦åœ¨è¿è¡Œæ—¶æŸ¥æ‰¾æ–¹æ³•çš„å®ç°ã€‚ æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼šæœ€æ…¢ï¼Œå› ä¸ºæ¶‰åŠå¤šä¸ªæ­¥éª¤æ¥å¤„ç†æœªçŸ¥æ¶ˆæ¯ã€‚ çµæ´»æ€§ ç›´æ¥è°ƒç”¨æ–¹æ³•ï¼šçµæ´»æ€§æœ€ä½ï¼Œå› ä¸ºæ–¹æ³•å®ç°æ˜¯é™æ€ç»‘å®šçš„ã€‚ æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼šçµæ´»æ€§è¾ƒé«˜ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€æŸ¥æ‰¾å’Œè°ƒç”¨æ–¹æ³•ã€‚ æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼šçµæ´»æ€§æœ€é«˜ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€å¤„ç†æœªçŸ¥æ¶ˆæ¯ï¼Œç”šè‡³å¯ä»¥å°†æ¶ˆæ¯è½¬å‘ç»™å…¶ä»–å¯¹è±¡ã€‚ ä½¿ç”¨åœºæ™¯ ç›´æ¥è°ƒç”¨æ–¹æ³•ï¼šé€‚ç”¨äºæ€§èƒ½å…³é”®çš„ä»£ç ï¼Œæ–¹æ³•å®ç°æ˜¯ç¡®å®šçš„ã€‚ æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼šé€‚ç”¨äºéœ€è¦ä¸€äº›åŠ¨æ€ç‰¹æ€§çš„ä»£ç ã€‚ æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼šé€‚ç”¨äºéœ€è¦é«˜åº¦åŠ¨æ€æ€§å’Œçµæ´»æ€§çš„ä»£ç ï¼Œä¾‹å¦‚ä»£ç†æ¨¡å¼ã€æ¶ˆæ¯è·¯ç”±ç­‰ã€‚ 9.ç‚¹å‡»ç•Œé¢ä¸Šçš„ä¸€ä¸ªæŒ‰é’®ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿå“åº”è€…é“¾ï¼ˆResponder Chainï¼‰å“åº”è€…é“¾æ˜¯ä¸€ä¸ªç”± UIResponder å¯¹è±¡ç»„æˆçš„é“¾æ¡ï¼Œè¿™äº›å¯¹è±¡å¯ä»¥å“åº”å’Œå¤„ç†äº‹ä»¶ã€‚UIView, UIViewController, UIWindow, ä»¥åŠ UIApplication éƒ½æ˜¯ UIResponder çš„å­ç±»ã€‚ äº‹ä»¶ä¼ é€’å’Œå“åº”è€…é“¾ è§¦æ‘¸äº‹ä»¶çš„äº§ç”Ÿï¼šå½“ç”¨æˆ·ç‚¹å‡»å±å¹•æ—¶ï¼Œç¡¬ä»¶ä¼šæ•æ‰åˆ°è¿™ä¸ªè§¦æ‘¸äº‹ä»¶ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ iOS ç³»ç»Ÿã€‚ åˆ›å»º UIEvent å¯¹è±¡ï¼šiOS ç³»ç»Ÿä¼šå°†è§¦æ‘¸æ•°æ®å°è£…æˆä¸€ä¸ª UIEvent å¯¹è±¡ã€‚ äº‹ä»¶ä¼ é€’ç»™ UIWindowï¼šç³»ç»Ÿä¼šå°†è¿™ä¸ª UIEvent ä¼ é€’ç»™åº”ç”¨çš„ä¸» UIWindowã€‚ æ‰¾åˆ°ç¬¬ä¸€å“åº”è€…ï¼šUIWindow ä¼šè°ƒç”¨ hitTest:withEvent: æ–¹æ³•ï¼Œä»è§†å›¾å±‚æ¬¡ç»“æ„ä¸­æ‰¾å‡ºæœ€åˆé€‚çš„è§†å›¾æ¥å¤„ç†è¿™ä¸ªè§¦æ‘¸äº‹ä»¶ã€‚è¿™ä¸ªè§†å›¾æˆä¸ºç¬¬ä¸€å“åº”è€…ã€‚ äº‹ä»¶ä¼ é€’ç»™ UIViewï¼šè§¦æ‘¸äº‹ä»¶ä¼šè¢«ä¼ é€’ç»™æ‰¾åˆ°çš„è§†å›¾ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ª UIButtonï¼‰ï¼Œå¹¶è°ƒç”¨å…¶ touchesBegan:withEvent:, touchesMoved:withEvent:, touchesEnded:withEvent: æ–¹æ³•æ¥å¤„ç†å…·ä½“çš„è§¦æ‘¸äº‹ä»¶ã€‚ æ‰‹åŠ¿è¯†åˆ«å™¨çš„ä¼˜å…ˆçº§æ‰‹åŠ¿è¯†åˆ«å™¨ï¼ˆGesture Recognizerï¼‰åœ¨ iOS çš„äº‹ä»¶å¤„ç†æœºåˆ¶ä¸­å…·æœ‰è¾ƒé«˜çš„ä¼˜å…ˆçº§ã€‚å…·ä½“æ¥è¯´ï¼Œæ‰‹åŠ¿è¯†åˆ«å™¨ä¼šå…ˆæ¥æ”¶åˆ°è§¦æ‘¸äº‹ä»¶ï¼Œå¹¶å°è¯•è¯†åˆ«æ˜¯å¦æ˜¯è‡ªå·±å…³å¿ƒçš„æ‰‹åŠ¿ã€‚å¦‚æœæ‰‹åŠ¿è¯†åˆ«å™¨è¯†åˆ«æˆåŠŸï¼Œé‚£ä¹ˆå®ƒä¼šå¤„ç†è¯¥äº‹ä»¶å¹¶é˜»æ­¢äº‹ä»¶ç»§ç»­ä¼ é€’ç»™å“åº”è€…é“¾ã€‚ å…·ä½“çš„äº‹ä»¶ä¼ é€’é¡ºåº è§¦æ‘¸äº‹ä»¶äº§ç”Ÿï¼šç”¨æˆ·è§¦æ‘¸å±å¹•ï¼Œè§¦æ‘¸äº‹ä»¶è¢«ç¡¬ä»¶æ•è·å¹¶ä¼ é€’ç»™ iOS ç³»ç»Ÿã€‚ åˆ›å»º UIEvent å¯¹è±¡ï¼šiOS ç³»ç»Ÿå°†è§¦æ‘¸æ•°æ®å°è£…æˆä¸€ä¸ª UIEvent å¯¹è±¡ã€‚ äº‹ä»¶ä¼ é€’ç»™ UIWindowï¼šç³»ç»Ÿå°†æ­¤ UIEvent å¯¹è±¡ä¼ é€’ç»™åº”ç”¨çš„ä¸» UIWindowã€‚ æ‰‹åŠ¿è¯†åˆ«å™¨æ£€æµ‹ï¼šUIWindow ä¼šå…ˆå°†è§¦æ‘¸äº‹ä»¶ä¼ é€’ç»™è§†å›¾å±‚æ¬¡ç»“æ„ä¸­ç›¸å…³è§†å›¾çš„æ‰‹åŠ¿è¯†åˆ«å™¨ã€‚å¦‚æœæœ‰æ‰‹åŠ¿è¯†åˆ«å™¨æ£€æµ‹åˆ°æ‰‹åŠ¿å¹¶è¯†åˆ«æˆåŠŸï¼Œé‚£ä¹ˆè¯¥æ‰‹åŠ¿è¯†åˆ«å™¨ä¼šå¤„ç†è¯¥äº‹ä»¶ï¼Œå¹¶é˜»æ­¢äº‹ä»¶ç»§ç»­ä¼ é€’ã€‚ äº‹ä»¶ä¼ é€’ç»™å“åº”è€…é“¾ï¼šå¦‚æœæ‰‹åŠ¿è¯†åˆ«å™¨æ²¡æœ‰å¤„ç†è¯¥äº‹ä»¶ï¼Œé‚£ä¹ˆäº‹ä»¶å°†æŒ‰ç…§å“åº”è€…é“¾çš„æœºåˆ¶ä¼ é€’ã€‚å“åº”è€…é“¾ä¼šä»æœ€åˆé€‚çš„è§†å›¾å¼€å§‹å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Œè°ƒç”¨ç›¸å…³çš„ touchesBegan:withEvent:, touchesMoved:withEvent:, touchesEnded:withEvent: æ–¹æ³•ã€‚ 10.SQLite3å’ŒRealmçš„åŒºåˆ«ï¼Ÿ1. æ•°æ®åº“ç±»å‹ SQLite3: SQLite æ˜¯ä¸€ä¸ªè½»é‡çº§çš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œéµå¾ª SQL æ ‡å‡†ã€‚å®ƒä½¿ç”¨ SQL è¯­è¨€è¿›è¡Œæ•°æ®æ“ä½œï¼Œæ”¯æŒå¤æ‚çš„æŸ¥è¯¢å’Œäº‹åŠ¡å¤„ç†ã€‚ Realm: Realm æ˜¯ä¸€ä¸ªé¢å‘å¯¹è±¡çš„æ•°æ®åº“ï¼Œæ—¨åœ¨ç®€åŒ–æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢è¿‡ç¨‹ã€‚å®ƒä¸ä½¿ç”¨ SQLï¼Œè€Œæ˜¯é€šè¿‡å¯¹è±¡æ¨¡å‹è¿›è¡Œæ•°æ®æ“ä½œã€‚ 2. æ•°æ®æ¨¡å‹ SQLite3: ä½¿ç”¨å…³ç³»å‹æ•°æ®æ¨¡å‹ï¼Œæ•°æ®å­˜å‚¨åœ¨è¡¨ä¸­ï¼Œè¡¨åŒ…å«è¡Œå’Œåˆ—ã€‚æ•°æ®æ“ä½œé€šè¿‡ SQL æŸ¥è¯¢è¯­å¥å®Œæˆã€‚ Realm: ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ•°æ®æ¨¡å‹ï¼Œæ•°æ®å­˜å‚¨åœ¨å¯¹è±¡ä¸­ã€‚ä½ å¯ä»¥ç›´æ¥é€šè¿‡å¯¹è±¡å±æ€§è¿›è¡ŒæŸ¥è¯¢å’Œæ“ä½œï¼Œè¿™ä½¿å¾—ä»£ç æ›´åŠ ç›´è§‚å’Œç®€æ´ã€‚ 3. æ€§èƒ½ SQLite3: é€šå¸¸åœ¨å¤„ç†éå¸¸å¤æ‚çš„æŸ¥è¯¢æˆ–éœ€è¦é«˜åº¦è‡ªå®šä¹‰çš„æŸ¥è¯¢æ—¶æ€§èƒ½è¾ƒå¥½ã€‚SQLite3 çš„æ€§èƒ½å¯èƒ½ä¼šå—åˆ° SQL æŸ¥è¯¢å¤æ‚æ€§çš„å½±å“ã€‚ Realm: ç”±äºå…¶è®¾è®¡é¢å‘ç§»åŠ¨è®¾å¤‡ï¼Œé€šå¸¸åœ¨è¯»å†™æ€§èƒ½ä¸Šè¡¨ç°ä¼˜å¼‚ï¼Œå°¤å…¶æ˜¯å¯¹äºå¸¸è§çš„ã€ç®€å•çš„æŸ¥è¯¢æ“ä½œã€‚Realm è¿˜æä¾›äº†å¯¹å¤šçº¿ç¨‹çš„æ”¯æŒï¼Œä»¥æé«˜å¹¶å‘æ€§èƒ½ã€‚ 4. æ•°æ®è¿ç§» SQLite3: æ•°æ®åº“è¿ç§»é€šå¸¸éœ€è¦æ‰‹åŠ¨ç¼–å†™ SQL è„šæœ¬æ¥ä¿®æ”¹è¡¨ç»“æ„ï¼Œè¿™å¯èƒ½ä¼šæ¯”è¾ƒç¹çã€‚ Realm: æä¾›äº†å†…ç½®çš„æ•°æ®è¿ç§»æœºåˆ¶ï¼Œå¯ä»¥é€šè¿‡ä»£ç æ¥å®šä¹‰è¿ç§»æ­¥éª¤ï¼Œè¿™ä½¿å¾—æ•°æ®è¿ç§»è¿‡ç¨‹æ›´åŠ æ–¹ä¾¿å’Œå®‰å…¨ã€‚ 5. æ˜“ç”¨æ€§ SQLite3: ç”±äºä½¿ç”¨ SQL è¯­è¨€ï¼Œå¼€å‘è€…éœ€è¦äº†è§£ SQL è¯­æ³•å’Œå…³ç³»å‹æ•°æ®åº“çš„åŸºæœ¬æ¦‚å¿µã€‚æ•°æ®æ¨¡å‹çš„æ”¹å˜é€šå¸¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹è¡¨ç»“æ„ã€‚ Realm: æä¾›äº†é¢å‘å¯¹è±¡çš„ APIï¼Œä½¿ç”¨èµ·æ¥æ›´åŠ ç›´è§‚ã€‚å¼€å‘è€…ä¸éœ€è¦å­¦ä¹  SQLï¼Œåªéœ€æ“ä½œå¯¹è±¡æ¨¡å‹å³å¯ã€‚ 6. æ•°æ®åŒæ­¥ SQLite3: æœ¬èº«ä¸æä¾›æ•°æ®åŒæ­¥åŠŸèƒ½ã€‚å¦‚æœéœ€è¦åœ¨ä¸åŒè®¾å¤‡é—´åŒæ­¥æ•°æ®ï¼Œé€šå¸¸éœ€è¦é¢å¤–çš„æœåŠ¡å™¨æ”¯æŒã€‚ Realm: æä¾›äº† Realm Cloud æœåŠ¡ï¼Œå¯ä»¥å®ç°æ•°æ®çš„å®æ—¶åŒæ­¥å’Œç¦»çº¿è®¿é—®ï¼Œé€‚åˆéœ€è¦å¤šè®¾å¤‡æ•°æ®åŒæ­¥çš„åº”ç”¨ã€‚ 7. æ–‡ä»¶å¤§å°å’Œå­˜å‚¨æ–¹å¼ SQLite3: æ•°æ®å­˜å‚¨åœ¨å•ä¸ªæ–‡ä»¶ä¸­ï¼Œæ–‡ä»¶å¤§å°ä¼šéšç€æ•°æ®é‡çš„å¢åŠ è€Œå¢åŠ ã€‚SQLite3 æ”¯æŒå¤šç§æ•°æ®ç±»å‹å’Œå­˜å‚¨æ ¼å¼ã€‚ Realm: æ•°æ®ä¹Ÿå­˜å‚¨åœ¨å•ä¸ªæ–‡ä»¶ä¸­ï¼Œä½†ç”±äºå…¶é«˜æ•ˆçš„å­˜å‚¨æ ¼å¼å’Œå‹ç¼©æœºåˆ¶ï¼Œé€šå¸¸æ–‡ä»¶å¤§å°è¾ƒå°ã€‚Realm å¯¹äºå¯¹è±¡æ¨¡å‹çš„å­˜å‚¨è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå‡å°‘äº†æ•°æ®çš„å†—ä½™ã€‚ 8. åŠ å¯†å’Œå®‰å…¨æ€§ SQLite3: æ”¯æŒåŠ å¯†ï¼Œä½†éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ SQLCipherï¼‰æ¥å®ç°ã€‚ Realm: å†…ç½®æ”¯æŒåŠ å¯†ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åŠ å¯†æ•´ä¸ªæ•°æ®åº“æ–‡ä»¶ï¼Œæé«˜æ•°æ®å®‰å…¨æ€§ã€‚ 9. å¤šå¹³å°æ”¯æŒ SQLite3: æ”¯æŒå‡ ä¹æ‰€æœ‰çš„å¹³å°ï¼ŒåŒ…æ‹¬ iOSã€Androidã€Windowsã€Linux ç­‰ã€‚å› ä¸ºå…¶å¹¿æ³›çš„æ”¯æŒå’Œæˆç†Ÿåº¦ï¼ŒSQLite æ˜¯ä¸€ä¸ªéå¸¸å¯é çš„é€‰æ‹©ã€‚ Realm: ä¹Ÿæ”¯æŒå¤šå¹³å°ï¼ŒåŒ…æ‹¬ iOSã€Androidã€React Native ç­‰ã€‚Realm æä¾›çš„ API åœ¨ä¸åŒå¹³å°ä¸Šä¿æŒä¸€è‡´æ€§ï¼Œä¾¿äºè·¨å¹³å°å¼€å‘ã€‚ æ€»ç»“ SQLite3: é€‚åˆéœ€è¦å¤æ‚æŸ¥è¯¢ã€äº‹åŠ¡å¤„ç†å’Œé«˜åº¦è‡ªå®šä¹‰çš„åº”ç”¨ï¼Œå°¤å…¶æ˜¯é‚£äº›å¼€å‘è€…å·²ç»ç†Ÿæ‚‰ SQL è¯­è¨€çš„æƒ…å†µã€‚ Realm: é€‚åˆéœ€è¦é«˜æ€§èƒ½ã€ç®€å•æ˜“ç”¨å’Œé¢å‘å¯¹è±¡çš„æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆï¼Œç‰¹åˆ«æ˜¯ç§»åŠ¨åº”ç”¨å¼€å‘ã€‚ 11.Categoryå’ŒExtensionçš„åŒºåˆ« ç‰¹æ€§ Category Extension å®šä¹‰å’Œç”¨é€” ä¸ºç°æœ‰ç±»æ·»åŠ æ–¹æ³• åœ¨å®ç°æ–‡ä»¶ä¸­æ·»åŠ ç§æœ‰æ–¹æ³•å’Œå±æ€§ å®ä¾‹å˜é‡ ä¸èƒ½æ·»åŠ  å¯ä»¥æ·»åŠ  è®¿é—®æ§åˆ¶ æ–¹æ³•æ˜¯å…¬å¼€çš„ æ–¹æ³•å’Œå±æ€§æ˜¯ç§æœ‰çš„ ç¼–è¯‘æ—¶æœº åŠ¨æ€åŠ è½½ï¼Œåœ¨è¿è¡Œæ—¶æ·»åŠ  ç¼–è¯‘æ—¶æ·»åŠ ï¼Œç±»å®šä¹‰çš„ä¸€éƒ¨åˆ† ä½¿ç”¨åœºæ™¯ å°†ç±»çš„æ–¹æ³•åˆ’åˆ†åˆ°å¤šä¸ªæ–‡ä»¶ï¼Œä¸ºç³»ç»Ÿç±»æ·»åŠ æ–¹æ³• åœ¨å®ç°æ–‡ä»¶ä¸­å®šä¹‰ç§æœ‰æ–¹æ³•å’Œå±æ€§ï¼Œæé«˜å°è£…æ€§ 12.Blockçš„æœ¬è´¨ï¼Œç»“æ„ä½“é‡Œæœ‰å“ªäº›ä¸œè¥¿ï¼Ÿå†…å­˜ç®¡ç†Block çš„æœ¬è´¨åœ¨åº•å±‚ï¼ŒBlock æ˜¯ä¸€ä¸ªå°è£…äº†å‡½æ•°æŒ‡é’ˆã€æ•è·å˜é‡åŠå…¶ä»–ç›¸å…³ä¿¡æ¯çš„ç»“æ„ä½“ã€‚å¯ä»¥é€šè¿‡ Clang æä¾›çš„ç¼–è¯‘å™¨é€‰é¡¹ -rewrite-objc å°† Objective-C ä»£ç è½¬æ¢ä¸ºçº¯ C++ ä»£ç ï¼Œæ¥æŸ¥çœ‹ Block çš„å…·ä½“å®ç°ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ Block å£°æ˜å’Œä½¿ç”¨ï¼š 1234void (^simpleBlock)(void) = ^{ NSLog(@\"This is a simple block\");};simpleBlock(); ä½¿ç”¨ -rewrite-objc å°†å…¶è½¬æ¢ä¸º C++ ä»£ç åï¼Œå¯ä»¥çœ‹åˆ° Block çš„åº•å±‚å®ç°ã€‚ Block çš„ç»“æ„ä½“åœ¨åº•å±‚ï¼ŒBlock æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œé€šå¸¸åŒ…å«ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š isa æŒ‡é’ˆï¼šæŒ‡å‘ Block çš„ç±»å¯¹è±¡ï¼Œç”¨äºå®ç° Objective-C çš„åŠ¨æ€ç‰¹æ€§ã€‚ flagsï¼šæ ‡å¿—ä½ï¼ŒæŒ‡ç¤º Block çš„ä¸€äº›ç‰¹æ€§ï¼ˆå¦‚æ˜¯å¦éœ€è¦å¤åˆ¶ã€æ˜¯å¦åŒ…å«æ•è·å˜é‡ç­‰ï¼‰ã€‚ reservedï¼šä¿ç•™å­—æ®µï¼Œé€šå¸¸ç”¨äºå†…å­˜å¯¹é½ã€‚ invoke æŒ‡é’ˆï¼šæŒ‡å‘å®é™…æ‰§è¡Œ Block ä»£ç çš„å‡½æ•°æŒ‡é’ˆã€‚ descriptor æŒ‡é’ˆï¼šæŒ‡å‘ Block çš„æè¿°ä¿¡æ¯ï¼ŒåŒ…æ‹¬ Block çš„å¤§å°ã€æ‹·è´å’Œé‡Šæ”¾å‡½æ•°ç­‰ã€‚ æ•è·å˜é‡ï¼šå¦‚æœ Block æ•è·äº†å¤–éƒ¨å˜é‡ï¼Œè¿™äº›å˜é‡ä¼šè¢«å­˜å‚¨åœ¨ç»“æ„ä½“ä¸­ã€‚ å…·ä½“çš„ç»“æ„ä½“å®šä¹‰å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314struct __block_impl { void *isa; int flags; int reserved; void (*invoke)(void *, ...); struct __block_descriptor *descriptor;};struct __block_descriptor { unsigned long int reserved; unsigned long int size; void (*copy)(void *dst, void *src); void (*dispose)(void *src);}; Block çš„å†…å­˜ç®¡ç†Block çš„å†…å­˜ç®¡ç†æ¶‰åŠåˆ°ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š æ ˆä¸Šçš„ Blockï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒBlock æ˜¯åœ¨æ ˆä¸Šåˆ†é…çš„ã€‚è¿™æ„å‘³ç€å®ƒçš„ç”Ÿå‘½å‘¨æœŸæ˜¯æœ‰é™çš„ï¼Œå½“è¶…å‡ºå…¶ä½œç”¨åŸŸæ—¶ï¼ŒBlock ä¼šè¢«é”€æ¯ã€‚å¦‚æœè¯•å›¾åœ¨ä½œç”¨åŸŸå¤–ä½¿ç”¨è¯¥ Blockï¼Œä¼šå¯¼è‡´å´©æºƒã€‚ å †ä¸Šçš„ Blockï¼šä¸ºäº†è®© Block åœ¨ä½œç”¨åŸŸå¤–ä»ç„¶æœ‰æ•ˆï¼Œå¯ä»¥å°†å…¶å¤åˆ¶åˆ°å †ä¸Šã€‚å¯ä»¥ä½¿ç”¨ Block_copy å‡½æ•°æˆ– ^ è¿ç®—ç¬¦æ¥å®ç°è¿™ä¸€ç‚¹ã€‚åœ¨ ARC ç¯å¢ƒä¸‹ï¼Œç›´æ¥èµ‹å€¼ç»™ __strong ç±»å‹çš„å˜é‡æ—¶ï¼ŒBlock ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°å †ä¸Šã€‚ æ•è·å˜é‡çš„å†…å­˜ç®¡ç†ï¼šBlock å¯ä»¥æ•è·å…¶ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼ŒåŒ…æ‹¬è‡ªåŠ¨å˜é‡ï¼ˆå±€éƒ¨å˜é‡ï¼‰å’Œé™æ€å˜é‡ã€‚æ•è·å˜é‡çš„å†…å­˜ç®¡ç†å–å†³äºå˜é‡çš„ç±»å‹ï¼š å¯¹äºè‡ªåŠ¨å˜é‡ï¼ŒBlock ä¼šå°†å…¶å€¼æ‹·è´åˆ° Block çš„ç»“æ„ä½“ä¸­ã€‚ å¯¹äºå¯¹è±¡ç±»å‹çš„å˜é‡ï¼ŒBlock ä¼šå¯¹å…¶è¿›è¡Œ retain æ“ä½œï¼ˆåœ¨ ARC ä¸‹ï¼‰ï¼Œä»¥ç¡®ä¿ Block çš„ç”Ÿå‘½å‘¨æœŸå†…å˜é‡ä»ç„¶æœ‰æ•ˆã€‚ 13.ä¸ºä»€ä¹ˆè¦åœ¨ä¸»çº¿ç¨‹åˆ·æ–°UIåœ¨ iOS å’Œ macOS å¼€å‘ä¸­ï¼Œæ‰€æœ‰çš„ UI æ›´æ–°å¿…é¡»åœ¨ä¸»çº¿ç¨‹ï¼ˆä¹Ÿç§°ä¸ºä¸»é˜Ÿåˆ—ï¼‰ä¸Šæ‰§è¡Œã€‚ä»¥ä¸‹æ˜¯ä¸ºä»€ä¹ˆéœ€è¦åœ¨ä¸»çº¿ç¨‹åˆ·æ–° UI çš„å‡ ä¸ªåŸå› ï¼š 1. UIKit å’Œ AppKit çš„çº¿ç¨‹å®‰å…¨æ€§ å•çº¿ç¨‹è®¾è®¡ï¼š UIKitï¼ˆiOS çš„ UI æ¡†æ¶ï¼‰å’Œ AppKitï¼ˆmacOS çš„ UI æ¡†æ¶ï¼‰æ˜¯è®¾è®¡ä¸ºéçº¿ç¨‹å®‰å…¨çš„ã€‚å®ƒä»¬çš„å¤§å¤šæ•° API éƒ½å‡å®šæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šè°ƒç”¨çš„ã€‚ è¿™æ˜¯å› ä¸º UI æ“ä½œé€šå¸¸æ¶‰åŠåˆ°å¤§é‡å¤æ‚çš„å†…éƒ¨çŠ¶æ€ç®¡ç†å’Œç»˜å›¾æ“ä½œï¼Œç¡®ä¿æ‰€æœ‰è¿™äº›æ“ä½œåœ¨ä¸€ä¸ªå•ä¸€çº¿ç¨‹ä¸Šå¯ä»¥é¿å…å¹¶å‘é—®é¢˜ã€‚ 2. æ•°æ®ä¸€è‡´æ€§å’Œçº¿ç¨‹åŒæ­¥ æ•°æ®ä¸€è‡´æ€§ï¼š å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œ UI ç»„ä»¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸ä¸€è‡´çš„ UI çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªçº¿ç¨‹æ­£åœ¨ä¿®æ”¹è§†å›¾çš„å±æ€§ï¼Œè€Œå¦ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨è¯•å›¾æ¸²æŸ“è§†å›¾ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å´©æºƒæˆ–æœªå®šä¹‰è¡Œä¸ºã€‚ çº¿ç¨‹åŒæ­¥ï¼š å¤šçº¿ç¨‹æ“ä½œ UI éœ€è¦é¢å¤–çš„åŒæ­¥æœºåˆ¶æ¥é˜²æ­¢å¹¶å‘è®¿é—®å†²çªã€‚ä½¿ç”¨ä¸»çº¿ç¨‹å¯ä»¥ç®€åŒ–è¿™ç§åŒæ­¥éœ€æ±‚ï¼Œä½¿ä»£ç æ›´å®¹æ˜“ç»´æŠ¤å’Œç†è§£ã€‚ 3. äº‹ä»¶å¤„ç†æ¨¡å‹ äº‹ä»¶å¾ªç¯ï¼š iOS å’Œ macOS åº”ç”¨ç¨‹åºçš„ä¸»çº¿ç¨‹è¿è¡Œä¸€ä¸ªäº‹ä»¶å¾ªç¯ï¼Œå¤„ç†ç”¨æˆ·äº¤äº’ã€å®šæ—¶å™¨ã€ç½‘ç»œå“åº”ç­‰å„ç§äº‹ä»¶ã€‚UI æ›´æ–°ä¹Ÿæ˜¯äº‹ä»¶å¾ªç¯çš„ä¸€éƒ¨åˆ†ã€‚ é€šè¿‡å°†æ‰€æœ‰ UI æ“ä½œæ”¾åœ¨ä¸»çº¿ç¨‹ä¸Šï¼Œç¡®ä¿äº†äº‹ä»¶å¤„ç†çš„é¡ºåºæ€§å’Œä¸€è‡´æ€§ã€‚ 4. ç”¨æˆ·ä½“éªŒ å¹³æ»‘çš„ UI åŠ¨ç”»å’Œå“åº”ï¼š åœ¨ä¸»çº¿ç¨‹ä¸Šæ›´æ–° UI å¯ä»¥ç¡®ä¿åŠ¨ç”»çš„å¹³æ»‘æ€§å’Œç”¨æˆ·äº¤äº’çš„åŠæ—¶å“åº”ã€‚å¦‚æœåœ¨åå°çº¿ç¨‹æ›´æ–° UIï¼Œå¯èƒ½ä¼šå¯¼è‡´åŠ¨ç”»å¡é¡¿æˆ–å»¶è¿Ÿå“åº”ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚ é¿å…æ­»é”ï¼š ä¸»çº¿ç¨‹ä¸Šçš„æ“ä½œæ˜¯é¡ºåºæ‰§è¡Œçš„ï¼Œè¿™é™ä½äº†å‘ç”Ÿæ­»é”çš„é£é™©ã€‚å¦‚æœå°è¯•åœ¨åå°çº¿ç¨‹è¿›è¡Œå¤æ‚çš„ UI æ“ä½œï¼Œå¯èƒ½ä¼šå¯¼è‡´çº¿ç¨‹é—´çš„èµ„æºäº‰ç”¨å’Œæ­»é”ã€‚ æ€»ç»“åœ¨ä¸»çº¿ç¨‹åˆ·æ–° UI æ˜¯ä¸ºäº†ç¡®ä¿ UIKit å’Œ AppKit çš„çº¿ç¨‹å®‰å…¨æ€§ã€ä¿æŒæ•°æ®ä¸€è‡´æ€§å’Œç®€åŒ–çº¿ç¨‹åŒæ­¥ã€éµå¾ªäº‹ä»¶å¤„ç†æ¨¡å‹ä»¥åŠæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚é€šè¿‡ç†è§£å’Œéµå¾ªè¿™äº›åŸåˆ™ï¼Œå¯ä»¥é¿å…è®¸å¤šæ½œåœ¨çš„å¹¶å‘é—®é¢˜å’Œæ€§èƒ½ç“¶é¢ˆï¼Œä»è€Œæ„å»ºæ›´ç¨³å®šå’Œé«˜æ•ˆçš„åº”ç”¨ç¨‹åºã€‚ 14.Swiftä¸­Resultç±»å‹åœ¨ Swift ä¸­ï¼ŒResult ç±»å‹æ˜¯ä¸€ç§ç”¨äºè¡¨ç¤ºæ“ä½œç»“æœçš„æšä¸¾ï¼Œèƒ½å¤Ÿæ˜ç¡®åœ°è¡¨è¾¾æˆåŠŸå’Œå¤±è´¥çš„æƒ…å†µã€‚å®ƒçš„å¼•å…¥ä½¿å¾—é”™è¯¯å¤„ç†æ›´åŠ ç®€æ´å’Œæ˜ç¡®ï¼Œç‰¹åˆ«æ˜¯åœ¨å¼‚æ­¥æ“ä½œå’Œå‡½æ•°è¿”å›å€¼ä¸­ã€‚ Result ç±»å‹çš„å®šä¹‰Result ç±»å‹æ˜¯ä¸€ä¸ªæ³›å‹æšä¸¾ï¼Œæœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼š .success(Value)ï¼šè¡¨ç¤ºæ“ä½œæˆåŠŸï¼Œå¹¶åŒ…å«æˆåŠŸæ—¶çš„è¿”å›å€¼ã€‚ .failure(Error)ï¼šè¡¨ç¤ºæ“ä½œå¤±è´¥ï¼Œå¹¶åŒ…å«å¤±è´¥æ—¶çš„é”™è¯¯ã€‚ ä»¥ä¸‹æ˜¯ Result ç±»å‹çš„å®šä¹‰ï¼š 1234enum Result&lt;Success, Failure: Error&gt; { case success(Success) case failure(Failure)} ä½¿ç”¨ Result ç±»å‹å®šä¹‰ä¸€ä¸ªè¿”å› Result ç±»å‹çš„å‡½æ•°å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºä»æœåŠ¡å™¨è·å–æ•°æ®ï¼Œè¯¥å‡½æ•°å¯ä»¥æˆåŠŸè¿”å›æ•°æ®ï¼Œä¹Ÿå¯èƒ½å› ä¸ºç½‘ç»œé”™è¯¯è€Œå¤±è´¥ï¼š 12345678910111213141516171819202122enum NetworkError: Error { case badURL case requestFailed case unknown}func fetchData(from urlString: String, completion: (Result&lt;Data, NetworkError&gt;) -&gt; Void) { guard let url = URL(string: urlString) else { completion(.failure(.badURL)) return } URLSession.shared.dataTask(with: url) { data, response, error in if let _ = error { completion(.failure(.requestFailed)) } else if let data = data { completion(.success(data)) } else { completion(.failure(.unknown)) } }.resume()} è°ƒç”¨å¹¶å¤„ç† Resultè°ƒç”¨ fetchData å‡½æ•°ï¼Œå¹¶å¤„ç†è¿”å›çš„ Resultï¼š 1234567891011121314151617fetchData(from: \"https://example.com\") { result in switch result { case .success(let data): // å¤„ç†æˆåŠŸæƒ…å†µ print(\"Data received: \\(data)\") case .failure(let error): // å¤„ç†å¤±è´¥æƒ…å†µ switch error { case .badURL: print(\"Bad URL\") case .requestFailed: print(\"Request failed\") case .unknown: print(\"Unknown error\") } }} Result ç±»å‹çš„ä¾¿åˆ©æ–¹æ³•Swift æä¾›äº†ä¸€äº›ä¾¿åˆ©æ–¹æ³•æ¥å¤„ç† Result ç±»å‹ï¼ŒåŒ…æ‹¬ mapã€flatMapã€mapError å’Œ flatMapErrorã€‚ map æ–¹æ³•map æ–¹æ³•å¯ä»¥å°† Result ä¸­çš„æˆåŠŸå€¼è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹ï¼š 12345let result: Result&lt;Int, NetworkError&gt; = .success(42)let stringResult = result.map { value in return \"The answer is \\(value)\"}// stringResult æ˜¯ Result&lt;String, NetworkError&gt;.success(\"The answer is 42\") flatMap æ–¹æ³•flatMap æ–¹æ³•ç”¨äºå°† Result ä¸­çš„æˆåŠŸå€¼è½¬æ¢ä¸ºå¦ä¸€ä¸ª Resultï¼š 12345let result: Result&lt;Int, NetworkError&gt; = .success(42)let newResult = result.flatMap { value in return Result&lt;String, NetworkError&gt;.success(\"The answer is \\(value)\")}// newResult æ˜¯ Result&lt;String, NetworkError&gt;.success(\"The answer is 42\") mapError æ–¹æ³•mapError æ–¹æ³•ç”¨äºå°† Result ä¸­çš„é”™è¯¯å€¼è½¬æ¢ä¸ºå¦ä¸€ç§é”™è¯¯ç±»å‹ï¼š 12345let result: Result&lt;Int, NetworkError&gt; = .failure(.badURL)let newResult = result.mapError { error in return MyCustomError.networkError(error)}// newResult æ˜¯ Result&lt;Int, MyCustomError&gt;.failure(.networkError(.badURL)) flatMapError æ–¹æ³•flatMapError æ–¹æ³•ç”¨äºå°† Result ä¸­çš„é”™è¯¯å€¼è½¬æ¢ä¸ºå¦ä¸€ä¸ª Resultï¼š 12345let result: Result&lt;Int, NetworkError&gt; = .failure(.badURL)let newResult = result.flatMapError { error in return Result&lt;Int, MyCustomError&gt;.failure(.networkError(error))}// newResult æ˜¯ Result&lt;Int, MyCustomError&gt;.failure(.networkError(.badURL)) æ€»ç»“Result ç±»å‹åœ¨ Swift ä¸­æä¾›äº†ä¸€ç§ä¼˜é›…çš„æ–¹å¼æ¥å¤„ç†å¯èƒ½æˆåŠŸæˆ–å¤±è´¥çš„æ“ä½œã€‚é€šè¿‡æ˜ç¡®åœ°è¡¨è¾¾æˆåŠŸå’Œå¤±è´¥çš„æƒ…å†µï¼ŒResult ç±»å‹ä½¿å¾—ä»£ç æ›´åŠ æ˜“è¯»å’Œå¯ç»´æŠ¤ã€‚å€ŸåŠ© mapã€flatMapã€mapError å’Œ flatMapError ç­‰ä¾¿åˆ©æ–¹æ³•ï¼Œå¯ä»¥æ›´æ–¹ä¾¿åœ°å¤„ç† Result ç±»å‹çš„å€¼ã€‚ä½¿ç”¨ Result ç±»å‹å¯ä»¥æ›´å¥½åœ°ç®¡ç†é”™è¯¯å¤„ç†ï¼Œç‰¹åˆ«æ˜¯åœ¨å¼‚æ­¥æ“ä½œä¸­ã€‚ 15.äºŒå‰æ ‘çš„ç¿»è½¬226. ç¿»è½¬äºŒå‰æ ‘ é€’å½’ï¼š 12345678910var invertTree = function(root) { if (root === null) { return null; } const left = invertTree(root.left); const right = invertTree(root.right); root.left = right; root.right = left; return root;}; è¿­ä»£ï¼š 1234567891011121314151617181920var invertTree = function(root) { if (root == null) { return null; } let stack = []; stack.push(root); while (stack.length) { let node = stack.pop(); if (node.left != null) { stack.push(node.left); } if (node.right != null) { stack.push(node.right); } let temp = node.left; node.left = node.right; node.right = temp; } return root;};","link":"/ç“´å²³ç§‘æŠ€/"},{"title":"ç±³å¯ä¸–ç•Œ","text":"ç±³å¯ä¸–ç•Œ1.é•¿é“¾çš„äº‹ä»¶åˆ†å‘ï¼Ÿä¾‹å¦‚æ”¶åˆ°ç¤¼ç‰©ï¼Œç›´æ’­é—´å’Œä¸ªäººä¸­å¿ƒæ¨¡å—éƒ½éœ€è¦çŸ¥é“ï¼Œæ•°æ®å¯èƒ½å¾ˆå¤§ï¼Œé€šçŸ¥ä¸åˆé€‚ protocol bufferï¼Ÿ 2.åŠ¨ç”»ç”¨çš„ä»€ä¹ˆï¼Ÿ 3.é•¿è¿æ¥ 4.TCPå’ŒUDPçš„åŒºåˆ«ï¼Ÿ 5.HTTP ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹ï¼Ÿ 6.HTTPS çš„æµç¨‹ï¼Ÿç¡®è®¤åŠ å¯†ç®—æ³•æ˜¯åœ¨å“ªä¸€æ­¥ï¼Ÿ 7.class å’Œ struct åŒºåˆ« 8.runtimeï¼Œ+loadå’Œ+initializeæ–¹æ³•çš„æ‰§è¡Œé¡ºåº 9.automicå’Œnonatomicï¼Œautomicæ˜¯å¦æ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿ 10.Runloopï¼Œå’Œå¯¹è±¡é‡Šæ”¾çš„å…³ç³»ï¼ŒRunloopåœ¨åˆ‡æ¢modeæ—¶ä¼šé€€å‡ºå—ï¼Ÿ 11.SDKä½“ç§¯ä¼˜åŒ–ï¼Ÿè„šæœ¬ç”¨çš„ä»€ä¹ˆï¼Ÿé™æ€åˆ†æå‘ç°äº†å“ªäº›é—®é¢˜ï¼Ÿ 12.ä½ è§‰å¾—å€¼å¾—è¯´çš„è´Ÿè´£çš„é¡¹ç›® å‚è€ƒç­”æ¡ˆ1.é•¿é“¾çš„äº‹ä»¶åˆ†å‘ï¼Ÿä¾‹å¦‚æ”¶åˆ°ç¤¼ç‰©ï¼Œç›´æ’­é—´å’Œä¸ªäººä¸­å¿ƒæ¨¡å—éƒ½éœ€è¦çŸ¥é“ï¼Œæ•°æ®å¯èƒ½å¾ˆå¤§ï¼Œé€šçŸ¥ä¸åˆé€‚ é•¿é“¾çš„äº‹ä»¶åˆ†å‘ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†åƒæ”¶åˆ°ç¤¼ç‰©è¿™æ ·çš„å¤æ‚äº‹ä»¶æ—¶ï¼Œéœ€è¦è€ƒè™‘äº‹ä»¶çš„å¤šç‚¹é€šçŸ¥ã€æ•°æ®å¤§å°ä»¥åŠå®æ—¶æ€§ç­‰å› ç´ ã€‚ä»¥ä¸‹æ˜¯å¯¹è¿™ä¸ªé—®é¢˜çš„ä¸€äº›è¯¦ç»†è§£ç­”å’Œå»ºè®®ï¼š ä¸€ã€äº‹ä»¶åˆ†å‘æœºåˆ¶æ¦‚è¿°äº‹ä»¶åˆ†å‘æœºåˆ¶ä¸»è¦æŒ‡çš„æ˜¯åœ¨ç³»ç»Ÿä¸­ï¼Œå½“æŸä¸ªäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå¦‚ä½•é«˜æ•ˆã€å‡†ç¡®åœ°å°†è¯¥äº‹ä»¶çš„ä¿¡æ¯ä¼ é€’ç»™æ‰€æœ‰éœ€è¦çŸ¥é“çš„æ¨¡å—æˆ–ç»„ä»¶ã€‚åœ¨é•¿é“¾äº‹ä»¶åˆ†å‘åœºæ™¯ä¸‹ï¼Œè¿™ç§æœºåˆ¶å°¤ä¸ºé‡è¦ï¼Œå› ä¸ºå®ƒéœ€è¦ç¡®ä¿å¤šä¸ªæ¨¡å—ï¼ˆå¦‚ç›´æ’­é—´å’Œä¸ªäººä¸­å¿ƒæ¨¡å—ï¼‰èƒ½å¤Ÿå®æ—¶ã€å‡†ç¡®åœ°æ¥æ”¶åˆ°äº‹ä»¶ä¿¡æ¯ã€‚ äºŒã€é•¿é“¾äº‹ä»¶åˆ†å‘çš„å…·ä½“å®ç° äº‹ä»¶å®šä¹‰ä¸æ•è· äº‹ä»¶å®šä¹‰ï¼šé¦–å…ˆï¼Œéœ€è¦æ˜ç¡®å®šä¹‰å“ªäº›äº‹ä»¶éœ€è¦è¢«æ•è·å¹¶åˆ†å‘ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ”¶åˆ°ç¤¼ç‰©æ˜¯ä¸€ä¸ªå…³é”®äº‹ä»¶ã€‚ äº‹ä»¶æ•è·ï¼šå½“ç”¨æˆ·åœ¨ç›´æ’­é—´é€å‡ºç¤¼ç‰©æ—¶ï¼Œç³»ç»Ÿéœ€è¦èƒ½å¤Ÿæ•è·åˆ°è¿™ä¸ªè¡Œä¸ºï¼Œå¹¶ç”Ÿæˆç›¸åº”çš„äº‹ä»¶ä¿¡æ¯ã€‚ äº‹ä»¶ä¿¡æ¯çš„å°è£… ç”±äºæ•°æ®å¯èƒ½å¾ˆå¤§ï¼Œå› æ­¤åœ¨å°è£…äº‹ä»¶ä¿¡æ¯æ—¶ï¼Œéœ€è¦è€ƒè™‘æ•°æ®çš„å‹ç¼©å’Œç²¾ç®€ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨Protobufåè®®æ¥åºåˆ—åŒ–æ•°æ®ï¼Œä»¥å‡å°‘æ•°æ®å¤§å°å¹¶æé«˜æ•ˆç‡ã€‚ åŒæ—¶ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘åªå°è£…å…³é”®ä¿¡æ¯ï¼Œå¦‚ç¤¼ç‰©ç±»å‹ã€æ•°é‡ã€é€ç¤¼è€…ä¿¡æ¯ç­‰ï¼Œä»¥å‡å°‘æ•°æ®ä¼ è¾“é‡ã€‚ äº‹ä»¶åˆ†å‘çš„è®¾è®¡ä¸å®ç° åˆ†å‘ç­–ç•¥ï¼šå¯¹äºé•¿é“¾äº‹ä»¶ï¼Œå¯ä»¥é‡‡ç”¨å¤šç§åˆ†å‘ç­–ç•¥ï¼Œå¦‚å‘å¸ƒè®¢é˜…æ¨¡å¼ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ã€‚è¿™äº›ç­–ç•¥å¯ä»¥ç¡®ä¿äº‹ä»¶ä¿¡æ¯èƒ½å¤Ÿå¯é åœ°ä¼ é€’ç»™æ‰€æœ‰éœ€è¦çš„æ¨¡å—ã€‚ å¼‚æ­¥å¤„ç†ï¼šä¸ºäº†é¿å…å› äº‹ä»¶å¤„ç†è€Œå¯¼è‡´çš„ç³»ç»Ÿé˜»å¡ï¼Œå¯ä»¥é‡‡ç”¨å¼‚æ­¥å¤„ç†çš„æ–¹å¼ã€‚å³å½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå°†äº‹ä»¶ä¿¡æ¯æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç”±ä¸“é—¨çš„æ¶ˆè´¹è€…çº¿ç¨‹æˆ–è¿›ç¨‹è¿›è¡Œå¼‚æ­¥å¤„ç†ã€‚ å¹¶å‘æ§åˆ¶ï¼šåœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œéœ€è¦ç¡®ä¿äº‹ä»¶åˆ†å‘çš„æ­£ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚å¯ä»¥ä½¿ç”¨é”ã€äº‹åŠ¡ç­‰æœºåˆ¶æ¥æ§åˆ¶å¹¶å‘è®¿é—®å’Œæ•°æ®ä¸€è‡´æ€§ã€‚ æ¨¡å—é—´çš„é€šä¿¡ APIè°ƒç”¨ï¼šç›´æ’­é—´å’Œä¸ªäººä¸­å¿ƒæ¨¡å—å¯ä»¥é€šè¿‡APIè°ƒç”¨æ¥å®ç°äº‹ä»¶ä¿¡æ¯çš„æ¥æ”¶å’Œå¤„ç†ã€‚è¿™äº›APIå¯ä»¥å®šä¹‰ä¸ºRESTfulæ¥å£æˆ–WebSocketç­‰å®æ—¶é€šä¿¡åè®®ã€‚ æ¶ˆæ¯æ¨é€ï¼šå¯¹äºéœ€è¦å®æ—¶æ€§è¾ƒé«˜çš„åœºæ™¯ï¼Œå¯ä»¥ä½¿ç”¨æ¶ˆæ¯æ¨é€æœåŠ¡ï¼ˆå¦‚MQTTã€WebSocketï¼‰æ¥å®æ—¶å°†äº‹ä»¶ä¿¡æ¯æ¨é€ç»™ç›¸å…³æ¨¡å—ã€‚ æ•°æ®æ ¡éªŒä¸é”™è¯¯å¤„ç† åœ¨äº‹ä»¶åˆ†å‘è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å¯¹æ¥æ”¶åˆ°çš„æ•°æ®è¿›è¡Œæ ¡éªŒï¼Œä»¥ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§ã€‚ å¦‚æœåœ¨åˆ†å‘è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯æˆ–å¼‚å¸¸æƒ…å†µï¼Œéœ€è¦æœ‰ç›¸åº”çš„é”™è¯¯å¤„ç†æœºåˆ¶æ¥è®°å½•æ—¥å¿—ã€æŠ¥è­¦æˆ–è¿›è¡Œé‡è¯•ç­‰æ“ä½œã€‚ ä¸‰ã€ä¼˜åŒ–ä¸æ”¹è¿› æ€§èƒ½ä¼˜åŒ–ï¼šé€šè¿‡ä¼˜åŒ–äº‹ä»¶æ•è·ã€å°è£…ã€åˆ†å‘å’Œå¤„ç†çš„å„ä¸ªç¯èŠ‚ï¼Œæ¥æé«˜ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨é«˜æ•ˆçš„åºåˆ—åŒ–åè®®ã€ä¼˜åŒ–æ¶ˆæ¯é˜Ÿåˆ—çš„å¤„ç†é€»è¾‘ç­‰ã€‚ å¯æ‰©å±•æ€§è®¾è®¡ï¼šåœ¨è®¾è®¡äº‹ä»¶åˆ†å‘æœºåˆ¶æ—¶ï¼Œéœ€è¦è€ƒè™‘ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡å¢åŠ æ¶ˆè´¹è€…çº¿ç¨‹æˆ–è¿›ç¨‹çš„æ•°é‡ã€æ‰©å±•æ¶ˆæ¯é˜Ÿåˆ—çš„å®¹é‡ç­‰æ–¹å¼æ¥æé«˜ç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›ã€‚ å®‰å…¨æ€§è€ƒè™‘ï¼šåœ¨äº‹ä»¶åˆ†å‘è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ç¡®ä¿æ•°æ®çš„å®‰å…¨æ€§å’Œéšç§ä¿æŠ¤ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨åŠ å¯†æŠ€æœ¯æ¥ä¿æŠ¤æ•æ„Ÿæ•°æ®çš„ä¼ è¾“å’Œå­˜å‚¨å®‰å…¨ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œé•¿é“¾çš„äº‹ä»¶åˆ†å‘æ˜¯ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼Œéœ€è¦ç»¼åˆè€ƒè™‘äº‹ä»¶çš„å®šä¹‰ä¸æ•è·ã€ä¿¡æ¯å°è£…ã€åˆ†å‘ç­–ç•¥ã€æ¨¡å—é—´é€šä¿¡ã€æ•°æ®æ ¡éªŒä¸é”™è¯¯å¤„ç†ç­‰å¤šä¸ªæ–¹é¢ã€‚é€šè¿‡åˆç†çš„è®¾è®¡å’Œä¼˜åŒ–ï¼Œå¯ä»¥ç¡®ä¿äº‹ä»¶åˆ†å‘çš„å‡†ç¡®æ€§å’Œå®æ—¶æ€§ï¼ŒåŒæ—¶æé«˜ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½å’Œå¯æ‰©å±•æ€§ã€‚ 2.åŠ¨ç”»ç”¨çš„ä»€ä¹ˆï¼Ÿ 3.é•¿è¿æ¥ 4.TCPå’ŒUDPçš„åŒºåˆ«ï¼Ÿ TCPï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰å’ŒUDPï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰æ˜¯äº’è”ç½‘åè®®æ—ä¸­ä¸¤ä¸ªé‡è¦çš„ä¼ è¾“å±‚åè®®ã€‚å®ƒä»¬åœ¨å¤šä¸ªæ–¹é¢å­˜åœ¨æ˜¾è‘—å·®å¼‚ï¼Œä»¥ä¸‹æ˜¯å¯¹è¿™äº›åŒºåˆ«çš„è¯¦ç»†è§£æï¼š ä¸€ã€è¿æ¥æ€§ TCPï¼šTCPæ˜¯ä¸€ç§é¢å‘è¿æ¥çš„åè®®ã€‚åœ¨æ•°æ®ä¼ è¾“ä¹‹å‰ï¼Œå‘é€æ–¹å’Œæ¥æ”¶æ–¹éœ€è¦å…ˆè¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ï¼Œå»ºç«‹è¿æ¥åæ‰èƒ½å¼€å§‹ä¼ è¾“æ•°æ®ã€‚è¿™ç§è¿æ¥ä¿è¯äº†æ•°æ®çš„å¯é æ€§å’Œé¡ºåºæ€§ã€‚ UDPï¼šUDPåˆ™æ˜¯ä¸€ç§æ— è¿æ¥çš„åè®®ã€‚å‘é€æ–¹åœ¨å‘é€æ•°æ®æ—¶ä¸éœ€è¦æå‰ä¸æ¥æ”¶æ–¹å»ºç«‹è¿æ¥ï¼Œç›´æ¥å‘é€æ•°æ®åŒ…ã€‚è¿™ç§æ–¹å¼ç®€åŒ–äº†é€šä¿¡è¿‡ç¨‹ï¼Œä½†ç‰ºç‰²äº†æ•°æ®çš„å¯é æ€§å’Œé¡ºåºæ€§ã€‚ äºŒã€å¯é æ€§ TCPï¼šTCPå¯¹æ•°æ®çš„å¯é æ€§è¦æ±‚éå¸¸ä¸¥æ ¼ã€‚å®ƒä½¿ç”¨ç¡®è®¤å’Œé‡ä¼ æœºåˆ¶æ¥ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§ã€‚å¦‚æœæ¥æ”¶æ–¹æ²¡æœ‰æ”¶åˆ°æ•°æ®æˆ–æ•°æ®æŸåï¼Œå‘é€æ–¹ä¼šé‡æ–°å‘é€æ•°æ®ï¼Œç›´åˆ°æ¥æ”¶æ–¹ç¡®è®¤æ”¶åˆ°ä¸ºæ­¢ã€‚ UDPï¼šUDPå¯¹æ•°æ®çš„å¯é æ€§è¦æ±‚è¾ƒä½ã€‚å®ƒä¸æä¾›ç¡®è®¤ã€é‡ä¼ å’Œæµé‡æ§åˆ¶æœºåˆ¶ã€‚å¦‚æœæ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸¢å¤±æˆ–æŸåï¼ŒUDPä¸ä¼šè¿›è¡Œé‡ä¼ ï¼Œæ¥æ”¶æ–¹å¯èƒ½ä¼šæ”¶åˆ°ä¸å®Œæ•´çš„æ•°æ®ã€‚ ä¸‰ã€é€Ÿåº¦å’Œæ•ˆç‡ TCPï¼šç”±äºTCPéœ€è¦å»ºç«‹è¿æ¥å’Œä½¿ç”¨ç¡®è®¤é‡ä¼ æœºåˆ¶ï¼Œå› æ­¤å…¶é€Ÿåº¦å’Œæ•ˆç‡ç›¸å¯¹è¾ƒä½ã€‚ç‰¹åˆ«æ˜¯åœ¨ç½‘ç»œæ‹¥å¡æ—¶ï¼ŒTCPçš„æ‹¥å¡æ§åˆ¶æœºåˆ¶ä¼šé™åˆ¶å‘é€é€Ÿç‡ï¼Œè¿›ä¸€æ­¥é™ä½ä¼ è¾“é€Ÿåº¦ã€‚ UDPï¼šUDPæ²¡æœ‰è¿æ¥å»ºç«‹å’Œç¡®è®¤é‡ä¼ çš„å¼€é”€ï¼Œä¹Ÿä¸å—æ‹¥å¡æ§åˆ¶æœºåˆ¶çš„é™åˆ¶ã€‚å› æ­¤ï¼Œå…¶æ•°æ®ä¼ è¾“é€Ÿåº¦é€šå¸¸æ¯”TCPæ›´å¿«ï¼Œå°¤å…¶é€‚ç”¨äºå¯¹å®æ—¶æ€§è¦æ±‚è¾ƒé«˜çš„åº”ç”¨ã€‚ å››ã€æ•°æ®åŒ…å¤§å° TCPï¼šTCPå°†æ•°æ®åˆ’åˆ†ä¸ºè¾ƒå°çš„æ•°æ®åŒ…ï¼ˆç§°ä¸ºTCPæ®µï¼‰è¿›è¡Œä¼ è¾“ã€‚å®ƒæ²¡æœ‰å›ºå®šçš„æ•°æ®åŒ…å¤§å°é™åˆ¶ï¼Œè€Œæ˜¯æ ¹æ®ç½‘ç»œçŠ¶å†µåŠ¨æ€è°ƒæ•´æ•°æ®åŒ…å¤§å°ã€‚ UDPï¼šUDPåˆ™å…è®¸å‘é€æ–¹ä¸€æ¬¡æ€§å°†å¤šä¸ªæ•°æ®åŒ…æ‰“åŒ…æˆä¸€ä¸ªè¾ƒå¤§çš„æ•°æ®æŠ¥ï¼ˆç§°ä¸ºUDPæ•°æ®æŠ¥ï¼‰è¿›è¡Œä¼ è¾“ã€‚æ•°æ®æŠ¥çš„å¤§å°é€šå¸¸ç”±åº”ç”¨å±‚å†³å®šï¼Œè¿™ä½¿å¾—UDPåœ¨ä¼ è¾“å¤§é‡æ•°æ®æ—¶æ›´ä¸ºé«˜æ•ˆã€‚ äº”ã€é€‚ç”¨åœºæ™¯ TCPï¼šé€‚ç”¨äºå¯¹æ•°æ®å¯é æ€§è¦æ±‚è¾ƒé«˜çš„åº”ç”¨åœºæ™¯ï¼Œå¦‚æ–‡ä»¶ä¼ è¾“ã€ç”µå­é‚®ä»¶ã€ç½‘é¡µæµè§ˆç­‰ã€‚è¿™äº›åº”ç”¨éœ€è¦ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§ï¼Œå› æ­¤é€‰æ‹©TCPä½œä¸ºä¼ è¾“å±‚åè®®æ›´ä¸ºåˆé€‚ã€‚ UDPï¼šé€‚ç”¨äºå¯¹æ•°æ®å®æ—¶æ€§è¦æ±‚è¾ƒé«˜çš„åº”ç”¨åœºæ™¯ï¼Œå¦‚éŸ³é¢‘å’Œè§†é¢‘æµä¼ è¾“ã€ç½‘ç»œæ¸¸æˆã€å®æ—¶é€šä¿¡ç­‰ã€‚è¿™äº›åº”ç”¨å¯¹æ•°æ®çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§è¦æ±‚ç›¸å¯¹è¾ƒä½ï¼Œä½†å¯¹ä¼ è¾“é€Ÿåº¦æœ‰è¾ƒé«˜è¦æ±‚ï¼Œå› æ­¤é€‰æ‹©UDPä½œä¸ºä¼ è¾“å±‚åè®®æ›´ä¸ºåˆé€‚ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼ŒTCPå’ŒUDPåœ¨è¿æ¥æ€§ã€å¯é æ€§ã€é€Ÿåº¦å’Œæ•ˆç‡ã€æ•°æ®åŒ…å¤§å°ä»¥åŠé€‚ç”¨åœºæ™¯ç­‰æ–¹é¢å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œåº”æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„ä¼ è¾“å±‚åè®®ä»¥ç¡®ä¿æ•°æ®çš„å®‰å…¨ã€ç¨³å®šå’Œé«˜æ•ˆä¼ è¾“ã€‚ 5.HTTP ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹ï¼Ÿ HTTPä¹‹æ‰€ä»¥åœ¨TCPè¿æ¥å»ºç«‹æ—¶éœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œä»¥åŠTCPè¿æ¥æ–­å¼€æ—¶éœ€è¦å››æ¬¡æŒ¥æ‰‹ï¼Œä¸»è¦æ˜¯ä¸ºäº†ç¡®ä¿æ•°æ®ä¼ è¾“çš„å¯é æ€§ã€ç¡®ä¿è¿æ¥çš„å»ºç«‹å’Œæ–­å¼€å‡èƒ½å¤ŸæŒ‰ç…§æ—¢å®šåè®®è¿›è¡Œã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„è§£é‡Šï¼š ä¸‰æ¬¡æ¡æ‰‹ç›®çš„ï¼š ç¡®è®¤åŒæ–¹çš„æ¥æ”¶ä¸å‘é€èƒ½åŠ›ï¼šé€šè¿‡ä¸‰æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨èƒ½å¤Ÿç¡®è®¤å½¼æ­¤çš„æ¥æ”¶å’Œå‘é€åŠŸèƒ½éƒ½æ˜¯æ­£å¸¸çš„ï¼Œä»è€Œç¡®ä¿æ•°æ®èƒ½å¤ŸåŒå‘ã€å¯é åœ°ä¼ è¾“ã€‚ åŒæ­¥åˆå§‹åºåˆ—å·ï¼šTCPè¿æ¥ä¸­ï¼Œæ¯ä¸ªä¼ è¾“çš„TCPæ®µéƒ½ä¼šå¸¦æœ‰ä¸€ä¸ªåºåˆ—å·ï¼Œç”¨äºæ ‡è¯†æ•°æ®çš„é¡ºåºã€‚ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­ï¼ŒåŒæ–¹ä¼šåå•†å¹¶åŒæ­¥å„è‡ªçš„åˆå§‹åºåˆ—å·ï¼Œä»¥ä¾¿åç»­çš„æ•°æ®ä¼ è¾“èƒ½å¤ŸæŒ‰ç…§æ­£ç¡®çš„é¡ºåºè¿›è¡Œã€‚ é˜²æ­¢å¤±æ•ˆçš„è¿æ¥è¯·æ±‚ï¼šä¸‰æ¬¡æ¡æ‰‹å¯ä»¥é˜²æ­¢ç”±äºç½‘ç»œå»¶è¿Ÿæˆ–ä¿¡å·ä¸¢å¤±å¯¼è‡´çš„å¤±æ•ˆè¿æ¥è¯·æ±‚è¢«æœåŠ¡å™¨è¯¯è®¤ä¸ºæ˜¯æ–°çš„è¿æ¥è¯·æ±‚ï¼Œä»è€Œå‡å°‘èµ„æºæµªè´¹å’Œæ½œåœ¨çš„å®‰å…¨é£é™©ã€‚ è¿‡ç¨‹ï¼š ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ä¸€ä¸ªå¸¦æœ‰SYNï¼ˆåŒæ­¥ï¼‰æ ‡å¿—çš„æ•°æ®åŒ…ç»™æœåŠ¡å™¨ï¼Œè¡¨ç¤ºè‡ªå·±å¸Œæœ›å»ºç«‹è¿æ¥ï¼Œå¹¶é™„å¸¦ä¸€ä¸ªåˆå§‹åºåˆ—å·ï¼ˆISNï¼‰ã€‚ ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„SYNåŒ…åï¼Œä¼šå›å¤ä¸€ä¸ªå¸¦æœ‰SYN/ACKï¼ˆåŒæ­¥/ç¡®è®¤ï¼‰æ ‡å¿—çš„æ•°æ®åŒ…ç»™å®¢æˆ·ç«¯ï¼Œè¡¨ç¤ºè‡ªå·±å·²ç»æ”¶åˆ°äº†å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ï¼Œå¹¶ä¸”ä¹Ÿé™„å¸¦äº†è‡ªå·±çš„åˆå§‹åºåˆ—å·ï¼ˆISNï¼‰ä»¥åŠç¡®è®¤å·ä¸ºå®¢æˆ·ç«¯çš„åºåˆ—å·+1ï¼Œä»¥æ­¤ç¡®è®¤å®¢æˆ·ç«¯çš„å‘é€èƒ½åŠ›ã€‚ ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„SYN/ACKåŒ…åï¼Œä¼šå‘é€ä¸€ä¸ªå¸¦æœ‰ACKï¼ˆç¡®è®¤ï¼‰æ ‡å¿—çš„æ•°æ®åŒ…ç»™æœåŠ¡å™¨ï¼Œè¡¨ç¤ºè‡ªå·±å·²ç»æ”¶åˆ°äº†æœåŠ¡å™¨çš„å›å¤ï¼Œç¡®è®¤å·ä¸ºæœåŠ¡å™¨çš„åºåˆ—å·+1ï¼Œä»è€Œå®Œæˆè¿æ¥çš„å»ºç«‹ã€‚ å››æ¬¡æŒ¥æ‰‹ç›®çš„ï¼š ç¡®ä¿æ•°æ®å®Œæ•´ä¼ è¾“ï¼šTCPè¿æ¥æ˜¯å…¨åŒå·¥çš„ï¼Œå³æ•°æ®å¯ä»¥åŒæ—¶åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šä¼ è¾“ã€‚å››æ¬¡æŒ¥æ‰‹ç¡®ä¿äº†åŒæ–¹éƒ½èƒ½åœ¨å®Œæˆæ•°æ®ä¼ è¾“åå†å…³é—­è¿æ¥ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚ é‡Šæ”¾è¿æ¥èµ„æºï¼šé€šè¿‡æ˜ç¡®çš„æ–­å¼€è¿æ¥è¿‡ç¨‹ï¼ŒåŒæ–¹å¯ä»¥åŠæ—¶é‡Šæ”¾å ç”¨çš„èµ„æºï¼Œé¿å…æ— æ•ˆè¿æ¥å ç”¨ç³»ç»Ÿèµ„æºã€‚ è¿‡ç¨‹ï¼š ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ä¸€ä¸ªå¸¦æœ‰FINï¼ˆç»“æŸï¼‰æ ‡å¿—çš„æ•°æ®åŒ…ç»™æœåŠ¡å™¨ï¼Œè¡¨ç¤ºè‡ªå·±å·²ç»å‘é€å®Œæ‰€æœ‰æ•°æ®ï¼Œå¸Œæœ›å…³é—­è¿æ¥ã€‚æ­¤æ—¶å®¢æˆ·ç«¯è¿›å…¥FIN-WAIT-1çŠ¶æ€ã€‚ ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„FINåŒ…åï¼Œä¼šå›å¤ä¸€ä¸ªå¸¦æœ‰ACKæ ‡å¿—çš„æ•°æ®åŒ…ç»™å®¢æˆ·ç«¯ï¼Œè¡¨ç¤ºè‡ªå·±å·²ç»æ”¶åˆ°äº†å®¢æˆ·ç«¯çš„å…³é—­è¯·æ±‚ï¼Œç¡®è®¤å·ä¸ºå®¢æˆ·ç«¯çš„åºåˆ—å·+1ã€‚æ­¤æ—¶æœåŠ¡å™¨è¿›å…¥CLOSE-WAITçŠ¶æ€ï¼Œç­‰å¾…è‡ªå·±è¿™ä¸€æ–¹ä¹Ÿå‘é€å®Œæ‰€æœ‰æ•°æ®åå†å…³é—­è¿æ¥ã€‚ ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡å™¨å‘é€ä¸€ä¸ªå¸¦æœ‰FINæ ‡å¿—çš„æ•°æ®åŒ…ç»™å®¢æˆ·ç«¯ï¼Œè¡¨ç¤ºè‡ªå·±ä¹Ÿå·²ç»å‘é€å®Œæ‰€æœ‰æ•°æ®ï¼Œå¸Œæœ›å…³é—­è¿æ¥ã€‚æ­¤æ—¶æœåŠ¡å™¨è¿›å…¥LAST-ACKçŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„ç¡®è®¤ã€‚ ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„FINåŒ…åï¼Œå›å¤ä¸€ä¸ªå¸¦æœ‰ACKæ ‡å¿—çš„æ•°æ®åŒ…ç»™æœåŠ¡å™¨ï¼Œè¡¨ç¤ºè‡ªå·±å·²ç»æ”¶åˆ°äº†æœåŠ¡å™¨çš„å…³é—­è¯·æ±‚ï¼Œç¡®è®¤å·ä¸ºæœåŠ¡å™¨çš„åºåˆ—å·+1ã€‚æ­¤æ—¶å®¢æˆ·ç«¯è¿›å…¥TIME-WAITçŠ¶æ€ï¼Œç­‰å¾…è¶³å¤Ÿçš„æ—¶é—´ä»¥ç¡®ä¿æœåŠ¡å™¨æ”¶åˆ°è‡ªå·±çš„ACKåŒ…åé¡ºåˆ©å…³é—­è¿æ¥ã€‚æœ€åï¼Œå®¢æˆ·ç«¯ä¹Ÿä»TIME-WAITçŠ¶æ€è½¬æ¢åˆ°CLOSEDçŠ¶æ€ï¼Œå®Œæˆè¿æ¥çš„æ–­å¼€ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼ŒHTTPçš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹æ˜¯ä¸ºäº†ç¡®ä¿æ•°æ®ä¼ è¾“çš„å¯é æ€§å’Œè¿æ¥çš„æ­£ç¡®å»ºç«‹ä¸æ–­å¼€è€Œè®¾è®¡çš„æœºåˆ¶ã€‚è¿™äº›æœºåˆ¶åœ¨TCP/IPåè®®æ ˆä¸­èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ï¼Œä¿è¯äº†ç½‘ç»œé€šä¿¡çš„ç¨³å®šæ€§å’Œé«˜æ•ˆæ€§ã€‚ 6.HTTPS çš„æµç¨‹ï¼Ÿç¡®è®¤åŠ å¯†ç®—æ³•æ˜¯åœ¨å“ªä¸€æ­¥ï¼Ÿ 7.class å’Œ struct åŒºåˆ« 1. ç±»å‹å±æ€§ classï¼šæ˜¯å¼•ç”¨ç±»å‹ï¼Œæ„å‘³ç€åœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼Œæ ˆä¸­ä¿å­˜çš„æ˜¯å…¶å¼•ç”¨ï¼ˆå³æŒ‡å‘å †ä¸Šå¯¹è±¡çš„æŒ‡é’ˆï¼‰ã€‚è¿™å…è®¸classå¯¹è±¡å¯ä»¥è¢«å¤šä¸ªå˜é‡å¼•ç”¨ï¼Œä¸”ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„å±æ€§å¯èƒ½ä¼šå½±å“åˆ°å…¶ä»–å¼•ç”¨è¯¥å¯¹è±¡çš„å˜é‡ã€‚ structï¼šæ˜¯å€¼ç±»å‹ï¼Œå®ƒåœ¨æ ˆä¸Šç›´æ¥åˆ†é…å†…å­˜ï¼Œå­˜å‚¨çš„æ˜¯å…¶å®é™…çš„å€¼ã€‚å› æ­¤ï¼Œæ¯æ¬¡å¤åˆ¶structå˜é‡æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºè¯¥å˜é‡å€¼çš„å‰¯æœ¬ï¼Œä¿®æ”¹ä¸€ä¸ªstructå˜é‡çš„å€¼ä¸ä¼šå½±å“å…¶ä»–å‰¯æœ¬ã€‚ 2. æˆå‘˜è®¿é—®æƒé™ classï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œclassä¸­çš„æˆå‘˜ï¼ˆæˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°ï¼‰çš„è®¿é—®æƒé™æ˜¯ç§æœ‰çš„ï¼ˆprivateï¼‰ï¼Œè¿™æ„å‘³ç€å®ƒä»¬åªèƒ½åœ¨classå†…éƒ¨è¢«è®¿é—®ã€‚ä¸è¿‡ï¼Œå¯ä»¥æ˜¾å¼åœ°æŒ‡å®šæˆå‘˜çš„è®¿é—®æƒé™ï¼Œå¦‚publicã€protectedæˆ–privateã€‚ structï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œstructä¸­çš„æˆå‘˜æ˜¯å…¬å¼€çš„ï¼ˆpublicï¼‰ï¼Œè¿™æ„å‘³ç€å®ƒä»¬å¯ä»¥åœ¨structå¤–éƒ¨è¢«è®¿é—®ã€‚ä½†åŒæ ·åœ°ï¼Œä¹Ÿå¯ä»¥æ˜¾å¼åœ°æŒ‡å®šæˆå‘˜çš„è®¿é—®æƒé™ã€‚ 3. æ„é€ å‡½æ•°å’Œææ„å‡½æ•° classï¼šå¯ä»¥å®šä¹‰æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–å¯¹è±¡çš„çŠ¶æ€ï¼Œä¹Ÿå¯ä»¥å®šä¹‰ææ„å‡½æ•°æ¥æ¸…ç†èµ„æºã€‚æ„é€ å‡½æ•°å¯ä»¥æ˜¯éšå¼çš„æˆ–æ˜¾å¼çš„ï¼Œä½†ææ„å‡½æ•°æ€»æ˜¯æ˜¾å¼çš„ã€‚ structï¼šè™½ç„¶å¯ä»¥å®šä¹‰æ„é€ å‡½æ•°ï¼Œä½†å®ƒä»¬çš„æ„é€ å‡½æ•°æœ‰ä¸€äº›é™åˆ¶ï¼Œå¦‚å¿…é¡»åˆå§‹åŒ–æ‰€æœ‰æˆå‘˜å˜é‡ã€‚structä¸æ”¯æŒå®šä¹‰ææ„å‡½æ•°ã€‚ 4. ç»§æ‰¿å’Œå¤šæ€ classï¼šæ”¯æŒç»§æ‰¿å’Œå¤šæ€ã€‚ä¸€ä¸ªclasså¯ä»¥ç»§æ‰¿å¦ä¸€ä¸ªclassçš„æˆå‘˜ï¼ˆåŒ…æ‹¬æ–¹æ³•å’Œå±æ€§ï¼‰ï¼Œå¹¶é€šè¿‡é‡å†™åŸºç±»æ–¹æ³•æ¥æ”¯æŒå¤šæ€ã€‚ structï¼šä¸æ”¯æŒç»§æ‰¿ï¼ˆé™¤äº†æ¥å£ï¼‰å’Œå¤šæ€ã€‚åœ¨.NETç­‰ç¯å¢ƒä¸­ï¼Œè™½ç„¶structå¯ä»¥å®ç°æ¥å£ï¼Œä½†å®ƒä¸èƒ½ä½œä¸ºåŸºç±»è¢«å…¶ä»–ç±»å‹ç»§æ‰¿ 8.runtimeï¼Œ+loadå’Œ+initializeæ–¹æ³•çš„æ‰§è¡Œé¡ºåº +loadæ–¹æ³• è°ƒç”¨æ—¶æœºï¼š +loadæ–¹æ³•ä¼šåœ¨runtimeåŠ è½½ç±»ã€åˆ†ç±»æ—¶è°ƒç”¨ã€‚å…·ä½“æ¥è¯´ï¼Œå½“åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼ŒObjective-C runtimeä¼šåŠ è½½æ‰€æœ‰çš„ç±»å’Œåˆ†ç±»å®ç°ï¼Œå¹¶åœ¨æ­¤æ—¶è°ƒç”¨æ¯ä¸ªç±»å’Œåˆ†ç±»çš„+loadæ–¹æ³•ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ+loadæ–¹æ³•åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œä¸”å…¶è°ƒç”¨é¡ºåºéµå¾ªç‰¹å®šçš„è§„åˆ™ã€‚ è°ƒç”¨é¡ºåºï¼š é¦–å…ˆï¼Œè°ƒç”¨ç±»çš„+loadæ–¹æ³•ï¼ŒæŒ‰ç…§ç¼–è¯‘å…ˆåé¡ºåºè°ƒç”¨ï¼ˆå…ˆç¼–è¯‘çš„ç±»ï¼Œå…¶+loadæ–¹æ³•ä¼šå…ˆè¢«è°ƒç”¨ï¼‰ã€‚ è°ƒç”¨å­ç±»çš„+loadä¹‹å‰ï¼Œä¼šå…ˆè°ƒç”¨å…¶çˆ¶ç±»çš„+loadæ–¹æ³•ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿çˆ¶ç±»è¢«æ­£ç¡®åŠ è½½å’Œåˆå§‹åŒ–åï¼Œå­ç±»å†è¿›è¡ŒåŠ è½½ã€‚ ç„¶åï¼Œè°ƒç”¨åˆ†ç±»çš„+loadæ–¹æ³•ï¼Œä¹Ÿæ˜¯æŒ‰ç…§ç¼–è¯‘å…ˆåé¡ºåºè°ƒç”¨ã€‚ä½†åˆ†ç±»çš„+loadæ–¹æ³•ä¼šåœ¨æ‰€æœ‰ç±»çš„+loadæ–¹æ³•ä¹‹åè°ƒç”¨ã€‚ è°ƒç”¨æ–¹å¼ï¼š +loadæ–¹æ³•æ˜¯æ ¹æ®æ–¹æ³•åœ°å€ç›´æ¥è°ƒç”¨çš„ï¼Œä¸èµ°objc_msgSendæ¶ˆæ¯å‘é€æœºåˆ¶ã€‚è¿™æ„å‘³ç€+loadæ–¹æ³•çš„è°ƒç”¨éå¸¸é«˜æ•ˆï¼Œä½†ä¹Ÿéœ€è¦æ³¨æ„ä¸è¦åœ¨å…¶ä¸­è¿›è¡Œè€—æ—¶çš„æ“ä½œï¼Œä»¥å…å½±å“ç¨‹åºå¯åŠ¨é€Ÿåº¦ã€‚ +initializeæ–¹æ³• è°ƒç”¨æ—¶æœºï¼š +initializeæ–¹æ³•ä¼šåœ¨ç±»ç¬¬ä¸€æ¬¡æ¥æ”¶åˆ°æ¶ˆæ¯ï¼ˆå³ç¬¬ä¸€æ¬¡ä½¿ç”¨è¯¥ç±»æ—¶ï¼Œå¦‚åˆ›å»ºå®ä¾‹æˆ–è°ƒç”¨ç±»æ–¹æ³•ï¼‰æ—¶è°ƒç”¨ã€‚æ¯ä¸ªç±»åªä¼šåˆå§‹åŒ–ä¸€æ¬¡ã€‚ è°ƒç”¨é¡ºåºï¼š é¦–å…ˆï¼Œè°ƒç”¨çˆ¶ç±»çš„+initializeæ–¹æ³•ï¼ˆå¦‚æœå­ç±»æ²¡æœ‰å®ç°è‡ªå·±çš„+initializeæ–¹æ³•ï¼Œåˆ™ä¼šè°ƒç”¨çˆ¶ç±»çš„ï¼‰ã€‚ ç„¶åï¼Œè°ƒç”¨å­ç±»çš„+initializeæ–¹æ³•ã€‚è¿™ç¡®ä¿äº†ç±»çš„åˆå§‹åŒ–è¿‡ç¨‹æ˜¯ä»åŸºç±»å¼€å§‹ï¼Œé€å±‚å‘ä¸‹è¿›è¡Œçš„ã€‚ è°ƒç”¨æ–¹å¼ï¼š ä¸+loadæ–¹æ³•ä¸åŒï¼Œ+initializeæ–¹æ³•æ˜¯é€šè¿‡objc_msgSendæ¶ˆæ¯å‘é€æœºåˆ¶è°ƒç”¨çš„ã€‚è¿™æ„å‘³ç€å®ƒçš„è°ƒç”¨æ›´åŠ çµæ´»ï¼Œä½†ä¹Ÿå¯èƒ½ä¼šå—åˆ°æ¶ˆæ¯ä¼ é€’æœºåˆ¶çš„å½±å“ã€‚ æ³¨æ„äº‹é¡¹ï¼š å¦‚æœå­ç±»å®ç°äº†è‡ªå·±çš„+initializeæ–¹æ³•ï¼Œé‚£ä¹ˆçˆ¶ç±»çš„+initializeæ–¹æ³•åªæœ‰åœ¨å­ç±»æ²¡æœ‰è°ƒç”¨[super initialize]æ—¶æ‰ä¼šè¢«è·³è¿‡ã€‚ä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œé€šå¸¸ä¸éœ€è¦ï¼ˆä¹Ÿä¸å»ºè®®ï¼‰åœ¨å­ç±»çš„+initializeæ–¹æ³•ä¸­æ˜¾å¼è°ƒç”¨[super initialize]ï¼Œå› ä¸ºç³»ç»Ÿå·²ç»ä¿è¯äº†è¿™ä¸€è¿‡ç¨‹çš„æ­£ç¡®æ€§ã€‚ 9.automicå’Œnonatomicï¼Œautomicæ˜¯å¦æ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿ åœ¨Objective-Cä¸­ï¼Œatomicå’Œnonatomicæ˜¯å±æ€§ï¼ˆpropertyï¼‰å£°æ˜æ—¶çš„ä¸¤ä¸ªå…³é”®å­—ï¼Œå®ƒä»¬ç”¨äºå®šä¹‰å±æ€§çš„çº¿ç¨‹å®‰å…¨æ€§ã€‚ç„¶è€Œï¼Œå…³äºatomicæ˜¯å¦æ˜¯çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œéœ€è¦æ›´ç»†è‡´åœ°ç†è§£è¿™ä¸¤ä¸ªå…³é”®å­—çš„å«ä¹‰ä»¥åŠçº¿ç¨‹å®‰å…¨çš„æ¦‚å¿µã€‚ atomic å®šä¹‰ï¼šatomicå±æ€§è¡¨ç¤ºå±æ€§çš„setterå’Œgetteræ–¹æ³•æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚è¿™é€šå¸¸æ˜¯é€šè¿‡åœ¨è®¿é—®å±æ€§æ—¶æ·»åŠ é”æ¥å®ç°çš„ï¼Œä»¥ç¡®ä¿åœ¨ä»»æ„ç»™å®šæ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®å±æ€§çš„å€¼ã€‚ çº¿ç¨‹å®‰å…¨æ€§ï¼šè™½ç„¶atomicä¸ºsetterå’Œgetteræ–¹æ³•æä¾›äº†åŸºæœ¬çš„çº¿ç¨‹ä¿æŠ¤ï¼Œä½†å®ƒå¹¶ä¸ä¿è¯æ•´ä¸ªå¯¹è±¡çš„çº¿ç¨‹å®‰å…¨ã€‚å…·ä½“æ¥è¯´ï¼Œatomicåªèƒ½ç¡®ä¿åœ¨è¯»å–æˆ–å†™å…¥å±æ€§å€¼æ—¶çš„åŸå­æ€§ï¼Œä½†å¦‚æœæ“ä½œæ¶‰åŠåˆ°å¤šä¸ªæ­¥éª¤æˆ–éœ€è¦è®¿é—®å¯¹è±¡çš„å…¶ä»–éƒ¨åˆ†ï¼Œé‚£ä¹ˆatomicå¹¶ä¸èƒ½æä¾›è¶³å¤Ÿçš„ä¿æŠ¤ã€‚ æ€§èƒ½å½±å“ï¼šç”±äºatomicå±æ€§éœ€è¦åŠ é”ï¼Œå› æ­¤å®ƒä»¬é€šå¸¸æ¯”nonatomicå±æ€§æ‰§è¡Œå¾—æ›´æ…¢ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™ç§æ€§èƒ½å¼€é”€å¯èƒ½æ˜¯ä¸å¯æ¥å—çš„ã€‚ é‡è¦è¯´æ˜ï¼šéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿åœ¨iOSå¼€å‘ä¸­ï¼Œè‹¹æœå®˜æ–¹ä¹Ÿæ¨èä½¿ç”¨nonatomicå±æ€§ï¼Œé™¤éæœ‰æ˜ç¡®çš„ç†ç”±éœ€è¦çº¿ç¨‹å®‰å…¨ï¼ˆå¦‚ä½¿ç”¨åŸå­æ“ä½œæ¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼‰ã€‚è¿™æ˜¯å› ä¸ºatomicå±æ€§è™½ç„¶æä¾›äº†ä¸€å®šçš„çº¿ç¨‹å®‰å…¨æ€§ï¼Œä½†å®ƒä»¬çš„æ€§èƒ½æˆæœ¬è¾ƒé«˜ï¼Œå¹¶ä¸”åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼ï¼ˆå¦‚ä½¿ç”¨é”æˆ–åŒæ­¥æœºåˆ¶ï¼‰æ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Œè€Œä¸å¿…ä¾èµ–atomicå±æ€§ã€‚ nonatomic å®šä¹‰ï¼šnonatomicå±æ€§è¡¨ç¤ºå±æ€§çš„setterå’Œgetteræ–¹æ³•ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚è¿™æ„å‘³ç€åœ¨å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€å±æ€§æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ç«äº‰å’Œä¸ç¡®å®šçš„è¡Œä¸ºã€‚ æ€§èƒ½ä¼˜åŠ¿ï¼šç”±äºnonatomicå±æ€§ä¸éœ€è¦åŠ é”ï¼Œå› æ­¤å®ƒä»¬é€šå¸¸æ¯”atomicå±æ€§æ‰§è¡Œå¾—æ›´å¿«ã€‚ ä½¿ç”¨åœºæ™¯ï¼šnonatomicå±æ€§éå¸¸é€‚åˆåœ¨ä¸éœ€è¦çº¿ç¨‹å®‰å…¨çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œä¾‹å¦‚åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸­æˆ–å½“å¼€å‘è€…å¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼ï¼ˆå¦‚åŠ é”ï¼‰æ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨æ—¶ã€‚ ç»“è®ºå› æ­¤ï¼Œatomicå±æ€§è™½ç„¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šæä¾›äº†çº¿ç¨‹å®‰å…¨ï¼Œä½†å®ƒå¹¶ä¸æ˜¯å®Œå…¨çº¿ç¨‹å®‰å…¨çš„ï¼Œå¹¶ä¸”æ€§èƒ½æˆæœ¬è¾ƒé«˜ã€‚åœ¨iOSå¼€å‘ä¸­ï¼Œå»ºè®®æ ¹æ®å®é™…éœ€è¦é€‰æ‹©ä½¿ç”¨atomicæˆ–nonatomicå±æ€§ï¼Œå¹¶åœ¨å¿…è¦æ—¶é€šè¿‡å…¶ä»–åŒæ­¥æœºåˆ¶æ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œatomicå±æ€§å¹¶ä¸ç­‰åŒäºçº¿ç¨‹å®‰å…¨ï¼Œè€Œåªæ˜¯ä¸ºsetterå’Œgetteræ–¹æ³•æä¾›äº†ä¸€å®šçš„ä¿æŠ¤ã€‚åœ¨å¤æ‚çš„å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œå¼€å‘è€…éœ€è¦ç»“åˆå…¶ä»–åŒæ­¥æœºåˆ¶æ¥ç¡®ä¿æ•´ä¸ªå¯¹è±¡æˆ–åº”ç”¨çš„çº¿ç¨‹å®‰å…¨ã€‚ 10.Runloopï¼Œå’Œå¯¹è±¡é‡Šæ”¾çš„å…³ç³»ï¼ŒRunloopåœ¨åˆ‡æ¢modeæ—¶ä¼šé€€å‡ºå—ï¼Ÿ ä¸€ã€åŸºæœ¬æ¦‚å¿µ Runloopï¼š Runloopæ˜¯ä¸€ä¸ªäº‹ä»¶å¤„ç†å¾ªç¯ï¼Œç”¨äºç›‘å¬å¹¶å¤„ç†è¾“å…¥äº‹ä»¶ï¼ˆå¦‚è§¦æ‘¸äº‹ä»¶ã€å®šæ—¶å™¨äº‹ä»¶ç­‰ï¼‰å’Œç³»ç»Ÿäº‹ä»¶ï¼ˆå¦‚å†…å­˜è­¦å‘Šï¼‰ã€‚ æ¯ä¸ªçº¿ç¨‹éƒ½å¯ä»¥æœ‰è‡ªå·±çš„Runloopï¼Œä½†é»˜è®¤æƒ…å†µä¸‹ï¼Œé™¤äº†ä¸»çº¿ç¨‹å¤–ï¼Œå…¶ä»–çº¿ç¨‹çš„Runloopä¸ä¼šè‡ªåŠ¨å¯åŠ¨ã€‚ è‡ªåŠ¨é‡Šæ”¾æ± ï¼ˆAutoreleasePoolï¼‰ï¼š è‡ªåŠ¨é‡Šæ”¾æ± æ˜¯iOSä¸­çš„ä¸€ç§å†…å­˜è‡ªåŠ¨å›æ”¶æœºåˆ¶ï¼Œç”¨äºå»¶è¿Ÿé‡Šæ”¾åŠ å…¥åˆ°æ± ä¸­çš„å¯¹è±¡ã€‚ å½“å¯¹è±¡è¢«æ·»åŠ åˆ°è‡ªåŠ¨é‡Šæ”¾æ± ä¸­æ—¶ï¼Œå®ƒå¹¶ä¸ä¼šç«‹å³è¢«é‡Šæ”¾ï¼Œè€Œæ˜¯åœ¨è‡ªåŠ¨é‡Šæ”¾æ± é”€æ¯æ—¶ï¼ˆé€šå¸¸æ˜¯Runloopçš„ä¼‘çœ æˆ–ç»“æŸæ—¶ï¼‰å‘é€releaseæ¶ˆæ¯ï¼Œä»è€Œé‡Šæ”¾å¯¹è±¡ã€‚ äºŒã€Runloopä¸è‡ªåŠ¨é‡Šæ”¾æ± çš„å…³ç³» è‡ªåŠ¨é‡Šæ”¾æ± çš„åˆ›å»ºä¸é”€æ¯ï¼š åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œæ¯æ¬¡Runloopå¯åŠ¨æ—¶ï¼ˆå¦‚ç”¨æˆ·äº¤äº’å¯¼è‡´çš„äº‹ä»¶å¾ªç¯å¼€å§‹ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„è‡ªåŠ¨é‡Šæ”¾æ± ã€‚ åœ¨Runloopä¼‘çœ æˆ–ç»“æŸå‰ï¼Œæ—§çš„è‡ªåŠ¨é‡Šæ”¾æ± ä¼šè¢«é”€æ¯ï¼ŒåŒæ—¶åˆ›å»ºæ–°çš„è‡ªåŠ¨é‡Šæ”¾æ± ä»¥å‡†å¤‡ä¸‹ä¸€è½®çš„äº‹ä»¶å¤„ç†ã€‚ åœ¨å­çº¿ç¨‹ä¸­ï¼Œå¦‚æœRunloopè¢«æ‰‹åŠ¨å¯åŠ¨ï¼ŒåŒæ ·ä¼šåœ¨Runloopçš„å¾ªç¯ä¸­åˆ›å»ºå’Œé”€æ¯è‡ªåŠ¨é‡Šæ”¾æ± ã€‚ä¸è¿‡ï¼Œå¦‚æœå­çº¿ç¨‹æ²¡æœ‰å¯åŠ¨Runloopï¼Œåˆ™éœ€è¦æ‰‹åŠ¨ç®¡ç†è‡ªåŠ¨é‡Šæ”¾æ± ï¼ˆä¾‹å¦‚ï¼Œåœ¨æ¯ä¸ªä»»åŠ¡å¼€å§‹å‰åˆ›å»ºï¼Œä»»åŠ¡ç»“æŸåé”€æ¯ï¼‰ã€‚ å¯¹è±¡é‡Šæ”¾çš„æ—¶æœºï¼š åŠ å…¥åˆ°è‡ªåŠ¨é‡Šæ”¾æ± ä¸­çš„å¯¹è±¡ï¼Œå…¶é‡Šæ”¾æ—¶æœºå—Runloopæ§åˆ¶ã€‚å…·ä½“æ¥è¯´ï¼Œå½“Runloopè¿›å…¥ä¼‘çœ çŠ¶æ€å‰æˆ–ç»“æŸè¿è¡Œæ—¶ï¼Œä¼šè‡ªåŠ¨é”€æ¯å½“å‰çš„è‡ªåŠ¨é‡Šæ”¾æ± ï¼Œä»è€Œé‡Šæ”¾æ± ä¸­çš„æ‰€æœ‰å¯¹è±¡ã€‚ è¿™ç§æœºåˆ¶æœ‰åŠ©äºåœ¨äº‹ä»¶å¤„ç†è¿‡ç¨‹ä¸­æœ‰æ•ˆåœ°ç®¡ç†å†…å­˜ï¼Œé¿å…äº†å› å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç®¡ç†ä¸å½“è€Œå¯¼è‡´çš„å†…å­˜æ³„æ¼é—®é¢˜ã€‚ ä¸‰ã€æ³¨æ„äº‹é¡¹ åœ¨ä½¿ç”¨å­çº¿ç¨‹æ—¶ï¼Œå¦‚æœéœ€è¦å¤„ç†å¤§é‡æ•°æ®æˆ–æ‰§è¡Œè€—æ—¶æ“ä½œï¼Œå»ºè®®æ‰‹åŠ¨å¯åŠ¨Runloopï¼Œå¹¶åˆ©ç”¨è‡ªåŠ¨é‡Šæ”¾æ± æ¥ç®¡ç†å†…å­˜ã€‚è¿™å¯ä»¥é¿å…å› é•¿æ—¶é—´å ç”¨å†…å­˜è€Œå¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶è‡ªåŠ¨é‡Šæ”¾æ± å¯ä»¥ç®€åŒ–å†…å­˜ç®¡ç†ä»»åŠ¡ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼ˆå¦‚å¾ªç¯å¼•ç”¨ï¼‰ä»ç„¶éœ€è¦å¼€å‘è€…æ‰‹åŠ¨ä»‹å…¥ä»¥é‡Šæ”¾å¯¹è±¡ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼ŒRunloopä¸è‡ªåŠ¨é‡Šæ”¾æ± åœ¨iOSå¼€å‘ä¸­ç´§å¯†ç›¸å…³ã€‚Runloopé€šè¿‡æ§åˆ¶è‡ªåŠ¨é‡Šæ”¾æ± çš„åˆ›å»ºä¸é”€æ¯æ¥é—´æ¥ç®¡ç†å¯¹è±¡çš„é‡Šæ”¾æ—¶æœºï¼Œä»è€Œå¸®åŠ©å¼€å‘è€…æœ‰æ•ˆåœ°ç®¡ç†å†…å­˜èµ„æºã€‚ Runloopåœ¨åˆ‡æ¢Modeæ—¶å¹¶ä¸ä¼šç›´æ¥é€€å‡ºï¼Œè€Œæ˜¯ä¼šå…ˆé€€å‡ºå½“å‰Modeçš„Runloopå¾ªç¯ï¼Œå¹¶é‡æ–°è¿›å…¥æ–°çš„Modeä¸‹çš„Runloopå¾ªç¯ã€‚ 11.SDKä½“ç§¯ä¼˜åŒ–ï¼Ÿè„šæœ¬ç”¨çš„ä»€ä¹ˆï¼Ÿé™æ€åˆ†æå‘ç°äº†å“ªäº›é—®é¢˜ï¼Ÿ Xcodeé™æ€åˆ†æèƒ½å¤Ÿå‘ç°çš„é—®é¢˜ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š 1. é€»è¾‘ç¼ºé™· è®¿é—®æœªåˆå§‹åŒ–çš„å˜é‡ï¼šè¿™æ˜¯å¸¸è§çš„é€»è¾‘é”™è¯¯ä¹‹ä¸€ï¼Œå°è¯•è®¿é—®ä¸€ä¸ªæœªè¢«èµ‹äºˆåˆå§‹å€¼çš„å˜é‡ï¼Œå¯èƒ½å¯¼è‡´ä¸ç¡®å®šçš„ç»“æœã€‚ ç©ºæŒ‡é’ˆçš„è§£å¼•ç”¨ï¼šè§£å¼•ç”¨ä¸€ä¸ªç©ºæŒ‡é’ˆï¼ˆå³æŒ‡å‘ç©ºåœ°å€çš„æŒ‡é’ˆï¼‰ä¼šå¯¼è‡´ç¨‹åºå´©æºƒã€‚é™æ€åˆ†æèƒ½å¤Ÿè¯†åˆ«å‡ºè¿™ç±»æ½œåœ¨çš„è§£å¼•ç”¨æ“ä½œã€‚ 2. å†…å­˜ç®¡ç†ç¼ºé™· å†…å­˜æ³„æ¼ï¼šåˆ†é…çš„å†…å­˜æ²¡æœ‰è¢«åŠæ—¶é‡Šæ”¾ï¼Œå¯¼è‡´å†…å­˜å ç”¨ä¸æ–­å¢åŠ ï¼Œæœ€ç»ˆå¯èƒ½å½±å“ç¨‹åºçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚Xcodeé™æ€åˆ†æèƒ½å¤Ÿæ£€æµ‹å‡ºè¿™ç±»å†…å­˜ç®¡ç†é”™è¯¯ã€‚ å¯¹è±¡æ‰€æœ‰æƒé—®é¢˜ï¼šå¯¹äºä½¿ç”¨ARCï¼ˆè‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼‰ç®¡ç†çš„å¯¹è±¡ï¼Œé™æ€åˆ†æå¯ä»¥æ£€æŸ¥æ˜¯å¦å­˜åœ¨æ½œåœ¨çš„å¼ºå¼•ç”¨å¾ªç¯ç­‰é—®é¢˜ï¼Œè¿™äº›é—®é¢˜å¯èƒ½å¯¼è‡´å¯¹è±¡æ— æ³•è¢«æ­£ç¡®é‡Šæ”¾ã€‚ 3. æ— ç”¨å­˜å‚¨ç¼ºé™· æœªä½¿ç”¨çš„å˜é‡ï¼šå®šä¹‰äº†å˜é‡ä½†åœ¨ä»£ç ä¸­ä»æœªä½¿ç”¨è¿‡ï¼Œè¿™ä¸ä»…æµªè´¹äº†å†…å­˜èµ„æºï¼Œè¿˜å¯èƒ½æ˜¯ä»£ç å†—ä½™æˆ–é€»è¾‘é”™è¯¯çš„è¡¨ç°ã€‚ 4. APIä½¿ç”¨ç¼ºé™· ä¸éµå¾ªåº“æˆ–æ¡†æ¶çš„ä½¿ç”¨è§„åˆ™ï¼šåœ¨è°ƒç”¨APIæ—¶ï¼Œå¦‚æœæœªæŒ‰ç…§åº“æˆ–æ¡†æ¶çš„è§„èŒƒè¿›è¡Œæ“ä½œï¼ˆå¦‚ä¼ é€’äº†é”™è¯¯çš„å‚æ•°ç±»å‹ã€é—æ¼äº†å¿…è¦çš„å‚æ•°ç­‰ï¼‰ï¼Œé™æ€åˆ†æèƒ½å¤Ÿè¯†åˆ«å‡ºè¿™ç±»é—®é¢˜ã€‚ 5. å£°æ˜é”™è¯¯ ç±»ã€æ–¹æ³•æˆ–å˜é‡çš„å£°æ˜é”™è¯¯ï¼šåŒ…æ‹¬ç±»å‹ä¸åŒ¹é…ã€æ‹¼å†™é”™è¯¯ç­‰ï¼Œè¿™äº›éƒ½å¯èƒ½å¯¼è‡´ç¼–è¯‘é”™è¯¯æˆ–è¿è¡Œæ—¶é”™è¯¯ã€‚é™æ€åˆ†æå¯ä»¥åœ¨ä¸æ‰§è¡Œä»£ç çš„æƒ…å†µä¸‹å‘ç°è¿™äº›é”™è¯¯ã€‚ 12.ä½ è§‰å¾—å€¼å¾—è¯´çš„è´Ÿè´£çš„é¡¹ç›®","link":"/ç±³å¯ä¸–ç•Œ/"},{"title":"ç±³å¯ä¸–ç•Œ","text":"ç±³å¯ä¸–ç•Œ 1.Runloop çš„æµç¨‹ï¼Œåº•å±‚å®ç°ï¼Œé¡¹ç›®é‡Œå®é™…ä½¿ç”¨ï¼Œç›‘æ§å¡é¡¿ç›‘å¬çš„å…·ä½“æ˜¯å“ªä¸ªçŠ¶æ€ï¼ŒSource0 å’Œ Source1 åŒºåˆ« 2.å±€éƒ¨å¯¹è±¡çš„é‡Šæ”¾æ—¶æœºï¼›autoreleasepool çš„å®ç°ï¼Œweak å­˜åœ¨å“ªé‡Œ 3.SDK æ„å»ºææ•ˆï¼Œæœ‰æ²¡æœ‰äºŒè¿›åˆ¶åŒ–çš„ç»éªŒï¼Œç¼“å­˜ 4.feed æµæ»‘åŠ¨å¡é¡¿å¯èƒ½æœ‰å“ªäº›åŸå› ï¼›ç¦»å±æ¸²æŸ“ä¸ºä»€ä¹ˆä¼šå½±å“ï¼›é‚£äº›å¼‚æ­¥çš„åº“ï¼Œä¸ä¹Ÿæ˜¯åœ¨å¦ä¸€ä¸ªå±å¹•ç¼“å†²åŒºå¤„ç†çš„å—ï¼Ÿ 5.é¦–å±ä¼˜åŒ–ï¼Œæœ‰æ²¡æœ‰é’ˆå¯¹å„ä¸ªæ¨¡å—çš„ï¼Œæ¯”å¦‚å¡çº¿ç¨‹äº†ï¼Œæ€ä¹ˆæ£€æµ‹ï¼Œæ€ä¹ˆä¼˜åŒ– 6.IM Socket çš„æµç¨‹ 7.FMDB çš„å†…éƒ¨å®ç°ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿå’Œå…¶ä»–å¦‚ WCDB æ•ˆç‡çš„æ¯”è¾ƒï¼› 8.ç”¨è¿‡å“ªäº›é”ï¼Ÿæ•ˆç‡æ¯”è¾ƒï¼›@synchronized çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ 9.ä¸Šä¼ å¤§å›¾ï¼Œæ€ä¹ˆåˆ†ç‰‡ï¼Œæ€ä¹ˆæ§åˆ¶çº¿ç¨‹æœ€å¤§å¹¶å‘æ•°ï¼Œæ€ä¹ˆå‘Šè¯‰webä¸Šä¼ è¿›åº¦ï¼Ÿä¸Šä¼ è¿›åº¦ç»†é¢—ç²’åº¦ï¼Œæ¯ç‰‡éƒ½æœ‰å“ªäº›çŠ¶æ€ï¼Œç°æœ‰ä¸Šä¼ å•ä¸ªå›¾ç‰‡çš„æ–¹æ³•ï¼Œæ€ä¹ˆå®æ—¶åŒæ­¥è¿›åº¦ 10.SDWebImage åŠ è½½å›¾ç‰‡çš„æµç¨‹ï¼Œç¼“å­˜æœºåˆ¶ï¼ŒLRUæ€ä¹ˆå®ç°çš„ï¼ŸåŠ è½½å›¾ç‰‡ä¼ å…¥äº† UIImageView ä¸‹è½½å®Œå›¾ç‰‡åæ€ä¹ˆæ‹¿åˆ°è¿™ä¸ªå¯¹è±¡ï¼Œå› ä¸ºæ˜¯å¼‚æ­¥çš„ 11.OOM æ€ä¹ˆé¿å…ï¼Ÿ 12.MVCS ä¸ SectionProvider æ€ä¹ˆå®ç°çš„ äºŒé¢ï¼š é¡¹ç›®ï¼š 1.æ„å»ºææ•ˆï¼Œæ€ä¹ˆå®šä½çš„æ˜¯å¤´æ–‡ä»¶å¯¼å…¥çš„é—®é¢˜ 2.å°è£…çˆ¶ç±»æ²‰æ·€æ°”æ³¡åŠ¨ç”»ä¸äº‹ä»¶åˆ†å‘èƒ½åŠ›ï¼Œæ€ä¹ˆåšçš„ï¼Ÿ 3.éšç‰ˆè½¬ä¸ºééšå®ç°æ€ä¹ˆåšçš„ï¼Ÿæ´»åŠ¨é¡µç»„ä»¶åŒ–ï¼Œç»„ä»¶ä¹‹é—´æ€ä¹ˆäº¤äº’ 4.ç”»ä¸€ä¸‹è´å£³çš„æ¶æ„ï¼Œå¹³çº§ç»„ä»¶é€šä¿¡ï¼Œä¼ å€¼ åœºæ™¯ï¼š 1.æ²¡æ³•å¤ç°çš„ crashï¼Œæ€ä¹ˆå»å¤„ç†ï¼Œå¦‚æœæ˜¯å†…éƒ¨åé¦ˆçš„ï¼Œæœ‰è®¾å¤‡ï¼Œæ€ä¹ˆå¤„ç† 2.æœ‰æ²¡æœ‰å¤„ç†å¡é¡¿çš„ç»éªŒï¼Œæ€§èƒ½å¹³å°æ¥äº†ä¸ªå¡é¡¿ï¼Œä½ ä¼šæ€ä¹ˆå¤„ç† 3.å¿«å°æ¿äº†ï¼Œäº§å“è¦åŠ ä¸€ä¸ªç´§æ€¥çš„åŠŸèƒ½ï¼Œè¯„ä¼°æœ‰é£é™©ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ 4.æœ‰æ²¡æœ‰ç»å†è¿‡ä¸¥é‡çš„çº¿ä¸Šé—®é¢˜ï¼Œå‡å¦‚ç°åœ¨æœ‰ä¸ªçº¿ä¸Šé—®é¢˜ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ 5.é¢†å¯¼äº¤ç»™ä½ ä¸€ä¸ªæ²¡æœ‰æ¥è§¦è¿‡çš„é¢†åŸŸçš„é—®é¢˜ï¼Œä½ ä¼šæ€ä¹ˆåš å‚è€ƒç­”æ¡ˆ1.Runloop çš„æµç¨‹ï¼Œåº•å±‚å®ç°ï¼Œé¡¹ç›®é‡Œå®é™…ä½¿ç”¨ï¼Œç›‘æ§å¡é¡¿ç›‘å¬çš„å…·ä½“æ˜¯å“ªä¸ªçŠ¶æ€ï¼ŒSource0 å’Œ Source1 åŒºåˆ« ï¼ˆ1ï¼‰1. RunLoop çš„æµç¨‹ RunLoop æ˜¯ä¸€ä¸ªäº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œå†…éƒ¨ä¸»è¦æµç¨‹å¯ä»¥ç®€åŒ–ä¸ºï¼š é€šçŸ¥ Observersï¼šè¿›å…¥ Loop å‰ï¼Œä¼šå‘é€šçŸ¥ï¼ˆå¦‚ kCFRunLoopEntryï¼‰ã€‚ å¤„ç† Timerï¼šæ£€æŸ¥æ˜¯å¦æœ‰å·²åˆ°æœŸçš„ Timer ä»»åŠ¡ã€‚ å¤„ç† Source0ï¼šéåŸºäºç«¯å£çš„äº‹ä»¶ï¼ˆUI äº‹ä»¶ã€Block å›è°ƒç­‰ï¼‰ï¼Œéœ€è¦ä¸»åŠ¨å”¤é†’ã€‚ å¤„ç† Source1ï¼šåŸºäº Mach port çš„äº‹ä»¶ï¼ˆç³»ç»Ÿäº‹ä»¶ã€IPCã€è§¦æ‘¸äº‹ä»¶ï¼‰ã€‚ è¿›å…¥ä¼‘çœ ï¼šè°ƒç”¨ mach_msg_trap ç­‰åº•å±‚ç³»ç»Ÿè°ƒç”¨ï¼Œçº¿ç¨‹è¿›å…¥ä¼‘çœ çŠ¶æ€ã€‚ è¢«å”¤é†’ï¼š æœ‰äº‹ä»¶åˆ°æ¥ï¼ˆSourceã€Timerã€GCD dispatchï¼‰ã€‚ å¤–éƒ¨æ‰‹åŠ¨å”¤é†’ï¼ˆCFRunLoopWakeUpï¼‰ã€‚ é€šçŸ¥ Observersï¼šå°†è¦å¤„ç†äº‹ä»¶ï¼ˆkCFRunLoopBeforeSources / kCFRunLoopBeforeWaiting / kCFRunLoopAfterWaitingï¼‰ã€‚ å¾ªç¯å¾€å¤ï¼šç›´åˆ° CFRunLoopStop è¢«è°ƒç”¨ã€‚ ï¼ˆ2ï¼‰ åº•å±‚å®ç° â€¢ æ ¸å¿ƒç»“æ„ï¼šCFRunLoop å’Œ CFRunLoopModeï¼Œæ¯ä¸ªçº¿ç¨‹å¯¹åº”ä¸€ä¸ª RunLoopï¼ˆå­˜å‚¨åœ¨ pthread çš„ TLS ä¸­ï¼‰ã€‚ â€¢ äº‹ä»¶é©±åŠ¨ï¼šé€šè¿‡ Mach port å’Œ å†…æ ¸æ€é€šä¿¡ã€‚æ¯”å¦‚è§¦æ‘¸äº‹ä»¶ä» IOKit -&gt; SpringBoard -&gt; App -&gt; RunLoop Mach portã€‚ â€¢ ä¼‘çœ /å”¤é†’ï¼šåˆ©ç”¨ç³»ç»Ÿè°ƒç”¨ mach_msg_trap è¿›å…¥å†…æ ¸ï¼Œç­‰å¾…æ¶ˆæ¯ï¼›æœ‰äº‹ä»¶æ—¶å”¤é†’ã€‚ â€¢ RunLoopObserverï¼šå†…éƒ¨ç»´æŠ¤ä¸€ç»„å›è°ƒï¼ŒæŒ‚åœ¨ä¸åŒçŠ¶æ€ç‚¹ï¼ˆEntryã€BeforeTimersã€BeforeSourcesã€BeforeWaitingã€AfterWaitingã€Exitï¼‰ã€‚ ï¼ˆ3ï¼‰é¡¹ç›®é‡Œçš„å®é™…ä½¿ç”¨ å®šæ—¶å™¨ï¼šNSTimer / CADisplayLink / performSelector:afterDelay: æœ¬è´¨ä¾èµ– RunLoopã€‚ å¸¸é©»çº¿ç¨‹ï¼šå¦‚ AFNetworking çš„ç½‘ç»œè¯·æ±‚çº¿ç¨‹ï¼Œä½¿ç”¨ RunLoop ä¿æŒçº¿ç¨‹ä¸é€€å‡ºã€‚ äº‹ä»¶å“åº”ï¼šè§¦æ‘¸äº‹ä»¶ã€UI æ›´æ–°éƒ½è·‘åœ¨ä¸»çº¿ç¨‹ RunLoop ä¸­ã€‚ GCD ä¸ RunLoopï¼šdispatch_async æäº¤åˆ°ä¸»é˜Ÿåˆ—çš„ blockï¼Œæœ¬è´¨é€šè¿‡ CFRunLoopSource æ‰§è¡Œã€‚ æ€§èƒ½ä¼˜åŒ–ï¼šæ¯”å¦‚åœ¨ NSRunLoopCommonModes ä¸‹æ·»åŠ ä»»åŠ¡ï¼Œé¿å…å›  UI æ»‘åŠ¨ï¼ˆUITrackingRunLoopModeï¼‰è€Œé˜»å¡ã€‚ ï¼ˆ4ï¼‰å¡é¡¿ç›‘æ§ç›‘å¬çš„çŠ¶æ€ å¸¸è§çš„ å¡é¡¿ç›‘æ§ï¼ˆUI å¡é¡¿ç›‘æ§ï¼‰ åŸç†å°±æ˜¯åˆ©ç”¨ RunLoop Observerï¼Œåœ¨å…³é”®çŠ¶æ€ç‚¹æ‰“ç‚¹ï¼š â€¢ ç›‘å¬ kCFRunLoopBeforeSources å’Œ kCFRunLoopAfterWaitingã€‚ â€¢ åœ¨ BeforeSources è¯´æ˜å³å°†å¤„ç†äº‹ä»¶ã€‚ â€¢ åœ¨ AfterWaiting è¯´æ˜åˆšè¢«å”¤é†’ï¼Œå‡†å¤‡è¿›å…¥äº‹ä»¶å¤„ç†ã€‚ â€¢ å¦‚æœè¿™ä¸¤ä¸ªçŠ¶æ€ä¹‹é—´æŒç»­å¾ˆä¹…æ²¡æœ‰åˆ‡æ¢ï¼Œè¯´æ˜ RunLoop å¡åœ¨æŸä¸ªä»»åŠ¡ï¼ˆä¸»çº¿ç¨‹å¡ä½ï¼‰ã€‚ å…·ä½“åšæ³•ï¼š 1. åœ¨ä¸»çº¿ç¨‹ RunLoop æ·»åŠ  Observerï¼Œç›‘å¬è¿™ä¸¤ä¸ªçŠ¶æ€ã€‚ 2. åŒæ—¶å¼€ä¸€ä¸ªå­çº¿ç¨‹ç”¨ dispatch_semaphore_wait + è¶…æ—¶æœºåˆ¶åˆ¤æ–­ã€‚ 3. è¶…è¿‡é˜ˆå€¼ï¼ˆå¦‚ &gt; 200msï¼‰æ²¡æœ‰çŠ¶æ€åˆ‡æ¢ï¼Œåˆ¤å®šä¸ºå¡é¡¿ã€‚ 4. ç»“åˆå †æ ˆé‡‡æ ·ï¼ˆbacktraceï¼‰å°±èƒ½å®šä½å…·ä½“å¡ä½çš„ä½ç½®ã€‚ ï¼ˆ5ï¼‰source0 ä¸ source1 åŒºåˆ« Source0 â€¢ å®šä¹‰ï¼šéåŸºäºå†…æ ¸ç«¯å£ï¼ˆportï¼‰çš„äº‹ä»¶æºã€‚ â€¢ ç‰¹ç‚¹ï¼š â€¢ çº¯ç”¨æˆ·æ€ï¼Œä¸ä¼šä¸»åŠ¨å”¤é†’ RunLoopï¼Œéœ€è¦å¤–éƒ¨æ‰‹åŠ¨å”¤é†’ã€‚ â€¢ å¸¸ç”¨äº App å†…éƒ¨äº‹ä»¶åˆ†å‘ï¼Œä¾‹å¦‚ performSelector:onThread:ã€‚ â€¢ è§¦å‘æ–¹å¼ï¼š â€¢ è°ƒç”¨ CFRunLoopSourceSignal(source) æ ‡è®°ä¸ºå¾…å¤„ç†ã€‚ â€¢ å†è°ƒç”¨ CFRunLoopWakeUp(runloop) å”¤é†’ RunLoopã€‚ â€¢ ä¾‹å­ï¼š â€¢ performSelector:onThread: â€¢ æ‰‹åŠ¨åˆ›å»ºçš„ CFRunLoopSource0 Source1 â€¢ å®šä¹‰ï¼šåŸºäº Mach port çš„äº‹ä»¶æºã€‚ â€¢ ç‰¹ç‚¹ï¼š â€¢ å†…æ ¸æ€é©±åŠ¨ï¼Œç³»ç»Ÿäº‹ä»¶åˆ°è¾¾æ—¶å¯ä»¥ç›´æ¥å”¤é†’ RunLoopã€‚ â€¢ ä¸»è¦ç”¨æ¥å¤„ç† ç³»ç»Ÿæ¶ˆæ¯ï¼ˆå¦‚è§¦æ‘¸ã€ç³»ç»Ÿå›è°ƒã€CFMachPortï¼‰ã€‚ â€¢ è§¦å‘æ–¹å¼ï¼š â€¢ å½“ç«¯å£æœ‰æ¶ˆæ¯æ—¶ï¼Œå†…æ ¸ä¼šå”¤é†’ RunLoopï¼Œæ‰§è¡Œå¯¹åº”çš„å›è°ƒã€‚ â€¢ ä¾‹å­ï¼š â€¢ ç³»ç»Ÿçš„è§¦æ‘¸äº‹ä»¶ã€å±å¹•æ—‹è½¬äº‹ä»¶ã€‚ â€¢ CFMachPortã€CFSocket 2.å±€éƒ¨å¯¹è±¡çš„é‡Šæ”¾æ—¶æœºï¼›autoreleasepool çš„å®ç°ï¼Œweak å­˜åœ¨å“ªé‡Œ ï¼ˆ1ï¼‰å±€éƒ¨å¯¹è±¡çš„é‡Šæ”¾æ—¶æœº åœ¨ ARC ä¸‹ï¼Œå±€éƒ¨å˜é‡å¯¹è±¡ï¼ˆæ¯”å¦‚æ–¹æ³•é‡Œçš„ NSObject *obj = [[NSObject alloc] init];ï¼‰çš„é‡Šæ”¾æ—¶æœºä¸»è¦å–å†³äº ä½œç”¨åŸŸ + å¼•ç”¨è®¡æ•°ã€‚ ç¼–è¯‘å™¨ä¼šåœ¨åˆé€‚çš„ä½ç½®æ’å…¥ objc_releaseã€‚ é€šå¸¸è§„åˆ™ï¼š å¦‚æœæ˜¯å¼ºå¼•ç”¨ï¼ˆstrongï¼‰ï¼Œåœ¨è¶…å‡ºä½œç”¨åŸŸæ—¶ç¼–è¯‘å™¨æ’å…¥ releaseã€‚ å¦‚æœæ”¾åœ¨äº† @autoreleasepool å†…ï¼Œä¸”å¯¹è±¡é€šè¿‡ autorelease åˆ›å»ºï¼ˆå¦‚ [NSString stringWithFormat:@â€xxâ€]ï¼‰ï¼Œåˆ™ä¼šåœ¨ pool æ¸…ç©ºæ—¶ç»Ÿä¸€ releaseã€‚ å¦‚æœæ²¡æœ‰æ˜¾å¼æ”¾è¿› autoreleasepoolï¼Œé‚£ä¹ˆå±€éƒ¨å¯¹è±¡çš„ autorelease ä¼šæŒ‚åœ¨å½“å‰çº¿ç¨‹çš„é»˜è®¤ autoreleasepool page ä¸Šï¼ˆRunLoop æ¯æ¬¡å¾ªç¯ä¼šæ¸…ç†ä¸€æ¬¡ï¼‰ã€‚ æ‰€ä»¥ï¼š alloc/init çš„å¯¹è±¡ï¼šç¦»å¼€ä½œç”¨åŸŸç«‹å³é‡Šæ”¾ã€‚ å·¥å‚æ–¹æ³• (stringWithâ€¦) è¿”å›çš„å¯¹è±¡ï¼šé€šå¸¸æ˜¯ autoreleaseï¼Œé‡Šæ”¾æ—¶æœºå–å†³äºæœ€è¿‘çš„ autoreleasepool drainã€‚ (2) autoreleasepool çš„å®ç° @autoreleasepool {} åœ¨ç¼–è¯‘åä¼šè¢«è½¬åŒ–ä¸ºï¼š12345void* context = objc_autoreleasePoolPush();{ // pool å†…éƒ¨ä½œç”¨åŸŸ ...}objc_autoreleasePoolPop(context); â€‹ â€¢ åº•å±‚å®ç°ä¾èµ– AutoreleasePoolPageï¼šâ€‹ â€¢ æ¯ä¸ªçº¿ç¨‹ç»´æŠ¤ä¸€ä¸ªæ ˆçŠ¶çš„åŒå‘é“¾è¡¨ç»“æ„ã€‚â€‹ â€¢ objc_autorelease(obj) ä¼šæŠŠå¯¹è±¡çš„æŒ‡é’ˆæ”¾å…¥å½“å‰ pageã€‚â€‹ â€¢ pool è¢« pop æ—¶ï¼Œä¼šéå†è¿™ä¸ª pageï¼Œä¾æ¬¡å¯¹å¯¹è±¡å‘é€ releaseã€‚â€‹ â€¢ RunLoop æœºåˆ¶ï¼šâ€‹ â€¢ ä¸»çº¿ç¨‹çš„ RunLoop æ¯æ¬¡äº‹ä»¶å¾ªç¯å¼€å§‹ä¼š push ä¸€ä¸ª poolï¼Œç»“æŸæ—¶ popã€‚â€‹ â€¢ è¿™ä¿è¯äº†å¸¸è§çš„ UIKit API é‡Œ autorelease å¯¹è±¡èƒ½åœ¨ä¸€æ¬¡äº‹ä»¶å¤„ç†åè¢«é‡Šæ”¾ã€‚ ï¼ˆ3ï¼‰weak çš„å­˜å‚¨ä½ç½® â€¢ weak æŒ‡é’ˆå¹¶ä¸æ˜¯å•çº¯çš„å†…å­˜åœ°å€ï¼Œå®ƒéœ€è¦ è¿è¡Œæ—¶çš„å¼±å¼•ç”¨è¡¨ï¼ˆweak_table_tï¼‰ ç®¡ç†ï¼š â€¢ weak_table_t æ˜¯ä¸€ä¸ª hash è¡¨ï¼Œkey æ˜¯å¯¹è±¡åœ°å€ï¼ˆè¢«å¼•ç”¨çš„å¯¹è±¡ï¼‰ï¼Œvalue æ˜¯æŒ‡å‘è¯¥å¯¹è±¡çš„æ‰€æœ‰ weak æŒ‡é’ˆåœ°å€é›†åˆã€‚ â€¢ å½“å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å½’é›¶æ—¶ï¼Œdealloc æµç¨‹ä¼šè°ƒç”¨ objc_destroyWeakï¼ŒæŠŠæ‰€æœ‰æŒ‡å‘è¯¥å¯¹è±¡çš„ weak æŒ‡é’ˆç½®ä¸º nilã€‚ â€¢ æ‰€ä»¥ weak æŒ‡é’ˆå­˜å‚¨åœ¨ï¼š â€¢ æŒ‡é’ˆæœ¬èº«ä¾ç„¶åœ¨æ ˆä¸Š / å †ä¸Šï¼ˆå–å†³äºå˜é‡å£°æ˜ä½ç½®ï¼‰ï¼Œ â€¢ ä½† runtime ç»´æŠ¤äº†ä¸€ä»½å…¨å±€çš„å¼±å¼•ç”¨è¡¨ï¼Œç”¨æ¥ç»Ÿä¸€ç®¡ç† å¯¹è±¡ â†” weak æŒ‡é’ˆåˆ—è¡¨ çš„å…³ç³»ã€‚ â€¢ æ³¨æ„ï¼š â€¢ weak æœ¬èº«æ˜¯ä¸€ä¸ªæ™®é€šæŒ‡é’ˆï¼Œåªä¸è¿‡ runtime åœ¨å¯¹è±¡é”€æ¯æ—¶ä¼šæŠŠå®ƒè‡ªåŠ¨æ¸…ç©ºã€‚ â€¢ æ‰€ä»¥ weak æŸ¥æ‰¾å’Œèµ‹å€¼éƒ½ä¼šç»è¿‡ runtime çš„å¼±å¼•ç”¨è¡¨æ“ä½œï¼Œæœ‰ä¸€å®šæ€§èƒ½å¼€é”€ã€‚ 3.SDK æ„å»ºææ•ˆï¼Œæœ‰æ²¡æœ‰äºŒè¿›åˆ¶åŒ–çš„ç»éªŒï¼Œç¼“å­˜ æ¨¡å—åŒ–/ç»„ä»¶åŒ–SDK å†…éƒ¨æ‹†åˆ†ä¸ºç¨³å®šä¾èµ–ï¼ˆbinaryã€SPM precompiledï¼‰+ é«˜é¢‘æ”¹åŠ¨éƒ¨åˆ†ï¼ˆæºç ï¼‰ï¼Œé¿å…å…¨é‡ç¼–è¯‘ã€‚ æ„å»ºç¼“å­˜ CI é‡Œç¼“å­˜ DerivedDataã€Podsã€SPM æ„å»ºäº§ç‰©ã€‚ 4.Feed æµæ»‘åŠ¨å¡é¡¿å¯èƒ½æœ‰å“ªäº›åŸå› ï¼›ç¦»å±æ¸²æŸ“ä¸ºä»€ä¹ˆä¼šå½±å“ï¼›é‚£äº›å¼‚æ­¥çš„åº“ï¼Œä¸ä¹Ÿæ˜¯åœ¨å¦ä¸€ä¸ªå±å¹•ç¼“å†²åŒºå¤„ç†çš„å—ï¼Ÿ ï¼ˆ1ï¼‰ Feed æµæ»‘åŠ¨å¡é¡¿çš„å¸¸è§åŸå› å¡é¡¿ä¸€èˆ¬æ˜¯å› ä¸º ä¸»çº¿ç¨‹åœ¨ 16.67msï¼ˆ60fps ä¸‹ï¼‰æˆ–è€… 8.3msï¼ˆ120fps ä¸‹ï¼‰æ²¡æœ‰å®Œæˆä¸€æ¬¡ç»˜åˆ¶æäº¤ã€‚å¸¸è§åŸå› ï¼š å¸ƒå±€è®¡ç®—è¿‡é‡ å¤§é‡ autoLayout çº¦æŸè®¡ç®— cell é«˜åº¦åŠ¨æ€è®¡ç®—ä¸ç¼“å­˜ ä¸»çº¿ç¨‹é˜»å¡ å¤§é‡ JSON è§£æã€IOã€å›¾ç‰‡è§£ç æ”¾åœ¨ä¸»çº¿ç¨‹ å¤æ‚ä¸šåŠ¡é€»è¾‘æˆ–é”ç«äº‰ ç»˜åˆ¶è´Ÿæ‹…è¿‡é‡ å¤§é‡åœ†è§’ã€é˜´å½±ã€maskã€group opacity ç­‰è§¦å‘ç¦»å±æ¸²æŸ“ å¤§å›¾ç¼©æ”¾ã€è§£ç å»¶è¿Ÿ é¢‘ç¹åˆ›å»º/é”€æ¯å¯¹è±¡ cell é‡å¤ initï¼Œè€Œä¸æ˜¯é‡ç”¨ å›¾ç‰‡å¤„ç†é—®é¢˜ æœªåšé¢„è§£ç ã€ä¸‹é‡‡æ ·ï¼Œå¯¼è‡´ GPU/CPU å¼€é”€å¤§ ï¼ˆ2ï¼‰ä¸ºä»€ä¹ˆç¦»å±æ¸²æŸ“ä¼šå½±å“æ»‘åŠ¨æµç•…åº¦ ä»€ä¹ˆæ˜¯ç¦»å±æ¸²æŸ“ (Offscreen Rendering) GPU æœ¬æ¥åœ¨ On-Screen Bufferï¼ˆå±å¹•ç¼“å†²åŒºï¼‰é‡Œç”»ä¸œè¥¿ï¼Œé¡ºåºæ‰§è¡Œå³å¯ã€‚ ä¸€æ—¦é‡åˆ°åœ†è§’ + maskã€é˜´å½±ã€layer.shouldRasterize ç­‰æƒ…å†µï¼ŒGPU ä¼šï¼š å…ˆæ–°å»ºä¸€ä¸ª Offscreen Buffer æŠŠå†…å®¹ç”»åˆ°è¿™ä¸ª buffer å†æ‹·è´å› On-Screen Buffer å¼€é”€åœ¨å“ª æ–°å»º buffer æœ¬èº«æ¶ˆè€—å†…å­˜ GPU åˆ‡æ¢ä¸Šä¸‹æ–‡ï¼ˆContext Switchï¼‰æœ‰æ€§èƒ½å¼€é”€ ç»“æœè¦ copy å›ä¸»å±å¹• bufferï¼Œå¢åŠ å¸¦å®½å ç”¨ ä¸ºä»€ä¹ˆä¼šå¡é¡¿ è¿™ä¸æ˜¯â€œå¼‚æ­¥â€çš„ï¼Œè€Œæ˜¯ GPU çš„é¢å¤–å·¥ä½œï¼Œä¾ç„¶è¦å¡åœ¨ æ¸²æŸ“ç®¡çº¿ï¼ˆDisplay Link vsync åŒæ­¥ï¼‰ã€‚ å¦‚æœç¦»å±æ¸²æŸ“é‡å¤§ï¼ŒGPU è·Ÿä¸ä¸Š vsync èŠ‚å¥ï¼Œå°±æ‰å¸§ â†’ feed æ»‘åŠ¨å¡é¡¿ã€‚ ï¼ˆ3ï¼‰â€œå¼‚æ­¥ç»˜åˆ¶åº“â€ å’Œç¦»å±æ¸²æŸ“çš„åŒºåˆ« ä½ è¯´çš„ â€œå¼‚æ­¥çš„åº“â€ï¼ˆæ¯”å¦‚ YYAsyncLayer, Texture (AsyncDisplayKit)ï¼‰å…¶å®è·Ÿ Core Animation çš„ Offscreen Rendering ä¸ä¸€æ ·ï¼š å¼‚æ­¥ç»˜åˆ¶åº“ æŠŠæ–‡æœ¬æ’ç‰ˆã€å›¾ç‰‡åˆæˆã€UI ç»˜åˆ¶é€»è¾‘æ”¾åˆ° åå°çº¿ç¨‹çš„ CGContext é‡Œå®Œæˆ å¾—åˆ°ä¸€å¼ æœ€ç»ˆçš„ä½å›¾ï¼ˆBitmapï¼‰ ä¸»çº¿ç¨‹åªæŠŠè¿™å¼ å›¾äº¤ç»™ layer.contents â†’ é¿å…äº†ä¸»çº¿ç¨‹é˜»å¡ &amp; é¿å… GPU ä¸´æ—¶å»º buffer GPU ç¦»å±æ¸²æŸ“ æ˜¯ æ¸²æŸ“é˜¶æ®µ GPU ä¸ºäº†å®ç°ç‰¹æ•ˆè€Œâ€œä¸å¾—ä¸â€å»ºä¸€ä¸ªä¸´æ—¶ buffer å‘ç”Ÿåœ¨ç»˜åˆ¶æäº¤ä¹‹åã€ç¡¬ä»¶ç®¡çº¿ä¸­ â†’ æ— æ³•ç”¨â€œæ”¾åå°çº¿ç¨‹â€è§£å†³ï¼Œå› ä¸ºæ˜¯ GPU ç¡¬ä»¶çš„éœ€æ±‚ å¯ä»¥è¿™æ ·ç†è§£ï¼š å¼‚æ­¥ç»˜åˆ¶åº“ï¼šCPU å…ˆç”»å¥½ â†’ å‡è½»ä¸»çº¿ç¨‹ &amp; GPU å‹åŠ› ç¦»å±æ¸²æŸ“ï¼šGPU ä¸´æ—¶å»º buffer â†’ åŠ é‡ GPU å‹åŠ› æ€»ç»“ï¼š Feed å¡é¡¿å¤§å¤šæ˜¯ ä¸»çº¿ç¨‹é˜»å¡ + GPU è´Ÿæ‹…è¿‡é‡ã€‚ ç¦»å±æ¸²æŸ“ä¼šå¡ï¼Œæ˜¯å› ä¸º GPU åœ¨æ¸²æŸ“ç®¡çº¿ä¸Šå¤šäº†é¢å¤– buffer å¼€é”€ã€‚ å¼‚æ­¥ç»˜åˆ¶åº“çš„â€œå¼‚æ­¥ bufferâ€ä¸æ˜¯ GPU çš„ Offscreen Bufferï¼Œè€Œæ˜¯ CPU ä¾§å…ˆç”Ÿæˆä½å›¾ï¼Œä¸¤è€…æ¦‚å¿µå®Œå…¨ä¸åŒã€‚ 5.é¦–å±ä¼˜åŒ–ï¼Œæœ‰æ²¡æœ‰é’ˆå¯¹å„ä¸ªæ¨¡å—çš„ï¼Œæ¯”å¦‚å¡çº¿ç¨‹äº†ï¼Œæ€ä¹ˆæ£€æµ‹ï¼Œæ€ä¹ˆä¼˜åŒ–å¡çº¿ç¨‹æ£€æµ‹æ–¹æ³• 1. Runloop å¡é¡¿ç›‘æ§ â€¢ åˆ©ç”¨ CFRunLoopObserver ç›‘å¬ä¸»çº¿ç¨‹ RunLoop çš„çŠ¶æ€ï¼ˆkCFRunLoopBeforeSourcesã€kCFRunLoopAfterWaiting ç­‰ï¼‰ã€‚ â€¢ å½“ RunLoop æŸæ¬¡å¾ªç¯è¶…è¿‡é˜ˆå€¼ï¼ˆå¦‚ &gt;200msï¼‰è¿˜æœªå®Œæˆï¼Œå°±è®¤ä¸ºå‘ç”Ÿäº†å¡é¡¿ã€‚ â€¢ å·¥å…·ç±»åº“ï¼šYYAsyncLayerã€FBRetainCycleDetector + è‡ªå·±å°è£…å¡é¡¿ç›‘æ§ã€‚ 2. å †æ ˆé‡‡æ · (Stack Sampling) â€¢ ä½¿ç”¨å­çº¿ç¨‹å®šæ—¶é‡‡æ ·ä¸»çº¿ç¨‹è°ƒç”¨æ ˆï¼ˆæ¯”å¦‚æ¯ 50ms å–ä¸€æ¬¡ï¼‰ã€‚ â€¢ å½“æ£€æµ‹åˆ°ä¸»çº¿ç¨‹é•¿æ—¶é—´æ— å“åº”æ—¶ï¼Œæ‰“å°é‡‡æ ·æ ˆï¼Œå¯å¿«é€Ÿå®šä½é˜»å¡ç‚¹ã€‚ â€¢ å¼€æºæ–¹æ¡ˆï¼šKSCrashã€PLCrashReporterã€‚ 3. ç³»ç»Ÿå·¥å…· â€¢ Instruments â†’ Time Profilerï¼šå®šä½å‡½æ•°è€—æ—¶ã€‚ â€¢ Instruments â†’ Main Thread Checkerï¼šå‘ç° UI API æ˜¯å¦åœ¨å­çº¿ç¨‹è°ƒç”¨ã€‚ â€¢ Instruments â†’ System Traceï¼šæ›´åº•å±‚åœ°çœ‹çº¿ç¨‹è°ƒåº¦ä¸é”ç­‰å¾…ã€‚ å¸¸è§æ¨¡å—çš„é¦–å±ä¼˜åŒ–ç‚¹ï¼šï¼ˆ1ï¼‰å¯åŠ¨é˜¶æ®µï¼ˆå†·å¯åŠ¨ï¼‰ ä¼˜åŒ–æ£€æµ‹ åˆ©ç”¨ DYLD_PRINT_STATISTICS ç¯å¢ƒå˜é‡è§‚å¯ŸåŠ¨æ€åº“åŠ è½½è€—æ—¶ã€‚ Xcode çš„ App Launch æ¨¡æ¿å¯åˆ†æå¯åŠ¨é˜¶æ®µã€‚ ä¼˜åŒ–æ‰‹æ®µ å‡å°‘åŠ¨æ€åº“æ•°é‡ï¼Œåˆå¹¶ Podã€‚ ç”¨ App Clips æˆ–å»¶è¿ŸåŠ è½½æ¥å‡å°‘é¦–æ¬¡å¯åŠ¨ä½“ç§¯ã€‚ +load å’Œ +initialize é‡Œé¿å…åšè€—æ—¶æ“ä½œã€‚ ï¼ˆ2ï¼‰ ä¸»çº¿ç¨‹è€—æ—¶æ“ä½œ æ£€æµ‹ Runloop å¡é¡¿ç›‘æ§ + Instrumentsã€‚ ä¼˜åŒ– UI å¸ƒå±€è®¡ç®—ç§»åˆ°å­çº¿ç¨‹ï¼ˆAutoLayout çš„çº¦æŸå°½é‡å‡å°‘å±‚çº§ï¼‰ã€‚ å›¾ç‰‡è§£ç ã€JSON è§£ææ”¾å­çº¿ç¨‹ï¼ˆYYImage / YYModel çš„å¼‚æ­¥æ–¹æ¡ˆï¼‰ã€‚ æ¸²æŸ“å¤æ‚ UI æ—¶ç”¨ CALayer æˆ–ç¦»å±æ¸²æŸ“ä¼˜åŒ–ã€‚ ï¼ˆ3ï¼‰ç½‘ç»œæ¨¡å— æ£€æµ‹ åœ¨é¦–å±æ¥å£åŠ åŸ‹ç‚¹ï¼ˆå‘èµ·æ—¶é—´ - å“åº”æ—¶é—´ï¼‰ã€‚ Charles / Wireshark æŠ“åŒ…åˆ†æè€—æ—¶ã€‚ ä¼˜åŒ– æ ¸å¿ƒæ•°æ®æ¥å£æå‰å¹¶å‘è¯·æ±‚ï¼Œä¸è¦ä¸²è¡Œã€‚ ä½¿ç”¨ç¼“å­˜ï¼ˆç£ç›˜ç¼“å­˜ã€å†…å­˜ç¼“å­˜ã€é¢„åŠ è½½ï¼‰ã€‚ å¤§å›¾å»¶è¿ŸåŠ è½½ï¼Œå¿…è¦æ—¶ç”¨å ä½å›¾ã€‚ ï¼ˆ4ï¼‰ å›¾ç‰‡åŠ è½½ æ£€æµ‹ Instruments â†’ Allocations/Time Profiler è§‚å¯Ÿè§£ç ä¸å†…å­˜æƒ…å†µã€‚ ä¼˜åŒ– é¢„è§£ç ï¼ˆSDWebImageã€YYImageï¼‰ã€‚ é™ä½åˆ†è¾¨ç‡ï¼Œé¿å…åŸå›¾ç›´æ¥å±•ç¤ºã€‚ ä½¿ç”¨ WebP/HEIF æ ¼å¼ã€‚ ï¼ˆ5ï¼‰æ¸²æŸ“ä¸ç»˜åˆ¶ æ£€æµ‹ Instruments â†’ Core Animation æ£€æµ‹ FPSã€ç¦»å±æ¸²æŸ“ã€‚ GPU Driver template è§‚å¯Ÿ GPU æ˜¯å¦è¢«æ‰“æ»¡ã€‚ ä¼˜åŒ– å‡å°‘è§†å›¾å±‚çº§ï¼Œé¿å…è¿‡åº¦ä½¿ç”¨é€æ˜åº¦/åœ†è§’/é˜´å½±ã€‚ å°½é‡ç”¨ CAShapeLayer æ›¿ä»£å¤æ‚ç»˜åˆ¶ã€‚ æå‰æ¸²æŸ“é™æ€é¡µé¢çš„å¿«ç…§ã€‚ ï¼ˆ6ï¼‰æ•°æ®å¤„ç† &amp; æœ¬åœ° IO æ£€æµ‹ Time Profiler å®šä½ç£ç›˜/æ•°æ®åº“è€—æ—¶ã€‚ ä¼˜åŒ– é¦–é¡µä¸è¦åšå¤§é‡ç£ç›˜è¯»å†™ã€‚ CoreData/SQLite çš„æŸ¥è¯¢ä¸‹æ²‰åˆ°å­çº¿ç¨‹ã€‚ UserDefaults æ‰¹é‡å†™æ—¶è¦é¿å…é˜»å¡ã€‚ 6.IM Socket çš„æµç¨‹ 1.å»ºç«‹è¿æ¥ ä½¿ç”¨ CFStreamï¼ˆCoreFoundationï¼‰ã€CFSocketã€æˆ–è€…ä¸‰æ–¹åº“ï¼ˆå¦‚ CocoaAsyncSocketï¼‰æ¥å»ºç«‹ TCP è¿æ¥ã€‚ æˆ–è€…ç›´æ¥ç”¨ WebSocketï¼ˆiOS 13+ æ¨è URLSessionWebSocketTaskï¼Œæ—©æœŸå¯ç”¨ SocketRocketï¼‰ã€‚ æµç¨‹ï¼š å®¢æˆ·ç«¯å‘èµ·è¿æ¥è¯·æ±‚ï¼ˆIP + ç«¯å£ï¼‰ã€‚ æœåŠ¡å™¨è¿”å›æ˜¯å¦æˆåŠŸã€‚ æˆåŠŸåï¼Œè¿›å…¥å¯è¯»å†™çŠ¶æ€ã€‚ 2.ç™»å½•/é‰´æƒ å»ºç«‹è¿æ¥åï¼Œé€šå¸¸ç¬¬ä¸€æ­¥æ˜¯å‘é€ ç™»å½•åŒ… / é‰´æƒä¿¡æ¯ï¼ˆä¾‹å¦‚ userIdã€tokenã€è®¾å¤‡ä¿¡æ¯ï¼‰ã€‚ æœåŠ¡å™¨éªŒè¯é€šè¿‡åï¼Œä¼šè¿”å› ç™»å½•æˆåŠŸ ACKã€‚ åªæœ‰åœ¨é‰´æƒæˆåŠŸåï¼ŒSocket æ‰å…è®¸ç»§ç»­æ”¶å‘æ¶ˆæ¯ã€‚ 3.ç»´æŒé•¿è¿æ¥ é•¿è¿æ¥éœ€è¦ä¿æŒå¿ƒè·³ï¼ˆå¿ƒè·³åŒ… ping/pongï¼‰ã€‚ å®¢æˆ·ç«¯å®šæ—¶ï¼ˆå¦‚ 30s/60sï¼‰å‘é€ å¿ƒè·³åŒ…ï¼ŒæœåŠ¡å™¨å›åº” å¿ƒè·³ ACKã€‚ å¦‚æœå¿ƒè·³è¶…æ—¶ï¼ˆè¿ç»­å‡ æ¬¡æœªå“åº”ï¼‰ï¼Œè®¤ä¸ºè¿æ¥æ–­å¼€ï¼Œéœ€è¦è‡ªåŠ¨é‡è¿ã€‚ 4.æ¶ˆæ¯æ”¶å‘ å‘é€æ¶ˆæ¯ï¼š å°†æ¶ˆæ¯åºåˆ—åŒ–æˆçº¦å®šçš„æ•°æ®æ ¼å¼ï¼ˆJSON / Protobuf / äºŒè¿›åˆ¶åè®®ï¼‰ã€‚ å°è£…æ¶ˆæ¯å¤´ï¼ˆåŒ…å«æ¶ˆæ¯ç±»å‹ã€é•¿åº¦ã€æ¶ˆæ¯ ID ç­‰ï¼‰ã€‚ é€šè¿‡ Socket write/send å‘å‡ºã€‚ æ¥æ”¶æ¶ˆæ¯ï¼š Socket è¾“å…¥æµå›è°ƒæˆ–ä»£ç†è§¦å‘ã€‚ å…ˆè¯»æ¶ˆæ¯å¤´ï¼Œè§£ææ•°æ®åŒ…é•¿åº¦ã€‚ å†æŒ‰åè®®è¯»å–å®Œæ•´æ¶ˆæ¯ä½“ã€‚ ååºåˆ—åŒ–æˆä¸šåŠ¡å±‚å¯ç”¨çš„æ¨¡å‹å¯¹è±¡ã€‚ 5.æ¶ˆæ¯ç¡®è®¤ï¼ˆACKæœºåˆ¶ï¼‰ ä¸ºäº†ä¿è¯æ¶ˆæ¯å¯é æ€§ï¼Œé€šå¸¸é‡‡ç”¨ æ¶ˆæ¯å›æ‰§æœºåˆ¶ï¼š å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ â†’ æœåŠ¡å™¨æ”¶åˆ°åï¼Œè¿”å› ACKï¼ˆç¡®è®¤åŒ…ï¼ŒåŒ…å«æ¶ˆæ¯ IDï¼‰ã€‚ å¦‚æœå®¢æˆ·ç«¯åœ¨ä¸€å®šæ—¶é—´å†…æœªæ”¶åˆ° ACKï¼Œåˆ™é‡å‘æ¶ˆæ¯ã€‚ 6.æ–­çº¿é‡è¿ ç½‘ç»œå˜åŒ–ï¼ˆWiFi/4Gåˆ‡æ¢ï¼‰ã€App åå° â†’ å‰å°ï¼Œéƒ½ä¼šå¯¼è‡´è¿æ¥ä¸­æ–­ã€‚ éœ€è¦å®ç° è‡ªåŠ¨é‡è¿æœºåˆ¶ï¼š å‘ç°è¿æ¥æ–­å¼€ â†’ è¿›å…¥é‡è¿æµç¨‹ã€‚ æŒ‡æ•°é€€é¿é‡è¯•ï¼ˆå¦‚ 1s â†’ 2s â†’ 4s â†’ 8sâ€¦ï¼Œæœ‰ä¸Šé™ï¼‰ã€‚ è¿æ¥æˆåŠŸåï¼Œé‡æ–°é‰´æƒã€åŒæ­¥ç¦»çº¿æ¶ˆæ¯ã€‚ 7.ç¦»çº¿æ¶ˆæ¯åŒæ­¥ æ–­çº¿æœŸé—´å¯èƒ½ä¼šæœ‰æ¶ˆæ¯æœªæ”¶åˆ°ã€‚ é‡æ–°è¿æ¥æˆåŠŸåï¼Œå®¢æˆ·ç«¯éœ€è¦è°ƒç”¨æ¥å£è·å– ç¦»çº¿æ¶ˆæ¯ï¼Œå†å’Œæœ¬åœ°æ¶ˆæ¯é˜Ÿåˆ—åˆå¹¶ã€‚ 8.é€€å‡º/é‡Šæ”¾ ç”¨æˆ·ä¸»åŠ¨é€€å‡ºç™»å½•æ—¶ï¼Œå‘é€ é€€å‡ºåŒ…ã€‚ å…³é—­ Socketï¼Œé‡Šæ”¾èµ„æºã€‚ 7.FMDB çš„å†…éƒ¨å®ç°ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿå’Œå…¶ä»–å¦‚ WCDB æ•ˆç‡çš„æ¯”è¾ƒï¼› ï¼ˆ1ï¼‰FMDB çš„çº¿ç¨‹å®‰å…¨æ€§ FMDatabase FMDatabase æœ¬èº« ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ å®˜æ–¹æ˜ç¡®å»ºè®®ï¼šä¸€ä¸ª FMDatabase å®ä¾‹åªèƒ½åœ¨å•ä¸€çº¿ç¨‹ä¸­ä½¿ç”¨ï¼Œä¸èƒ½è·¨çº¿ç¨‹å…±äº«ã€‚ FMDatabaseQueue ä¸ºäº†ä¿è¯çº¿ç¨‹å®‰å…¨ï¼ŒFMDB æä¾›äº† FMDatabaseQueueã€‚ å†…éƒ¨å®ç°æ–¹å¼ï¼š ç»´æŠ¤ä¸€ä¸ª dispatch_queueï¼ˆä¸²è¡Œé˜Ÿåˆ—ï¼‰ã€‚ é€šè¿‡ inDatabase: æˆ– inTransaction: æ–¹æ³•ï¼Œå°†æ‰€æœ‰å¯¹æ•°æ®åº“çš„æ“ä½œ block ä¸²è¡Œæäº¤åˆ°è¿™ä¸ªé˜Ÿåˆ—é‡Œæ‰§è¡Œã€‚ è¿™æ ·å¯ä»¥ä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—®æ•°æ®åº“ï¼Œä»è€Œé¿å… SQLite çš„å¹¶å‘å†™å…¥é—®é¢˜ï¼ˆSQLite æœ¬èº«å†™æ“ä½œä¹Ÿæ˜¯ä¸²è¡ŒåŒ–çš„ï¼‰ã€‚ FMDatabasePool ä¸ºäº†ä¼˜åŒ–å¤šè¯»åœºæ™¯ï¼ŒFMDB è¿˜æä¾› FMDatabasePoolã€‚ å†…éƒ¨ç»´æŠ¤å¤šä¸ªæ•°æ®åº“è¿æ¥ï¼ˆé€šå¸¸ç”¨äºè¯»æ“ä½œï¼‰ã€‚ è¯»æ“ä½œå¯ä»¥å¹¶å‘åˆ†é…ç»™ä¸åŒçš„è¿æ¥ï¼Œå†™æ“ä½œä»ç„¶ä¼šè¢«ä¸²è¡ŒåŒ–ã€‚ ç»“è®ºï¼š å•ç‹¬ä½¿ç”¨ FMDatabase â†’ çº¿ç¨‹ä¸å®‰å…¨ ä½¿ç”¨ FMDatabaseQueue/Pool â†’ çº¿ç¨‹å®‰å…¨ 8.ç”¨è¿‡å“ªäº›é”ï¼Ÿæ•ˆç‡æ¯”è¾ƒï¼›@synchronized çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ OSSpinLockï¼ˆå·²åºŸå¼ƒï¼‰ è‡ªæ—‹é”ï¼Œå¿™ç­‰ï¼Œä¼šä¸æ–­è½®è¯¢ç­‰å¾…é”é‡Šæ”¾ã€‚ æ€§èƒ½å¾ˆé«˜ï¼Œä½†å­˜åœ¨ä¼˜å…ˆçº§åè½¬é—®é¢˜ï¼ˆé«˜ä¼˜å…ˆçº§çº¿ç¨‹å¯èƒ½è¢«ä½ä¼˜å…ˆçº§çº¿ç¨‹â€œé¥¿æ­»â€ï¼‰ï¼ŒApple å·²ç»ä¸æ¨èä½¿ç”¨ã€‚ iOS 10+ å»ºè®®ç”¨ os_unfair_lock ä»£æ›¿ã€‚ os_unfair_lock è‡ªæ—‹é”çš„æ›¿ä»£å“ï¼Œä¼šåœ¨ç­‰å¾…æ—¶æŒ‚èµ·çº¿ç¨‹ï¼Œé¿å…ä¼˜å…ˆçº§åè½¬ã€‚ é€‚åˆçŸ­æ—¶é—´ã€é«˜é¢‘åŠ é”çš„åœºæ™¯ã€‚ æ€§èƒ½æ¯” pthread_mutex æ›´å¥½ã€‚ pthread_mutexï¼ˆäº’æ–¥é”ï¼‰ POSIX æ ‡å‡†äº’æ–¥é”ã€‚ æ¯”è¾ƒé€šç”¨ï¼Œæ”¯æŒé€’å½’é”ï¼ˆPTHREAD_MUTEX_RECURSIVEï¼‰ã€‚ å¼€é”€æ¯” os_unfair_lock å¤§ä¸€äº›ï¼Œå› ä¸ºéœ€è¦è¿›å…¥å†…æ ¸ç­‰å¾…ã€‚ NSLock Objective-C å°è£…ï¼Œå†…éƒ¨åŸºäº pthread_mutexã€‚ æä¾›äº†é¢å‘å¯¹è±¡çš„ APIï¼Œç®€å•æ˜“ç”¨ã€‚ æ€§èƒ½ç•¥ä½äº os_unfair_lockã€‚ NSRecursiveLock é€’å½’é”ï¼Œå…è®¸åŒä¸€çº¿ç¨‹å¤šæ¬¡è·å¾—åŒä¸€æŠŠé”ï¼Œé¿å…æ­»é”ã€‚ åº•å±‚ä¹Ÿæ˜¯ pthread_mutex(recursive)ã€‚ NSCondition / NSConditionLock æ¡ä»¶é”ï¼Œç”¨äºçº¿ç¨‹é—´çš„æ¡ä»¶åŒæ­¥ï¼ˆç­‰å¾…æŸä¸ªæ¡ä»¶æ»¡è¶³æ‰ç»§ç»­ï¼‰ã€‚ å¸¸ç”¨äºâ€œç”Ÿäº§è€…â€”æ¶ˆè´¹è€…â€æ¨¡å‹ã€‚ dispatch_semaphore GCD æä¾›çš„ä¿¡å·é‡æœºåˆ¶ã€‚ å¯ç”¨äºèµ„æºè®¡æ•°ã€å¹¶å‘æ•°æ§åˆ¶ï¼Œä¹Ÿå¯ä»¥å½“æˆé”æ¥ç”¨ã€‚ æ€§èƒ½å’Œå¯æ§æ€§è¾ƒå¥½ã€‚ @synchronized Objective-C å…³é”®å­—ï¼ŒåŸºäº objc_sync_enter/objc_sync_exit å®ç°ã€‚ å†…éƒ¨ä½¿ç”¨å“ˆå¸Œè¡¨ç®¡ç†å¯¹è±¡é”ã€‚ ä½¿ç”¨ç®€å•ï¼Œä½†æ€§èƒ½æ¯” NSLock å·®ä¸€äº›ï¼Œå› ä¸ºé¢å¤–åšäº†å¯¹è±¡ç®¡ç†å’Œå¼‚å¸¸å¤„ç†ã€‚ é€‚åˆå¿«é€Ÿå®ç°çº¿ç¨‹å®‰å…¨ï¼Œä½†ä¸æ¨èåœ¨æ€§èƒ½æ•æ„Ÿåœºæ™¯ä¸­ä½¿ç”¨ã€‚ 9.ä¸Šä¼ å¤§å›¾ï¼Œæ€ä¹ˆåˆ†ç‰‡ï¼Œæ€ä¹ˆæ§åˆ¶çº¿ç¨‹æœ€å¤§å¹¶å‘æ•°ï¼Œæ€ä¹ˆå‘Šè¯‰webä¸Šä¼ è¿›åº¦ï¼Ÿä¸Šä¼ è¿›åº¦ç»†é¢—ç²’åº¦ï¼Œæ¯ç‰‡éƒ½æœ‰å“ªäº›çŠ¶æ€ï¼Œç°æœ‰ä¸Šä¼ å•ä¸ªå›¾ç‰‡çš„æ–¹æ³•ï¼Œæ€ä¹ˆå®æ—¶åŒæ­¥è¿›åº¦ ï¼ˆ1ï¼‰åˆ†ç‰‡ç­–ç•¥ åˆ†ç‰‡å¤§å°ï¼šä¸€èˆ¬ 2MB5MB ä¸€ç‰‡æ¯”è¾ƒåˆç†ï¼ˆ20M â†’ 104 ç‰‡ï¼‰ã€‚ åˆ†ç‰‡å¤ªå°ï¼šè¯·æ±‚æ•°å¤ªå¤šï¼Œå¼€é”€å¤§ï¼› åˆ†ç‰‡å¤ªå¤§ï¼šå¤±è´¥é‡ä¼ æˆæœ¬é«˜ã€‚ åˆ†ç‰‡åˆ‡å‰²ï¼šç”¨ NSData çš„ subdataWithRange: æˆ–è€… InputStreamï¼ŒæŠŠæ•´å¼ å›¾ç‰‡æŒ‰é¡ºåºæ‹†æˆå¤šä¸ª NSDataã€‚ ç¤ºä¾‹ï¼š123456789101112NSData *imageData = UIImageJPEGRepresentation(image, 0.9);NSUInteger chunkSize = 2 * 1024 * 1024; // 2MBNSUInteger length = [imageData length];NSUInteger offset = 0;NSMutableArray *chunks = [NSMutableArray array];while (offset &lt; length) { NSUInteger thisChunkSize = MIN(chunkSize, length - offset); NSData* chunk = [imageData subdataWithRange:NSMakeRange(offset, thisChunkSize)]; [chunks addObject:chunk]; offset += thisChunkSize;} ï¼ˆ2ï¼‰æ§åˆ¶å¹¶å‘æ•° ä¸è¦ä¸€æ¬¡æ€§å…¨éƒ¨å¹¶å‘ä¸Šä¼ ï¼ˆå¯èƒ½è€—å°½å¸¦å®½/å†…å­˜/çº¿ç¨‹ï¼‰ã€‚ æ¨èç”¨ NSOperationQueue æˆ– GCD ä¿¡å·é‡æ¥é™åˆ¶æœ€å¤§å¹¶å‘æ•°ã€‚ ä¾‹å­ï¼šæœ€å¤šå¹¶å‘ 3 ä¸ªåˆ†ç‰‡ä¸Šä¼  123456789101112dispatch_semaphore_t semaphore = dispatch_semaphore_create(3); // æœ€å¤§å¹¶å‘ 3dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);for (NSData *chunk in chunks) { dispatch_async(queue, ^{ dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER); [self uploadChunk:chunk completion:^{ dispatch_semaphore_signal(semaphore); }]; });} å¦‚æœè¦æ›´ä¼˜é›…ï¼Œå¯ä»¥ç”¨ NSOperationQueueï¼Œè®¾ç½® maxConcurrentOperationCount = 3ã€‚ ï¼ˆ3ï¼‰ä¸Šä¼ è¿›åº¦æ–¹å¼ A: NSURLSessionUploadTask + progress æ¯ä¸ªåˆ†ç‰‡åˆ›å»ºä¸€ä¸ª NSURLSessionUploadTaskï¼Œç›‘å¬å…¶ NSProgress å¯¹è±¡ã€‚ NSProgress èƒ½è¿”å›å½“å‰ä¸Šä¼ çš„å­—èŠ‚æ•°ï¼Œç»“åˆæ‰€æœ‰åˆ†ç‰‡ï¼Œæ±‡æ€»å‡ºæ•´ä½“è¿›åº¦ã€‚ æ–¹å¼B: NSURLSession delegate (æ›´çµæ´») æ±‡æ€»æ•´ä½“è¿›åº¦ æ‰€æœ‰åˆ†ç‰‡è¿›åº¦çš„åŠ æƒå¹³å‡ æ¯ä¸ªåˆ†ç‰‡æœ‰çŠ¶æ€ï¼ˆPending/Uploading/Success/Failedï¼‰ã€‚ ä¸Šä¼ æ—¶ç›‘å¬ NSURLSession çš„è¿›åº¦å›è°ƒï¼Œå®æ—¶æ‹¿åˆ°å­—èŠ‚æ•°ã€‚ æ±‡æ€»æ‰€æœ‰åˆ†ç‰‡è¿›åº¦å¾—åˆ°æ•´ä½“è¿›åº¦ã€‚ å†æŠŠæ•´ä½“è¿›åº¦åŒæ­¥ç»™ UI æˆ– Webã€‚ 10.SDWebImage åŠ è½½å›¾ç‰‡çš„æµç¨‹ï¼Œç¼“å­˜æœºåˆ¶ï¼ŒLRUæ€ä¹ˆå®ç°çš„ï¼ŸåŠ è½½å›¾ç‰‡ä¼ å…¥äº† UIImageView ä¸‹è½½å®Œå›¾ç‰‡åæ€ä¹ˆæ‹¿åˆ°è¿™ä¸ªå¯¹è±¡ï¼Œå› ä¸ºæ˜¯å¼‚æ­¥çš„ ï¼ˆ1ï¼‰SDWebImage åŠ è½½å›¾ç‰‡çš„æµç¨‹ å…¥å£ï¼š1[imageView sd_setImageWithURL:url placeholderImage:nil options:0 completed:nil]; ä¼ å…¥ UIImageView å’Œ URL åï¼Œä¼šèµ°åˆ° SDWebImageManager çš„ loadImageWithURLã€‚ æ£€æŸ¥ç¼“å­˜ï¼šâ€¢ å…ˆæŸ¥ å†…å­˜ç¼“å­˜ï¼ˆSDImageCache.memoryCacheï¼Œåº•å±‚æ˜¯ NSCache + LRUï¼‰â€¢ å†…å­˜æ²¡æœ‰ï¼Œå†æŸ¥ ç£ç›˜ç¼“å­˜ï¼ˆé€šè¿‡ key -&gt; æ–‡ä»¶è·¯å¾„ / SQLite ç´¢å¼•ï¼‰ ä¸‹è½½å›¾ç‰‡ï¼ˆå¦‚æœç¼“å­˜éƒ½æ²¡æœ‰ï¼‰ï¼šâ€¢ è°ƒç”¨ SDWebImageDownloaderï¼Œå†…éƒ¨åŸºäº NSURLSession åˆ›å»ºä¸‹è½½ä»»åŠ¡ï¼Œå¼‚æ­¥ä¸‹è½½æ•°æ®ã€‚â€¢ æ”¯æŒä¸‹è½½é˜Ÿåˆ—ã€å¹¶å‘æ§åˆ¶ã€è¯·æ±‚å»é‡ã€è¿›åº¦å›è°ƒã€‚ è§£ç  &amp; ç¼“å­˜ï¼šâ€¢ å›¾ç‰‡æ•°æ®ä¸‹è½½å®Œæˆåï¼Œä¼šè¿›è¡Œ è§£ç ï¼ˆdecodeï¼‰ï¼Œé¿å…ä¸»çº¿ç¨‹å¡é¡¿ã€‚â€¢ ç„¶åå†™å…¥ å†…å­˜ç¼“å­˜ + ç£ç›˜ç¼“å­˜ã€‚ å›è°ƒ UIï¼šâ€¢ ä¸‹è½½å®Œæˆåï¼Œä¸»çº¿ç¨‹å›è°ƒï¼ŒæŠŠ UIImage è®¾ç½®åˆ°ä¼ å…¥çš„ UIImageView.image ä¸Šã€‚ ï¼ˆ2ï¼‰ç¼“å­˜æœºåˆ¶ SDWebImage çš„ç¼“å­˜åˆ†ä¸¤çº§ï¼š å†…å­˜ç¼“å­˜ ä½¿ç”¨ NSCache å°è£…ï¼ˆå¸¦è‡ªåŠ¨æ¸…ç†æœºåˆ¶ï¼Œå†…å­˜ç´§å¼ æ—¶ä¼šè‡ªåŠ¨å›æ”¶ï¼‰ã€‚ å†…éƒ¨å®ç°äº† LRU (Least Recently Used) ç®—æ³•ï¼š - æ¯æ¬¡è®¿é—®ä¸€ä¸ªå›¾ç‰‡ï¼Œä¼šæŠŠå®ƒæ”¾åˆ°é“¾è¡¨å¤´ã€‚ - æ·˜æ±°æ—¶ä»é“¾è¡¨å°¾éƒ¨ç§»é™¤æœ€ä¹…æœªä½¿ç”¨çš„å¯¹è±¡ã€‚ - åœ¨ SD é‡Œï¼Œå…·ä½“ç”¨çš„æ˜¯ SDMemoryCacheï¼ŒåŸºäº YYMemoryCache çš„æ€æƒ³ï¼Œç»´æŠ¤äº†ä¸€ä¸ª **åŒå‘é“¾è¡¨ + å“ˆå¸Œè¡¨** ç»“æ„ã€‚ ç£ç›˜ç¼“å­˜ æ—§ç‰ˆæœ¬ç”¨ NSKeyedArchiver ç›´æ¥å­˜äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ æ–°ç‰ˆæœ¬ç”¨ sqlite + æ–‡ä»¶æ··åˆå­˜å‚¨ï¼š - å°æ–‡ä»¶ç›´æ¥å­˜ sqliteã€‚ - å¤§æ–‡ä»¶å†™åˆ°ç£ç›˜ï¼Œsqlite é‡Œä¿å­˜è·¯å¾„ç´¢å¼•ã€‚ æœ‰è¿‡æœŸç­–ç•¥ã€å®¹é‡æ§åˆ¶ï¼ˆä¾‹å¦‚è¶…è¿‡ 1 å‘¨ / è¶…è¿‡ 500MB è‡ªåŠ¨æ¸…ç†ï¼‰ã€‚ï¼ˆ3ï¼‰LRU å®ç°æ€è·¯ï¼ˆç®€åŒ–ç‰ˆï¼‰123456789101112131415161718192021222324252627282930// LRU çš„æ ¸å¿ƒï¼šå“ˆå¸Œè¡¨ + åŒå‘é“¾è¡¨class LRUCache { NSMutableDictionary *dict; // key -&gt; node Node *head, *tail; // åŒå‘é“¾è¡¨ - (id)get:(NSString *)key { Node *node = dict[key]; if (node) { [self moveToHead:node]; // æœ€è¿‘ä½¿ç”¨è¿‡ï¼Œç§»åŠ¨åˆ°å¤´éƒ¨ return node.value; } return nil; } - (void)put:(NSString *)key value:(id)value { Node *node = dict[key]; if (node) { node.value = value; [self moveToHead:node]; } else { node = [[Node alloc] initWithKey:key value:value]; dict[key] = node; [self addToHead:node]; if (dict.count &gt; capacity) { Node *removed = [self removeTail]; // æ·˜æ±°æœ€ä¹…æ²¡ç”¨çš„ [dict removeObjectForKey:removed.key]; } } }} ï¼ˆ4ï¼‰UIImageView ä¸å¼‚æ­¥å›è°ƒUIImageView æ˜¯é€šè¿‡ AssociatedObject ç»‘å®š URL çš„ï¼Œæ‰€ä»¥å¼‚æ­¥å›è°ƒæ—¶ SDWebImage èƒ½çŸ¥é“è¦ç»™å“ªä¸ª imageView è®¾ç½®å›¾ã€‚ 11.OOM æ€ä¹ˆé¿å…ï¼Ÿ é¿å… OOM çš„æ ¸å¿ƒå°±æ˜¯ å‡å°‘å•æ¬¡å†…å­˜å³°å€¼ + æ§åˆ¶æ•´ä½“å†…å­˜å ç”¨ + åŠæ—¶é‡Šæ”¾èµ„æºã€‚å®é™…é¡¹ç›®ä¸­é€šå¸¸è¦é’ˆå¯¹ä¸šåŠ¡åšä¸“é¡¹ä¼˜åŒ–ï¼Œæ¯”å¦‚ï¼š â€¢ å¤§å›¾ -&gt; ç¼©æ”¾è§£ç  â€¢ è§†é¢‘ -&gt; ç¡¬è§£ç ï¼Œæµå¼å¤„ç† â€¢ æ•°æ® -&gt; åˆ†é¡µåŠ è½½ï¼ŒNSCache ç®¡ç† â€¢ ç¼“å­˜ -&gt; æ”¶åˆ°å†…å­˜è­¦å‘Šç«‹å³æ¸…ç† 12.MVCS ä¸ SectionProvider æ€ä¹ˆå®ç°çš„ äºŒé¢ï¼š 1.æ„å»ºææ•ˆï¼Œæ€ä¹ˆå®šä½çš„æ˜¯å¤´æ–‡ä»¶å¯¼å…¥çš„é—®é¢˜ Xcode é‡ŒåŠ ä¸Šç¼–è¯‘å‚æ•° -ftime-traceï¼ˆClang 10+ æ”¯æŒï¼‰ï¼Œä¼šè¾“å‡ºæ¯ä¸ªç¼–è¯‘å•å…ƒé‡Œå‡½æ•°/å¤´æ–‡ä»¶çš„ç¼–è¯‘è€—æ—¶ï¼Œå¯ä»¥ç”¨ Chrome æ‰“å¼€ .json æ–‡ä»¶å¯è§†åŒ–ã€‚ æˆ–è€…åŠ  -Xclang -ftime-trace çœ‹æ›´è¯¦ç»†çš„æ—¶é—´çº¿ã€‚ 2.å°è£…çˆ¶ç±»æ²‰æ·€æ°”æ³¡åŠ¨ç”»ä¸äº‹ä»¶åˆ†å‘èƒ½åŠ›ï¼Œæ€ä¹ˆåšçš„ï¼Ÿ 3.éšç‰ˆè½¬ä¸ºééšå®ç°æ€ä¹ˆåšçš„ï¼Ÿæ´»åŠ¨é¡µç»„ä»¶åŒ–ï¼Œç»„ä»¶ä¹‹é—´æ€ä¹ˆäº¤äº’ 4.ç”»ä¸€ä¸‹è´å£³çš„æ¶æ„ï¼Œå¹³çº§ç»„ä»¶é€šä¿¡ï¼Œä¼ å€¼ åœºæ™¯ï¼š 1.æ²¡æ³•å¤ç°çš„crashï¼Œæ€ä¹ˆå»å¤„ç†ï¼Œå¦‚æœæ˜¯å†…éƒ¨åé¦ˆçš„ï¼Œæœ‰è®¾å¤‡ï¼Œæ€ä¹ˆå¤„ç† ï¼ˆ1ï¼‰æ”¶é›†æ›´å¤šä¸Šä¸‹æ–‡ä¿¡æ¯ Crash æ—¥å¿—ï¼ˆCrash Reportï¼‰ é€šè¿‡ Xcode Organizerï¼ˆè¿æ¥ TestFlight/ç¬¦å·åŒ–ï¼‰æˆ–ç¬¬ä¸‰æ–¹å¹³å°ï¼ˆå¦‚ Firebase Crashlyticsã€Buglyã€å‹ç›Ÿï¼‰è·å–ã€‚ ç¡®ä¿ç¬¦å·åŒ–ï¼Œå¾—åˆ°å¯è¯»çš„å †æ ˆã€‚ åŸ‹ç‚¹/æ—¥å¿— åœ¨å…³é”®é€»è¾‘ã€å´©æºƒå †æ ˆé™„è¿‘å¢åŠ åŸ‹ç‚¹ï¼ŒæŠŠä¸Šä¸‹æ–‡ï¼ˆå‚æ•°ã€çº¿ç¨‹çŠ¶æ€ã€ä¸šåŠ¡æ•°æ®ï¼‰ä¸Šä¼ åˆ°æ—¥å¿—ç³»ç»Ÿã€‚ å°è¯•è®°å½• NSErrorã€response æ•°æ®ã€å…³é”®å¯¹è±¡æ˜¯å¦ä¸º nilã€çº¿ç¨‹è°ƒç”¨æƒ…å†µã€‚ Breadcrumbï¼ˆé¢åŒ…å±‘æ—¥å¿—ï¼‰ è®°å½•ç”¨æˆ·æ“ä½œè½¨è¿¹ï¼Œèƒ½å¸®åŠ©å¤ç° crash å‰çš„è·¯å¾„ã€‚ ï¼ˆ2ï¼‰åˆ†æå´©æºƒå †æ ˆ å´©æºƒç±»å‹ EXC_BAD_ACCESS â†’ é‡æŒ‡é’ˆã€æå‰é‡Šæ”¾å¯¹è±¡ã€è¶Šç•Œè®¿é—®ã€‚ SIGABRT â†’ ä¸»åŠ¨è°ƒç”¨ abort()ï¼Œä¾‹å¦‚æ–­è¨€å¤±è´¥ã€‚ NSInvalidArgumentException â†’ å¯¹è±¡æ–¹æ³•æ‰¾ä¸åˆ°ã€‚ Deadlock / Watchdog â†’ UI å¡æ­»ï¼Œä¸»çº¿ç¨‹è¢«é˜»å¡ã€‚ å´©æºƒé¢‘ç‡/æœºå‹åˆ†å¸ƒ æ˜¯é›†ä¸­åœ¨ç‰¹å®šç³»ç»Ÿç‰ˆæœ¬ã€è®¾å¤‡ã€æœºå‹ï¼Ÿ å¦‚æœåªæœ‰ä¸ªåˆ«ç”¨æˆ·/æœºå‹ï¼Œå¯èƒ½æ˜¯ç¡¬ä»¶å·®å¼‚æˆ–æç«¯åœºæ™¯ã€‚ ï¼ˆ3ï¼‰æ¨æµ‹å¯èƒ½åœºæ™¯ æ— æ³•å¤ç°çš„ crash å¤§å¤šå’Œä»¥ä¸‹å› ç´ ç›¸å…³ï¼š å¤šçº¿ç¨‹å¹¶å‘ï¼šæ•°æ®ç«äº‰ã€éçº¿ç¨‹å®‰å…¨å®¹å™¨ï¼ˆå¦‚ NSMutableArrayï¼‰ã€UI æ›´æ–°ä¸åœ¨ä¸»çº¿ç¨‹ã€‚ å¼±ç½‘/è¶…æ—¶åœºæ™¯ï¼šä¸‹è½½/ä¸Šä¼ ä¸­é€”å–æ¶ˆã€æ–­ç‚¹ç»­ä¼ å¼‚å¸¸ã€‚ ç”Ÿå‘½å‘¨æœŸé—®é¢˜ï¼šVC å·²é”€æ¯ï¼Œä½†å¼‚æ­¥å›è°ƒè¿˜åœ¨è®¿é—®å®ƒã€‚ ä¸‰æ–¹åº“ Bugï¼šæ£€æŸ¥æ˜¯å¦ä¾èµ–ç‰ˆæœ¬è¿‡ä½ã€‚ å†…å­˜å‹åŠ›ï¼šå¤§å›¾åŠ è½½ã€ç¼“å­˜ç­–ç•¥ä¸å½“ã€‚ ï¼ˆ4ï¼‰é—´æ¥å®šä½æ–¹æ³• ç¬¦å·åŒ– Crash æ—¥å¿— + ç‰ˆæœ¬ä»£ç è¡Œå· â†’ é”å®šå‡ºé”™ä»£ç ä½ç½®ã€‚ å¼‚å¸¸ä¿æŠ¤ï¼šåŠ å…¥å®¹é”™æœºåˆ¶ï¼ˆæ¯”å¦‚é˜²è¶Šç•Œã€é˜² nilã€KVO ç§»é™¤æ£€æŸ¥ï¼‰ã€‚ å¢åŠ æ–­è¨€/ä¿æŠ¤ï¼šè®© crash æ›´æ—©ã€æ›´æ˜ç¡®åœ°æš´éœ²ï¼ˆä¾‹å¦‚ debug ç¯å¢ƒç›´æ¥ assertï¼‰ã€‚ Mock æç«¯åœºæ™¯ï¼šå¼±ç½‘ã€ä½å†…å­˜ã€åå°åˆ‡å‰å°ã€æ—‹è½¬ã€å¿«é€Ÿé¢‘ç¹æ“ä½œç­‰ã€‚ ï¼ˆ5ï¼‰ä¿®å¤å’ŒéªŒè¯ æ ¹æ®å †æ ˆå®šä½åŠ æ—¥å¿—ã€åŠ  guard åˆ¤æ–­ã€‚ åœ¨æœ¬åœ°å†™å° demo å°è¯•æ¨¡æ‹Ÿç±»ä¼¼è°ƒç”¨é“¾ã€‚ ä¿®å¤åç”¨ç°åº¦å‘å¸ƒè§‚å¯Ÿ crash æ˜¯å¦ä¸‹é™ã€‚ 2.æœ‰æ²¡æœ‰å¤„ç†å¡é¡¿çš„ç»éªŒï¼Œæ€§èƒ½å¹³å°æ¥äº†ä¸ªå¡é¡¿ï¼Œä½ ä¼šæ€ä¹ˆå¤„ç† iOS ä¸Šâ€œå¡é¡¿â€å…¶å®å°±æ˜¯ä¸»çº¿ç¨‹æ‰å¸§ï¼Œé€šå¸¸æ˜¯ CPU æˆ– GPU åœ¨æŸä¸€å¸§æ¸²æŸ“/è®¡ç®—è¶…æ—¶å¯¼è‡´çš„ã€‚é¢è¯•æˆ–å®é™…å·¥ä½œé‡Œï¼Œå¦‚æœæ€§èƒ½å¹³å°ä¸ŠæŠ¥äº†å¡é¡¿ï¼Œæˆ‘ä¼šæŒ‰ä»¥ä¸‹æ­¥éª¤æ¥å¤„ç†ï¼š ï¼ˆ1ï¼‰å…ˆå®šä½é—®é¢˜ ç¡®è®¤å¤ç°è·¯å¾„ï¼šåœ¨æ€§èƒ½å¹³å°ï¼ˆå¦‚ Matrixã€ç«ç„°å›¾ã€Instruments é‡‡é›†ï¼‰æ‰¾åˆ°å…·ä½“çš„å¡é¡¿å †æ ˆå’Œå‘ç”Ÿåœºæ™¯ã€‚ ç¡®è®¤å¡é¡¿ç±»å‹ï¼šæ˜¯ CPU å¡é¡¿ï¼ˆå¤§é‡è®¡ç®—ã€JSON è§£æã€æ’åºã€åŠ è§£å¯†ã€CoreDataã€IOï¼‰ GPU å¡é¡¿ï¼ˆè§†å›¾å±‚çº§è¿‡æ·±ã€ç¦»å±æ¸²æŸ“ã€è¿‡å¤šé˜´å½±åœ†è§’ã€å›¾ç‰‡è¿‡å¤§ç¼©æ”¾ï¼‰ I/O å¡é¡¿ï¼ˆå¤§æ–‡ä»¶è¯»å†™ã€æ•°æ®åº“æ…¢æŸ¥è¯¢ã€ä¸»çº¿ç¨‹è®¿é—®ç£ç›˜/ç½‘ç»œï¼‰ ï¼ˆ2ï¼‰ å·¥å…·åˆ†æ Instruments â†’ Time Profilerï¼šçœ‹ CPU å ç”¨å’Œçƒ­ç‚¹å‡½æ•°ã€‚ Instruments â†’ Core Animationï¼šçœ‹æ˜¯å¦æ‰å¸§ï¼ŒGPU æ¸²æŸ“ç“¶é¢ˆã€‚ Performance Platform Flame Graphï¼ˆç«ç„°å›¾ï¼‰ï¼šç¡®è®¤æ˜¯å“ªä¸ªæ–¹æ³•é˜»å¡äº†ä¸»çº¿ç¨‹ã€‚ Runloop ç›‘æ§ï¼šåˆ†æ Runloop å¡ä½çš„åŸå› ï¼Œæ˜¯å¦æ­»é”ã€é•¿ä»»åŠ¡ã€‚ ï¼ˆ3ï¼‰å¸¸è§ä¼˜åŒ–æ–¹å‘ CPU ä¼˜åŒ– è€—æ—¶æ“ä½œä¸‹æ”¾åˆ°å­çº¿ç¨‹ï¼ˆJSON è§£æã€å›¾ç‰‡è§£ç ã€CoreDataï¼‰ã€‚ ä½¿ç”¨æ›´é«˜æ•ˆçš„æ•°æ®ç»“æ„å’Œç®—æ³•ã€‚ å°½é‡å‡å°‘é¢‘ç¹çš„å¯¹è±¡åˆ›å»ºä¸é”€æ¯ã€‚ å›¾ç‰‡æå‰è§£ç ï¼ˆYYImage / SDWebImage å·²æœ‰ä¼˜åŒ–ï¼‰ã€‚ GPU ä¼˜åŒ– æ§åˆ¶è§†å›¾å±‚çº§ï¼Œä¸è¦è¶…è¿‡å¿…è¦æ·±åº¦ã€‚ é¿å…é¢‘ç¹ç¦»å±æ¸²æŸ“ï¼šåœ†è§’/é˜´å½±/é®ç½©å¯ä»¥é€šè¿‡ cornerRadius+maskToBounds=NO + shadowPath æˆ–ä½¿ç”¨é¢„å¤„ç†å›¾ç‰‡è§£å†³ã€‚ å›¾ç‰‡èµ„æºæŒ‰éœ€ç¼©æ”¾åˆ°åˆé€‚åˆ†è¾¨ç‡ï¼Œé¿å…å¤§å›¾ç›´æ¥ç¼©æ”¾ã€‚ åˆç†ä½¿ç”¨å¼‚æ­¥ç»˜åˆ¶ï¼ˆæ¯”å¦‚ YYTextã€AsyncDisplayKitï¼‰ã€‚ I/O ä¼˜åŒ– æ–‡ä»¶è¯»å†™/æ•°æ®åº“æ“ä½œæ”¾åœ¨åå°çº¿ç¨‹ã€‚ SQLite åŠ ç´¢å¼•ï¼ŒCoreData åˆ†æ‰¹æŸ¥è¯¢ã€‚ ç½‘ç»œè¯·æ±‚åˆ†æ‰¹ã€é¿å…ä¸»çº¿ç¨‹ç­‰å¾…ã€‚ ï¼ˆ4ï¼‰å®é™…æ¡ˆä¾‹å¤„ç†æ€è·¯ å‡è®¾æ€§èƒ½å¹³å°æŠ¥æŸä¸ªé¡µé¢â€œè¿›å…¥å¡é¡¿â€ï¼š æ‰“å¼€ç«ç„°å›¾ï¼Œçœ‹æ˜¯ä¸æ˜¯ viewDidLoad/viewWillAppear é˜¶æ®µæ‰§è¡Œäº†å¤§é‡è®¡ç®—ã€‚ å¦‚æœæ˜¯ JSON/å­—å…¸è½¬æ¨¡å‹ â†’ ä¸‹æ”¾å­çº¿ç¨‹ï¼Œæˆ–ç”¨æ›´å¿«çš„åºåˆ—åŒ–åº“ï¼ˆYYModelï¼‰ã€‚ å¦‚æœæ˜¯ UI åˆå§‹åŒ–å¤ªå¤š â†’ åˆ†æ‰¹åŠ è½½ã€æ‡’åŠ è½½ã€ä¸åœ¨é¦–å±å°±ä¸è¦ä¸€æ¬¡æ€§å»ºå®Œã€‚ å¦‚æœæ˜¯æ»‘åŠ¨åˆ—è¡¨å¡é¡¿ï¼š æ£€æŸ¥ Cell çš„ç»˜åˆ¶ï¼Œæ˜¯å¦æœ‰åœ†è§’ + é˜´å½±å¯¼è‡´ç¦»å±æ¸²æŸ“ã€‚ å›¾ç‰‡æ˜¯å¦æœªå‹ç¼©ï¼Œç›´æ¥ç”¨å¤§å›¾ç¼©æ”¾ã€‚ AutoLayout æ˜¯å¦çº¦æŸå¤æ‚ï¼Œå¯ä»¥æ”¹æˆ frame/æ‰‹å†™å¸ƒå±€ã€‚ å¦‚æœå †æ ˆæ˜¾ç¤º MainThread è¢«æŸä¸ªåŒæ­¥é”é˜»å¡ â†’ ä¼˜åŒ–å¹¶å‘ï¼Œé¿å…ä¸»çº¿ç¨‹ç­‰å¾…å¼‚æ­¥ç»“æœã€‚ å…ˆå®šä½å¡é¡¿ä½ç½®ï¼ˆå †æ ˆ/ç«ç„°å›¾/Runloopï¼‰ï¼Œå†æ ¹æ®ç±»å‹ï¼ˆCPUã€GPUã€I/Oï¼‰é’ˆå¯¹æ€§ä¼˜åŒ–ï¼Œç¡®ä¿ä¸»çº¿ç¨‹å°½é‡â€œè½»ã€å¿«ã€çŸ­â€ã€‚ 3.å¿«å°æ¿äº†ï¼Œäº§å“è¦åŠ ä¸€ä¸ªç´§æ€¥çš„åŠŸèƒ½ï¼Œè¯„ä¼°æœ‰é£é™©ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ ç¡®è®¤éœ€æ±‚èƒŒæ™¯ æˆ‘ä¼šå…ˆå’Œäº§å“ç¡®è®¤ï¼Œè¿™ä¸ªåŠŸèƒ½çš„ç´§æ€¥æ€§å’Œä¸šåŠ¡ä»·å€¼ï¼Œåˆ¤æ–­æ˜¯å¦çœŸçš„å¿…é¡»åœ¨å½“å‰ç‰ˆæœ¬ä¸Šçº¿ã€‚ å¿«é€Ÿé£é™©è¯„ä¼° ä»ä»£ç æ”¹åŠ¨èŒƒå›´ã€å¯¹æ ¸å¿ƒæµç¨‹çš„å½±å“ã€æµ‹è¯•æ—¶é—´æ˜¯å¦å……è¶³ã€è‹¹æœå®¡æ ¸æ—¶é—´ç­‰æ–¹é¢å¿«é€Ÿè¯„ä¼°é£é™©ã€‚ æå‡ºå¤šç§æ–¹æ¡ˆ ç«‹å³å®ç°æ–¹æ¡ˆï¼šé£é™©å¤§ï¼Œä½†èƒ½æ»¡è¶³ä¸šåŠ¡ã€‚ é™çº§/ä¸´æ—¶æ–¹æ¡ˆï¼šæ¯”å¦‚é€šè¿‡è¿œç¨‹é…ç½®ã€åŸ‹ç‚¹æˆ–å¼±åŒ–ç‰ˆæœ¬å…ˆæ»¡è¶³éƒ¨åˆ†è¯‰æ±‚ã€‚ å»¶æœŸæ–¹æ¡ˆï¼šä¿è¯å½“å‰ç‰ˆæœ¬è´¨é‡ï¼ŒæŠŠåŠŸèƒ½æ”¾åˆ°ä¸‹ä¸ªè¿­ä»£ã€‚ æ²Ÿé€šä¸å†³ç­– æŠŠé£é™©å’Œåæœå®¢è§‚å‘ŠçŸ¥äº§å“å’Œé¡¹ç›®è´Ÿè´£äººï¼Œè®©ä»–ä»¬å’Œæˆ‘ä¸€èµ·æƒè¡¡åˆ©å¼Šåšå†³å®šï¼Œè€Œä¸æ˜¯æˆ‘å•æ–¹é¢æ‹æ¿ã€‚ æŠ€æœ¯å…œåº•æªæ–½ å¦‚æœæœ€ç»ˆå†³å®šç´§æ€¥ä¸Šçº¿ï¼Œæˆ‘ä¼šå°½é‡æŠŠåŠŸèƒ½è®¾è®¡æˆå¯æ§çš„ï¼Œæ¯”å¦‚åŠ å¼€å…³ã€æœ€å°åŒ–æ”¹åŠ¨ï¼Œç•™å‡ºæ ¸å¿ƒæµç¨‹çš„å†’çƒŸæµ‹è¯•æ—¶é—´ï¼Œç¡®ä¿ä¸å½±å“ä¸»è¦ç”¨æˆ·è·¯å¾„ã€‚ 4.æœ‰æ²¡æœ‰ç»å†è¿‡ä¸¥é‡çš„çº¿ä¸Šé—®é¢˜ï¼Œå‡å¦‚ç°åœ¨æœ‰ä¸ªçº¿ä¸Šé—®é¢˜ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ 1) ç«‹åˆ»è¦åšçš„ï¼ˆ0â€“30 åˆ†é’Ÿï¼‰â€”â€”ç¼“è§£ä¸ä¿¡æ¯åŒæ­¥ï¼ˆå¿…é¡»ï¼‰ æŠ¥è­¦ç¡®è®¤ï¼šæŸ¥çœ‹ç›‘æ§ &amp; å´©æºƒå¹³å°ï¼ˆCrashlytics/Sentry/Bugly/AppCenterï¼‰ç¡®è®¤å½±å“èŒƒå›´/è¶‹åŠ¿ï¼ˆç”¨æˆ·æ•°ã€é”™è¯¯ç‡ã€ç‰ˆæœ¬ã€å›½å®¶ï¼‰ã€‚ æŠ¢å æ²Ÿé€šæ¸ é“ï¼šåœ¨ Slack/ä¼ä¸šå¾®ä¿¡/ç´§æ€¥ç¾¤ å»ºç«‹ incident channelï¼ˆ@oncallã€PMã€QAã€åç«¯ã€å®¢æœã€è¿è¥ã€æ³•åŠ¡ï¼‰ã€‚ ä¸´æ—¶å…¬å‘Šï¼ˆå¤–éƒ¨/å†…éƒ¨ï¼‰ï¼šç»™å®¢æœå’Œç”¨æˆ·å›¢é˜Ÿä¸€æ¡æ ‡å‡†çŠ¶æ€æ¶ˆæ¯ï¼ˆç¤ºä¾‹è§ä¸‹ï¼‰ã€‚ ç«‹å³å¼€å¯æŒ‡æ ‡å¿«ç…§ï¼šè¯·æ±‚äº§å“/æ•°æ®åŒå­¦å¯¼å‡ºæœ€è¿‘ 1h/24h çš„å…³é”®æŒ‡æ ‡ï¼ˆå´©æºƒç‡ã€æ´»è·ƒç”¨æˆ·ã€é”™è¯¯äº‹ä»¶ã€ç•™å­˜ã€æ”¯ä»˜å¤±è´¥ç‡ï¼‰ã€‚ å¦‚æœèƒ½åšæ— ä»£ç çš„å¿«é€Ÿç¼“è§£ï¼ˆåç«¯å¼€å…³ã€feature-flagã€ä¸‹å‘é…ç½®ï¼‰ç«‹å³æ‰§è¡Œå¹¶è®°å½•æ—¶é—´ã€‚ ç¤ºä¾‹å†…éƒ¨æ¶ˆæ¯ï¼ˆSlack/ä¼ä¸šç¾¤ï¼‰ï¼š ã€INCIDENTã€‘iOS ä¸»æµç¨‹å´©æºƒæ¿€å¢ï¼Œå¼€å§‹å“åº”ã€‚å½±å“ï¼šçº¦ X% æ´»è·ƒç”¨æˆ·ï¼Œç‰ˆæœ¬ vX.Y.Z å æ¯” Z%ã€‚è´Ÿè´£äººï¼š@xxxï¼ˆiOSï¼‰ï¼Œ@yyyï¼ˆåç«¯ï¼‰ã€‚å½“å‰æ“ä½œï¼š1) æ”¶é›†æ—¥å¿— 2) å°è¯•åç«¯å¼€å…³ 3) ç«‹åˆ»å‡†å¤‡ hotfixã€‚è¯·å„ç»„ä¿ç•™é€šé“ç•…é€šã€‚ 2) å¿«é€Ÿè¯Šæ–­ï¼ˆ30 åˆ†é’Ÿå†…å®Œæˆåˆæ­¥åˆ¤æ–­ï¼‰ â€¢ æ”¶é›†å´©æºƒæ ·æœ¬ï¼šç­›é€‰æœ€é¢‘ç¹çš„å´©æºƒå †æ ˆï¼ˆæŒ‰ç‰ˆæœ¬/æœºå‹/ç³»ç»Ÿç‰ˆæœ¬åˆ†ç»„ï¼‰ã€‚ â€¢ ç¬¦å·åŒ– &amp; åˆ†æï¼š â€¢ ä½¿ç”¨ dSYM + Crashlytics/Sentry è‡ªåŠ¨ç¬¦å·åŒ–ã€‚ â€¢ æŸ¥æ‰¾å›å½’èŒƒå›´ï¼šæ˜¯å“ªæ¬¡æäº¤/å“ªä¸ª release å¼•å…¥ï¼ˆgit bisect / å¯¹ç…§ release noteï¼‰ã€‚ â€¢ åˆ¤æ–­æ˜¯å¦æ˜¯å®¢æˆ·ç«¯ bugã€SDK é—®é¢˜ã€è¿˜æ˜¯åç«¯å˜æ›´å¯¼è‡´ã€‚3) åº”æ€¥ç¼“è§£ï¼ˆå¹¶è¡Œè¿›è¡Œï¼š30â€“90 åˆ†é’Ÿï¼‰ â€¢ å¦‚æœèƒ½ç”¨åç«¯/é…ç½®å¼€å…³è§£å†³ï¼ˆä¾‹å¦‚ç¦ç”¨æŸç‰¹æ€§ã€å›é€€åç«¯æ¥å£ï¼‰ï¼Œä¼˜å…ˆåšï¼š â€¢ è¯·æ±‚åç«¯ä¸‹çº¿/å›æ»šç›¸å…³æ¥å£æˆ–åŠ é€Ÿé™çº§é€»è¾‘ã€‚ â€¢ å¦‚æœå¿…é¡»åœ¨å®¢æˆ·ç«¯ä¿®å¤ï¼š â€¢ åˆ›å»º hotfix åˆ†æ”¯å¹¶ cherry-pick ä¿®å¤ commitã€‚ â€¢ æœ¬åœ°ä¸ CI å¿«è·‘ smoke testsï¼›å¦‚æœå…¬å¸æœ‰å†…éƒ¨ä¼ä¸šç­¾å/MDMï¼Œä¼˜å…ˆå‘å†…æµ‹/ç°åº¦ï¼š â€¢ TestFlight å†…éƒ¨ + å¤–éƒ¨åˆ†ç»„ï¼ˆå¦‚æœ Apple å®¡æ ¸ä¸å¯æ§ï¼Œä½¿ç”¨ä¼ä¸šç­¾åæˆ–ç§æœ‰åˆ†å‘å…ˆè¡Œï¼‰ã€‚ â€¢ è‹¥æ— æ³•å¿«é€Ÿä¸Šæ–°ï¼šè€ƒè™‘åœ¨æœåŠ¡å™¨ä¾§åšå…¼å®¹æ€§ä¿æŠ¤æˆ–å‘å®¢æˆ·ç«¯ä¸‹å‘æœ€æ–°é…ç½®æ¥ç»•å¼€ bugã€‚4) å‘å¸ƒç­–ç•¥ï¼ˆ1â€“4 å°æ—¶ï¼‰ â€¢ ç´§æ€¥ä¿®å¤åä¼˜å…ˆåš ç°åº¦/é˜¶æ®µå‘å¸ƒï¼š â€¢ TestFlight â†’ å°æ¯”ä¾‹å¤–éƒ¨ç”¨æˆ· â†’ Phased Releaseï¼ˆApp Storeï¼‰æˆ–æŒ‰åœ°åŒºåˆ†æ‰¹ä¸Šæ¶ã€‚ â€¢ æäº¤ App Store æ—¶å†™æ¸…æ¥š Release Notes &amp; Contactï¼ˆåŠ å¿«å®¡æ ¸æ—¶å¸¸ç”¨â€œcritical bug fixâ€ï¼‰ã€‚ â€¢ åœ¨å‘å¸ƒå‰å¿…é¡»åšå›å½’éªŒè¯ï¼ˆå…³é”®è·¯å¾„ã€æ”¯ä»˜ã€ç™»å½•ã€å´©æºƒç‡é‡‡æ ·ï¼‰ã€‚ 5) å¤ç›˜ä¸é•¿æœŸä¿®å¤ï¼ˆäº‹æ•…ç»“æŸå 24â€“72 å°æ—¶ï¼‰ â€¢ å¬å¼€ postmortemï¼šè®°å½•æ—¶é—´çº¿ï¼ˆdetection â†’ mitigation â†’ fix â†’ releaseï¼‰ã€æ ¹å› ã€å½±å“ã€æ•™è®­ã€è´£ä»»ä¸æ”¹è¿›è®¡åˆ’ã€‚ â€¢ è¾“å‡ºå¯æ‰§è¡Œæ”¹è¿›é¡¹ï¼ˆä¾‹å¦‚ï¼šå¢åŠ ç›‘æ§é˜ˆå€¼ã€æ”¹å–„å¼‚å¸¸å¤„ç†ã€å¼•å…¥ feature flagsã€æ‰©å±•è‡ªåŠ¨åŒ–å›æ»šã€å®Œå–„ CI æµç¨‹ï¼‰ã€‚ â€¢ æ›´æ–° runbookï¼ŒæŠŠæ­¤æ¬¡æ­¥éª¤å†™æˆå¯é‡å¤çš„ playbookã€‚6) å·¥å…· &amp; æŠ€æœ¯ç‚¹æ¸…å•ï¼ˆä½œä¸º Senior iOS è¦ä¼šçš„ï¼‰ â€¢ å´©æºƒåˆ†æï¼šCrashlyticsã€Sentryã€Buglyã€App Centerï¼›dSYM ç®¡ç†ï¼ˆBitcode ç¯å¢ƒéœ€æ³¨æ„ dSYM å¯¹åº”ï¼‰ã€‚ â€¢ æ—¥å¿—æ”¶é›†ï¼šè‡ªå®šä¹‰æ—¥å¿— + é‡‡æ ·ï¼ˆå¯ç”¨ OSLogã€ELKã€Datadogï¼‰ã€ç½‘ç»œæŠ“åŒ…ï¼ˆCharles/Proxymanï¼‰ã€‚ â€¢ å›æ»šæ‰‹æ®µï¼šåç«¯å¼€å…³ã€feature-flagï¼ˆLaunchDarkly/Unleashï¼‰ã€ç°åº¦å‘å¸ƒã€‚ â€¢ å‘å¸ƒæ¸ é“ï¼šTestFlightã€ä¼ä¸šç­¾åã€App Store Phased Releaseï¼›ç†Ÿæ‚‰ Apple å®¡æ ¸æ—¶é—´ä¸åŠ é€Ÿå®¡æ‰¹æ¸ é“ã€‚ â€¢ Git æµç¨‹ï¼šhotfix åˆ†æ”¯ã€cherry-pickã€CI å¿«è·‘ã€tag/releaseã€‚ â€¢ å¸¸ç”¨å‘½ä»¤/æ“ä½œï¼šsymbolicatecrashã€atosã€xcrunã€å¯¼å‡º dSYMã€æ‰¹é‡ä¸‹è½½å´©æºƒæ—¥å¿—è„šæœ¬ã€‚ 5.é¢†å¯¼äº¤ç»™ä½ ä¸€ä¸ªæ²¡æœ‰æ¥è§¦è¿‡çš„é¢†åŸŸçš„é—®é¢˜ï¼Œä½ ä¼šæ€ä¹ˆåš ï¼ˆ1ï¼‰æ˜ç¡®ç›®æ ‡ å’Œé¢†å¯¼å¯¹é½éœ€æ±‚ï¼šå¼„æ¸…æ¥šè°ƒç ”çš„èŒƒå›´ã€é‡ç‚¹å’Œé¢„æœŸäº§å‡ºã€‚ æ˜¯å†™ä¸€ä¸ªè°ƒç ”æŠ¥å‘Šï¼Ÿ è¿˜æ˜¯ç»™å‡ºå¯è¡Œæ€§æ–¹æ¡ˆï¼Ÿ è¿˜æ˜¯è¦åš PoCï¼ˆéªŒè¯æ€§ demoï¼‰ï¼Ÿ äº†è§£ä¸šåŠ¡èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆè¦è°ƒç ”è¿™é¡¹æŠ€æœ¯ï¼Œå®ƒè¦è§£å†³ä»€ä¹ˆé—®é¢˜ã€‚ ï¼ˆ2ï¼‰å¿«é€Ÿå»ºç«‹åŸºæœ¬è®¤çŸ¥ å®˜æ–¹æ–‡æ¡£ã€ç™½çš®ä¹¦ã€å¼€æºé¡¹ç›®ä¸»é¡µ â†’ ææ¸…æ¥šåŸºæœ¬æ¦‚å¿µå’Œå®šä½ã€‚ è¡Œä¸šæ–‡ç« ã€æŠ€æœ¯åšå®¢ã€ä¼šè®®æ¼”è®²è§†é¢‘ â†’ è·å–å‘å±•è¶‹åŠ¿å’Œå®é™…æ¡ˆä¾‹ã€‚ å¦‚æœæœ‰ç«å“æˆ–å‹å•†åº”ç”¨åœºæ™¯ â†’ çœ‹ä»–ä»¬æ˜¯å¦‚ä½•åº”ç”¨çš„ã€‚ ï¼ˆ3ï¼‰æ¢³ç†æ ¸å¿ƒé—®é¢˜ å›´ç»•è°ƒç ”ç›®æ ‡ï¼Œæç‚¼å‡ºå…³é”®ç‚¹ï¼Œæ¯”å¦‚ï¼š æŠ€æœ¯ç‰¹æ€§ï¼šä¼˜ç¼ºç‚¹ã€é€‚ç”¨åœºæ™¯ã€æŠ€æœ¯åŸç†ã€‚ ä½¿ç”¨æˆæœ¬ï¼šå­¦ä¹ æˆæœ¬ã€è¿ç§»æˆæœ¬ã€è¿ç»´æˆæœ¬ã€‚ é£é™©ç‚¹ï¼šç¨³å®šæ€§ã€æ€§èƒ½ã€ç¤¾åŒºæ´»è·ƒåº¦ã€å®‰å…¨æ€§ã€‚ æ›¿ä»£æ–¹æ¡ˆï¼šå’Œç°æœ‰æŠ€æœ¯çš„å¯¹æ¯”ã€‚ ï¼ˆ4ï¼‰å®è·µéªŒè¯ æ­å»ºæœ€å°å¯è¿è¡Œçš„ Demoï¼ˆèƒ½è·‘èµ·æ¥æœ€å…³é”®çš„åŠŸèƒ½ï¼‰ã€‚ å°è¯•é›†æˆåˆ°ç°æœ‰é¡¹ç›®ä¸­çš„æŸä¸ªå°æ¨¡å—ï¼Œçœ‹çœ‹å…¼å®¹æ€§å’Œå®é™…è¡¨ç°ã€‚ è®°å½•è¸©å‘ç‚¹ï¼Œé¿å…å›¢é˜Ÿåç»­é‡å¤ã€‚ ï¼ˆ5ï¼‰æ•´ç†æˆæœå¹¶æ±‡æŠ¥ å†™è°ƒç ”æ–‡æ¡£ï¼ˆèƒŒæ™¯ã€ç»“è®ºã€å¯¹æ¯”ã€é£é™©ã€å»ºè®®ï¼‰ã€‚ ç»“è®ºè¦æœ‰ å®šæ€§åˆ†æï¼ˆä¼˜åŠ£åŠ¿ï¼‰+ å®šé‡æŒ‡æ ‡ï¼ˆæ€§èƒ½ã€å†…å­˜ã€å¼€å‘å·¥æ—¶ç­‰ï¼‰ã€‚ æä¾›æ¸…æ™°çš„å»ºè®®ï¼šæ˜¯å¦å¼•å…¥ã€å¦‚ä½•å¼•å…¥ã€æ›¿ä»£æ–¹æ¡ˆæ˜¯ä»€ä¹ˆã€‚ æ ¸å¿ƒæ€è·¯æ˜¯ å…ˆæ˜ç¡®ç›®æ ‡ â†’ å¿«é€Ÿå»ºç«‹çŸ¥è¯†æ¡†æ¶ â†’ é’ˆå¯¹æ ¸å¿ƒé—®é¢˜æ·±æŒ– â†’ å®è·µéªŒè¯ â†’ å½¢æˆå¯è½åœ°çš„ç»“è®ºã€‚","link":"/2025-09-24-ç±³å¯ä¸–ç•Œ/"},{"title":"ç™¾èäº‘åˆ›é¢è¯•é¢˜","text":"ç™¾èäº‘åˆ›é¢è¯•é¢˜ 1.è…¾è®¯ä¼šè®®å…±äº«å±å¹•åœ¨çº¿ç¼–ç¨‹ https://leetcode.cn/problems/zhan-de-ya-ru-dan-chu-xu-lie-lcof/description/2.KVO åŸç†3.å¦‚ä½•è°ƒç”¨ç§æœ‰ APIï¼Ÿä¸‰æ–¹åº“æˆ–ç³»ç»Ÿæœªæš´æ¼çš„æ–¹æ³•4.æ€ä¹ˆæ”¹ä¸€ä¸ªç±»çš„åªè¯»å±æ€§5.æ¶ˆæ¯æœºåˆ¶6.Runloop æµç¨‹ï¼Œç”¨ Runloop åšè¿‡ä»€ä¹ˆï¼Ÿå¡é¡¿æ£€æµ‹ï¼Œå‘ç”Ÿå¡é¡¿åæ€ä¹ˆè·å–å †æ ˆä¿¡æ¯ï¼Ÿå †æ ˆä¿¡æ¯çš„åŸç†7.GCD éƒ½ç”¨äº†å“ªäº›ï¼Ÿç½‘ç»œè¯·æ±‚ A å’Œ B éƒ½å›è°ƒåï¼Œè¯·æ±‚ Cï¼Œå¦‚ä½•å®ç°ï¼Ÿé™¤äº† dispatch_group8.å¯å˜æ•°ç»„ NSMutableArrayï¼Œåœ¨å¤´éƒ¨æ’å…¥å…ƒç´ ï¼ŒiOS ç³»ç»Ÿåšäº†ä»€ä¹ˆä¼˜åŒ–9.Tagged Pointer10.NSString å­˜å‚¨åœ¨å“ªé‡Œï¼Œå¼•ç”¨è®¡æ•°å­˜å‚¨å“ªé‡Œï¼Ÿ11.dealloc æµç¨‹12.é¿å…å“ˆå¸Œç¢°æ’çš„å‡ ç§æ–¹æ³•ï¼Ÿ13.mach-o äº†è§£å—ï¼Ÿå­˜å‚¨çš„æ–¹æ³•ä¿¡æ¯å¯ä»¥æ— ç”¨ä»£ç æ£€æµ‹ï¼Ÿæ®µè¿ç§»ï¼Ÿ14.è„šæœ¬æ£€æµ‹æœªä½¿ç”¨ä»£ç åŸç†15.render æ¸²æŸ“æµç¨‹16.UIView åŠ¨ç”»å’Œ CAAnimation åŠ¨ç”»æœ‰ä»€ä¹ˆè”ç³»ï¼Ÿ17.é¡¹ç›®äº®ç‚¹ å‚è€ƒç­”æ¡ˆ1.è…¾è®¯ä¼šè®®å…±äº«å±å¹•åœ¨çº¿ç¼–ç¨‹ https://leetcode.cn/problems/zhan-de-ya-ru-dan-chu-xu-lie-lcof/description/2.KVO åŸç†å·¥ä½œåŸç†KVO ä¸»è¦ä¾èµ–äº Objective-C çš„åŠ¨æ€æ€§å’Œ Runtime è¿è¡Œæ—¶æœºåˆ¶ã€‚ä»¥ä¸‹æ˜¯ KVO çš„å‡ ä¸ªæ ¸å¿ƒæ­¥éª¤å’ŒåŸç†ï¼š 1. åŠ¨æ€å­ç±»åŒ–å½“ä½ ç¬¬ä¸€æ¬¡ç»™æŸä¸ªå¯¹è±¡æ·»åŠ è§‚å¯Ÿè€…æ—¶ï¼ŒObjective-C Runtime ä¼šåŠ¨æ€åœ°åˆ›å»ºè¯¥å¯¹è±¡çš„ä¸€ä¸ªå­ç±»ã€‚è¿™ä¸ªå­ç±»ä¼šé‡å†™è¢«è§‚å¯Ÿå±æ€§çš„ setter æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ è§‚å¯Ÿå¯¹è±¡ person çš„ name å±æ€§ï¼š 1[person addObserver:self forKeyPath:@\"name\" options:NSKeyValueObservingOptionNew context:nil]; Runtime ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç±»ï¼Œå‡è®¾åä¸º NSKVONotifying_Personï¼Œè¿™ä¸ªç±»æ˜¯ Person ç±»çš„å­ç±»ã€‚ 2. é‡å†™ setter æ–¹æ³•åœ¨æ–°çš„å­ç±»ä¸­ï¼ŒRuntime ä¼šé‡å†™è¢«è§‚å¯Ÿå±æ€§çš„ setter æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¯¹äº name å±æ€§ï¼Œå…¶ setter æ–¹æ³•å¯èƒ½å¦‚ä¸‹ï¼š 12345- (void)setName:(NSString *)name { [self willChangeValueForKey:@\"name\"]; [super setName:name]; [self didChangeValueForKey:@\"name\"];} willChangeValueForKey:ï¼šé€šçŸ¥ç³»ç»Ÿå±æ€§å³å°†å‘ç”Ÿå˜åŒ–ã€‚ didChangeValueForKey:ï¼šé€šçŸ¥ç³»ç»Ÿå±æ€§å·²ç»å‘ç”Ÿå˜åŒ–ã€‚ è¿™äº›æ–¹æ³•ä¼šè§¦å‘ KVO é€šçŸ¥æœºåˆ¶ï¼Œå‘æ‰€æœ‰è§‚å¯Ÿè€…å‘é€é€šçŸ¥ã€‚ 3. æ³¨å†Œè§‚å¯Ÿè€…å½“ä½ è°ƒç”¨ addObserver:forKeyPath:options:context: æ–¹æ³•æ—¶ï¼ŒRuntime ä¼šå°†è§‚å¯Ÿè€…æ³¨å†Œåˆ°ä¸€ä¸ªå†…éƒ¨çš„è§‚å¯Ÿè€…åˆ—è¡¨ä¸­ï¼Œè¿™ä¸ªåˆ—è¡¨é€šå¸¸æ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰ï¼Œé”®æ˜¯è¢«è§‚å¯Ÿçš„å±æ€§ï¼Œå€¼æ˜¯è§‚å¯Ÿè€…å¯¹è±¡ã€‚ 4. é€šçŸ¥è§‚å¯Ÿè€…å½“å±æ€§å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé‡å†™çš„ setter æ–¹æ³•ä¼šè°ƒç”¨ willChangeValueForKey: å’Œ didChangeValueForKey: æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ä¼šè§¦å‘ KVO é€šçŸ¥æœºåˆ¶ï¼Œå‘æ³¨å†Œçš„è§‚å¯Ÿè€…å‘é€é€šçŸ¥ã€‚è§‚å¯Ÿè€…ä¼šæ”¶åˆ° observeValueForKeyPath:ofObject:change:context: æ–¹æ³•çš„å›è°ƒã€‚ 3.å¦‚ä½•è°ƒç”¨ç§æœ‰ APIï¼Ÿä¸‰æ–¹åº“æˆ–ç³»ç»Ÿæœªæš´æ¼çš„æ–¹æ³•1. ä½¿ç”¨ performSelector: æ–¹æ³•performSelector: æ–¹æ³•å¯ä»¥åŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ï¼Œå³ä½¿è¿™äº›æ–¹æ³•åœ¨ç¼–è¯‘æ—¶ä¸å¯è§ã€‚ 1234SEL privateSelector = NSSelectorFromString(@\"privateMethod\");if ([object respondsToSelector:privateSelector]) { [object performSelector:privateSelector];} 2. ä½¿ç”¨ Runtime åŠ¨æ€è°ƒç”¨Objective-C çš„ Runtime åº“æä¾›äº†ä¸€äº›å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥åŠ¨æ€è°ƒç”¨æ–¹æ³•ã€‚ ç¤ºä¾‹ä»£ç ï¼šè°ƒç”¨ç§æœ‰æ–¹æ³•12345678#import &lt;objc/runtime.h&gt;SEL privateSelector = NSSelectorFromString(@\"privateMethod\");if ([object respondsToSelector:privateSelector]) { IMP imp = [object methodForSelector:privateSelector]; void (*func)(id, SEL) = (void *)imp; func(object, privateSelector);} ç¤ºä¾‹ä»£ç ï¼šè®¿é—®ç§æœ‰å±æ€§1234#import &lt;objc/runtime.h&gt;Ivar ivar = class_getInstanceVariable([object class], \"_privateProperty\");id privateValue = object_getIvar(object, ivar); 3. ä½¿ç”¨ dlsym å‡½æ•°å¦‚æœä½ çŸ¥é“ç§æœ‰ API çš„ç¬¦å·åç§°ï¼Œå¯ä»¥ä½¿ç”¨ dlsym å‡½æ•°æ¥è·å–å‡½æ•°æŒ‡é’ˆï¼Œå¹¶è°ƒç”¨å®ƒã€‚ 12345678910#import &lt;dlfcn.h&gt;void *handle = dlopen(NULL, RTLD_LAZY);if (handle) { void (*privateFunction)(void) = dlsym(handle, \"privateFunctionName\"); if (privateFunction) { privateFunction(); } dlclose(handle);} 4.æ€ä¹ˆæ”¹ä¸€ä¸ªç±»çš„åªè¯»å±æ€§æ–¹æ³•ä¸€ï¼šé€šè¿‡ KVC (Key-Value Coding)Key-Value Coding (KVC) æ˜¯ä¸€ç§é—´æ¥è®¿é—®å¯¹è±¡å±æ€§çš„æ–¹æ³•ã€‚å³ä½¿å±æ€§æ˜¯åªè¯»çš„ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ KVC ä¿®æ”¹å®ƒçš„å€¼ã€‚ ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223@interface MyClass : NSObject@property (nonatomic, strong, readonly) NSString *readonlyProperty;@end@implementation MyClass { NSString *_readonlyProperty;}- (instancetype)init { self = [super init]; if (self) { _readonlyProperty = @\"Initial Value\"; } return self;}@end// ä¿®æ”¹åªè¯»å±æ€§MyClass *myObject = [[MyClass alloc] init];NSLog(@\"Before: %@\", myObject.readonlyProperty);[myObject setValue:@\"New Value\" forKey:@\"readonlyProperty\"];NSLog(@\"After: %@\", myObject.readonlyProperty); æ–¹æ³•äºŒï¼šä½¿ç”¨è¿è¡Œæ—¶å‡½æ•°åœ¨ Objective-C ä¸­ï¼Œå¯ä»¥ä½¿ç”¨è¿è¡Œæ—¶å‡½æ•°æ¥ä¿®æ”¹å±æ€§çš„å€¼ã€‚ ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627#import &lt;objc/runtime.h&gt;@interface MyClass : NSObject@property (nonatomic, strong, readonly) NSString *readonlyProperty;@end@implementation MyClass { NSString *_readonlyProperty;}- (instancetype)init { self = [super init]; if (self) { _readonlyProperty = @\"Initial Value\"; } return self;}@end// ä¿®æ”¹åªè¯»å±æ€§MyClass *myObject = [[MyClass alloc] init];NSLog(@\"Before: %@\", myObject.readonlyProperty);Ivar ivar = class_getInstanceVariable([MyClass class], \"_readonlyProperty\");object_setIvar(myObject, ivar, @\"New Value\");NSLog(@\"After: %@\", myObject.readonlyProperty); æ–¹æ³•ä¸‰ï¼šå­ç±»åŒ–å’Œé‡å†™ Getter æ–¹æ³•é€šè¿‡åˆ›å»ºä¸€ä¸ªå­ç±»å¹¶é‡å†™åªè¯»å±æ€§çš„ getter æ–¹æ³•ï¼Œå¯ä»¥æ§åˆ¶å±æ€§çš„å€¼ã€‚ ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839@interface MyClass : NSObject@property (nonatomic, strong, readonly) NSString *readonlyProperty;@end@implementation MyClass { NSString *_readonlyProperty;}- (instancetype)init { self = [super init]; if (self) { _readonlyProperty = @\"Initial Value\"; } return self;}@end@interface MyClassSubclass : MyClass@end@implementation MyClassSubclass { NSString *_customValue;}- (NSString *)readonlyProperty { return _customValue ? _customValue : [super readonlyProperty];}- (void)setCustomValue:(NSString *)value { _customValue = value;}@end// ä¿®æ”¹åªè¯»å±æ€§MyClassSubclass *myObject = [[MyClassSubclass alloc] init];NSLog(@\"Before: %@\", myObject.readonlyProperty);[myObject setCustomValue:@\"New Value\"];NSLog(@\"After: %@\", myObject.readonlyProperty); 5.æ¶ˆæ¯æœºåˆ¶1. åŸºæœ¬æ¦‚å¿µ æ¶ˆæ¯ï¼ˆMessageï¼‰ï¼šåœ¨ Objective-C ä¸­ï¼Œæ–¹æ³•è°ƒç”¨è¢«ç§°ä¸ºâ€œå‘é€æ¶ˆæ¯â€ã€‚å‘é€æ¶ˆæ¯çš„è¯­æ³•æ˜¯ [receiver message]ã€‚ æ¥æ”¶è€…ï¼ˆReceiverï¼‰ï¼šæ¥æ”¶å¹¶å¤„ç†æ¶ˆæ¯çš„å¯¹è±¡ã€‚ é€‰æ‹©å™¨ï¼ˆSelectorï¼‰ï¼šè¡¨ç¤ºæ–¹æ³•åç§°çš„ä¸€ä¸ªæ•°æ®ç±»å‹ï¼Œç±»å‹ä¸º SELã€‚é€‰æ‹©å™¨æ˜¯æ–¹æ³•çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚ 2. æ¶ˆæ¯å‘é€æµç¨‹å½“å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯æ—¶ï¼ŒObjective-C çš„è¿è¡Œæ—¶ç³»ç»Ÿä¼šè¿›è¡Œä¸€ç³»åˆ—æ­¥éª¤æ¥æŸ¥æ‰¾å¹¶è°ƒç”¨ç›¸åº”çš„æ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯æ¶ˆæ¯å‘é€çš„åŸºæœ¬æµç¨‹ï¼š æ¶ˆæ¯å‘é€ï¼šå½“ä»£ç ä¸­è°ƒç”¨ [object message] æ—¶ï¼Œç¼–è¯‘å™¨å°†å…¶è½¬æ¢ä¸º objc_msgSend å‡½æ•°è°ƒç”¨ã€‚ æŸ¥æ‰¾æ–¹æ³•ï¼šobjc_msgSend å‡½æ•°ä¼šæ ¹æ®æ¶ˆæ¯çš„é€‰æ‹©å™¨ï¼ˆSELï¼‰åœ¨å¯¹è±¡çš„ç±»åŠå…¶çˆ¶ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­æŸ¥æ‰¾å¯¹åº”çš„æ–¹æ³•å®ç°ã€‚ è°ƒç”¨æ–¹æ³•ï¼šæ‰¾åˆ°æ–¹æ³•å®ç°åï¼Œobjc_msgSend å‡½æ•°ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°æ–¹æ³•å®ç°ï¼Œåˆ™ä¼šè§¦å‘æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼ˆMessage Forwardingï¼‰ã€‚ 3. objc_msgSend å‡½æ•°objc_msgSend æ˜¯ Objective-C è¿è¡Œæ—¶ç³»ç»Ÿçš„æ ¸å¿ƒå‡½æ•°ä¹‹ä¸€ï¼Œè´Ÿè´£æ¶ˆæ¯çš„åˆ†å‘ã€‚å…¶åŸå‹å¦‚ä¸‹ï¼š 1void objc_msgSend(id self, SEL _cmd, ...); selfï¼šæ¶ˆæ¯çš„æ¥æ”¶è€…ã€‚ _cmdï¼šæ¶ˆæ¯çš„é€‰æ‹©å™¨ã€‚ å¯å˜å‚æ•°ï¼šæ–¹æ³•çš„å‚æ•°ã€‚ 4. æ¶ˆæ¯è½¬å‘æœºåˆ¶å½“ objc_msgSend æ— æ³•åœ¨ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­æ‰¾åˆ°ä¸é€‰æ‹©å™¨åŒ¹é…çš„æ–¹æ³•æ—¶ï¼Œä¼šè§¦å‘æ¶ˆæ¯è½¬å‘æœºåˆ¶ã€‚æ¶ˆæ¯è½¬å‘æœºåˆ¶åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š 4.1 åŠ¨æ€æ–¹æ³•è§£æé¦–å…ˆï¼Œè¿è¡Œæ—¶ç³»ç»Ÿä¼šå°è¯•åŠ¨æ€æ–¹æ³•è§£æï¼Œé€šè¿‡è°ƒç”¨ç±»çš„ +resolveInstanceMethod: æˆ– +resolveClassMethod: æ–¹æ³•æ¥æ·»åŠ æ–¹æ³•å®ç°ã€‚å¦‚æœæ–¹æ³•å®ç°è¢«åŠ¨æ€æ·»åŠ ï¼Œæ¶ˆæ¯å‘é€ä¼šé‡æ–°å¼€å§‹ã€‚ 1234567+ (BOOL)resolveInstanceMethod:(SEL)sel { if (sel == @selector(myMethod)) { class_addMethod([self class], sel, (IMP)myMethodIMP, \"v@:\"); return YES; } return [super resolveInstanceMethod:sel];} 4.2 å¿«é€Ÿè½¬å‘å¦‚æœåŠ¨æ€æ–¹æ³•è§£ææœªèƒ½æ·»åŠ æ–¹æ³•å®ç°ï¼Œè¿è¡Œæ—¶ç³»ç»Ÿä¼šè°ƒç”¨ -forwardingTargetForSelector: æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å…è®¸å°†æ¶ˆæ¯è½¬å‘ç»™å¦ä¸€ä¸ªå¯¹è±¡ã€‚ 123456- (id)forwardingTargetForSelector:(SEL)aSelector { if (aSelector == @selector(myMethod)) { return someOtherObject; } return [super forwardingTargetForSelector:aSelector];} 4.3 å¸¸è§„è½¬å‘å¦‚æœå¿«é€Ÿè½¬å‘ä¹Ÿæœªèƒ½å¤„ç†æ¶ˆæ¯ï¼Œè¿è¡Œæ—¶ç³»ç»Ÿä¼šè°ƒç”¨ -methodSignatureForSelector: å’Œ -forwardInvocation: æ–¹æ³•ã€‚é¦–å…ˆï¼Œé€šè¿‡ -methodSignatureForSelector: è·å–æ–¹æ³•ç­¾åï¼Œç„¶åé€šè¿‡ -forwardInvocation: è¿›è¡Œæ¶ˆæ¯è½¬å‘ã€‚ 123456789101112131415- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector { if (aSelector == @selector(myMethod)) { return [NSMethodSignature signatureWithObjCTypes:\"v@:\"]; } return [super methodSignatureForSelector:aSelector];}- (void)forwardInvocation:(NSInvocation *)anInvocation { SEL sel = [anInvocation selector]; if ([someOtherObject respondsToSelector:sel]) { [anInvocation invokeWithTarget:someOtherObject]; } else { [super forwardInvocation:anInvocation]; }} 5. æ¶ˆæ¯ç¼“å­˜ä¸ºäº†æé«˜æ¶ˆæ¯å‘é€çš„æ€§èƒ½ï¼ŒObjective-C è¿è¡Œæ—¶ç³»ç»Ÿä½¿ç”¨æ–¹æ³•ç¼“å­˜ï¼ˆMethod Cachingï¼‰ã€‚å½“ä¸€ä¸ªæ–¹æ³•ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨æ—¶ï¼Œå…¶å®ç°ä¼šè¢«ç¼“å­˜èµ·æ¥ï¼Œä¸‹æ¬¡è°ƒç”¨ç›¸åŒçš„æ–¹æ³•æ—¶ï¼Œå¯ä»¥ç›´æ¥ä»ç¼“å­˜ä¸­è·å–ï¼Œè€Œä¸éœ€è¦é‡æ–°æŸ¥æ‰¾ã€‚ 6.Runloop æµç¨‹ï¼Œç”¨ Runloop åšè¿‡ä»€ä¹ˆï¼Ÿå¡é¡¿æ£€æµ‹ï¼Œå‘ç”Ÿå¡é¡¿åæ€ä¹ˆè·å–å †æ ˆä¿¡æ¯ï¼Ÿå †æ ˆä¿¡æ¯çš„åŸç†Runloop åŸºæœ¬æ¦‚å¿µRunLoop æ˜¯ä¸€ä¸ªäº‹ä»¶å¤„ç†å¾ªç¯ï¼Œç”¨æ¥è°ƒåº¦å’Œå¤„ç†ä»»åŠ¡ã€‚å®ƒå¯ä»¥åœ¨æ²¡æœ‰ä»»åŠ¡æ—¶ä½¿çº¿ç¨‹è¿›å…¥ä¼‘çœ çŠ¶æ€ï¼Œä»è€ŒèŠ‚çœèµ„æºï¼›æœ‰ä»»åŠ¡æ—¶åˆ™ç«‹å³å”¤é†’çº¿ç¨‹å¤„ç†ä»»åŠ¡ã€‚RunLoop å®è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ç®¡ç†ç€å…¶éœ€è¦å¤„ç†çš„äº‹ä»¶å’Œæ¶ˆæ¯ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¥å£å‡½æ•°æ¥æ‰§è¡Œè¿™ä¸ªäº‹ä»¶å¤„ç†å¾ªç¯ã€‚ Runloop çš„åŸºæœ¬æµç¨‹RunLoop çš„åŸºæœ¬æµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š è¿›å…¥å¾ªç¯ï¼šè°ƒç”¨ CFRunLoopRun æˆ–è€… -[NSRunLoop run] æ–¹æ³•ã€‚ é€šçŸ¥è§‚å¯Ÿè€…ï¼šé€šçŸ¥å³å°†è¿›å…¥ RunLoop äº‹ä»¶å¤„ç†å¾ªç¯ã€‚ æ£€æŸ¥ Timerï¼šæ£€æŸ¥æ˜¯å¦æœ‰å®šæ—¶å™¨ï¼ˆTimerï¼‰éœ€è¦å¤„ç†ã€‚ å¤„ç†è¾“å…¥æºï¼šå¤„ç†è¾“å…¥æºï¼ˆInput Sourceï¼‰ï¼Œæ¯”å¦‚ç”¨æˆ·è§¦æ‘¸äº‹ä»¶ï¼ŒUIäº‹ä»¶ç­‰ã€‚ é€šçŸ¥è§‚å¯Ÿè€…ï¼šé€šçŸ¥å³å°†è¿›å…¥ä¼‘çœ ã€‚ ä¼‘çœ ï¼šå¦‚æœæ²¡æœ‰äº‹ä»¶éœ€è¦å¤„ç†ï¼Œçº¿ç¨‹è¿›å…¥ä¼‘çœ çŠ¶æ€ï¼Œç­‰å¾…äº‹ä»¶å‘ç”Ÿã€‚ å”¤é†’ï¼šæ”¶åˆ°å¤–éƒ¨äº‹ä»¶ï¼ˆå¦‚ Timer åˆ°æ—¶é—´ã€è¾“å…¥æºäº‹ä»¶ï¼‰å”¤é†’çº¿ç¨‹ã€‚ é€šçŸ¥è§‚å¯Ÿè€…ï¼šé€šçŸ¥å³å°†å¤„ç†äº‹ä»¶ã€‚ å¤„ç†äº‹ä»¶ï¼šå¤„ç† Timer æˆ–è¾“å…¥æºäº‹ä»¶ã€‚ é€šçŸ¥è§‚å¯Ÿè€…ï¼šé€šçŸ¥äº‹ä»¶å·²å¤„ç†å®Œæˆã€‚ é‡å¤æˆ–é€€å‡ºï¼šé‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œæˆ–æ ¹æ®ç‰¹å®šæ¡ä»¶é€€å‡ºå¾ªç¯ã€‚ RunLoop åœ¨ iOS ä¸­çš„åº”ç”¨1. ä¿æŒçº¿ç¨‹æ´»è·ƒRunLoop çš„ä¸€ä¸ªå…¸å‹åº”ç”¨æ˜¯ä¿æŒçº¿ç¨‹æ´»è·ƒã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå­çº¿ç¨‹åœ¨ä»»åŠ¡å®Œæˆåä¼šç«‹å³é€€å‡ºã€‚é€šè¿‡ RunLoopï¼Œå¯ä»¥è®©å­çº¿ç¨‹åœ¨æ²¡æœ‰ä»»åŠ¡æ—¶å¤„äºä¼‘çœ çŠ¶æ€ï¼Œä½†ä¸ä¼šé€€å‡ºï¼Œç­‰å¾…æ–°çš„ä»»åŠ¡åˆ°æ¥ã€‚ ç¤ºä¾‹ä»£ç ï¼š 12345678910111213- (void)startThread { NSThread *thread = [[NSThread alloc] initWithTarget:self selector:@selector(threadEntryPoint) object:nil]; [thread start];}- (void)threadEntryPoint { @autoreleasepool { [[NSThread currentThread] setName:@\"MyThread\"]; NSRunLoop *runLoop = [NSRunLoop currentRunLoop]; [runLoop addPort:[NSMachPort port] forMode:NSDefaultRunLoopMode]; [runLoop run]; // è¿›å…¥ RunLoop }} 2. å¤„ç†å®šæ—¶ä»»åŠ¡RunLoop å¯ä»¥ç”¨æ¥å¤„ç†å®šæ—¶ä»»åŠ¡ï¼Œæ¯”å¦‚å®šæ—¶å™¨ã€‚é€šè¿‡å°† NSTimer æ·»åŠ åˆ° RunLoopï¼Œå¯ä»¥åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”è§¦å‘ä»»åŠ¡ã€‚ ç¤ºä¾‹ä»£ç ï¼š 12345678- (void)scheduleTimer { NSTimer *timer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(timerFired:) userInfo:nil repeats:YES]; [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode];}- (void)timerFired:(NSTimer *)timer { NSLog(@\"Timer fired!\");} 3. å¤„ç†ç½‘ç»œè¯·æ±‚åœ¨å¤„ç†ç½‘ç»œè¯·æ±‚æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ RunLoop æ¥ä¿æŒçº¿ç¨‹æ´»è·ƒï¼Œç­‰å¾…ç½‘ç»œè¯·æ±‚å®Œæˆã€‚NSURLConnection å’Œ NSURLSession éƒ½ä½¿ç”¨ RunLoop æ¥å¤„ç†ç½‘ç»œäº‹ä»¶ã€‚ 4. å¤„ç†è¾“å…¥æºäº‹ä»¶RunLoop å¯ä»¥ç”¨æ¥å¤„ç†è¾“å…¥æºäº‹ä»¶ï¼Œæ¯”å¦‚ç”¨æˆ·è§¦æ‘¸äº‹ä»¶ã€UIäº‹ä»¶ç­‰ã€‚ 7.GCD éƒ½ç”¨äº†å“ªäº›ï¼Ÿç½‘ç»œè¯·æ±‚ A å’Œ B éƒ½å›è°ƒåï¼Œè¯·æ±‚ Cï¼Œå¦‚ä½•å®ç°ï¼Ÿé™¤äº† dispatch_groupGrand Central Dispatch (GCD) æ˜¯è‹¹æœå…¬å¸æ¨å‡ºçš„ä¸€ç§ç”¨äºå¹¶å‘ç¼–ç¨‹çš„æŠ€æœ¯ï¼Œæ—¨åœ¨ä¼˜åŒ–å¤šæ ¸è®¾å¤‡ä¸Šçš„ä»£ç æ‰§è¡Œã€‚GCD æä¾›äº†ä¸€ç§ç®€å•æ˜“ç”¨çš„ API æ¥ç®¡ç†å¹¶å‘ä»»åŠ¡ï¼Œå¹¶ä¸”èƒ½å¤Ÿè‡ªåŠ¨åˆ©ç”¨ç³»ç»Ÿèµ„æºè¿›è¡Œä¼˜åŒ–ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ GCD ä½¿ç”¨åœºæ™¯ï¼š 1. å¼‚æ­¥ä»»åŠ¡GCD çš„ä¸€ä¸ªä¸»è¦ç”¨é€”å°±æ˜¯åœ¨åå°æ‰§è¡Œè€—æ—¶ä»»åŠ¡ï¼Œä»è€Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼Œæé«˜åº”ç”¨çš„å“åº”é€Ÿåº¦ã€‚ ç¤ºä¾‹ä»£ç ï¼š 123456789dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ // æ‰§è¡Œè€—æ—¶ä»»åŠ¡ NSData *data = [self fetchDataFromServer]; // å›åˆ°ä¸»çº¿ç¨‹æ›´æ–° UI dispatch_async(dispatch_get_main_queue(), ^{ [self updateUIWithData:data]; });}); 2. å¹¶è¡Œä»»åŠ¡GCD å¯ä»¥è½»æ¾åœ°åˆ›å»ºå¹¶è¡Œä»»åŠ¡ï¼Œä»è€Œå……åˆ†åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨çš„è®¡ç®—èƒ½åŠ›ã€‚ ç¤ºä¾‹ä»£ç ï¼š 12345678910dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);dispatch_async(queue, ^{ [self performTask1];});dispatch_async(queue, ^{ [self performTask2];});dispatch_async(queue, ^{ [self performTask3];}); 3. åŒæ­¥ä»»åŠ¡å°½ç®¡å¼‚æ­¥ä»»åŠ¡æ›´å¸¸è§ï¼Œæœ‰æ—¶ä¹Ÿéœ€è¦åŒæ­¥ä»»åŠ¡æ¥ç¡®ä¿ä»»åŠ¡æŒ‰é¡ºåºæ‰§è¡Œã€‚ ç¤ºä¾‹ä»£ç ï¼š 123dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ [self performSynchronousTask];}); 4. å»¶è¿Ÿæ‰§è¡ŒGCD æä¾›äº†ç®€æ´çš„ API æ¥å»¶è¿Ÿæ‰§è¡Œä»»åŠ¡ã€‚ ç¤ºä¾‹ä»£ç ï¼š 1234dispatch_time_t delay = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(5.0 * NSEC_PER_SEC));dispatch_after(delay, dispatch_get_main_queue(), ^{ [self performDelayedTask];}); 5. ä¸€æ¬¡æ€§ä»£ç æœ‰æ—¶æˆ‘ä»¬éœ€è¦ç¡®ä¿æŸæ®µä»£ç åªæ‰§è¡Œä¸€æ¬¡ï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨ dispatch_onceã€‚ ç¤ºä¾‹ä»£ç ï¼š 1234static dispatch_once_t onceToken;dispatch_once(&amp;onceToken, ^{ [self initializeOnce];}); 6. è°ƒåº¦ç»„è°ƒåº¦ç»„å¯ä»¥ç”¨æ¥ç›‘æ§ä¸€ç»„ä»»åŠ¡çš„å®ŒæˆçŠ¶æ€ï¼Œé€šå¸¸ç”¨äºéœ€è¦ç­‰å¾…å¤šé¡¹ä»»åŠ¡å…¨éƒ¨å®Œæˆåæ‰èƒ½ç»§ç»­ä¸‹ä¸€æ­¥æ“ä½œçš„åœºæ™¯ã€‚ ç¤ºä¾‹ä»£ç ï¼š 12345678910111213141516dispatch_group_t group = dispatch_group_create();dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);dispatch_group_async(group, queue, ^{ [self performTask1];});dispatch_group_async(group, queue, ^{ [self performTask2];});dispatch_group_async(group, queue, ^{ [self performTask3];});dispatch_group_notify(group, dispatch_get_main_queue(), ^{ [self allTasksCompleted];}); 7. ä¿¡å·é‡ä¿¡å·é‡å¯ä»¥ç”¨æ¥æ§åˆ¶å¹¶å‘è®¿é—®èµ„æºçš„æ•°é‡ï¼Œé€‚ç”¨äºéœ€è¦é™åˆ¶å¹¶å‘ä»»åŠ¡æ•°é‡çš„åœºæ™¯ã€‚ ç¤ºä¾‹ä»£ç ï¼š 1234567891011121314dispatch_semaphore_t semaphore = dispatch_semaphore_create(2); // å…è®¸åŒæ—¶æ‰§è¡Œä¸¤ä¸ªå¹¶å‘ä»»åŠ¡for (int i = 0; i &lt; 5; i++) { dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER); // æ‰§è¡Œä»»åŠ¡ NSLog(@\"Task %d started\", i); sleep(2); // æ¨¡æ‹Ÿè€—æ—¶ä»»åŠ¡ NSLog(@\"Task %d completed\", i); dispatch_semaphore_signal(semaphore); });} 8. Barrier BlockBarrier Block ç”¨äºåœ¨å¹¶å‘é˜Ÿåˆ—ä¸­æ’å…¥ä¸€ä¸ªéšœç¢ï¼Œç¡®ä¿åœ¨éšœç¢å‰æäº¤çš„æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œæ‰æ‰§è¡Œéšœç¢åçš„ä»»åŠ¡ã€‚ ç¤ºä¾‹ä»£ç ï¼š 12345678910111213141516dispatch_queue_t queue = dispatch_queue_create(\"com.example.myqueue\", DISPATCH_QUEUE_CONCURRENT);dispatch_async(queue, ^{ [self performReadTask1];});dispatch_async(queue, ^{ [self performReadTask2];});dispatch_barrier_async(queue, ^{ [self performWriteTask];});dispatch_async(queue, ^{ [self performReadTask3];}); 9. Dispatch SourceDispatch Source æ˜¯ä¸€ç§éå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥ç”¨æ¥å¤„ç†å„ç§ç³»ç»Ÿäº‹ä»¶ï¼Œå¦‚æ–‡ä»¶å˜åŒ–ã€å®šæ—¶å™¨ã€ä¿¡å·ç­‰ã€‚ ç¤ºä¾‹ä»£ç ï¼ˆå®šæ—¶å™¨ï¼‰ï¼š 123456dispatch_source_t timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, dispatch_get_main_queue());dispatch_source_set_timer(timer, DISPATCH_TIME_NOW, 1.0 * NSEC_PER_SEC, 0.1 * NSEC_PER_SEC);dispatch_source_set_event_handler(timer, ^{ NSLog(@\"Timer fired\");});dispatch_resume(timer); 10. Dispatch Work Itemä½¿ç”¨ dispatch_block_t åˆ›å»ºå¯å–æ¶ˆçš„å·¥ä½œé¡¹ã€‚ ç¤ºä¾‹ä»£ç ï¼š 12345678910dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);dispatch_block_t workItem = dispatch_block_create(0, ^{ // æ‰§è¡Œä»»åŠ¡ NSLog(@\"Work item executed\");});dispatch_async(queue, workItem);// å–æ¶ˆå·¥ä½œé¡¹dispatch_block_cancel(workItem); åœ¨ iOS å¼€å‘ä¸­ï¼Œæœ‰æ—¶å€™éœ€è¦ç­‰å¾…å¤šä¸ªç½‘ç»œè¯·æ±‚å®Œæˆåå†è¿›è¡Œè¿›ä¸€æ­¥æ“ä½œï¼Œæ¯”å¦‚å‘èµ·æ–°çš„ç½‘ç»œè¯·æ±‚ã€‚ä¸ºäº†å®ç°è¿™ç§éœ€æ±‚ï¼Œå¯ä»¥ä½¿ç”¨å¤šç§æ–¹æ³•ï¼ŒåŒ…æ‹¬ GCDï¼ˆGrand Central Dispatchï¼‰ã€NSOperationQueue å’Œç¬¬ä¸‰æ–¹åº“å¦‚ PromiseKit æˆ– Combineã€‚ æ–¹æ³•ä¸€ï¼šä½¿ç”¨ GCD (Grand Central Dispatch)GCD æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹æ³•æ¥åŒæ­¥å¤šä¸ªå¼‚æ­¥ä»»åŠ¡ã€‚å¯ä»¥ä½¿ç”¨ dispatch_group æ¥å®ç°ç­‰å¾…å¤šä¸ªä»»åŠ¡å®Œæˆåæ‰§è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚ 12345678910111213141516171819202122dispatch_group_t group = dispatch_group_create();// å¼€å§‹è¯·æ±‚Adispatch_group_enter(group);[self performRequestAWithCompletion:^(id response, NSError *error) { // å¤„ç†è¯·æ±‚Açš„å“åº” dispatch_group_leave(group);}];// å¼€å§‹è¯·æ±‚Bdispatch_group_enter(group);[self performRequestBWithCompletion:^(id response, NSError *error) { // å¤„ç†è¯·æ±‚Bçš„å“åº” dispatch_group_leave(group);}];// å½“è¯·æ±‚Aå’Œè¯·æ±‚Béƒ½å®Œæˆåï¼Œæ‰§è¡Œè¯·æ±‚Cdispatch_group_notify(group, dispatch_get_main_queue(), ^{ [self performRequestCWithCompletion:^(id response, NSError *error) { // å¤„ç†è¯·æ±‚Cçš„å“åº” }];}); æ–¹æ³•äºŒï¼šä½¿ç”¨ NSOperationQueueNSOperationQueue æä¾›äº†ä¸€ç§æ›´ä¸ºé¢å‘å¯¹è±¡çš„æ–¹æ³•æ¥ç®¡ç†å¼‚æ­¥ä»»åŠ¡çš„ä¾èµ–å…³ç³»ã€‚ 1234567891011121314151617181920212223242526272829NSOperationQueue *queue = [[NSOperationQueue alloc] init];queue.maxConcurrentOperationCount = 2; // è®¾ç½®æœ€å¤§å¹¶å‘æ•°NSBlockOperation *operationA = [NSBlockOperation blockOperationWithBlock:^{ [self performRequestAWithCompletion:^(id response, NSError *error) { // å¤„ç†è¯·æ±‚Açš„å“åº” }];}];NSBlockOperation *operationB = [NSBlockOperation blockOperationWithBlock:^{ [self performRequestBWithCompletion:^(id response, NSError *error) { // å¤„ç†è¯·æ±‚Bçš„å“åº” }];}];NSBlockOperation *operationC = [NSBlockOperation blockOperationWithBlock:^{ [self performRequestCWithCompletion:^(id response, NSError *error) { // å¤„ç†è¯·æ±‚Cçš„å“åº” }];}];// è®¾ç½®ä¾èµ–å…³ç³»[operationC addDependency:operationA];[operationC addDependency:operationB];// å°†æ“ä½œæ·»åŠ åˆ°é˜Ÿåˆ—[queue addOperation:operationA];[queue addOperation:operationB];[queue addOperation:operationC]; æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ PromiseKitPromiseKit æä¾›äº†ä¸€ç§ç°ä»£çš„ã€é“¾å¼çš„æ–¹å¼æ¥å¤„ç†å¼‚æ­¥æ“ä½œã€‚ é¦–å…ˆï¼Œç¡®ä¿ä½ å·²ç»å®‰è£…äº† PromiseKitã€‚ 1pod &apos;PromiseKit&apos;, &apos;~&gt; 6.0&apos; ç„¶åï¼Œä½ å¯ä»¥ä½¿ç”¨ç±»ä¼¼ä»¥ä¸‹çš„ä»£ç æ¥å®ç°ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445#import &lt;PromiseKit/PromiseKit.h&gt;- (AnyPromise *)performRequestA { return [AnyPromise promiseWithResolverBlock:^(PMKResolver resolve) { [self performRequestAWithCompletion:^(id response, NSError *error) { if (error) { resolve(error); } else { resolve(response); } }]; }];}- (AnyPromise *)performRequestB { return [AnyPromise promiseWithResolverBlock:^(PMKResolver resolve) { [self performRequestBWithCompletion:^(id response, NSError *error) { if (error) { resolve(error); } else { resolve(response); } }]; }];}- (AnyPromise *)performRequestC { return [AnyPromise promiseWithResolverBlock:^(PMKResolver resolve) { [self performRequestCWithCompletion:^(id response, NSError *error) { if (error) { resolve(error); } else { resolve(response); } }]; }];}- (void)makeRequests { [When(@[[self performRequestA], [self performRequestB]]) then:^id(id results) { return [self performRequestC]; }].catch(^(NSError *error) { // å¤„ç†é”™è¯¯ });} æ–¹æ³•å››ï¼šä½¿ç”¨ Combineï¼ˆé€‚ç”¨äº iOS 13 åŠä»¥ä¸Šï¼‰å¦‚æœä½ åœ¨ä½¿ç”¨ iOS 13 åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ Combine æ¡†æ¶æ¥å¤„ç†å¼‚æ­¥ä»»åŠ¡ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455import Combinefunc performRequestA() -&gt; Future&lt;Data, Error&gt; { return Future { promise in // æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚A self.performRequestA { (data, error) in if let error = error { promise(.failure(error)) } else { promise(.success(data)) } } }}func performRequestB() -&gt; Future&lt;Data, Error&gt; { return Future { promise in // æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚B self.performRequestB { (data, error) in if let error = error { promise(.failure(error)) } else { promise(.success(data)) } } }}func performRequestC() -&gt; Future&lt;Data, Error&gt; { return Future { promise in // æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚C self.performRequestC { (data, error) in if let error = error { promise(.failure(error)) } else { promise(.success(data)) } } }}let cancellable = Publishers.Zip(performRequestA(), performRequestB()) .flatMap { _ in return performRequestC() } .sink(receiveCompletion: { completion in switch completion { case .failure(let error): print(\"Error: \\(error)\") case .finished: print(\"All requests finished successfully\") } }, receiveValue: { data in print(\"Received data: \\(data)\") }) æ€»ç»“ GCD: é€‚ç”¨äºéœ€è¦è½»é‡çº§å¹¶å‘ç®¡ç†çš„åœºæ™¯ã€‚ NSOperationQueue: æä¾›äº†æ›´ä¸ºé¢å‘å¯¹è±¡çš„å¹¶å‘ç®¡ç†æ–¹å¼ï¼Œé€‚ç”¨äºå¤æ‚ä»»åŠ¡ä¾èµ–å…³ç³»çš„åœºæ™¯ã€‚ PromiseKit: æä¾›äº†ä¸€ç§ç°ä»£çš„é“¾å¼å¼‚æ­¥å¤„ç†æ–¹å¼ï¼Œä»£ç æ›´ä¸ºç®€æ´ã€‚ Combine: é€‚ç”¨äº iOS 13 åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œæä¾›äº†å“åº”å¼ç¼–ç¨‹çš„æ–¹å¼æ¥å¤„ç†å¼‚æ­¥ä»»åŠ¡ã€‚ é€‰æ‹©å“ªç§æ–¹æ³•å–å†³äºä½ çš„é¡¹ç›®éœ€æ±‚å’Œä¸ªäººåå¥½ã€‚å¸Œæœ›è¿™äº›ç¤ºä¾‹èƒ½å¤Ÿå¸®åŠ©ä½ å®ç°ç½‘ç»œè¯·æ±‚ A å’Œ B éƒ½å›è°ƒåå†è¯·æ±‚ C çš„éœ€æ±‚ã€‚ 8.å¯å˜æ•°ç»„ NSMutableArrayï¼Œåœ¨å¤´éƒ¨æ’å…¥å…ƒç´ ï¼ŒiOS ç³»ç»Ÿåšäº†ä»€ä¹ˆä¼˜åŒ–åœ¨ iOS ç³»ç»Ÿä¸­ï¼ŒNSMutableArray æ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œå®ƒåœ¨æ’å…¥å’Œåˆ é™¤å…ƒç´ æ—¶ä¼šè¿›è¡Œä¸€äº›ä¼˜åŒ–ï¼Œä½†å…·ä½“çš„ä¼˜åŒ–ç»†èŠ‚æ˜¯ç”±åº•å±‚å®ç°å†³å®šçš„ï¼Œè¿™äº›å®ç°ç»†èŠ‚é€šå¸¸æ˜¯ç§æœ‰çš„ï¼ŒApple å¹¶æœªå…¬å¼€è¯¦ç»†çš„å†…éƒ¨å®ç°ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥æ¨æµ‹å’Œæ€»ç»“ä¸€äº›å¸¸è§çš„ä¼˜åŒ–ç­–ç•¥ï¼Œè¿™äº›ç­–ç•¥å¯èƒ½ä¼šåœ¨ NSMutableArray ä¸­ä½¿ç”¨ã€‚ 1. å†…å­˜é¢„åˆ†é…å’Œæ‰©å±•NSMutableArray ä¼šé¢„å…ˆåˆ†é…å†…å­˜æ¥å®¹çº³å¤šä¸ªå…ƒç´ ï¼Œä»¥å‡å°‘é¢‘ç¹çš„å†…å­˜åˆ†é…æ“ä½œã€‚å½“æ•°ç»„éœ€è¦æ‰©å±•å®¹é‡æ—¶ï¼Œå®ƒå¯èƒ½ä¼šä¸€æ¬¡æ€§åˆ†é…æ¯”å½“å‰éœ€æ±‚æ›´å¤šçš„å†…å­˜ç©ºé—´ï¼Œä»¥å¤‡å°†æ¥ä½¿ç”¨ã€‚è¿™ç§ç­–ç•¥å¯ä»¥å‡å°‘å†…å­˜åˆ†é…å’Œé‡Šæ”¾çš„é¢‘ç‡ï¼Œæé«˜æ€§èƒ½ã€‚ 2. å…ƒç´ ç§»åŠ¨ä¼˜åŒ–åœ¨æ•°ç»„å¤´éƒ¨æ’å…¥å…ƒç´ æ—¶ï¼Œæ‰€æœ‰ç°æœ‰å…ƒç´ éƒ½éœ€è¦å‘åç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚ä¸ºäº†å‡å°‘å†…å­˜æ‹·è´çš„å¼€é”€ï¼Œç³»ç»Ÿå¯èƒ½ä¼šä½¿ç”¨é«˜æ•ˆçš„å†…å­˜æ‹·è´å‡½æ•°ï¼ˆå¦‚ memmoveï¼‰æ¥ç§»åŠ¨å…ƒç´ ã€‚memmove å‡½æ•°åœ¨å¤„ç†é‡å å†…å­˜åŒºåŸŸæ—¶æ¯” memcpy æ›´å®‰å…¨å’Œé«˜æ•ˆã€‚ 3. æ•°æ®ç»“æ„ä¼˜åŒ–å°½ç®¡ NSMutableArray ä¸»è¦ä½¿ç”¨åŠ¨æ€æ•°ç»„æ¥å®ç°ï¼Œä½†åº•å±‚å¯èƒ½ä¼šç»“åˆä½¿ç”¨å…¶ä»–æ•°æ®ç»“æ„ï¼ˆå¦‚é“¾è¡¨ï¼‰æ¥ä¼˜åŒ–ç‰¹å®šæ“ä½œçš„æ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œä¸ºäº†ä¼˜åŒ–å¤´éƒ¨æ’å…¥æ“ä½œï¼Œç³»ç»Ÿå¯èƒ½ä¼šåœ¨ç‰¹å®šæƒ…å†µä¸‹ä½¿ç”¨åŒå‘é“¾è¡¨æˆ–è€…å…¶ä»–æ›´é€‚åˆæ’å…¥æ“ä½œçš„ç»“æ„ã€‚ 4. ç¼“å­˜å±€éƒ¨æ€§NSMutableArray å¯èƒ½ä¼šåˆ©ç”¨ç¼“å­˜å±€éƒ¨æ€§æ¥æé«˜æ€§èƒ½ã€‚é€šè¿‡å°†ç›¸é‚»çš„å…ƒç´ å­˜å‚¨åœ¨æ¥è¿‘çš„å†…å­˜åœ°å€ä¸Šï¼Œå¯ä»¥æé«˜ç¼“å­˜å‘½ä¸­ç‡ï¼Œä»è€Œæé«˜å†…å­˜è®¿é—®é€Ÿåº¦ã€‚ 5. å¹¶å‘å¤„ç†ä¼˜åŒ–è™½ç„¶ NSMutableArray æœ¬èº«ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†åœ¨ä¸€äº›å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œç³»ç»Ÿå¯èƒ½ä¼šä½¿ç”¨é”ã€åŸå­æ“ä½œæˆ–è€…å…¶ä»–å¹¶å‘æ§åˆ¶æœºåˆ¶æ¥ä¼˜åŒ–å¹¶å‘è®¿é—®çš„æ€§èƒ½ã€‚ æ€»çš„æ¥è¯´ï¼Œè™½ç„¶æˆ‘ä»¬æ— æ³•ç¡®åˆ‡çŸ¥é“ NSMutableArray çš„å†…éƒ¨ä¼˜åŒ–ç»†èŠ‚ï¼Œä½†å¯ä»¥æ¨æµ‹å®ƒä¼šé‡‡ç”¨ä¸€äº›å¸¸è§çš„ä¼˜åŒ–ç­–ç•¥æ¥æå‡æ€§èƒ½ã€‚äº†è§£è¿™äº›ä¼˜åŒ–ç­–ç•¥æœ‰åŠ©äºæˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­åšå‡ºæ›´å¥½çš„æ€§èƒ½ä¼˜åŒ–å†³ç­–ã€‚ 9.Tagged PointerTagged Pointer çš„åŸºæœ¬åŸç†Tagged Pointer çš„åŸºæœ¬åŸç†æ˜¯åˆ©ç”¨æŒ‡é’ˆçš„é«˜ä½ä½å…ƒæ¥å­˜å‚¨æ•°æ®ï¼Œè€Œä¸æ˜¯ä½¿ç”¨è¿™äº›ä½å…ƒæ¥å­˜å‚¨å†…å­˜åœ°å€ã€‚å…·ä½“æ¥è¯´ï¼š åœ¨ 64 ä½ç³»ç»Ÿä¸­ï¼ŒæŒ‡é’ˆæœ‰ 64 ä½ï¼Œå…¶ä¸­é€šå¸¸åªæœ‰ä½ 48 ä½ç”¨äºå­˜å‚¨å†…å­˜åœ°å€ï¼Œé«˜ 16 ä½æœªè¢«ä½¿ç”¨ã€‚ Tagged Pointer æŠ€æœ¯åˆ©ç”¨è¿™äº›æœªä½¿ç”¨çš„é«˜ä½ä½å…ƒæ¥å­˜å‚¨æ•°æ®ã€‚ å¦‚ä½•è¯†åˆ« Tagged Pointeråœ¨ Objective-C ä¸­ï¼ŒTagged Pointer ä½¿ç”¨æœ€é«˜ä½ï¼ˆæœ€é«˜ä½ä¸º 1ï¼‰æ¥æ ‡è¯†æ˜¯å¦æ˜¯ Tagged Pointerã€‚ä¾‹å¦‚ï¼š 0x8000000000000000ï¼šæœ€é«˜ä½ä¸º 1ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª Tagged Pointerã€‚ 0x0000000000000000ï¼šæœ€é«˜ä½ä¸º 0ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„æŒ‡é’ˆã€‚ Tagged Pointer çš„æ•°æ®å­˜å‚¨Tagged Pointer å¯ä»¥å­˜å‚¨å¤šç§ç±»å‹çš„æ•°æ®ï¼ŒåŒ…æ‹¬ï¼š å°æ•´æ•°ï¼šç›´æ¥åœ¨æŒ‡é’ˆä¸­å­˜å‚¨æ•´æ•°å€¼ã€‚ å°æµ®ç‚¹æ•°ï¼šç›´æ¥åœ¨æŒ‡é’ˆä¸­å­˜å‚¨æµ®ç‚¹æ•°å€¼ã€‚ å°å­—ç¬¦ä¸²ï¼šç›´æ¥åœ¨æŒ‡é’ˆä¸­å­˜å‚¨å­—ç¬¦ä¸²æ•°æ®ã€‚ 10.NSString å­˜å‚¨åœ¨å“ªé‡Œï¼Œå¼•ç”¨è®¡æ•°å­˜å‚¨å“ªé‡Œï¼Ÿ1. å¸¸é‡å­—ç¬¦ä¸²å¸¸é‡å­—ç¬¦ä¸²æ˜¯æŒ‡åœ¨ä»£ç ä¸­ç›´æ¥ä½¿ç”¨çš„å­—ç¬¦ä¸²å­—é¢é‡ï¼Œä¾‹å¦‚ï¼š 1NSString *str = @\"Hello, World!\"; è¿™äº›å­—ç¬¦ä¸²å­—é¢é‡é€šå¸¸ä¼šè¢«å­˜å‚¨åœ¨ç¨‹åºçš„åªè¯»æ•°æ®æ®µï¼ˆRead-Only Data Segmentï¼‰ä¸­ã€‚è¿™æ„å‘³ç€å®ƒä»¬åœ¨ç¼–è¯‘æ—¶å·²ç»ç¡®å®šï¼Œå¹¶ä¸”åœ¨ç¨‹åºè¿è¡Œæ—¶ä¸ä¼šè¢«ä¿®æ”¹ã€‚å®ƒä»¬çš„å†…å­˜åˆ†é…é€šå¸¸æ˜¯ç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å®Œæˆçš„ã€‚ 2. åŠ¨æ€å­—ç¬¦ä¸²åŠ¨æ€å­—ç¬¦ä¸²æ˜¯æŒ‡åœ¨ç¨‹åºè¿è¡Œæ—¶ç”Ÿæˆæˆ–æ‹¼æ¥çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š 12NSString *str1 = [NSString stringWithFormat:@\"Hello, %@\", @\"World\"];NSString *str2 = [str1 mutableCopy]; è¿™äº›å­—ç¬¦ä¸²æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€åˆ†é…å†…å­˜çš„ã€‚å®ƒä»¬é€šå¸¸å­˜å‚¨åœ¨å †ï¼ˆHeapï¼‰ä¸­ï¼Œå¹¶ç”± NSString å’Œ NSMutableString çš„å†…éƒ¨å®ç°æ¥ç®¡ç†ã€‚ 3. å†…å­˜ç®¡ç†åœ¨ Objective-C ä¸­ï¼Œå†…å­˜ç®¡ç†ä¸»è¦é€šè¿‡å¼•ç”¨è®¡æ•°ï¼ˆReference Countingï¼‰æ¥å®Œæˆã€‚NSString å¯¹è±¡ä¹Ÿéµå¾ªè¿™ä¸€è§„åˆ™ï¼š ARCï¼ˆAutomatic Reference Countingï¼‰: åœ¨ä½¿ç”¨ ARC çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ’å…¥å†…å­˜ç®¡ç†ä»£ç ï¼Œè´Ÿè´£å¢åŠ å’Œå‡å°‘å¼•ç”¨è®¡æ•°ã€‚ æ‰‹åŠ¨å†…å­˜ç®¡ç†ï¼ˆMRCï¼‰: åœ¨ä¸ä½¿ç”¨ ARC çš„æƒ…å†µä¸‹ï¼Œå¼€å‘è€…éœ€è¦æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Œé€šè¿‡ retainã€release å’Œ autorelease æ–¹æ³•æ¥ç®¡ç†å¼•ç”¨è®¡æ•°ã€‚ 4. å†…éƒ¨å®ç°NSString æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå…¶å…·ä½“å®ç°æœ‰å¤šä¸ªå­ç±»ï¼Œè¿™äº›å­ç±»ä¼˜åŒ–äº†ä¸åŒç±»å‹çš„å­—ç¬¦ä¸²å­˜å‚¨å’Œæ“ä½œã€‚å¸¸è§çš„å­ç±»åŒ…æ‹¬ï¼š __NSCFConstantString: ç”¨äºå­˜å‚¨å¸¸é‡å­—ç¬¦ä¸²ã€‚ __NSCFString: ä¸€èˆ¬ç”¨äºåŠ¨æ€åˆ›å»ºçš„ä¸å¯å˜å­—ç¬¦ä¸²ã€‚ NSMutableString: ç”¨äºå¯å˜å­—ç¬¦ä¸²ã€‚ åœ¨å®é™…è¿è¡Œæ—¶ï¼ŒNSString å¯¹è±¡çš„å…·ä½“å­˜å‚¨ä½ç½®å’Œæ–¹å¼å¯èƒ½ä¼šå› ä¸ºä¼˜åŒ–è€Œæœ‰æ‰€ä¸åŒã€‚ä¾‹å¦‚ï¼ŒçŸ­å­—ç¬¦ä¸²å¯èƒ½ä¼šè¢«å­˜å‚¨åœ¨æ ˆä¸Šï¼Œä»¥æé«˜æ€§èƒ½ã€‚ 5. å­—ç¬¦ä¸²ç¼“å­˜ä¸ºäº†æé«˜æ€§èƒ½ï¼ŒNSString ç±»å¯èƒ½ä¼šä½¿ç”¨ä¸€äº›å†…éƒ¨ç¼“å­˜æœºåˆ¶ã€‚ä¾‹å¦‚ï¼Œå¸¸é‡å­—ç¬¦ä¸²å¯èƒ½ä¼šè¢«ç¼“å­˜ï¼Œä»¥é¿å…é‡å¤åˆ†é…å†…å­˜ã€‚è¿™ç§ä¼˜åŒ–åœ¨åº•å±‚æ˜¯ç”± Core Foundation æ¡†æ¶å®ç°çš„ã€‚ 6. Foundation æ¡†æ¶ä¸ Core FoundationNSString æ˜¯ Foundation æ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œä½†å…¶åº•å±‚å®ç°ä¾èµ–äº Core Foundation ä¸­çš„ CFStringã€‚CFString æä¾›äº†å­—ç¬¦ä¸²æ“ä½œçš„åº•å±‚å®ç°ï¼Œè€Œ NSString åˆ™æ˜¯åœ¨å…¶åŸºç¡€ä¸Šæä¾›äº†é¢å‘å¯¹è±¡çš„æ¥å£ã€‚ æ€»ç»“ å¸¸é‡å­—ç¬¦ä¸²: å­˜å‚¨åœ¨ç¨‹åºçš„åªè¯»æ•°æ®æ®µä¸­ã€‚ åŠ¨æ€å­—ç¬¦ä¸²: åœ¨ç¨‹åºè¿è¡Œæ—¶å­˜å‚¨åœ¨å †ä¸­ã€‚ å†…å­˜ç®¡ç†: é€šè¿‡å¼•ç”¨è®¡æ•°ç®¡ç†ï¼Œæ— è®ºæ˜¯ ARC è¿˜æ˜¯ MRCã€‚ å†…éƒ¨å®ç°: ç”±å¤šä¸ªå­ç±»ä¼˜åŒ–ä¸åŒç±»å‹çš„å­—ç¬¦ä¸²ï¼Œåº•å±‚ä¾èµ–äº Core Foundation çš„ CFStringã€‚ 11.dealloc æµç¨‹12.é¿å…å“ˆå¸Œç¢°æ’çš„å‡ ç§æ–¹æ³•ï¼Ÿ1. æ›´å¥½çš„å“ˆå¸Œå‡½æ•°é€‰æ‹©ä¸€ä¸ªæ›´å¥½çš„å“ˆå¸Œå‡½æ•°å¯ä»¥æå¤§åœ°å‡å°‘å“ˆå¸Œç¢°æ’çš„å¯èƒ½æ€§ã€‚ä¸€ä¸ªå¥½çš„å“ˆå¸Œå‡½æ•°åº”å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š å‡åŒ€æ€§ï¼šèƒ½å¤Ÿå°†è¾“å…¥æ•°æ®å‡åŒ€åœ°åˆ†å¸ƒåˆ°å“ˆå¸Œè¡¨çš„å„ä¸ªä½ç½®ã€‚ ç¡®å®šæ€§ï¼šç›¸åŒçš„è¾“å…¥æ€»æ˜¯äº§ç”Ÿç›¸åŒçš„å“ˆå¸Œå€¼ã€‚ é«˜æ•ˆæ€§ï¼šè®¡ç®—å“ˆå¸Œå€¼çš„æ—¶é—´å¤æ‚åº¦åº”å°½å¯èƒ½ä½ã€‚ å¸¸è§çš„å“ˆå¸Œå‡½æ•°åŒ…æ‹¬ï¼š MD5 SHA-1 SHA-256 åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œè‡ªå®šä¹‰çš„å“ˆå¸Œå‡½æ•°ä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„é€‰æ‹©ã€‚ 2. å¢å¤§å“ˆå¸Œè¡¨çš„å¤§å°é€šè¿‡å¢å¤§å“ˆå¸Œè¡¨çš„å¤§å°ï¼Œå¯ä»¥å‡å°‘å“ˆå¸Œç¢°æ’çš„æ¦‚ç‡ã€‚å“ˆå¸Œè¡¨çš„å¤§å°é€šå¸¸æ˜¯ä¸€ä¸ªç´ æ•°ï¼Œè¿™æ ·å¯ä»¥æ›´å‡åŒ€åœ°åˆ†å¸ƒå“ˆå¸Œå€¼ã€‚ 3. é“¾åœ°å€æ³•ï¼ˆSeparate Chainingï¼‰é“¾åœ°å€æ³•æ˜¯å¤„ç†å“ˆå¸Œç¢°æ’çš„ä¸€ç§å¸¸è§æ–¹æ³•ã€‚æ¯ä¸ªå“ˆå¸Œè¡¨çš„æ§½ï¼ˆbucketï¼‰éƒ½åŒ…å«ä¸€ä¸ªé“¾è¡¨ï¼ˆæˆ–å…¶ä»–æ•°æ®ç»“æ„ï¼‰ï¼Œç”¨äºå­˜å‚¨å…·æœ‰ç›¸åŒå“ˆå¸Œå€¼çš„å¤šä¸ªå…ƒç´ ã€‚ 4. å¼€æ”¾å®šå€æ³•ï¼ˆOpen Addressingï¼‰å¼€æ”¾å®šå€æ³•é€šè¿‡åœ¨å‘ç”Ÿç¢°æ’æ—¶å¯»æ‰¾ä¸‹ä¸€ä¸ªç©ºé—²æ§½æ¥å­˜å‚¨å…ƒç´ ã€‚å¸¸è§çš„å¼€æ”¾å®šå€æ³•åŒ…æ‹¬çº¿æ€§æ¢æµ‹ã€äºŒæ¬¡æ¢æµ‹å’ŒåŒé‡æ•£åˆ—ã€‚ çº¿æ€§æ¢æµ‹çº¿æ€§æ¢æµ‹åœ¨å‘ç”Ÿç¢°æ’æ—¶ï¼ŒæŒ‰å›ºå®šæ­¥é•¿ï¼ˆé€šå¸¸ä¸º 1ï¼‰ä¾æ¬¡æ¢æµ‹ä¸‹ä¸€ä¸ªæ§½ï¼Œç›´åˆ°æ‰¾åˆ°ç©ºé—²æ§½ä¸ºæ­¢ã€‚ äºŒæ¬¡æ¢æµ‹äºŒæ¬¡æ¢æµ‹åœ¨å‘ç”Ÿç¢°æ’æ—¶ï¼ŒæŒ‰äºŒæ¬¡æ–¹åºåˆ—æ¢æµ‹ä¸‹ä¸€ä¸ªæ§½ã€‚ 1index = (index + i^2) % self.size åŒé‡æ•£åˆ—åŒé‡æ•£åˆ—ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„å“ˆå¸Œå‡½æ•°æ¥è®¡ç®—æ¢æµ‹åºåˆ—ã€‚ 1index = (hash1(key) + i * hash2(key)) % self.size 5. å†å“ˆå¸Œæ³•ï¼ˆRehashingï¼‰å†å“ˆå¸Œæ³•åœ¨å‘ç”Ÿç¢°æ’æ—¶ï¼Œä½¿ç”¨å¦ä¸€ä¸ªå“ˆå¸Œå‡½æ•°é‡æ–°è®¡ç®—å“ˆå¸Œå€¼ï¼Œç›´åˆ°æ‰¾åˆ°ç©ºé—²æ§½ä¸ºæ­¢ã€‚ 6. åŠ¨æ€è°ƒæ•´å“ˆå¸Œè¡¨å¤§å°åœ¨å“ˆå¸Œè¡¨è´Ÿè½½å› å­ï¼ˆLoad Factorï¼‰è¾¾åˆ°ä¸€å®šé˜ˆå€¼æ—¶ï¼ŒåŠ¨æ€è°ƒæ•´å“ˆå¸Œè¡¨çš„å¤§å°ã€‚è´Ÿè½½å› å­æ˜¯å·²å­˜å‚¨å…ƒç´ æ•°é‡ä¸å“ˆå¸Œè¡¨å¤§å°çš„æ¯”å€¼ã€‚å½“è´Ÿè½½å› å­è¿‡é«˜æ—¶ï¼Œå¢å¤§å“ˆå¸Œè¡¨çš„å¤§å°å¹¶é‡æ–°å“ˆå¸Œæ‰€æœ‰å…ƒç´ ã€‚ 13.mach-o äº†è§£å—ï¼Ÿå­˜å‚¨çš„æ–¹æ³•ä¿¡æ¯å¯ä»¥æ— ç”¨ä»£ç æ£€æµ‹ï¼Ÿæ®µè¿ç§»ï¼ŸMach-Oï¼ˆMach Object æ–‡ä»¶æ ¼å¼ï¼‰æ˜¯ macOS å’Œ iOS æ“ä½œç³»ç»Ÿä¸Šä½¿ç”¨çš„ä¸€ç§æ–‡ä»¶æ ¼å¼ï¼Œç”¨äºå¯æ‰§è¡Œæ–‡ä»¶ã€ç›®æ ‡ä»£ç ã€åŠ¨æ€åº“ã€å†…æ ¸è½¬å‚¨ç­‰ã€‚Mach-O æ ¼å¼æä¾›äº†ä¸€ç§çµæ´»ä¸”å¼ºå¤§çš„æ–¹å¼æ¥æè¿°ç¨‹åºçš„ç»“æ„ï¼Œæ”¯æŒå¤šç§æ¶æ„ï¼ˆå¦‚ x86_64ã€arm64ï¼‰å’Œå¤šç§ç±»å‹çš„æ–‡ä»¶ï¼ˆå¦‚å¯æ‰§è¡Œæ–‡ä»¶ã€åŠ¨æ€åº“ï¼‰ã€‚ä»¥ä¸‹æ˜¯å…³äº Mach-O æ–‡ä»¶æ ¼å¼çš„è¯¦ç»†ä»‹ç»ï¼š Mach-O æ–‡ä»¶çš„åŸºæœ¬ç»“æ„Mach-O æ–‡ä»¶ç”±å¤šä¸ªéƒ¨åˆ†ç»„æˆï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½æœ‰ç‰¹å®šçš„ç”¨é€”å’Œç»“æ„ã€‚ä¸»è¦éƒ¨åˆ†åŒ…æ‹¬ï¼š Headerï¼ˆå¤´éƒ¨ï¼‰ï¼šåŒ…å«æ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚æ–‡ä»¶ç±»å‹ã€CPU æ¶æ„ã€åŠ è½½å‘½ä»¤æ•°é‡ç­‰ã€‚ Load Commandsï¼ˆåŠ è½½å‘½ä»¤ï¼‰ï¼šæè¿°æ–‡ä»¶çš„å„ä¸ªéƒ¨åˆ†å¦‚ä½•åŠ è½½åˆ°å†…å­˜ä¸­ã€‚è¿™äº›å‘½ä»¤åŒ…æ‹¬æ®µçš„æè¿°ã€åŠ¨æ€åº“çš„å¼•ç”¨ã€ç¬¦å·è¡¨çš„ä½ç½®ç­‰ã€‚ Segmentsï¼ˆæ®µï¼‰ï¼šåŒ…å«å®é™…çš„ä»£ç å’Œæ•°æ®ã€‚æ¯ä¸ªæ®µåŒ…å«å¤šä¸ª sectionï¼ˆèŠ‚ï¼‰ï¼Œæ¯ä¸ªèŠ‚å­˜å‚¨ç‰¹å®šç±»å‹çš„æ•°æ®ï¼Œå¦‚ä»£ç èŠ‚ã€æ•°æ®èŠ‚ã€ç¬¦å·è¡¨ç­‰ã€‚ Sectionsï¼ˆèŠ‚ï¼‰ï¼šæ®µçš„å­éƒ¨åˆ†ï¼Œå­˜å‚¨ä¸åŒç±»å‹çš„æ•°æ®ï¼Œå¦‚å¯æ‰§è¡Œä»£ç ã€åªè¯»æ•°æ®ã€å¯å†™æ•°æ®ç­‰ã€‚ è¯¦ç»†ç»“æ„1. Headerï¼ˆå¤´éƒ¨ï¼‰å¤´éƒ¨æ˜¯ Mach-O æ–‡ä»¶çš„å¼€å§‹éƒ¨åˆ†ï¼ŒåŒ…å«æ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯ã€‚å¤´éƒ¨çš„ç»“æ„å®šä¹‰å¦‚ä¸‹ï¼š 123456789struct mach_header { uint32_t magic; // é­”æ•°ï¼Œæ ‡è¯†æ–‡ä»¶æ ¼å¼ cpu_type_t cputype; // CPU ç±»å‹ cpu_subtype_t cpusubtype;// CPU å­ç±»å‹ uint32_t filetype; // æ–‡ä»¶ç±»å‹ï¼ˆå¦‚å¯æ‰§è¡Œæ–‡ä»¶ã€åŠ¨æ€åº“ï¼‰ uint32_t ncmds; // åŠ è½½å‘½ä»¤çš„æ•°é‡ uint32_t sizeofcmds; // æ‰€æœ‰åŠ è½½å‘½ä»¤çš„æ€»å¤§å° uint32_t flags; // æ ‡å¿—ä½}; 2. Load Commandsï¼ˆåŠ è½½å‘½ä»¤ï¼‰åŠ è½½å‘½ä»¤æè¿°æ–‡ä»¶çš„å„ä¸ªéƒ¨åˆ†å¦‚ä½•åŠ è½½åˆ°å†…å­˜ä¸­ã€‚å¸¸è§çš„åŠ è½½å‘½ä»¤åŒ…æ‹¬ï¼š LC_SEGMENTï¼šæè¿°ä¸€ä¸ªæ®µã€‚ LC_SYMTABï¼šæè¿°ç¬¦å·è¡¨çš„ä½ç½®ã€‚ LC_DYSYMTABï¼šæè¿°åŠ¨æ€ç¬¦å·è¡¨çš„ä½ç½®ã€‚ LC_LOAD_DYLIBï¼šæè¿°éœ€è¦åŠ è½½çš„åŠ¨æ€åº“ã€‚ æ¯ä¸ªåŠ è½½å‘½ä»¤çš„åŸºæœ¬ç»“æ„å¦‚ä¸‹ï¼š 1234struct load_command { uint32_t cmd; // åŠ è½½å‘½ä»¤çš„ç±»å‹ uint32_t cmdsize; // åŠ è½½å‘½ä»¤çš„å¤§å°}; 3. Segmentsï¼ˆæ®µï¼‰æ®µæ˜¯ Mach-O æ–‡ä»¶ä¸­çš„ä¸»è¦æ•°æ®éƒ¨åˆ†ï¼Œæ¯ä¸ªæ®µåŒ…å«å¤šä¸ªèŠ‚ã€‚å¸¸è§çš„æ®µåŒ…æ‹¬ï¼š __TEXTï¼šåŒ…å«å¯æ‰§è¡Œä»£ç å’Œåªè¯»æ•°æ®ã€‚ __DATAï¼šåŒ…å«å¯å†™æ•°æ®ã€‚ __LINKEDITï¼šåŒ…å«ç¬¦å·è¡¨å’Œå…¶ä»–é“¾æ¥ä¿¡æ¯ã€‚ æ®µçš„åŸºæœ¬ç»“æ„å¦‚ä¸‹ï¼š 12345678910111213struct segment_command { uint32_t cmd; // LC_SEGMENT uint32_t cmdsize; // åŠ è½½å‘½ä»¤çš„å¤§å° char segname[16]; // æ®µçš„åç§° uint32_t vmaddr; // æ®µåœ¨è™šæ‹Ÿå†…å­˜ä¸­çš„åœ°å€ uint32_t vmsize; // æ®µçš„å¤§å° uint32_t fileoff; // æ®µåœ¨æ–‡ä»¶ä¸­çš„åç§» uint32_t filesize; // æ®µåœ¨æ–‡ä»¶ä¸­çš„å¤§å° vm_prot_t maxprot; // æ®µçš„æœ€å¤§ä¿æŠ¤ vm_prot_t initprot; // æ®µçš„åˆå§‹ä¿æŠ¤ uint32_t nsects; // æ®µä¸­èŠ‚çš„æ•°é‡ uint32_t flags; // æ®µçš„æ ‡å¿—}; 4. Sectionsï¼ˆèŠ‚ï¼‰èŠ‚æ˜¯æ®µçš„å­éƒ¨åˆ†ï¼Œå­˜å‚¨å…·ä½“ç±»å‹çš„æ•°æ®ã€‚æ¯ä¸ªèŠ‚çš„åŸºæœ¬ç»“æ„å¦‚ä¸‹ï¼š 12345678910111213struct section { char sectname[16]; // èŠ‚çš„åç§° char segname[16]; // æ®µçš„åç§° uint32_t addr; // èŠ‚åœ¨è™šæ‹Ÿå†…å­˜ä¸­çš„åœ°å€ uint32_t size; // èŠ‚çš„å¤§å° uint32_t offset; // èŠ‚åœ¨æ–‡ä»¶ä¸­çš„åç§» uint32_t align; // èŠ‚çš„å¯¹é½ uint32_t reloff; // é‡å®šä½è¡¨çš„åç§» uint32_t nreloc; // é‡å®šä½è¡¨çš„æ•°é‡ uint32_t flags; // èŠ‚çš„æ ‡å¿— uint32_t reserved1; // ä¿ç•™å­—æ®µ uint32_t reserved2; // ä¿ç•™å­—æ®µ}; Mach-O æ–‡ä»¶ç±»å‹Mach-O æ–‡ä»¶æœ‰å¤šç§ç±»å‹ï¼Œä¸»è¦åŒ…æ‹¬ï¼š MH_EXECUTEï¼šå¯æ‰§è¡Œæ–‡ä»¶ã€‚ MH_DYLIBï¼šåŠ¨æ€åº“ã€‚ MH_BUNDLEï¼šå¯åŠ è½½çš„ä»£ç åŒ…ã€‚ MH_OBJECTï¼šç›®æ ‡æ–‡ä»¶ã€‚ MH_DYLINKERï¼šåŠ¨æ€é“¾æ¥å™¨ã€‚ ä½¿ç”¨å·¥å…·æŸ¥çœ‹ Mach-O æ–‡ä»¶macOS æä¾›äº†ä¸€äº›å·¥å…·æ¥æŸ¥çœ‹å’Œåˆ†æ Mach-O æ–‡ä»¶ï¼š otool ï¼šç”¨äºæ˜¾ç¤º Mach-O æ–‡ä»¶çš„å¤´éƒ¨ã€æ®µã€èŠ‚ã€ç¬¦å·è¡¨ç­‰ä¿¡æ¯ã€‚ 123otool -hV MyApp.app/MyApp # æ˜¾ç¤ºå¤´éƒ¨ä¿¡æ¯otool -L MyApp.app/MyApp # æ˜¾ç¤ºåŠ¨æ€åº“ä¾èµ–otool -tV MyApp.app/MyApp # æ˜¾ç¤ºåæ±‡ç¼–ä»£ç  nm ï¼šç”¨äºæ˜¾ç¤º Mach-O æ–‡ä»¶ä¸­çš„ç¬¦å·è¡¨ã€‚ 1nm MyApp.app/MyApp dyldinfo ï¼šç”¨äºæ˜¾ç¤ºåŠ¨æ€é“¾æ¥ç›¸å…³ä¿¡æ¯ã€‚ 1dyldinfo -all MyApp.app/MyApp æ€»ç»“Mach-O æ˜¯ macOS å’Œ iOS ä¸Šä½¿ç”¨çš„ä¸€ç§å¤æ‚è€Œçµæ´»çš„æ–‡ä»¶æ ¼å¼ï¼Œç”¨äºæè¿°å¯æ‰§è¡Œæ–‡ä»¶ã€åŠ¨æ€åº“ç­‰ã€‚å®ƒé€šè¿‡å¤´éƒ¨ã€åŠ è½½å‘½ä»¤ã€æ®µå’ŒèŠ‚ç»„ç»‡æ•°æ®ï¼Œæ”¯æŒå¤šç§æ–‡ä»¶ç±»å‹å’Œ CPU æ¶æ„ã€‚ç†è§£ Mach-O æ–‡ä»¶æ ¼å¼æœ‰åŠ©äºè¿›è¡Œåº•å±‚è°ƒè¯•ã€æ€§èƒ½ä¼˜åŒ–å’Œå®‰å…¨åˆ†æã€‚macOS æä¾›äº†ä¸€äº›å·¥å…·ï¼Œå¦‚ otool å’Œ nmï¼Œå¯ä»¥ç”¨æ¥æŸ¥çœ‹å’Œåˆ†æ Mach-O æ–‡ä»¶çš„ç»“æ„å’Œå†…å®¹ã€‚ 14.è„šæœ¬æ£€æµ‹æœªä½¿ç”¨ä»£ç åŸç†15.Render æ¸²æŸ“æµç¨‹iOS æ¸²æŸ“æµç¨‹æ˜¯ä¸€ä¸ªå¤æ‚ä¸”é«˜æ•ˆçš„è¿‡ç¨‹ï¼Œå®ƒè´Ÿè´£å°†åº”ç”¨çš„ç•Œé¢å‘ˆç°åˆ°å±å¹•ä¸Šã€‚ç†è§£è¿™ä¸ªæµç¨‹æœ‰åŠ©äºä¼˜åŒ–åº”ç”¨çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚ä»¥ä¸‹æ˜¯ iOS æ¸²æŸ“æµç¨‹çš„æ¦‚è¦ï¼š 1. åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰åº”ç”¨å±‚æ˜¯ iOS åº”ç”¨çš„æœ€ä¸Šå±‚ï¼ŒåŒ…æ‹¬åº”ç”¨çš„é€»è¾‘ã€UI è§†å›¾æ§åˆ¶å™¨ï¼ˆUIViewControllerï¼‰ã€è§†å›¾ï¼ˆUIViewï¼‰ç­‰ã€‚å¼€å‘è€…ä¸»è¦åœ¨è¿™ä¸€å±‚è¿›è¡Œå¼€å‘ã€‚ 2. Core AnimationCore Animation æ˜¯ iOS æ¸²æŸ“çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œå®ƒè´Ÿè´£ç®¡ç†å’Œæ‰§è¡Œæ‰€æœ‰çš„åŠ¨ç”»å’Œè§†å›¾å±‚æ¬¡ç»“æ„ï¼ˆLayer Treeï¼‰ã€‚Core Animation ä½¿ç”¨åŒç¼“å†²æŠ€æœ¯æ¥ç¡®ä¿åŠ¨ç”»çš„æµç•…æ€§ã€‚ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªç»„æˆéƒ¨åˆ†ï¼š Layer Tree: ç”± CALayer å¯¹è±¡ç»„æˆçš„å±‚æ¬¡ç»“æ„ï¼Œæ¯ä¸ª UIView å¯¹åº”ä¸€ä¸ª CALayerã€‚ Display Tree: ç”± Core Animation ç”Ÿæˆçš„ç”¨äºå®é™…æ˜¾ç¤ºå†…å®¹çš„æ ‘ã€‚ Render Tree: ç”¨äºæ¸²æŸ“çš„æœ€ç»ˆæ ‘ï¼Œç”± Core Animation å‘é€ç»™æ¸²æŸ“æœåŠ¡å™¨ï¼ˆRender Serverï¼‰ã€‚ 3. æ¸²æŸ“æœåŠ¡å™¨ï¼ˆRender Serverï¼‰æ¸²æŸ“æœåŠ¡å™¨æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œè´Ÿè´£æ¥æ”¶æ¥è‡ª Core Animation çš„ Render Treeï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º GPU å¯ä»¥ç†è§£çš„æŒ‡ä»¤ã€‚æ¸²æŸ“æœåŠ¡å™¨ä¼šå°†è¿™äº›æŒ‡ä»¤å‘é€ç»™ GPU è¿›è¡Œå®é™…çš„æ¸²æŸ“ã€‚ 4. GPU æ¸²æŸ“GPUï¼ˆå›¾å½¢å¤„ç†å•å…ƒï¼‰æ¥æ”¶åˆ°æ¸²æŸ“æŒ‡ä»¤åï¼Œä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š é¡¶ç‚¹ç€è‰²ï¼ˆVertex Shadingï¼‰: å¤„ç†é¡¶ç‚¹æ•°æ®ï¼ŒåŒ…æ‹¬ä½ç½®ã€é¢œè‰²ã€çº¹ç†ç­‰ä¿¡æ¯ã€‚ å›¾å…ƒç»„è£…ï¼ˆPrimitive Assemblyï¼‰: å°†é¡¶ç‚¹è¿æ¥æˆå›¾å…ƒï¼ˆå¦‚ä¸‰è§’å½¢ï¼‰ã€‚ å…‰æ …åŒ–ï¼ˆRasterizationï¼‰: å°†å›¾å…ƒè½¬æ¢ä¸ºç‰‡å…ƒï¼ˆPixelï¼‰ã€‚ ç‰‡å…ƒç€è‰²ï¼ˆFragment Shadingï¼‰: è®¡ç®—æ¯ä¸ªç‰‡å…ƒçš„é¢œè‰²å’Œå…¶ä»–å±æ€§ã€‚ å¸§ç¼“å­˜æ“ä½œï¼ˆFrame Buffer Operationsï¼‰: å°†æœ€ç»ˆçš„ç‰‡å…ƒæ•°æ®å†™å…¥å¸§ç¼“å­˜ï¼ˆFrame Bufferï¼‰ã€‚ 5. æ˜¾ç¤ºå±‚ï¼ˆDisplay Layerï¼‰æœ€ç»ˆçš„å¸§ç¼“å­˜æ•°æ®ä¼šè¢«ä¼ é€’åˆ°æ˜¾ç¤ºå±‚ï¼Œç”±æ˜¾ç¤ºå±‚å°†å…¶æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚iOS ä½¿ç”¨ VSyncï¼ˆå‚ç›´åŒæ­¥ï¼‰ä¿¡å·æ¥åè°ƒæ˜¾ç¤ºæ›´æ–°ï¼Œä»¥ç¡®ä¿å±å¹•åˆ·æ–°å’Œæ¸²æŸ“åŒæ­¥ï¼Œé¿å…ç”»é¢æ’•è£‚ã€‚ æ¸²æŸ“æµç¨‹çš„è¯¦ç»†æ­¥éª¤ è§†å›¾æ›´æ–°ï¼ˆView Updateï¼‰: åº”ç”¨ç¨‹åºä¿®æ”¹è§†å›¾æˆ–å›¾å±‚å±æ€§ï¼ˆå¦‚ä½ç½®ã€å¤§å°ã€é¢œè‰²ç­‰ï¼‰ã€‚ UIView çš„å±æ€§å˜åŒ–ä¼šè§¦å‘ CALayer çš„ç›¸åº”å˜åŒ–ã€‚ å¸ƒå±€å’Œæ˜¾ç¤ºï¼ˆLayout and Displayï¼‰: UIView å¸ƒå±€ç³»ç»Ÿä¼šé‡æ–°è®¡ç®—è§†å›¾çš„å¸ƒå±€ã€‚ CALayer ä¼šæ ¹æ®è§†å›¾çš„å˜åŒ–æ›´æ–°è‡ªå·±çš„å±æ€§ã€‚ Core Animation åŠ¨ç”»å¤„ç†ï¼ˆCore Animation Animation Handlingï¼‰: Core Animation ä¼šå°†åŠ¨ç”»åº”ç”¨åˆ°ç›¸å…³çš„ CALayer ä¸Šã€‚ æ ¹æ®åŠ¨ç”»æ—¶é—´è½´ç”Ÿæˆ Display Treeã€‚ Render Tree ç”Ÿæˆï¼ˆRender Tree Generationï¼‰: Core Animation ä» Display Tree ç”Ÿæˆ Render Treeã€‚ Render Tree åŒ…å«äº†æ‰€æœ‰éœ€è¦æ¸²æŸ“çš„ä¿¡æ¯ã€‚ Render Server æ¸²æŸ“ï¼ˆRender Server Renderingï¼‰: Core Animation å°† Render Tree å‘é€ç»™æ¸²æŸ“æœåŠ¡å™¨ã€‚ æ¸²æŸ“æœåŠ¡å™¨å°† Render Tree è½¬æ¢ä¸º GPU æŒ‡ä»¤ã€‚ GPU æ¸²æŸ“ï¼ˆGPU Renderingï¼‰: GPU æ‰§è¡Œé¡¶ç‚¹ç€è‰²ã€å›¾å…ƒç»„è£…ã€å…‰æ …åŒ–ã€ç‰‡å…ƒç€è‰²å’Œå¸§ç¼“å­˜æ“ä½œã€‚ æ¸²æŸ“ç»“æœå­˜å‚¨åœ¨å¸§ç¼“å­˜ä¸­ã€‚ æ˜¾ç¤ºæ›´æ–°ï¼ˆDisplay Updateï¼‰: å¸§ç¼“å­˜å†…å®¹é€šè¿‡æ˜¾ç¤ºå±‚æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ VSync ä¿¡å·ç¡®ä¿æ˜¾ç¤ºæ›´æ–°å’Œå±å¹•åˆ·æ–°åŒæ­¥ã€‚ æ€§èƒ½ä¼˜åŒ–ç†è§£ iOS æ¸²æŸ“æµç¨‹æœ‰åŠ©äºä¼˜åŒ–åº”ç”¨æ€§èƒ½ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ä¼˜åŒ–ç­–ç•¥ï¼š å‡å°‘å¸ƒå±€è®¡ç®—å’Œè§†å›¾å±‚æ¬¡ç»“æ„çš„å¤æ‚åº¦ã€‚ ä½¿ç”¨åˆé€‚çš„å›¾å±‚ç±»å‹ï¼ˆå¦‚ CAShapeLayerã€CATextLayerï¼‰ã€‚ é¿å…é¢‘ç¹çš„è§†å›¾æ›´æ–°å’ŒåŠ¨ç”»ã€‚ ä½¿ç”¨å¼‚æ­¥ç»˜åˆ¶æŠ€æœ¯ï¼ˆå¦‚ drawRect: æ–¹æ³•ï¼‰ã€‚ é¿å…ä¸å¿…è¦çš„ç¦»å±æ¸²æŸ“ï¼ˆOffscreen Renderingï¼‰ã€‚ é€šè¿‡è¿™äº›ä¼˜åŒ–ç­–ç•¥ï¼Œå¯ä»¥å‡å°‘ CPU å’Œ GPU çš„è´Ÿæ‹…ï¼Œæé«˜åº”ç”¨çš„æµç•…æ€§å’Œå“åº”é€Ÿåº¦ã€‚ 16.UIView åŠ¨ç”»å’Œ CAAnimation åŠ¨ç”»æœ‰ä»€ä¹ˆè”ç³»ï¼Ÿè™½ç„¶ UIView åŠ¨ç”»å’Œ CAAnimation åŠ¨ç”»åœ¨ä½¿ç”¨ä¸Šæœ‰åŒºåˆ«ï¼Œä½†å®ƒä»¬çš„åº•å±‚æœºåˆ¶æ˜¯æœ‰è”ç³»çš„ã€‚UIView åŠ¨ç”»å®é™…ä¸Šæ˜¯å¯¹ CAAnimation çš„å°è£…å’Œç®€åŒ–ã€‚å½“ä½ ä½¿ç”¨ UIView åŠ¨ç”»æ—¶ï¼ŒUIKit ä¼šåœ¨å†…éƒ¨åˆ›å»ºç›¸åº”çš„ CAAnimation å¯¹è±¡ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°è§†å›¾çš„ CALayer ä¸Šã€‚ ç¤ºä¾‹ï¼š123UIView.animate(withDuration: 1.0, animations: { myView.alpha = 0.0}) ä¸Šé¢çš„ä»£ç ç­‰ä»·äºï¼š 123456let animation = CABasicAnimation(keyPath: \"opacity\")animation.fromValue = 1.0animation.toValue = 0.0animation.duration = 1.0myView.layer.add(animation, forKey: \"opacityAnimation\")myView.layer.opacity = 0.0 ç»“è®ºUIView åŠ¨ç”»æ˜¯å¯¹ CAAnimation çš„å°è£…ï¼Œæä¾›äº†æ›´é«˜å±‚æ¬¡çš„æ¥å£ï¼Œä½¿å¾—ç®€å•åŠ¨ç”»çš„å®ç°æ›´åŠ ä¾¿æ·ï¼Œè€Œ CAAnimation æä¾›äº†æ›´å¼ºå¤§çš„åŠŸèƒ½å’Œæ›´ç²¾ç»†çš„æ§åˆ¶ï¼Œé€‚åˆå¤æ‚çš„åŠ¨ç”»éœ€æ±‚ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯ä»¥æ ¹æ®å…·ä½“çš„åŠ¨ç”»éœ€æ±‚é€‰æ‹©åˆé€‚çš„åŠ¨ç”»æ–¹å¼ã€‚ 17.é¡¹ç›®äº®ç‚¹","link":"/ç™¾èäº‘åˆ›é¢è¯•é¢˜/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","link":"/tags/é¢è¯•/"},{"name":"ç¾å›¢","slug":"ç¾å›¢","link":"/tags/ç¾å›¢/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","link":"/tags/ç®—æ³•/"},{"name":"äºŒå‰æ ‘","slug":"äºŒå‰æ ‘","link":"/tags/äºŒå‰æ ‘/"},{"name":"äº¬ä¸œé‡‘è","slug":"äº¬ä¸œé‡‘è","link":"/tags/äº¬ä¸œé‡‘è/"},{"name":"å¥½æœªæ¥","slug":"å¥½æœªæ¥","link":"/tags/å¥½æœªæ¥/"},{"name":"è½¬è½¬","slug":"è½¬è½¬","link":"/tags/è½¬è½¬/"},{"name":"å¤©çœ¼æŸ¥","slug":"å¤©çœ¼æŸ¥","link":"/tags/å¤©çœ¼æŸ¥/"},{"name":"APUS","slug":"APUS","link":"/tags/APUS/"},{"name":"ä¸€ç‚¹èµ„è®¯","slug":"ä¸€ç‚¹èµ„è®¯","link":"/tags/ä¸€ç‚¹èµ„è®¯/"},{"name":"ofo","slug":"ofo","link":"/tags/ofo/"},{"name":"å°é»„è½¦","slug":"å°é»„è½¦","link":"/tags/å°é»„è½¦/"},{"name":"æŠ€æœ¯ç‚¹","slug":"æŠ€æœ¯ç‚¹","link":"/tags/æŠ€æœ¯ç‚¹/"},{"name":"ä¸»è¯­ç©ºé—´","slug":"ä¸»è¯­ç©ºé—´","link":"/tags/ä¸»è¯­ç©ºé—´/"},{"name":"ä¹ä¿¡åœ£æ–‡","slug":"ä¹ä¿¡åœ£æ–‡","link":"/tags/ä¹ä¿¡åœ£æ–‡/"},{"name":"ä¹ä¸ºé‡‘è","slug":"ä¹ä¸ºé‡‘è","link":"/tags/ä¹ä¸ºé‡‘è/"},{"name":"äº¬ä¸œ","slug":"äº¬ä¸œ","link":"/tags/äº¬ä¸œ/"},{"name":"ä½œä¸šå¸®","slug":"ä½œä¸šå¸®","link":"/tags/ä½œä¸šå¸®/"},{"name":"58","slug":"58","link":"/tags/58/"},{"name":"äººäººè½¦","slug":"äººäººè½¦","link":"/tags/äººäººè½¦/"},{"name":"å…¨æ°‘çŸ­è§†é¢‘","slug":"å…¨æ°‘çŸ­è§†é¢‘","link":"/tags/å…¨æ°‘çŸ­è§†é¢‘/"},{"name":"å…ƒçŸ³","slug":"å…ƒçŸ³","link":"/tags/å…ƒçŸ³/"},{"name":"åç‚¹è¯»ä¹¦","slug":"åç‚¹è¯»ä¹¦","link":"/tags/åç‚¹è¯»ä¹¦/"},{"name":"å¤ªä¸€äº‘","slug":"å¤ªä¸€äº‘","link":"/tags/å¤ªä¸€äº‘/"},{"name":"åŒºå—é“¾","slug":"åŒºå—é“¾","link":"/tags/åŒºå—é“¾/"},{"name":"å¢¨è¿¹å¤©æ°”","slug":"å¢¨è¿¹å¤©æ°”","link":"/tags/å¢¨è¿¹å¤©æ°”/"},{"name":"å°çº¢ä¹¦","slug":"å°çº¢ä¹¦","link":"/tags/å°çº¢ä¹¦/"},{"name":"å®é¹„å‡ºè¡Œ","slug":"å®é¹„å‡ºè¡Œ","link":"/tags/å®é¹„å‡ºè¡Œ/"},{"name":"å¹³å®‰","slug":"å¹³å®‰","link":"/tags/å¹³å®‰/"},{"name":"å¼€æœ","slug":"å¼€æœ","link":"/tags/å¼€æœ/"},{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","link":"/tags/é¢è¯•é¢˜/"},{"name":"å¿«æ‰‹","slug":"å¿«æ‰‹","link":"/tags/å¿«æ‰‹/"},{"name":"å¿«æ‰‹ç›´æ’­","slug":"å¿«æ‰‹ç›´æ’­","link":"/tags/å¿«æ‰‹ç›´æ’­/"},{"name":"å¾®åº—","slug":"å¾®åº—","link":"/tags/å¾®åº—/"},{"name":"å¿…è¦å•†åŸ","slug":"å¿…è¦å•†åŸ","link":"/tags/å¿…è¦å•†åŸ/"},{"name":"å¿«ç‹—æ‰“è½¦","slug":"å¿«ç‹—æ‰“è½¦","link":"/tags/å¿«ç‹—æ‰“è½¦/"},{"name":"æœ€å³","slug":"æœ€å³","link":"/tags/æœ€å³/"},{"name":"æŒé˜…","slug":"æŒé˜…","link":"/tags/æŒé˜…/"},{"name":"æ’å¤©è´¢å¯Œ","slug":"æ’å¤©è´¢å¯Œ","link":"/tags/æ’å¤©è´¢å¯Œ/"},{"name":"æ–°æµª","slug":"æ–°æµª","link":"/tags/æ–°æµª/"},{"name":"ä¹å±…","slug":"ä¹å±…","link":"/tags/ä¹å±…/"},{"name":"æ™®åå•†å­¦é™¢","slug":"æ™®åå•†å­¦é™¢","link":"/tags/æ™®åå•†å­¦é™¢/"},{"name":"æœç‹","slug":"æœç‹","link":"/tags/æœç‹/"},{"name":"ç‹å‹","slug":"ç‹å‹","link":"/tags/ç‹å‹/"},{"name":"æœ—æ’­ç½‘","slug":"æœ—æ’­ç½‘","link":"/tags/æœ—æ’­ç½‘/"},{"name":"æ ¸æ¡ƒç¼–ç¨‹","slug":"æ ¸æ¡ƒç¼–ç¨‹","link":"/tags/æ ¸æ¡ƒç¼–ç¨‹/"},{"name":"æ£µæœµ","slug":"æ£µæœµ","link":"/tags/æ£µæœµ/"},{"name":"æ»´æ»´","slug":"æ»´æ»´","link":"/tags/æ»´æ»´/"},{"name":"æ»´æ»´å¤–å–","slug":"æ»´æ»´å¤–å–","link":"/tags/æ»´æ»´å¤–å–/"},{"name":"æ±½è½¦ä¹‹å®¶","slug":"æ±½è½¦ä¹‹å®¶","link":"/tags/æ±½è½¦ä¹‹å®¶/"},{"name":"ç‚¹ä¼—ç§‘æŠ€","slug":"ç‚¹ä¼—ç§‘æŠ€","link":"/tags/ç‚¹ä¼—ç§‘æŠ€/"},{"name":"åŒ—äº¬çŸ­å‰§å¿«ç…§","slug":"åŒ—äº¬çŸ­å‰§å¿«ç…§","link":"/tags/åŒ—äº¬çŸ­å‰§å¿«ç…§/"},{"name":"DramaBox","slug":"DramaBox","link":"/tags/DramaBox/"},{"name":"ç¬”è¯•é¢˜","slug":"ç¬”è¯•é¢˜","link":"/tags/ç¬”è¯•é¢˜/"},{"name":"ç”Ÿæ•°ç§‘æŠ€","slug":"ç”Ÿæ•°ç§‘æŠ€","link":"/tags/ç”Ÿæ•°ç§‘æŠ€/"},{"name":"çŒ«ç³–è·³åŠ¨","slug":"çŒ«ç³–è·³åŠ¨","link":"/tags/çŒ«ç³–è·³åŠ¨/"},{"name":"ç™»äº‘ç¾ä¸š","slug":"ç™»äº‘ç¾ä¸š","link":"/tags/ç™»äº‘ç¾ä¸š/"},{"name":"ç™¾æ˜“å›¾","slug":"ç™¾æ˜“å›¾","link":"/tags/ç™¾æ˜“å›¾/"},{"name":"ç¥å·ç§Ÿè½¦","slug":"ç¥å·ç§Ÿè½¦","link":"/tags/ç¥å·ç§Ÿè½¦/"},{"name":"ç™¾åº¦","slug":"ç™¾åº¦","link":"/tags/ç™¾åº¦/"},{"name":"çº¢æ¾","slug":"çº¢æ¾","link":"/tags/çº¢æ¾/"},{"name":"ç½‘æ˜“","slug":"ç½‘æ˜“","link":"/tags/ç½‘æ˜“/"},{"name":"ç¾å›¢ä¼˜é€‰","slug":"ç¾å›¢ä¼˜é€‰","link":"/tags/ç¾å›¢ä¼˜é€‰/"},{"name":"è…°æœå…¬è€ƒ","slug":"è…°æœå…¬è€ƒ","link":"/tags/è…°æœå…¬è€ƒ/"},{"name":"è€è™å›½é™…","slug":"è€è™å›½é™…","link":"/tags/è€è™å›½é™…/"},{"name":"è‹å®","slug":"è‹å®","link":"/tags/è‹å®/"},{"name":"è‡ªå¦‚","slug":"è‡ªå¦‚","link":"/tags/è‡ªå¦‚/"},{"name":"è´§æ‹‰æ‹‰","slug":"è´§æ‹‰æ‹‰","link":"/tags/è´§æ‹‰æ‹‰/"},{"name":"è¾¾è¾¾","slug":"è¾¾è¾¾","link":"/tags/è¾¾è¾¾/"},{"name":"äº¬ä¸œåˆ°å®¶","slug":"äº¬ä¸œåˆ°å®¶","link":"/tags/äº¬ä¸œåˆ°å®¶/"},{"name":"é“¾è¡¨","slug":"é“¾è¡¨","link":"/tags/é“¾è¡¨/"},{"name":"é—²å¾•äº’å¨±","slug":"é—²å¾•äº’å¨±","link":"/tags/é—²å¾•äº’å¨±/"},{"name":"é›·ç¥ç½‘ç»œ","slug":"é›·ç¥ç½‘ç»œ","link":"/tags/é›·ç¥ç½‘ç»œ/"},{"name":"é©¬ä¸Šæ¶ˆè´¹é‡‘è","slug":"é©¬ä¸Šæ¶ˆè´¹é‡‘è","link":"/tags/é©¬ä¸Šæ¶ˆè´¹é‡‘è/"},{"name":"é¦–æ±½çº¦è½¦","slug":"é¦–æ±½çº¦è½¦","link":"/tags/é¦–æ±½çº¦è½¦/"},{"name":"é¦–æ±½ç§Ÿè½¦","slug":"é¦–æ±½ç§Ÿè½¦","link":"/tags/é¦–æ±½ç§Ÿè½¦/"},{"name":"é¦–æ±½","slug":"é¦–æ±½","link":"/tags/é¦–æ±½/"},{"name":"é«˜æ€æ•™è‚²","slug":"é«˜æ€æ•™è‚²","link":"/tags/é«˜æ€æ•™è‚²/"},{"name":"äº¬ä¸œæœç´¢","slug":"äº¬ä¸œæœç´¢","link":"/tags/äº¬ä¸œæœç´¢/"},{"name":"åº•å±‚åŸç†","slug":"åº•å±‚åŸç†","link":"/tags/åº•å±‚åŸç†/"},{"name":"OCè¯­æ³•","slug":"OCè¯­æ³•","link":"/tags/OCè¯­æ³•/"},{"name":"å­—èŠ‚è·³åŠ¨","slug":"å­—èŠ‚è·³åŠ¨","link":"/tags/å­—èŠ‚è·³åŠ¨/"},{"name":"å°ç±³","slug":"å°ç±³","link":"/tags/å°ç±³/"},{"name":"åº¦å°æ»¡","slug":"åº¦å°æ»¡","link":"/tags/åº¦å°æ»¡/"},{"name":"å¾®åš","slug":"å¾®åš","link":"/tags/å¾®åš/"},{"name":"æ–°æµªå¾®åš","slug":"æ–°æµªå¾®åš","link":"/tags/æ–°æµªå¾®åš/"},{"name":"æ·¡è“ç½‘","slug":"æ·¡è“ç½‘","link":"/tags/æ·¡è“ç½‘/"},{"name":"çŒ¿è¾…å¯¼","slug":"çŒ¿è¾…å¯¼","link":"/tags/çŒ¿è¾…å¯¼/"},{"name":"ç™¾åº¦çŸ¥é“","slug":"ç™¾åº¦çŸ¥é“","link":"/tags/ç™¾åº¦çŸ¥é“/"},{"name":"ç™¾å·æ™ºèƒ½","slug":"ç™¾å·æ™ºèƒ½","link":"/tags/ç™¾å·æ™ºèƒ½/"},{"name":"è±†ç“£","slug":"è±†ç“£","link":"/tags/è±†ç“£/"},{"name":"è´å£³","slug":"è´å£³","link":"/tags/è´å£³/"},{"name":"å»å“ªå„¿ç½‘","slug":"å»å“ªå„¿ç½‘","link":"/tags/å»å“ªå„¿ç½‘/"},{"name":"ç“´å²³ç§‘æŠ€","slug":"ç“´å²³ç§‘æŠ€","link":"/tags/ç“´å²³ç§‘æŠ€/"},{"name":"ç±³å¯ä¸–ç•Œ","slug":"ç±³å¯ä¸–ç•Œ","link":"/tags/ç±³å¯ä¸–ç•Œ/"},{"name":"ç™¾èäº‘åˆ›","slug":"ç™¾èäº‘åˆ›","link":"/tags/ç™¾èäº‘åˆ›/"}],"categories":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","link":"/categories/é¢è¯•é¢˜/"},{"name":"åº•å±‚åŸç†","slug":"åº•å±‚åŸç†","link":"/categories/åº•å±‚åŸç†/"}]}